!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=233)}([function(e,t,n){var r=n(1),i=n(55),o=n(7),a=n(50),s=n(57),c=n(87),u=i("wks"),l=r.Symbol,h=c?l:l&&l.withoutSetter||a;e.exports=function(e){return o(u,e)||(s&&o(l,e)?u[e]=l[e]:u[e]=h("Symbol."+e)),u[e]}},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(48))},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(59),i=n(15),o=n(123);r||i(Object.prototype,"toString",o,{unsafe:!0})},function(e,t,n){var r=n(6);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){"use strict";var r=n(15),i=n(4),o=n(2),a=n(76),s=RegExp.prototype,c=s.toString,u=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),l="toString"!=c.name;(u||l)&&r(RegExp.prototype,"toString",(function(){var e=i(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in s)?a.call(e):n)}),{unsafe:!0})},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(1),i=n(29).f,o=n(12),a=n(15),s=n(53),c=n(84),u=n(71);e.exports=function(e,t){var n,l,h,f,d,p=e.target,m=e.global,v=e.stat;if(n=m?r:v?r[p]||s(p,{}):(r[p]||{}).prototype)for(l in t){if(f=t[l],h=e.noTargetGet?(d=i(n,l))&&d.value:n[l],!u(m?l:p+(v?".":"#")+l,e.forced)&&void 0!==h){if(typeof f==typeof h)continue;c(f,h)}(e.sham||h&&h.sham)&&o(f,"sham",!0),a(n,l,f,e)}}},function(e,t,n){"use strict";var r=n(8),i=n(2),o=n(40),a=n(6),s=n(20),c=n(16),u=n(51),l=n(88),h=n(72),f=n(0),d=n(58),p=f("isConcatSpreadable"),m=d>=51||!i((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),v=h("concat"),g=function(e){if(!a(e))return!1;var t=e[p];return void 0!==t?!!t:o(e)};r({target:"Array",proto:!0,forced:!m||!v},{concat:function(e){var t,n,r,i,o,a=s(this),h=l(a,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(g(o=-1===t?a:arguments[t])){if(f+(i=c(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,f++)n in o&&u(h,f,o[n])}else{if(f>=9007199254740991)throw TypeError("Maximum allowed index exceeded");u(h,f++,o)}return h.length=f,h}})},function(e,t,n){var r=n(11),i=n(82),o=n(4),a=n(38),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(o(e),t=a(t,!0),o(n),i)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(2);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){var r=n(11),i=n(10),o=n(26);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(8),i=n(2),o=n(20),a=n(67),s=n(119);r({target:"Object",stat:!0,forced:i((function(){a(1)})),sham:!s},{getPrototypeOf:function(e){return a(o(e))}})},function(e,t,n){var r=n(8),i=n(21),o=n(31),a=n(4),s=n(6),c=n(47),u=n(271),l=n(2),h=i("Reflect","construct"),f=l((function(){function e(){}return!(h((function(){}),[],e)instanceof e)})),d=!l((function(){h((function(){}))})),p=f||d;r({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(d&&!f)return h(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var i=n.prototype,l=c(s(i)?i:Object.prototype),p=Function.apply.call(e,l,t);return s(p)?p:l}})},function(e,t,n){var r=n(1),i=n(12),o=n(7),a=n(53),s=n(54),c=n(27),u=c.get,l=c.enforce,h=String(String).split("String");(e.exports=function(e,t,n,s){var c=!!s&&!!s.unsafe,u=!!s&&!!s.enumerable,f=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||i(n,"name",t),l(n).source=h.join("string"==typeof t?t:"")),e!==r?(c?!f&&e[t]&&(u=!0):delete e[t],u?e[t]=n:i(e,t,n)):u?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},function(e,t,n){var r=n(34),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(69),i=n(24);e.exports=function(e){return r(i(e))}},function(e,t,n){function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,c,"next",e)}function c(e){o(a,r,i,s,c,"throw",e)}s(void 0)}))}}function s(e){return function(){return new c(e.apply(this,arguments))}}function c(e){var t,n;function r(t,n){try{var o=e[t](n),a=o.value,s=a instanceof l;Promise.resolve(s?a.wrapped:a).then((function(e){s?r("return"===t?"return":"next",e):i(o.done?"return":"normal",e)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function u(e){return new l(e)}function l(e){this.wrapped=e}function h(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}function f(e,t){var n={},r=!1;function i(n,i){return r=!0,i=new Promise((function(t){t(e[n](i))})),{done:!1,value:t(i)}}return"function"==typeof Symbol&&Symbol.iterator&&(n[Symbol.iterator]=function(){return this}),n.next=function(e){return r?(r=!1,e):i("next",e)},"function"==typeof e.throw&&(n.throw=function(e){if(r)throw r=!1,e;return i("throw",e)}),"function"==typeof e.return&&(n.return=function(e){return r?(r=!1,e):i("return",e)}),n}n(36),n(37),n(131),n(44),n(23),n(43),n(3),n(46),n(5),n(45),n(33),n(100),"function"==typeof Symbol&&Symbol.asyncIterator&&(c.prototype[Symbol.asyncIterator]=function(){return this}),c.prototype.next=function(e){return this._invoke("next",e)},c.prototype.throw=function(e){return this._invoke("throw",e)},c.prototype.return=function(e){return this._invoke("return",e)},n(132);var d,p,m,v=n(35),g=n(136),y=n(137),b={bn:["/fluent/bn/main.ftl"],cs:["/fluent/cs/main.ftl"],cy:["/fluent/cy/main.ftl"],da:["/fluent/da/main.ftl"],de:["/fluent/de/main.ftl"],el:["/fluent/el/main.ftl"],"en-CA":["/fluent/en-CA/main.ftl"],"en-GB":["/fluent/en-GB/main.ftl"],"en-US":["/fluent/en-US/main.ftl"],en:["/fluent/en-US/main.ftl"],"es-AR":["/fluent/es-AR/main.ftl"],"es-ES":["/fluent/es-ES/main.ftl"],fi:["/fluent/fi/main.ftl"],fr:["/fluent/fr/main.ftl"],"fy-NL":["/fluent/fy-NL/main.ftl"],gl:["/fluent/gl/main.ftl"],hu:["/fluent/hu/main.ftl"],ia:["/fluent/ia/main.ftl"],id:["/fluent/id/main.ftl"],it:["/fluent/it/main.ftl"],ja:["/fluent/ja/main.ftl"],kab:["/fluent/kab/main.ftl"],nl:["/fluent/nl/main.ftl"],"nn-NO":["/fluent/nn-NO/main.ftl"],pl:["/fluent/pl/main.ftl"],"pt-BR":["/fluent/pt-BR/main.ftl"],"pt-PT":["/fluent/pt-PT/main.ftl"],ro:["/fluent/ro/main.ftl"],ru:["/fluent/ru/main.ftl"],sk:["/fluent/sk/main.ftl"],sr:["/fluent/sr/main.ftl"],"sv-SE":["/fluent/sv-SE/main.ftl"],ta:["/fluent/ta/main.ftl"],uk:["/fluent/uk/main.ftl"],"zh-CN":["/fluent/zh-CN/main.ftl"],"zh-TW":["/fluent/zh-TW/main.ftl"]};function w(){return E.apply(this,arguments)}function E(){return(E=a(regeneratorRuntime.mark((function e(){var t,n,i,o,a,s,c,u,l,h,f,g,w,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,v.getLanguage();case 4:t=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:d=t.current||navigator.language||"en-US",b.hasOwnProperty(d)||(n=d.split("-")[0],d=b.hasOwnProperty(n)?n:"en-US"),d!==t.current&&v.setLanguage(d).catch((function(){})),i=b[d],m=new y.FluentBundle(d),o=r(i),e.prev=15,o.s();case 17:if((a=o.n()).done){e.next=34;break}return s=a.value,e.prev=19,e.next=22,fetch(s);case 22:return c=e.sent,e.next=25,c.text();case 25:u=e.sent,m.addResource(new y.FluentResource(u)),e.next=32;break;case 29:e.prev=29,e.t1=e.catch(19),console.warn("Unable to download language pack:",e.t1);case 32:e.next=17;break;case 34:e.next=39;break;case 36:e.prev=36,e.t2=e.catch(15),o.e(e.t2);case 39:return e.prev=39,o.f(),e.finish(39);case 42:if("en-US"!==d){e.next=46;break}p=m,e.next=76;break;case 46:l=b["en-US"],p=new y.FluentBundle("en-US"),h=r(l),e.prev=49,h.s();case 51:if((f=h.n()).done){e.next=68;break}return g=f.value,e.prev=53,e.next=56,fetch(g);case 56:return w=e.sent,e.next=59,w.text();case 59:E=e.sent,p.addResource(new y.FluentResource(E)),e.next=66;break;case 63:e.prev=63,e.t3=e.catch(53),console.warn("Unable to download English language pack:",e.t3);case 66:e.next=51;break;case 68:e.next=73;break;case 70:e.prev=70,e.t4=e.catch(49),h.e(e.t4);case 73:return e.prev=73,h.f(),e.finish(73);case 76:case"end":return e.stop()}}),e,null,[[1,7],[15,36,39,42],[19,29],[49,70,73,76],[53,63]])})))).apply(this,arguments)}function _(){return(_=s(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m){e.next=3;break}return e.next=3,u(w());case 3:return e.delegateYield(f(h([m,p]),u),"t0",4);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=new g.DOMLocalization([],(function(e){return _.apply(this,arguments)}));function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!m)return console.warn("Bundle not yet loaded"),null;var n=m.getMessage(e,t);return n?m.formatPattern(n.value,t):(console.warn("Missing id",e),null)}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!p)return console.warn("Bundle not yet loaded"),null;var n=p.getMessage(e,t);return n?p.formatPattern(n.value,t):(console.warn("Missing id",e),null)}e.exports={load:w,l10n:k,init:function(){k.connectRoot(document.documentElement),k.translateRoots()},getMessage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=S(e,t);return n||((n=x(e,t))||"<".concat(e,">"))},getMessageStrict:S,getLanguage:function(){return d}}},function(e,t,n){var r=n(24);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(85),i=n(1),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e])||o(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},function(e,t,n){"use strict";n(9),n(78),n(143),n(43),n(148),n(147),n(3),n(5),n(110),n(105),n(45);var r=n(19),i={capitalize:function(e){return e[0].toUpperCase()+e.substr(1)},escapeHtml:function(e){return"string"!=typeof e&&(e="".concat(e)),e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/°/g,"&deg;").replace(/⋅/g,"&sdot;")},unescapeHtml:function(e){return"string"!=typeof e&&(e="".concat(e)),e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/&deg;/g,"°").replace(/&sdot;/g,"⋅")},escapeHtmlForIdClass:function(e){return"string"!=typeof e&&(e="".concat(e)),e=e.replace(/[^_a-zA-Z0-9-]/g,"_"),/^[0-9-]/.test(e)&&(e="_".concat(e)),e},fuzzyTime:function(e){var t=new Date,n=Math.round((t-e)/1e3);return n<5?r.getMessage("utils-now"):n<60?r.getMessage("utils-seconds-ago",{value:n}):n<3600?r.getMessage("utils-minutes-ago",{value:Math.floor(n/60)}):n<86400?r.getMessage("utils-hours-ago",{value:Math.floor(n/3600)}):n<604800?r.getMessage("utils-days-ago",{value:Math.floor(n/86400)}):n<2592e3?r.getMessage("utils-weeks-ago",{value:Math.floor(n/604800)}):n<31536e3?r.getMessage("utils-months-ago",{value:Math.floor(n/2592e3)}):r.getMessage("utils-years-ago",{value:Math.floor(n/31536e3)})},debounce:function(e,t){return i.throttle(e,t,!0)},throttle:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=null,i=0,o=!n;return function(){var a=Number(new Date)-i,s=arguments,c=function(){i=Number(new Date),t(s)};r&&clearTimeout(r),!0===o&&a>e?c():r=setTimeout(c,n?e:e-a)}},colorTemperatureToRGB:function(e){var t,n,r;return(e/=100)<=66?t=255:(t=e-60,t=329.698727446*Math.pow(t,-.1332047592),t=Math.max(t,0),t=Math.min(t,255)),e<=66?(n=e,n=99.4708025861*Math.log(n)-161.1195681661):(n=e-60,n=288.1221695283*Math.pow(n,-.0755148492)),n=Math.max(n,0),n=Math.min(n,255),e>=66?r=255:e<=19?r=0:(r=e-10,r=138.5177312231*Math.log(r)-305.0447927307,r=Math.max(r,0),r=Math.min(r,255)),t=Math.round(t).toString(16),n=Math.round(n).toString(16),r=Math.round(r).toString(16),"#".concat(t).concat(n).concat(r)},sortCapabilities:function(e){var t=e.slice(),n=["Lock","Thermostat","VideoCamera","Camera","SmartPlug","Light","MultiLevelSwitch","OnOffSwitch","ColorControl","ColorSensor","EnergyMonitor","DoorSensor","MotionSensor","LeakSensor","PushButton","TemperatureSensor","HumiditySensor","MultiLevelSensor","Alarm","BinarySensor","BarometricPressureSensor"];return t.sort((function(e,t){return n.includes(e)||n.includes(t)?n.includes(e)?n.includes(t)?n.indexOf(e)-n.indexOf(t):-1:1:0})),t},adjustInputValue:function(e,t){if("number"!=typeof e)return e;var n=t.multipleOf;if("number"!=typeof n&&"integer"===t.type&&(n=1),"number"==typeof n&&(e=Math.round(e/n)*n,"".concat(n).includes("."))){var r="".concat(n).split(".")[1].length;e=Number(e.toFixed(r))}return t.hasOwnProperty("minimum")&&(e=Math.max(e,t.minimum)),t.hasOwnProperty("maximum")&&(e=Math.min(e,t.maximum)),t.hasOwnProperty("enum")&&(e=t.enum.sort((function(t,n){return Math.abs(t-e)-Math.abs(n-e)}))[0]),e}};e.exports=i},function(e,t,n){"use strict";var r=n(18),i=n(109),o=n(28),a=n(27),s=n(111),c=a.set,u=a.getterFor("Array Iterator");e.exports=s(Array,"Array",(function(e,t){c(this,{type:"Array Iterator",target:r(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t){e.exports=!1},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r,i,o,a=n(122),s=n(1),c=n(6),u=n(12),l=n(7),h=n(41),f=n(39),d=s.WeakMap;if(a){var p=new d,m=p.get,v=p.has,g=p.set;r=function(e,t){return g.call(p,e,t),t},i=function(e){return m.call(p,e)||{}},o=function(e){return v.call(p,e)}}else{var y=h("state");f[y]=!0,r=function(e,t){return u(e,y,t),t},i=function(e){return l(e,y)?e[y]:{}},o=function(e){return l(e,y)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t){e.exports={}},function(e,t,n){var r=n(11),i=n(68),o=n(26),a=n(18),s=n(38),c=n(7),u=n(82),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=a(e),t=s(t,!0),u)try{return l(e,t)}catch(e){}if(c(e,t))return o(!i.f.call(e,t),e[t])}},function(e,t,n){var r=n(10).f,i=n(7),o=n(0)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var r=n(31);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(1),i=n(117),o=n(23),a=n(12),s=n(0),c=s("iterator"),u=s("toStringTag"),l=o.values;for(var h in i){var f=r[h],d=f&&f.prototype;if(d){if(d[c]!==l)try{a(d,c,l)}catch(e){d[c]=l}if(d[u]||a(d,u,h),i[h])for(var p in o)if(d[p]!==o[p])try{a(d,p,o[p])}catch(e){d[p]=o[p]}}}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";n(9),n(3),n(46);var r={jwt:localStorage.getItem("jwt"),isLoggedIn:function(){return!!this.jwt},headers:function(e){var t={Accept:"application/json"};return this.jwt&&(t.Authorization="Bearer ".concat(this.jwt)),e&&(t["Content-Type"]=e),t},getJson:function(e){var t={method:"GET",headers:this.headers()};return fetch(e,t).then((function(e){if(!e.ok)throw new Error(e.status);return e.json()}))},postJson:function(e,t){var n={method:"POST",headers:this.headers("application/json"),body:JSON.stringify(t)};return fetch(e,n).then((function(e){if(!e.ok)throw new Error(e.status);if(204!==e.status)return e.json()}))},putJson:function(e,t){var n={method:"PUT",headers:this.headers("application/json"),body:JSON.stringify(t)};return fetch(e,n).then((function(e){if(!e.ok)throw new Error(e.status);return e.json()}))},patchJson:function(e,t){var n={method:"PATCH",headers:this.headers("application/json"),body:JSON.stringify(t)};return fetch(e,n).then((function(e){if(!e.ok)throw new Error(e.status);return e.json()}))},delete:function(e){var t={method:"DELETE",headers:this.headers()};return fetch(e,t).then((function(e){if(!e.ok)throw new Error(e.status)}))},loadImage:function(e){var t={headers:{Authorization:"Bearer ".concat(this.jwt)},cache:"reload"};return fetch(e,t).then((function(e){if(!e.ok)throw new Error(e.status);return e.blob()}))},userCount:function(){return this.getJson("/users/count").then((function(e){return e.count})).catch((function(){throw new Error("Failed to get user count.")}))},assertJWT:function(){if(!this.jwt)throw new Error("No JWT go login..")},verifyJWT:function(){return fetch("/things",{headers:this.headers()}).then((function(e){return e.ok}))},createUser:function(e,t,n){return this.postJson("/users",{name:e,email:t,password:n}).then((function(e){var t=e.jwt;localStorage.setItem("jwt",t),r.jwt=t})).catch((function(){throw new Error("Repeating signup not permitted")}))},getUser:function(e){return this.getJson("/users/".concat(encodeURIComponent(e)))},addUser:function(e,t,n){return this.postJson("/users",{name:e,email:t,password:n})},editUser:function(e,t,n,r,i){return this.putJson("/users/".concat(encodeURIComponent(e)),{id:e,name:t,email:n,password:r,newPassword:i})},userEnableMfa:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={enable:!0};return t&&(n.mfa={totp:t}),this.postJson("/users/".concat(encodeURIComponent(e),"/mfa"),n)},userDisableMfa:function(e){return this.postJson("/users/".concat(encodeURIComponent(e),"/mfa"),{enable:!1})},userRegenerateMfaBackupCodes:function(e){return this.putJson("/users/".concat(encodeURIComponent(e),"/mfa/codes"),{generate:!0})},deleteUser:function(e){return this.delete("/users/".concat(encodeURIComponent(e)))},getAllUserInfo:function(){return this.getJson("/users/info")},login:function(e,t,n){var r=this,i={email:e,password:t};n&&(i.mfa={totp:n});var o={method:"POST",headers:this.headers("application/json"),body:JSON.stringify(i)};return fetch("/login",o).then((function(e){if(!e.ok){if(401===e.status)return e.text().then((function(e){throw new Error(e)}));throw new Error(e.status)}return e.json().then((function(e){var t=e.jwt;localStorage.setItem("jwt",t),r.jwt=t}))}))},logout:function(){return this.assertJWT(),localStorage.removeItem("jwt"),this.postJson("/log-out",{}).catch((function(){console.error("Logout failed...")}))},getInstalledAddons:function(){return this.getJson("/addons")},getAddonConfig:function(e){return this.getJson("/addons/".concat(encodeURIComponent(e),"/config"))},setAddonConfig:function(e,t){return this.putJson("/addons/".concat(encodeURIComponent(e),"/config"),{config:t})},setAddonSetting:function(e,t){return this.putJson("/addons/".concat(encodeURIComponent(e)),{enabled:t})},installAddon:function(e,t,n){return this.postJson("/addons",{id:e,url:t,checksum:n})},uninstallAddon:function(e){return this.delete("/addons/".concat(encodeURIComponent(e)))},updateAddon:function(e,t,n){return this.patchJson("/addons/".concat(encodeURIComponent(e)),{url:t,checksum:n})},getAddonsInfo:function(){return this.getJson("/settings/addonsInfo")},getExperimentSetting:function(e){return this.getJson("/settings/experiments/".concat(encodeURIComponent(e))).then((function(e){return e.enabled})).catch((function(t){if("404"===t.message)return!1;throw new Error("Error getting ".concat(e))}))},setExperimentSetting:function(e,t){return this.putJson("/settings/experiments/".concat(encodeURIComponent(e)),{enabled:t})},getUpdateStatus:function(){return this.getJson("/updates/status")},getUpdateLatest:function(){return this.getJson("/updates/latest")},getSelfUpdateStatus:function(){return this.getJson("/updates/self-update")},setSelfUpdateStatus:function(e){return this.putJson("/updates/self-update",{enabled:e})},startUpdate:function(){return this.postJson("/updates/update",{})},getExtensions:function(){return this.getJson("/extensions")},getThings:function(){return this.getJson("/things")},getThing:function(e){return this.getJson("/things/".concat(encodeURIComponent(e)))},setThingLayoutIndex:function(e,t){return this.patchJson("/things/".concat(encodeURIComponent(e)),{layoutIndex:t})},setThingFloorplanPosition:function(e,t,n){return this.patchJson("/things/".concat(encodeURIComponent(e)),{floorplanX:t,floorplanY:n})},setThingCredentials:function(e,t){var n={thingId:e};return t.hasOwnProperty("pin")?n.pin=t.pin:(n.username=t.username,n.password=t.password),this.patchJson("/things",n)},addThing:function(e){return this.postJson("/things",e)},addWebThing:function(e){return this.postJson("/new_things",{url:e})},removeThing:function(e){return this.delete("/things/".concat(encodeURIComponent(e)))},updateThing:function(e,t){return this.putJson("/things/".concat(encodeURIComponent(e)),t)},getPushKey:function(){return this.getJson("/push/vapid-public-key")},pushSubscribe:function(e){return this.postJson("/push/register",e)},getNotifiers:function(){return this.getJson("/notifiers")},startPairing:function(e){return this.postJson("/actions",{pair:{input:{timeout:e}}})},cancelPairing:function(e){return this.delete(e)},getRules:function(){return this.getJson("/rules")},getRule:function(e){return this.getJson("/rules/".concat(encodeURIComponent(e)))},addRule:function(e){return this.postJson("/rules",e)},updateRule:function(e,t){return this.putJson("/rules/".concat(encodeURIComponent(e)),t)},deleteRule:function(e){return this.delete("/rules/".concat(encodeURIComponent(e)))},getLogs:function(){return this.getJson("/logs/.schema")},addLog:function(e){var t,n={method:"POST",headers:this.headers("application/json"),body:JSON.stringify(e)};return fetch("/logs",n).then((function(e){return t=e.ok,e.ok?e.json():e.text()})).then((function(e){return[t,e]})).catch((function(){return[t,null]}))},deleteLog:function(e,t){return this.delete("/logs/things/".concat(encodeURIComponent(e),"/properties/").concat(encodeURIComponent(t)))},uploadFloorplan:function(e){var t=new FormData;t.append("file",e);var n={method:"POST",headers:{Authorization:"Bearer ".concat(this.jwt)},body:t};return fetch("/uploads",n).then((function(e){if(!e.ok)throw new Error(e.status)}))},setupTunnel:function(e,t,n,r){var i={method:"POST",headers:this.headers("application/json"),body:JSON.stringify({email:e,subdomain:t,reclamationToken:n,optout:r})};return fetch("/settings/subscribe",i).then((function(e){return e.ok?e.json().then((function(e){return[!0,e]})):[!1,e.statusText]}))},skipTunnel:function(){var e={method:"POST",headers:this.headers("application/json"),body:JSON.stringify({})};return fetch("/settings/skiptunnel",e).then((function(e){return e.ok?e.json().then((function(e){return[!0,e]})):[!1,e.statusText]}))},reclaimDomain:function(e){return this.postJson("/settings/reclaim",{subdomain:e})},getLanSettings:function(){return this.getJson("/settings/network/lan")},getWanSettings:function(){return this.getJson("/settings/network/wan")},getWlanSettings:function(){return this.getJson("/settings/network/wireless")},getDhcpSettings:function(){return this.getJson("/settings/network/dhcp")},getWirelessNetworks:function(){return this.getJson("/settings/network/wireless/networks")},getNetworkAddresses:function(){return this.getJson("/settings/network/addresses")},setLanSettings:function(e){return this.putJson("/settings/network/lan",e)},setWanSettings:function(e){return this.putJson("/settings/network/wan",e)},setWlanSettings:function(e){return this.putJson("/settings/network/wireless",e)},setDhcpSettings:function(e){return this.putJson("/settings/network/dhcp",e)},getNtpStatus:function(){return this.getJson("/settings/system/ntp")},restartNtpSync:function(){return this.postJson("/settings/system/ntp",{})},getSshStatus:function(){return this.getJson("/settings/system/ssh")},setSshStatus:function(e){return this.putJson("/settings/system/ssh",{enabled:e})},getPlatform:function(){return this.getJson("/settings/system/platform")},getTunnelInfo:function(){return this.getJson("/settings/tunnelinfo")},setDomainSettings:function(e){return this.putJson("/settings/domain",e)},getAdapters:function(){return this.getJson("/adapters")},getAuthorizations:function(){return this.getJson("/authorizations")},revokeAuthorization:function(e){return this.delete("/authorizations/".concat(encodeURIComponent(e)))},ping:function(){var e={method:"GET",headers:this.headers()};return fetch("/ping",e).then((function(e){if(!e.ok)throw new Error(e.status)}))},getCountry:function(){return this.getJson("/settings/localization/country")},setCountry:function(e){return this.putJson("/settings/localization/country",{country:e})},getTimezone:function(){return this.getJson("/settings/localization/timezone")},setTimezone:function(e){return this.putJson("/settings/localization/timezone",{zone:e})},getLanguage:function(){return this.getJson("/settings/localization/language")},setLanguage:function(e){return this.putJson("/settings/localization/language",{language:e})},getUnits:function(){return this.getJson("/settings/localization/units")},setUnits:function(e){return this.putJson("/settings/localization/units",e)}};window.API=r,e.exports=r},function(e,t,n){"use strict";var r=n(8),i=n(1),o=n(21),a=n(25),s=n(11),c=n(57),u=n(87),l=n(2),h=n(7),f=n(40),d=n(6),p=n(4),m=n(20),v=n(18),g=n(38),y=n(26),b=n(47),w=n(73),E=n(49),_=n(129),k=n(75),S=n(29),x=n(10),T=n(68),P=n(12),O=n(15),C=n(55),I=n(41),R=n(39),L=n(50),A=n(0),M=n(94),D=n(81),j=n(30),N=n(27),B=n(65).forEach,F=I("hidden"),U=A("toPrimitive"),H=N.set,q=N.getterFor("Symbol"),z=Object.prototype,V=i.Symbol,$=o("JSON","stringify"),W=S.f,K=x.f,G=_.f,X=T.f,J=C("symbols"),Y=C("op-symbols"),Q=C("string-to-symbol-registry"),Z=C("symbol-to-string-registry"),ee=C("wks"),te=i.QObject,ne=!te||!te.prototype||!te.prototype.findChild,re=s&&l((function(){return 7!=b(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=W(z,t);r&&delete z[t],K(e,t,n),r&&e!==z&&K(z,t,r)}:K,ie=function(e,t){var n=J[e]=b(V.prototype);return H(n,{type:"Symbol",tag:e,description:t}),s||(n.description=t),n},oe=u?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof V},ae=function(e,t,n){e===z&&ae(Y,t,n),p(e);var r=g(t,!0);return p(n),h(J,r)?(n.enumerable?(h(e,F)&&e[F][r]&&(e[F][r]=!1),n=b(n,{enumerable:y(0,!1)})):(h(e,F)||K(e,F,y(1,{})),e[F][r]=!0),re(e,r,n)):K(e,r,n)},se=function(e,t){p(e);var n=v(t),r=w(n).concat(he(n));return B(r,(function(t){s&&!ce.call(n,t)||ae(e,t,n[t])})),e},ce=function(e){var t=g(e,!0),n=X.call(this,t);return!(this===z&&h(J,t)&&!h(Y,t))&&(!(n||!h(this,t)||!h(J,t)||h(this,F)&&this[F][t])||n)},ue=function(e,t){var n=v(e),r=g(t,!0);if(n!==z||!h(J,r)||h(Y,r)){var i=W(n,r);return!i||!h(J,r)||h(n,F)&&n[F][r]||(i.enumerable=!0),i}},le=function(e){var t=G(v(e)),n=[];return B(t,(function(e){h(J,e)||h(R,e)||n.push(e)})),n},he=function(e){var t=e===z,n=G(t?Y:v(e)),r=[];return B(n,(function(e){!h(J,e)||t&&!h(z,e)||r.push(J[e])})),r};(c||(O((V=function(){if(this instanceof V)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=L(e),n=function(e){this===z&&n.call(Y,e),h(this,F)&&h(this[F],t)&&(this[F][t]=!1),re(this,t,y(1,e))};return s&&ne&&re(z,t,{configurable:!0,set:n}),ie(t,e)}).prototype,"toString",(function(){return q(this).tag})),O(V,"withoutSetter",(function(e){return ie(L(e),e)})),T.f=ce,x.f=ae,S.f=ue,E.f=_.f=le,k.f=he,M.f=function(e){return ie(A(e),e)},s&&(K(V.prototype,"description",{configurable:!0,get:function(){return q(this).description}}),a||O(z,"propertyIsEnumerable",ce,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:V}),B(w(ee),(function(e){D(e)})),r({target:"Symbol",stat:!0,forced:!c},{for:function(e){var t=String(e);if(h(Q,t))return Q[t];var n=V(t);return Q[t]=n,Z[n]=t,n},keyFor:function(e){if(!oe(e))throw TypeError(e+" is not a symbol");if(h(Z,e))return Z[e]},useSetter:function(){ne=!0},useSimple:function(){ne=!1}}),r({target:"Object",stat:!0,forced:!c,sham:!s},{create:function(e,t){return void 0===t?b(e):se(b(e),t)},defineProperty:ae,defineProperties:se,getOwnPropertyDescriptor:ue}),r({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:le,getOwnPropertySymbols:he}),r({target:"Object",stat:!0,forced:l((function(){k.f(1)}))},{getOwnPropertySymbols:function(e){return k.f(m(e))}}),$)&&r({target:"JSON",stat:!0,forced:!c||l((function(){var e=V();return"[null]"!=$([e])||"{}"!=$({a:e})||"{}"!=$(Object(e))}))},{stringify:function(e,t,n){for(var r,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=t,(d(t)||void 0!==e)&&!oe(e))return f(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!oe(t))return t}),i[1]=t,$.apply(null,i)}});V.prototype[U]||P(V.prototype,U,V.prototype.valueOf),j(V,"Symbol"),R[F]=!0},function(e,t,n){"use strict";var r=n(8),i=n(11),o=n(1),a=n(7),s=n(6),c=n(10).f,u=n(84),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var h={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof f?new l(e):void 0===e?l():l(e);return""===e&&(h[t]=!0),t};u(f,l);var d=f.prototype=l.prototype;d.constructor=f;var p=d.toString,m="Symbol(test)"==String(l("test")),v=/^Symbol\((.*)\)[^)]+$/;c(d,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=p.call(e);if(a(h,e))return"";var n=m?t.slice(7,-1):t.replace(v,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:f})}},function(e,t,n){var r=n(6);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports={}},function(e,t,n){var r=n(17);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(55),i=n(50),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t,n){"use strict";var r,i,o=n(76),a=n(112),s=RegExp.prototype.exec,c=String.prototype.replace,u=s,l=(r=/a/,i=/b*/g,s.call(r,"a"),s.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),h=a.UNSUPPORTED_Y||a.BROKEN_CARET,f=void 0!==/()??/.exec("")[1];(l||f||h)&&(u=function(e){var t,n,r,i,a=this,u=h&&a.sticky,d=o.call(a),p=a.source,m=0,v=e;return u&&(-1===(d=d.replace("y","")).indexOf("g")&&(d+="g"),v=String(e).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==e[a.lastIndex-1])&&(p="(?: "+p+")",v=" "+v,m++),n=new RegExp("^(?:"+p+")",d)),f&&(n=new RegExp("^"+p+"$(?!\\s)",d)),l&&(t=a.lastIndex),r=s.call(u?n:a,v),u?r?(r.input=r.input.slice(m),r[0]=r[0].slice(m),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:l&&r&&(a.lastIndex=a.global?r.index+r[0].length:t),f&&r&&r.length>1&&c.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),e.exports=u},function(e,t,n){"use strict";var r=n(8),i=n(6),o=n(40),a=n(70),s=n(16),c=n(18),u=n(51),l=n(0),h=n(72),f=n(66),d=h("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),m=l("species"),v=[].slice,g=Math.max;r({target:"Array",proto:!0,forced:!d||!p},{slice:function(e,t){var n,r,l,h=c(this),f=s(h.length),d=a(e,f),p=a(void 0===t?f:t,f);if(o(h)&&("function"!=typeof(n=h.constructor)||n!==Array&&!o(n.prototype)?i(n)&&null===(n=n[m])&&(n=void 0):n=void 0,n===Array||void 0===n))return v.call(h,d,p);for(r=new(void 0===n?Array:n)(g(p-d,0)),l=0;d<p;d++,l++)d in h&&u(r,l,h[d]);return r.length=l,r}})},function(e,t,n){var r=n(8),i=n(115);r({target:"Array",stat:!0,forced:!n(77)((function(e){Array.from(e)}))},{from:i})},function(e,t,n){"use strict";var r=n(98),i=n(103),o=n(4),a=n(24),s=n(64),c=n(101),u=n(16),l=n(99),h=n(42),f=n(2),d=[].push,p=Math.min,m=!f((function(){return!RegExp(4294967295,"y")}));r("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(a(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===e)return[r];if(!i(e))return t.call(r,e,o);for(var s,c,u,l=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,m=new RegExp(e.source,f+"g");(s=h.call(m,r))&&!((c=m.lastIndex)>p&&(l.push(r.slice(p,s.index)),s.length>1&&s.index<r.length&&d.apply(l,s.slice(1)),u=s[0].length,p=c,l.length>=o));)m.lastIndex===s.index&&m.lastIndex++;return p===r.length?!u&&m.test("")||l.push(""):l.push(r.slice(p)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var i=a(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,i,n):r.call(String(i),t,n)},function(e,i){var a=n(r,e,this,i,r!==t);if(a.done)return a.value;var h=o(e),f=String(this),d=s(h,RegExp),v=h.unicode,g=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(m?"y":"g"),y=new d(m?h:"^(?:"+h.source+")",g),b=void 0===i?4294967295:i>>>0;if(0===b)return[];if(0===f.length)return null===l(y,f)?[f]:[];for(var w=0,E=0,_=[];E<f.length;){y.lastIndex=m?E:0;var k,S=l(y,m?f:f.slice(E));if(null===S||(k=p(u(y.lastIndex+(m?0:E)),f.length))===w)E=c(f,E,v);else{if(_.push(f.slice(w,E)),_.length===b)return _;for(var x=1;x<=S.length-1;x++)if(_.push(S[x]),_.length===b)return _;E=w=k}}return _.push(f.slice(w)),_}]}),!m)},function(e,t,n){"use strict";var r,i,o,a,s=n(8),c=n(25),u=n(1),l=n(21),h=n(124),f=n(15),d=n(107),p=n(30),m=n(108),v=n(6),g=n(31),y=n(97),b=n(17),w=n(54),E=n(113),_=n(77),k=n(64),S=n(90).set,x=n(125),T=n(126),P=n(127),O=n(93),C=n(128),I=n(27),R=n(71),L=n(0),A=n(58),M=L("species"),D="Promise",j=I.get,N=I.set,B=I.getterFor(D),F=h,U=u.TypeError,H=u.document,q=u.process,z=l("fetch"),V=O.f,$=V,W="process"==b(q),K=!!(H&&H.createEvent&&u.dispatchEvent),G=R(D,(function(){if(!(w(F)!==String(F))){if(66===A)return!0;if(!W&&"function"!=typeof PromiseRejectionEvent)return!0}if(c&&!F.prototype.finally)return!0;if(A>=51&&/native code/.test(F))return!1;var e=F.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[M]=t,!(e.then((function(){}))instanceof t)})),X=G||!_((function(e){F.all(e).catch((function(){}))})),J=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},Y=function(e,t,n){if(!t.notified){t.notified=!0;var r=t.reactions;x((function(){for(var i=t.value,o=1==t.state,a=0;r.length>a;){var s,c,u,l=r[a++],h=o?l.ok:l.fail,f=l.resolve,d=l.reject,p=l.domain;try{h?(o||(2===t.rejection&&te(e,t),t.rejection=1),!0===h?s=i:(p&&p.enter(),s=h(i),p&&(p.exit(),u=!0)),s===l.promise?d(U("Promise-chain cycle")):(c=J(s))?c.call(s,f,d):f(s)):d(i)}catch(e){p&&!u&&p.exit(),d(e)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&Z(e,t)}))}},Q=function(e,t,n){var r,i;K?((r=H.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},(i=u["on"+e])?i(r):"unhandledrejection"===e&&P("Unhandled promise rejection",n)},Z=function(e,t){S.call(u,(function(){var n,r=t.value;if(ee(t)&&(n=C((function(){W?q.emit("unhandledRejection",r,e):Q("unhandledrejection",e,r)})),t.rejection=W||ee(t)?2:1,n.error))throw n.value}))},ee=function(e){return 1!==e.rejection&&!e.parent},te=function(e,t){S.call(u,(function(){W?q.emit("rejectionHandled",e):Q("rejectionhandled",e,t.value)}))},ne=function(e,t,n,r){return function(i){e(t,n,i,r)}},re=function(e,t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,Y(e,t,!0))},ie=function(e,t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(e===n)throw U("Promise can't be resolved itself");var i=J(n);i?x((function(){var r={done:!1};try{i.call(n,ne(ie,e,r,t),ne(re,e,r,t))}catch(n){re(e,r,n,t)}})):(t.value=n,t.state=1,Y(e,t,!1))}catch(n){re(e,{done:!1},n,t)}}};G&&(F=function(e){y(this,F,D),g(e),r.call(this);var t=j(this);try{e(ne(ie,this,t),ne(re,this,t))}catch(e){re(this,t,e)}},(r=function(e){N(this,{type:D,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=d(F.prototype,{then:function(e,t){var n=B(this),r=V(k(this,F));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=W?q.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Y(this,n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=j(e);this.promise=e,this.resolve=ne(ie,e,t),this.reject=ne(re,e,t)},O.f=V=function(e){return e===F||e===o?new i(e):$(e)},c||"function"!=typeof h||(a=h.prototype.then,f(h.prototype,"then",(function(e,t){var n=this;return new F((function(e,t){a.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof z&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return T(F,z.apply(u,arguments))}}))),s({global:!0,wrap:!0,forced:G},{Promise:F}),p(F,D,!1,!0),m(D),o=l(D),s({target:D,stat:!0,forced:G},{reject:function(e){var t=V(this);return t.reject.call(void 0,e),t.promise}}),s({target:D,stat:!0,forced:c||G},{resolve:function(e){return T(c&&this===o?F:this,e)}}),s({target:D,stat:!0,forced:X},{all:function(e){var t=this,n=V(t),r=n.resolve,i=n.reject,o=C((function(){var n=g(t.resolve),o=[],a=0,s=1;E(e,(function(e){var c=a++,u=!1;o.push(void 0),s++,n.call(t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=V(t),r=n.reject,i=C((function(){var i=g(t.resolve);E(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},function(e,t,n){var r,i=n(4),o=n(114),a=n(56),s=n(39),c=n(91),u=n(52),l=n(41),h=l("IE_PROTO"),f=function(){},d=function(e){return"<script>"+e+"<\/script>"},p=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;p=r?function(e){e.write(d("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=u("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(d("document.F=Object")),e.close(),e.F);for(var n=a.length;n--;)delete p.prototype[a[n]];return p()};s[h]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f.prototype=i(e),n=new f,f.prototype=null,n[h]=e):n=p(),void 0===t?n:o(n,t)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(86),i=n(56).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},function(e,t,n){"use strict";var r=n(38),i=n(10),o=n(26);e.exports=function(e,t,n){var a=r(t);a in e?i.f(e,a,o(0,n)):e[a]=n}},function(e,t,n){var r=n(1),i=n(6),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t,n){var r=n(1),i=n(12);e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(83),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r=n(25),i=n(83);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var r=n(2);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(e,t,n){var r,i,o=n(1),a=n(79),s=o.process,c=s&&s.versions,u=c&&c.v8;u?i=(r=u.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),e.exports=i&&+i},function(e,t,n){var r={};r[n(0)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){var r=n(8),i=n(2),o=n(18),a=n(29).f,s=n(11),c=i((function(){a(1)}));r({target:"Object",stat:!0,forced:!s||c,sham:!s},{getOwnPropertyDescriptor:function(e,t){return a(o(e),t)}})},function(e,t,n){var r=n(8),i=n(6),o=n(4),a=n(7),s=n(29),c=n(67);r({target:"Reflect",stat:!0},{get:function e(t,n){var r,u,l=arguments.length<3?t:arguments[2];return o(t)===l?t[n]:(r=s.f(t,n))?a(r,"value")?r.value:void 0===r.get?void 0:r.get.call(l):i(u=c(t))?e(u,n,l):void 0}})},function(e,t,n){var r=n(63),i=n(28),o=n(0)("iterator");e.exports=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){var r=n(59),i=n(17),o=n(0)("toStringTag"),a="Arguments"==i(function(){return arguments}());e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:a?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,n){var r=n(4),i=n(31),o=n(0)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[o])?t:i(n)}},function(e,t,n){var r=n(32),i=n(69),o=n(20),a=n(16),s=n(88),c=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,l=4==e,h=6==e,f=5==e||h;return function(d,p,m,v){for(var g,y,b=o(d),w=i(b),E=r(p,m,3),_=a(w.length),k=0,S=v||s,x=t?S(d,_):n?S(d,0):void 0;_>k;k++)if((f||k in w)&&(y=E(g=w[k],k,b),e))if(t)x[k]=y;else if(y)switch(e){case 3:return!0;case 5:return g;case 6:return k;case 2:c.call(x,g)}else if(l)return!1;return h?-1:u||l?l:x}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},function(e,t,n){var r=n(11),i=n(2),o=n(7),a=Object.defineProperty,s={},c=function(e){throw e};e.exports=function(e,t){if(o(s,e))return s[e];t||(t={});var n=[][e],u=!!o(t,"ACCESSORS")&&t.ACCESSORS,l=o(t,0)?t[0]:c,h=o(t,1)?t[1]:void 0;return s[e]=!!n&&!i((function(){if(u&&!r)return!0;var e={length:-1};u?a(e,1,{enumerable:!0,get:c}):e[1]=1,n.call(e,l,h)}))}},function(e,t,n){var r=n(7),i=n(20),o=n(41),a=n(119),s=o("IE_PROTO"),c=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=i(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(2),i=n(17),o="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},function(e,t,n){var r=n(34),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},function(e,t,n){var r=n(2),i=/#|\.prototype\./,o=function(e,t){var n=s[a(e)];return n==u||n!=c&&("function"==typeof t?r(t):!!t)},a=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=o.data={},c=o.NATIVE="N",u=o.POLYFILL="P";e.exports=o},function(e,t,n){var r=n(2),i=n(0),o=n(58),a=i("species");e.exports=function(e){return o>=51||!r((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,n){var r=n(86),i=n(56);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){var t="function"==typeof Map?new Map:void 0;return(o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return a(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,e)})(e)}function a(e,t,n){return(a=s()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&c(i,n.prototype),i}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(139),n(143),n(23),n(170),n(13),n(3),n(14),n(5),n(105),n(140),n(33);var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,e);var t,n,o,a,l,h=(t=f,n=s(),function(){var e,r=u(t);if(n){var o=u(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return i(this,e)});function f(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=h.call(this)).attachShadow({mode:"open"});var n=e.content.cloneNode(!0);if("ShadowRoot"!==ShadowRoot.name){var r=t.shadowRoot.host.tagName;n.querySelectorAll("style").forEach((function(e){e.innerHTML=e.innerHTML.replace(/:host/g,r)}))}return t.shadowRoot.appendChild(n),f.count++,t}return o=f,(a=[{key:"connectedCallback",value:function(){}},{key:"disconnectedCallback",value:function(){}},{key:"_upgradeProperty",value:function(e){if(this.hasOwnProperty(e)){var t=this[e];delete this[e],this[e]=t}this.hasAttribute(e)&&(this[e]=this.getAttribute(e))}}])&&r(o.prototype,a),l&&r(o,l),f}(o(HTMLElement));l.count=0,e.exports=l},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";var r=n(4);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){var r=n(0)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(8),i=n(96).includes,o=n(109);r({target:"Array",proto:!0,forced:!n(66)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(e,t,n){var r=n(21);e.exports=r("navigator","userAgent")||""},function(e,t,n){var r=n(0),i=n(28),o=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},function(e,t,n){var r=n(85),i=n(7),o=n(94),a=n(10).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},function(e,t,n){var r=n(11),i=n(2),o=n(52);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(1),i=n(53),o=r["__core-js_shared__"]||i("__core-js_shared__",{});e.exports=o},function(e,t,n){var r=n(7),i=n(118),o=n(29),a=n(10);e.exports=function(e,t){for(var n=i(t),s=a.f,c=o.f,u=0;u<n.length;u++){var l=n[u];r(e,l)||s(e,l,c(t,l))}}},function(e,t,n){var r=n(1);e.exports=r},function(e,t,n){var r=n(7),i=n(18),o=n(96).indexOf,a=n(39);e.exports=function(e,t){var n,s=i(e),c=0,u=[];for(n in s)!r(a,n)&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){var r=n(57);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var r=n(6),i=n(40),o=n(0)("species");e.exports=function(e,t){var n;return i(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var r=n(4);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r,i,o,a=n(1),s=n(2),c=n(17),u=n(32),l=n(91),h=n(52),f=n(92),d=a.location,p=a.setImmediate,m=a.clearImmediate,v=a.process,g=a.MessageChannel,y=a.Dispatch,b=0,w={},E=function(e){if(w.hasOwnProperty(e)){var t=w[e];delete w[e],t()}},_=function(e){return function(){E(e)}},k=function(e){E(e.data)},S=function(e){a.postMessage(e+"",d.protocol+"//"+d.host)};p&&m||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return w[++b]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},r(b),b},m=function(e){delete w[e]},"process"==c(v)?r=function(e){v.nextTick(_(e))}:y&&y.now?r=function(e){y.now(_(e))}:g&&!f?(o=(i=new g).port2,i.port1.onmessage=k,r=u(o.postMessage,o,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||s(S)||"file:"===d.protocol?r="onreadystatechange"in h("script")?function(e){l.appendChild(h("script")).onreadystatechange=function(){l.removeChild(this),E(e)}}:function(e){setTimeout(_(e),0)}:(r=S,a.addEventListener("message",k,!1))),e.exports={set:p,clear:m}},function(e,t,n){var r=n(21);e.exports=r("document","documentElement")},function(e,t,n){var r=n(79);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},function(e,t,n){"use strict";var r=n(31),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},function(e,t,n){var r=n(0);t.f=r},function(e,t,n){"use strict";var r,i,o,a=n(67),s=n(12),c=n(7),u=n(0),l=n(25),h=u("iterator"),f=!1;[].keys&&("next"in(o=[].keys())?(i=a(a(o)))!==Object.prototype&&(r=i):f=!0),null==r&&(r={}),l||c(r,h)||s(r,h,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},function(e,t,n){var r=n(18),i=n(16),o=n(70),a=function(e){return function(t,n,a){var s,c=r(t),u=i(c.length),l=o(a,u);if(e&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){"use strict";n(121);var r=n(15),i=n(2),o=n(0),a=n(42),s=n(12),c=o("species"),u=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l="$0"==="a".replace(/./,"$0"),h=o("replace"),f=!!/./[h]&&""===/./[h]("a","$0"),d=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,h){var p=o(e),m=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),v=m&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!m||!v||"replace"===e&&(!u||!l||f)||"split"===e&&!d){var g=/./[p],y=n(p,""[e],(function(e,t,n,r,i){return t.exec===a?m&&!i?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),b=y[0],w=y[1];r(String.prototype,e,b),r(RegExp.prototype,p,2==t?function(e,t){return w.call(e,this,t)}:function(e){return w.call(e,this)})}h&&s(RegExp.prototype[p],"sham",!0)}},function(e,t,n){var r=n(17),i=n(42);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n,r){var i=t&&t.prototype instanceof l?t:l,o=Object.create(i.prototype),a=new _(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return S()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var u={};function l(){}function h(){}function f(){}var d={};d[i]=function(){return this};var p=Object.getPrototypeOf,m=p&&p(p(k([])));m&&m!==t&&n.call(m,i)&&(d=m);var v=f.prototype=l.prototype=Object.create(d);function g(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function y(e,t){var r;this._invoke=function(i,o){function a(){return new t((function(r,a){!function r(i,o,a,s){var u=c(e[i],e,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==typeof h&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(h).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=v.constructor=f,f.constructor=h,f[a]=h.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},g(y.prototype),y.prototype[o]=function(){return this},e.AsyncIterator=y,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new y(s(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(v),v[a]="Generator",v[i]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";var r=n(106).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r=n(4),i=n(130);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,o){return r(n),i(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},function(e,t,n){var r=n(6),i=n(17),o=n(0)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){"use strict";var r,i=n(201),o=n(11),a=n(1),s=n(6),c=n(7),u=n(63),l=n(12),h=n(15),f=n(10).f,d=n(67),p=n(102),m=n(0),v=n(50),g=a.Int8Array,y=g&&g.prototype,b=a.Uint8ClampedArray,w=b&&b.prototype,E=g&&d(g),_=y&&d(y),k=Object.prototype,S=k.isPrototypeOf,x=m("toStringTag"),T=v("TYPED_ARRAY_TAG"),P=i&&!!p&&"Opera"!==u(a.opera),O=!1,C={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},I=function(e){return s(e)&&c(C,u(e))};for(r in C)a[r]||(P=!1);if((!P||"function"!=typeof E||E===Function.prototype)&&(E=function(){throw TypeError("Incorrect invocation")},P))for(r in C)a[r]&&p(a[r],E);if((!P||!_||_===k)&&(_=E.prototype,P))for(r in C)a[r]&&p(a[r].prototype,_);if(P&&d(w)!==_&&p(w,_),o&&!c(_,x))for(r in O=!0,f(_,x,{get:function(){return s(this)?this[T]:void 0}}),C)a[r]&&l(a[r],T,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:P,TYPED_ARRAY_TAG:O&&T,aTypedArray:function(e){if(I(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(p){if(S.call(E,e))return e}else for(var t in C)if(c(C,r)){var n=a[t];if(n&&(e===n||S.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(o){if(n)for(var r in C){var i=a[r];i&&c(i.prototype,e)&&delete i.prototype[e]}_[e]&&!n||h(_,e,n?t:P&&y[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(o){if(p){if(n)for(r in C)(i=a[r])&&c(i,e)&&delete i[e];if(E[e]&&!n)return;try{return h(E,e,n?t:P&&g[e]||t)}catch(e){}}for(r in C)!(i=a[r])||i[e]&&!n||h(i,e,t)}},isView:function(e){var t=u(e);return"DataView"===t||c(C,t)},isTypedArray:I,TypedArray:E,TypedArrayPrototype:_}},function(e,t,n){"use strict";var r=n(98),i=n(4),o=n(20),a=n(16),s=n(34),c=n(24),u=n(101),l=n(99),h=Math.max,f=Math.min,d=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,m=/\$([$&'`]|\d\d?)/g;r("replace",2,(function(e,t,n,r){var v=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=r.REPLACE_KEEPS_$0,y=v?"$":"$0";return[function(n,r){var i=c(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!v&&g||"string"==typeof r&&-1===r.indexOf(y)){var o=n(t,e,this,r);if(o.done)return o.value}var c=i(e),d=String(this),p="function"==typeof r;p||(r=String(r));var m=c.global;if(m){var w=c.unicode;c.lastIndex=0}for(var E=[];;){var _=l(c,d);if(null===_)break;if(E.push(_),!m)break;""===String(_[0])&&(c.lastIndex=u(d,a(c.lastIndex),w))}for(var k,S="",x=0,T=0;T<E.length;T++){_=E[T];for(var P=String(_[0]),O=h(f(s(_.index),d.length),0),C=[],I=1;I<_.length;I++)C.push(void 0===(k=_[I])?k:String(k));var R=_.groups;if(p){var L=[P].concat(C,O,d);void 0!==R&&L.push(R);var A=String(r.apply(void 0,L))}else A=b(P,d,O,C,R,r);O>=x&&(S+=d.slice(x,O)+A,x=O+P.length)}return S+d.slice(x)}];function b(e,n,r,i,a,s){var c=r+e.length,u=i.length,l=m;return void 0!==a&&(a=o(a),l=p),t.call(s,l,(function(t,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(c);case"<":s=a[o.slice(1,-1)];break;default:var l=+o;if(0===l)return t;if(l>u){var h=d(l/10);return 0===h?t:h<=u?void 0===i[h-1]?o.charAt(1):i[h-1]+o.charAt(1):t}s=i[l-1]}return void 0===s?"":s}))}}))},function(e,t,n){var r=n(34),i=n(24),o=function(e){return function(t,n){var o,a,s=String(i(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(o=s.charCodeAt(c))<55296||o>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):o:e?s.slice(c,c+2):a-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},function(e,t,n){var r=n(15);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t,n){"use strict";var r=n(21),i=n(10),o=n(0),a=n(11),s=o("species");e.exports=function(e){var t=r(e),n=i.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(0),i=n(47),o=n(10),a=r("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},function(e,t,n){"use strict";var r=n(8),i=n(158),o=n(24);r({target:"String",proto:!0,forced:!n(159)("includes")},{includes:function(e){return!!~String(o(this)).indexOf(i(e),arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(8),i=n(116),o=n(67),a=n(102),s=n(30),c=n(12),u=n(15),l=n(0),h=n(25),f=n(28),d=n(95),p=d.IteratorPrototype,m=d.BUGGY_SAFARI_ITERATORS,v=l("iterator"),g=function(){return this};e.exports=function(e,t,n,l,d,y,b){i(n,t,l);var w,E,_,k=function(e){if(e===d&&O)return O;if(!m&&e in T)return T[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},S=t+" Iterator",x=!1,T=e.prototype,P=T[v]||T["@@iterator"]||d&&T[d],O=!m&&P||k(d),C="Array"==t&&T.entries||P;if(C&&(w=o(C.call(new e)),p!==Object.prototype&&w.next&&(h||o(w)===p||(a?a(w,p):"function"!=typeof w[v]&&c(w,v,g)),s(w,S,!0,!0),h&&(f[S]=g))),"values"==d&&P&&"values"!==P.name&&(x=!0,O=function(){return P.call(this)}),h&&!b||T[v]===O||c(T,v,O),f[t]=O,d)if(E={values:k("values"),keys:y?O:k("keys"),entries:k("entries")},b)for(_ in E)(m||x||!(_ in T))&&u(T,_,E[_]);else r({target:t,proto:!0,forced:m||x},E);return E}},function(e,t,n){"use strict";var r=n(2);function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){var r=n(4),i=n(80),o=n(16),a=n(32),s=n(62),c=n(89),u=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,n,l,h){var f,d,p,m,v,g,y,b=a(t,n,l?2:1);if(h)f=e;else{if("function"!=typeof(d=s(e)))throw TypeError("Target is not iterable");if(i(d)){for(p=0,m=o(e.length);m>p;p++)if((v=l?b(r(y=e[p])[0],y[1]):b(e[p]))&&v instanceof u)return v;return new u(!1)}f=d.call(e)}for(g=f.next;!(y=g.call(f)).done;)if("object"==typeof(v=c(f,b,y.value,l))&&v&&v instanceof u)return v;return new u(!1)}).stop=function(e){return new u(!0,e)}},function(e,t,n){var r=n(11),i=n(10),o=n(4),a=n(73);e.exports=r?Object.defineProperties:function(e,t){o(e);for(var n,r=a(t),s=r.length,c=0;s>c;)i.f(e,n=r[c++],t[n]);return e}},function(e,t,n){"use strict";var r=n(32),i=n(20),o=n(89),a=n(80),s=n(16),c=n(51),u=n(62);e.exports=function(e){var t,n,l,h,f,d,p=i(e),m="function"==typeof this?this:Array,v=arguments.length,g=v>1?arguments[1]:void 0,y=void 0!==g,b=u(p),w=0;if(y&&(g=r(g,v>2?arguments[2]:void 0,2)),null==b||m==Array&&a(b))for(n=new m(t=s(p.length));t>w;w++)d=y?g(p[w],w):p[w],c(n,w,d);else for(f=(h=b.call(p)).next,n=new m;!(l=f.call(h)).done;w++)d=y?o(h,g,[l.value,w],!0):l.value,c(n,w,d);return n.length=w,n}},function(e,t,n){"use strict";var r=n(95).IteratorPrototype,i=n(47),o=n(26),a=n(30),s=n(28),c=function(){return this};e.exports=function(e,t,n){var u=t+" Iterator";return e.prototype=i(r,{next:o(1,n)}),a(e,u,!1,!0),s[u]=c,e}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){var r=n(21),i=n(49),o=n(75),a=n(4);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(a(e)),n=o.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(2);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){"use strict";var r=n(141),i=n(19),o={nameToAbbreviation:function(e){if(!e)return"";switch(e.toLowerCase()){case"volt":case"volts":return i.getMessage("abbrev-volt");case"hertz":return i.getMessage("abbrev-hertz");case"amp":case"amps":case"ampere":case"amperes":return i.getMessage("abbrev-amp");case"watt":case"watts":return i.getMessage("abbrev-watt");case"kilowatt hour":case"kilowatt-hour":case"kilowatt hours":case"kilowatt-hours":return i.getMessage("abbrev-kilowatt-hour");case"percent":return i.getMessage("abbrev-percent");case"degree fahrenheit":case"degrees fahrenheit":case"fahrenheit":return i.getMessage("abbrev-fahrenheit");case"degree celsius":case"degrees celsius":case"celsius":return i.getMessage("abbrev-celsius");case"kelvin":return i.getMessage("abbrev-kelvin");case"meter":case"meters":case"metre":case"metres":return i.getMessage("abbrev-meter");case"kilometer":case"kilometers":case"kilometre":case"kilometres":return i.getMessage("abbrev-kilometer");case"day":case"days":return i.getMessage("abbrev-day");case"hour":case"hours":return i.getMessage("abbrev-hour");case"minute":case"minutes":return i.getMessage("abbrev-minute");case"second":case"seconds":return i.getMessage("abbrev-second");case"millisecond":case"milliseconds":return i.getMessage("abbrev-millisecond");case"foot":case"feet":return i.getMessage("abbrev-foot");default:return e}},convert:function(e,t,n){switch(t){case"degree celsius":case"degrees celsius":case"celsius":"degree fahrenheit"===(n||r.UNITS.temperature)&&(n=r.UNITS.temperature,e=1.8*e+32);break;case"degree fahrenheit":case"degrees fahrenheit":case"fahrenheit":"degree celsius"===(n||r.UNITS.temperature)&&(n=r.UNITS.temperature,e=(e-32)/1.8)}return{value:e,unit:n||t}}};e.exports=o},function(e,t,n){"use strict";var r=n(8),i=n(42);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(e,t,n){var r=n(1),i=n(54),o=r.WeakMap;e.exports="function"==typeof o&&/native code/.test(i(o))},function(e,t,n){"use strict";var r=n(59),i=n(63);e.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(e,t,n){var r=n(1);e.exports=r.Promise},function(e,t,n){var r,i,o,a,s,c,u,l,h=n(1),f=n(29).f,d=n(17),p=n(90).set,m=n(92),v=h.MutationObserver||h.WebKitMutationObserver,g=h.process,y=h.Promise,b="process"==d(g),w=f(h,"queueMicrotask"),E=w&&w.value;E||(r=function(){var e,t;for(b&&(e=g.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?a():o=void 0,e}}o=void 0,e&&e.enter()},b?a=function(){g.nextTick(r)}:v&&!m?(s=!0,c=document.createTextNode(""),new v(r).observe(c,{characterData:!0}),a=function(){c.data=s=!s}):y&&y.resolve?(u=y.resolve(void 0),l=u.then,a=function(){l.call(u,r)}):a=function(){p.call(h,r)}),e.exports=E||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,a()),o=t}},function(e,t,n){var r=n(4),i=n(6),o=n(93);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){var r=n(1);e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t,n){var r=n(18),i=n(49).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(r(e))}},function(e,t,n){var r=n(6);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){n(81)("asyncIterator")},function(e,t,n){"use strict";(function(e){var t,r=(t=n(133))&&"object"==typeof t&&"default"in t?t.default:t;if("undefined"==typeof Intl)void 0!==e?e.Intl={PluralRules:r}:"undefined"!=typeof window?window.Intl={PluralRules:r}:this.Intl={PluralRules:r},r.polyfill=!0;else if(Intl.PluralRules){var i=["en","es","ru","zh"];Intl.PluralRules.supportedLocalesOf(i).length<i.length&&(Intl.PluralRules=r,r.polyfill=!0)}else Intl.PluralRules=r,r.polyfill=!0}).call(this,n(48))},function(e,t,n){"use strict";(function(t){function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=r(n(134)),o=r(n(135));function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self;function s(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function c(e,t){return e(t={exports:{}},t.exports),t.exports}var u=c((function(e,t){function n(e,t){return t?"other":1==e?"one":"other"}function r(e,t){return t?"other":0==e||1==e?"one":"other"}function i(e,t){var n=!String(e).split(".")[1];return t?"other":1==e&&n?"one":"other"}function o(e,t){return"other"}function a(e,t){return t?"other":1==e?"one":2==e?"two":"other"}!function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),e.exports=n}(0,{_in:o,af:n,ak:r,am:function(e,t){return t?"other":e>=0&&e<=1?"one":"other"},an:n,ar:function(e,t){var n=String(e).split("."),r=Number(n[0])==e&&n[0].slice(-2);return t?"other":0==e?"zero":1==e?"one":2==e?"two":r>=3&&r<=10?"few":r>=11&&r<=99?"many":"other"},ars:function(e,t){var n=String(e).split("."),r=Number(n[0])==e&&n[0].slice(-2);return t?"other":0==e?"zero":1==e?"one":2==e?"two":r>=3&&r<=10?"few":r>=11&&r<=99?"many":"other"},as:function(e,t){return t?1==e||5==e||7==e||8==e||9==e||10==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":e>=0&&e<=1?"one":"other"},asa:n,ast:i,az:function(e,t){var n=String(e).split(".")[0],r=n.slice(-1),i=n.slice(-2),o=n.slice(-3);return t?1==r||2==r||5==r||7==r||8==r||20==i||50==i||70==i||80==i?"one":3==r||4==r||100==o||200==o||300==o||400==o||500==o||600==o||700==o||800==o||900==o?"few":0==n||6==r||40==i||60==i||90==i?"many":"other":1==e?"one":"other"},be:function(e,t){var n=String(e).split("."),r=Number(n[0])==e,i=r&&n[0].slice(-1),o=r&&n[0].slice(-2);return t?2!=i&&3!=i||12==o||13==o?"other":"few":1==i&&11!=o?"one":i>=2&&i<=4&&(o<12||o>14)?"few":r&&0==i||i>=5&&i<=9||o>=11&&o<=14?"many":"other"},bem:n,bez:n,bg:n,bho:r,bm:o,bn:function(e,t){return t?1==e||5==e||7==e||8==e||9==e||10==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":e>=0&&e<=1?"one":"other"},bo:o,br:function(e,t){var n=String(e).split("."),r=Number(n[0])==e,i=r&&n[0].slice(-1),o=r&&n[0].slice(-2),a=r&&n[0].slice(-6);return t?"other":1==i&&11!=o&&71!=o&&91!=o?"one":2==i&&12!=o&&72!=o&&92!=o?"two":(3==i||4==i||9==i)&&(o<10||o>19)&&(o<70||o>79)&&(o<90||o>99)?"few":0!=e&&r&&0==a?"many":"other"},brx:n,bs:function(e,t){var n=String(e).split("."),r=n[0],i=n[1]||"",o=!n[1],a=r.slice(-1),s=r.slice(-2),c=i.slice(-1),u=i.slice(-2);return t?"other":o&&1==a&&11!=s||1==c&&11!=u?"one":o&&a>=2&&a<=4&&(s<12||s>14)||c>=2&&c<=4&&(u<12||u>14)?"few":"other"},ca:function(e,t){var n=!String(e).split(".")[1];return t?1==e||3==e?"one":2==e?"two":4==e?"few":"other":1==e&&n?"one":"other"},ce:n,ceb:function(e,t){var n=String(e).split("."),r=n[0],i=n[1]||"",o=!n[1],a=r.slice(-1),s=i.slice(-1);return t?"other":o&&(1==r||2==r||3==r)||o&&4!=a&&6!=a&&9!=a||!o&&4!=s&&6!=s&&9!=s?"one":"other"},cgg:n,chr:n,ckb:n,cs:function(e,t){var n=String(e).split("."),r=n[0],i=!n[1];return t?"other":1==e&&i?"one":r>=2&&r<=4&&i?"few":i?"other":"many"},cy:function(e,t){return t?0==e||7==e||8==e||9==e?"zero":1==e?"one":2==e?"two":3==e||4==e?"few":5==e||6==e?"many":"other":0==e?"zero":1==e?"one":2==e?"two":3==e?"few":6==e?"many":"other"},da:function(e,t){var n=String(e).split("."),r=n[0],i=Number(n[0])==e;return t||1!=e&&(i||0!=r&&1!=r)?"other":"one"},de:i,dsb:function(e,t){var n=String(e).split("."),r=n[0],i=n[1]||"",o=!n[1],a=r.slice(-2),s=i.slice(-2);return t?"other":o&&1==a||1==s?"one":o&&2==a||2==s?"two":o&&(3==a||4==a)||3==s||4==s?"few":"other"},dv:n,dz:o,ee:n,el:n,en:function(e,t){var n=String(e).split("."),r=!n[1],i=Number(n[0])==e,o=i&&n[0].slice(-1),a=i&&n[0].slice(-2);return t?1==o&&11!=a?"one":2==o&&12!=a?"two":3==o&&13!=a?"few":"other":1==e&&r?"one":"other"},eo:n,es:n,et:i,eu:n,fa:function(e,t){return t?"other":e>=0&&e<=1?"one":"other"},ff:function(e,t){return t?"other":e>=0&&e<2?"one":"other"},fi:i,fil:function(e,t){var n=String(e).split("."),r=n[0],i=n[1]||"",o=!n[1],a=r.slice(-1),s=i.slice(-1);return t?1==e?"one":"other":o&&(1==r||2==r||3==r)||o&&4!=a&&6!=a&&9!=a||!o&&4!=s&&6!=s&&9!=s?"one":"other"},fo:n,fr:function(e,t){return t?1==e?"one":"other":e>=0&&e<2?"one":"other"},fur:n,fy:i,ga:function(e,t){var n=String(e).split("."),r=Number(n[0])==e;return t?1==e?"one":"other":1==e?"one":2==e?"two":r&&e>=3&&e<=6?"few":r&&e>=7&&e<=10?"many":"other"},gd:function(e,t){var n=String(e).split("."),r=Number(n[0])==e;return t?1==e||11==e?"one":2==e||12==e?"two":3==e||13==e?"few":"other":1==e||11==e?"one":2==e||12==e?"two":r&&e>=3&&e<=10||r&&e>=13&&e<=19?"few":"other"},gl:i,gsw:n,gu:function(e,t){return t?1==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":e>=0&&e<=1?"one":"other"},guw:r,gv:function(e,t){var n=String(e).split("."),r=n[0],i=!n[1],o=r.slice(-1),a=r.slice(-2);return t?"other":i&&1==o?"one":i&&2==o?"two":!i||0!=a&&20!=a&&40!=a&&60!=a&&80!=a?i?"other":"many":"few"},ha:n,haw:n,he:function(e,t){var n=String(e).split("."),r=n[0],i=!n[1],o=Number(n[0])==e,a=o&&n[0].slice(-1);return t?"other":1==e&&i?"one":2==r&&i?"two":i&&(e<0||e>10)&&o&&0==a?"many":"other"},hi:function(e,t){return t?1==e?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":e>=0&&e<=1?"one":"other"},hr:function(e,t){var n=String(e).split("."),r=n[0],i=n[1]||"",o=!n[1],a=r.slice(-1),s=r.slice(-2),c=i.slice(-1),u=i.slice(-2);return t?"other":o&&1==a&&11!=s||1==c&&11!=u?"one":o&&a>=2&&a<=4&&(s<12||s>14)||c>=2&&c<=4&&(u<12||u>14)?"few":"other"},hsb:function(e,t){var n=String(e).split("."),r=n[0],i=n[1]||"",o=!n[1],a=r.slice(-2),s=i.slice(-2);return t?"other":o&&1==a||1==s?"one":o&&2==a||2==s?"two":o&&(3==a||4==a)||3==s||4==s?"few":"other"},hu:function(e,t){return t?1==e||5==e?"one":"other":1==e?"one":"other"},hy:function(e,t){return t?1==e?"one":"other":e>=0&&e<2?"one":"other"},ia:i,id:o,ig:o,ii:o,io:i,is:function(e,t){var n=String(e).split("."),r=n[0],i=Number(n[0])==e,o=r.slice(-1),a=r.slice(-2);return t?"other":i&&1==o&&11!=a||!i?"one":"other"},it:function(e,t){var n=!String(e).split(".")[1];return t?11==e||8==e||80==e||800==e?"many":"other":1==e&&n?"one":"other"},iu:a,iw:function(e,t){var n=String(e).split("."),r=n[0],i=!n[1],o=Number(n[0])==e,a=o&&n[0].slice(-1);return t?"other":1==e&&i?"one":2==r&&i?"two":i&&(e<0||e>10)&&o&&0==a?"many":"other"},ja:o,jbo:o,jgo:n,ji:i,jmc:n,jv:o,jw:o,ka:function(e,t){var n=String(e).split(".")[0],r=n.slice(-2);return t?1==n?"one":0==n||r>=2&&r<=20||40==r||60==r||80==r?"many":"other":1==e?"one":"other"},kab:function(e,t){return t?"other":e>=0&&e<2?"one":"other"},kaj:n,kcg:n,kde:o,kea:o,kk:function(e,t){var n=String(e).split("."),r=Number(n[0])==e,i=r&&n[0].slice(-1);return t?6==i||9==i||r&&0==i&&0!=e?"many":"other":1==e?"one":"other"},kkj:n,kl:n,km:o,kn:function(e,t){return t?"other":e>=0&&e<=1?"one":"other"},ko:o,ks:n,ksb:n,ksh:function(e,t){return t?"other":0==e?"zero":1==e?"one":"other"},ku:n,kw:function(e,t){var n=String(e).split("."),r=Number(n[0])==e,i=r&&n[0].slice(-2),o=r&&n[0].slice(-3),a=r&&n[0].slice(-5),s=r&&n[0].slice(-6);return t?r&&e>=1&&e<=4||i>=1&&i<=4||i>=21&&i<=24||i>=41&&i<=44||i>=61&&i<=64||i>=81&&i<=84?"one":5==e||5==i?"many":"other":0==e?"zero":1==e?"one":2==i||22==i||42==i||62==i||82==i||r&&0==o&&(a>=1e3&&a<=2e4||4e4==a||6e4==a||8e4==a)||0!=e&&1e5==s?"two":3==i||23==i||43==i||63==i||83==i?"few":1==e||1!=i&&21!=i&&41!=i&&61!=i&&81!=i?"other":"many"},ky:n,lag:function(e,t){var n=String(e).split(".")[0];return t?"other":0==e?"zero":0!=n&&1!=n||0==e?"other":"one"},lb:n,lg:n,lkt:o,ln:r,lo:function(e,t){return t&&1==e?"one":"other"},lt:function(e,t){var n=String(e).split("."),r=n[1]||"",i=Number(n[0])==e,o=i&&n[0].slice(-1),a=i&&n[0].slice(-2);return t?"other":1==o&&(a<11||a>19)?"one":o>=2&&o<=9&&(a<11||a>19)?"few":0!=r?"many":"other"},lv:function(e,t){var n=String(e).split("."),r=n[1]||"",i=r.length,o=Number(n[0])==e,a=o&&n[0].slice(-1),s=o&&n[0].slice(-2),c=r.slice(-2),u=r.slice(-1);return t?"other":o&&0==a||s>=11&&s<=19||2==i&&c>=11&&c<=19?"zero":1==a&&11!=s||2==i&&1==u&&11!=c||2!=i&&1==u?"one":"other"},mas:n,mg:r,mgo:n,mk:function(e,t){var n=String(e).split("."),r=n[0],i=n[1]||"",o=!n[1],a=r.slice(-1),s=r.slice(-2),c=i.slice(-1),u=i.slice(-2);return t?1==a&&11!=s?"one":2==a&&12!=s?"two":7!=a&&8!=a||17==s||18==s?"other":"many":o&&1==a&&11!=s||1==c&&11!=u?"one":"other"},ml:n,mn:n,mo:function(e,t){var n=String(e).split("."),r=!n[1],i=Number(n[0])==e&&n[0].slice(-2);return t?1==e?"one":"other":1==e&&r?"one":!r||0==e||i>=2&&i<=19?"few":"other"},mr:function(e,t){return t?1==e?"one":2==e||3==e?"two":4==e?"few":"other":1==e?"one":"other"},ms:function(e,t){return t&&1==e?"one":"other"},mt:function(e,t){var n=String(e).split("."),r=Number(n[0])==e&&n[0].slice(-2);return t?"other":1==e?"one":0==e||r>=2&&r<=10?"few":r>=11&&r<=19?"many":"other"},my:o,nah:n,naq:a,nb:n,nd:n,ne:function(e,t){var n=String(e).split("."),r=Number(n[0])==e;return t?r&&e>=1&&e<=4?"one":"other":1==e?"one":"other"},nl:i,nn:n,nnh:n,no:n,nqo:o,nr:n,nso:r,ny:n,nyn:n,om:n,or:function(e,t){var n=String(e).split("."),r=Number(n[0])==e;return t?1==e||5==e||r&&e>=7&&e<=9?"one":2==e||3==e?"two":4==e?"few":6==e?"many":"other":1==e?"one":"other"},os:n,osa:o,pa:r,pap:n,pl:function(e,t){var n=String(e).split("."),r=n[0],i=!n[1],o=r.slice(-1),a=r.slice(-2);return t?"other":1==e&&i?"one":i&&o>=2&&o<=4&&(a<12||a>14)?"few":i&&1!=r&&(0==o||1==o)||i&&o>=5&&o<=9||i&&a>=12&&a<=14?"many":"other"},prg:function(e,t){var n=String(e).split("."),r=n[1]||"",i=r.length,o=Number(n[0])==e,a=o&&n[0].slice(-1),s=o&&n[0].slice(-2),c=r.slice(-2),u=r.slice(-1);return t?"other":o&&0==a||s>=11&&s<=19||2==i&&c>=11&&c<=19?"zero":1==a&&11!=s||2==i&&1==u&&11!=c||2!=i&&1==u?"one":"other"},ps:n,pt:function(e,t){var n=String(e).split(".")[0];return t?"other":0==n||1==n?"one":"other"},pt_PT:i,rm:n,ro:function(e,t){var n=String(e).split("."),r=!n[1],i=Number(n[0])==e&&n[0].slice(-2);return t?1==e?"one":"other":1==e&&r?"one":!r||0==e||i>=2&&i<=19?"few":"other"},rof:n,root:o,ru:function(e,t){var n=String(e).split("."),r=n[0],i=!n[1],o=r.slice(-1),a=r.slice(-2);return t?"other":i&&1==o&&11!=a?"one":i&&o>=2&&o<=4&&(a<12||a>14)?"few":i&&0==o||i&&o>=5&&o<=9||i&&a>=11&&a<=14?"many":"other"},rwk:n,sah:o,saq:n,sc:function(e,t){var n=!String(e).split(".")[1];return t?11==e||8==e||80==e||800==e?"many":"other":1==e&&n?"one":"other"},scn:function(e,t){var n=!String(e).split(".")[1];return t?11==e||8==e||80==e||800==e?"many":"other":1==e&&n?"one":"other"},sd:n,sdh:n,se:a,seh:n,ses:o,sg:o,sh:function(e,t){var n=String(e).split("."),r=n[0],i=n[1]||"",o=!n[1],a=r.slice(-1),s=r.slice(-2),c=i.slice(-1),u=i.slice(-2);return t?"other":o&&1==a&&11!=s||1==c&&11!=u?"one":o&&a>=2&&a<=4&&(s<12||s>14)||c>=2&&c<=4&&(u<12||u>14)?"few":"other"},shi:function(e,t){var n=String(e).split("."),r=Number(n[0])==e;return t?"other":e>=0&&e<=1?"one":r&&e>=2&&e<=10?"few":"other"},si:function(e,t){var n=String(e).split("."),r=n[0],i=n[1]||"";return t?"other":0==e||1==e||0==r&&1==i?"one":"other"},sk:function(e,t){var n=String(e).split("."),r=n[0],i=!n[1];return t?"other":1==e&&i?"one":r>=2&&r<=4&&i?"few":i?"other":"many"},sl:function(e,t){var n=String(e).split("."),r=n[0],i=!n[1],o=r.slice(-2);return t?"other":i&&1==o?"one":i&&2==o?"two":i&&(3==o||4==o)||!i?"few":"other"},sma:a,smi:a,smj:a,smn:a,sms:a,sn:n,so:n,sq:function(e,t){var n=String(e).split("."),r=Number(n[0])==e,i=r&&n[0].slice(-1),o=r&&n[0].slice(-2);return t?1==e?"one":4==i&&14!=o?"many":"other":1==e?"one":"other"},sr:function(e,t){var n=String(e).split("."),r=n[0],i=n[1]||"",o=!n[1],a=r.slice(-1),s=r.slice(-2),c=i.slice(-1),u=i.slice(-2);return t?"other":o&&1==a&&11!=s||1==c&&11!=u?"one":o&&a>=2&&a<=4&&(s<12||s>14)||c>=2&&c<=4&&(u<12||u>14)?"few":"other"},ss:n,ssy:n,st:n,su:o,sv:function(e,t){var n=String(e).split("."),r=!n[1],i=Number(n[0])==e,o=i&&n[0].slice(-1),a=i&&n[0].slice(-2);return t?1!=o&&2!=o||11==a||12==a?"other":"one":1==e&&r?"one":"other"},sw:i,syr:n,ta:n,te:n,teo:n,th:o,ti:r,tig:n,tk:function(e,t){var n=String(e).split("."),r=Number(n[0])==e&&n[0].slice(-1);return t?6==r||9==r||10==e?"few":"other":1==e?"one":"other"},tl:function(e,t){var n=String(e).split("."),r=n[0],i=n[1]||"",o=!n[1],a=r.slice(-1),s=i.slice(-1);return t?1==e?"one":"other":o&&(1==r||2==r||3==r)||o&&4!=a&&6!=a&&9!=a||!o&&4!=s&&6!=s&&9!=s?"one":"other"},tn:n,to:o,tr:n,ts:n,tzm:function(e,t){var n=String(e).split("."),r=Number(n[0])==e;return t?"other":0==e||1==e||r&&e>=11&&e<=99?"one":"other"},ug:n,uk:function(e,t){var n=String(e).split("."),r=n[0],i=!n[1],o=Number(n[0])==e,a=o&&n[0].slice(-1),s=o&&n[0].slice(-2),c=r.slice(-1),u=r.slice(-2);return t?3==a&&13!=s?"few":"other":i&&1==c&&11!=u?"one":i&&c>=2&&c<=4&&(u<12||u>14)?"few":i&&0==c||i&&c>=5&&c<=9||i&&u>=11&&u<=14?"many":"other"},ur:i,uz:n,ve:n,vi:function(e,t){return t&&1==e?"one":"other"},vo:n,vun:n,wa:r,wae:n,wo:o,xh:n,xog:n,yi:i,yo:o,yue:o,zh:o,zu:function(e,t){return t?"other":e>=0&&e<=1?"one":"other"}})})),l=s(u),h=Object.freeze({__proto__:null,default:l,__moduleExports:u}),f=c((function(e,t){var n="zero",r="one",i="two",o="few",a="many",s="other",c={cardinal:[r,s],ordinal:[s]},u={cardinal:[s],ordinal:[s]},l={cardinal:[r,o,a,s],ordinal:[s]},h={cardinal:[r,s],ordinal:[r,s]},f={cardinal:[r,i,s],ordinal:[s]};!function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),e.exports=n}(0,{_in:u,af:c,ak:c,am:c,an:c,ar:{cardinal:[n,r,i,o,a,s],ordinal:[s]},ars:{cardinal:[n,r,i,o,a,s],ordinal:[s]},as:{cardinal:[r,s],ordinal:[r,i,o,a,s]},asa:c,ast:c,az:{cardinal:[r,s],ordinal:[r,o,a,s]},be:{cardinal:[r,o,a,s],ordinal:[o,s]},bem:c,bez:c,bg:c,bho:c,bm:u,bn:{cardinal:[r,s],ordinal:[r,i,o,a,s]},bo:u,br:{cardinal:[r,i,o,a,s],ordinal:[s]},brx:c,bs:{cardinal:[r,o,s],ordinal:[s]},ca:{cardinal:[r,s],ordinal:[r,i,o,s]},ce:c,ceb:c,cgg:c,chr:c,ckb:c,cs:l,cy:{cardinal:[n,r,i,o,a,s],ordinal:[n,r,i,o,a,s]},da:c,de:c,dsb:{cardinal:[r,i,o,s],ordinal:[s]},dv:c,dz:u,ee:c,el:c,en:{cardinal:[r,s],ordinal:[r,i,o,s]},eo:c,es:c,et:c,eu:c,fa:c,ff:c,fi:c,fil:h,fo:c,fr:h,fur:c,fy:c,ga:{cardinal:[r,i,o,a,s],ordinal:[r,s]},gd:{cardinal:[r,i,o,s],ordinal:[r,i,o,s]},gl:c,gsw:c,gu:{cardinal:[r,s],ordinal:[r,i,o,a,s]},guw:c,gv:{cardinal:[r,i,o,a,s],ordinal:[s]},ha:c,haw:c,he:{cardinal:[r,i,a,s],ordinal:[s]},hi:{cardinal:[r,s],ordinal:[r,i,o,a,s]},hr:{cardinal:[r,o,s],ordinal:[s]},hsb:{cardinal:[r,i,o,s],ordinal:[s]},hu:h,hy:h,ia:c,id:u,ig:u,ii:u,io:c,is:c,it:{cardinal:[r,s],ordinal:[a,s]},iu:f,iw:{cardinal:[r,i,a,s],ordinal:[s]},ja:u,jbo:u,jgo:c,ji:c,jmc:c,jv:u,jw:u,ka:{cardinal:[r,s],ordinal:[r,a,s]},kab:c,kaj:c,kcg:c,kde:u,kea:u,kk:{cardinal:[r,s],ordinal:[a,s]},kkj:c,kl:c,km:u,kn:c,ko:u,ks:c,ksb:c,ksh:{cardinal:[n,r,s],ordinal:[s]},ku:c,kw:{cardinal:[n,r,i,o,a,s],ordinal:[r,a,s]},ky:c,lag:{cardinal:[n,r,s],ordinal:[s]},lb:c,lg:c,lkt:u,ln:c,lo:{cardinal:[s],ordinal:[r,s]},lt:l,lv:{cardinal:[n,r,s],ordinal:[s]},mas:c,mg:c,mgo:c,mk:{cardinal:[r,s],ordinal:[r,i,a,s]},ml:c,mn:c,mo:{cardinal:[r,o,s],ordinal:[r,s]},mr:{cardinal:[r,s],ordinal:[r,i,o,s]},ms:{cardinal:[s],ordinal:[r,s]},mt:l,my:u,nah:c,naq:f,nb:c,nd:c,ne:h,nl:c,nn:c,nnh:c,no:c,nqo:u,nr:c,nso:c,ny:c,nyn:c,om:c,or:{cardinal:[r,s],ordinal:[r,i,o,a,s]},os:c,osa:u,pa:c,pap:c,pl:l,prg:{cardinal:[n,r,s],ordinal:[s]},ps:c,pt:c,pt_PT:c,rm:c,ro:{cardinal:[r,o,s],ordinal:[r,s]},rof:c,root:u,ru:l,rwk:c,sah:u,saq:c,sc:{cardinal:[r,s],ordinal:[a,s]},scn:{cardinal:[r,s],ordinal:[a,s]},sd:c,sdh:c,se:f,seh:c,ses:u,sg:u,sh:{cardinal:[r,o,s],ordinal:[s]},shi:{cardinal:[r,o,s],ordinal:[s]},si:c,sk:l,sl:{cardinal:[r,i,o,s],ordinal:[s]},sma:f,smi:f,smj:f,smn:f,sms:f,sn:c,so:c,sq:{cardinal:[r,s],ordinal:[r,a,s]},sr:{cardinal:[r,o,s],ordinal:[s]},ss:c,ssy:c,st:c,su:u,sv:h,sw:c,syr:c,ta:c,te:c,teo:c,th:u,ti:c,tig:c,tk:{cardinal:[r,s],ordinal:[o,s]},tl:h,tn:c,to:u,tr:c,ts:c,tzm:c,ug:c,uk:{cardinal:[r,o,a,s],ordinal:[o,s]},ur:c,uz:c,ve:c,vi:{cardinal:[s],ordinal:[r,s]},vo:c,vun:c,wa:c,wae:c,wo:u,xh:c,xog:c,yi:c,yo:u,yue:u,zh:u,zu:c})})),d=s(f),p=l||h,m=d||Object.freeze({__proto__:null,default:d,__moduleExports:f}),v="object"===("undefined"==typeof Intl?"undefined":a(Intl))&&Intl.NumberFormat||o,g=function(e){return"in"===e?"_in":"pt-PT"===e?"pt_PT":e},y=i(v,(function(e){return p[g(e)]}),(function(e,t){return m[g(e)][t?"ordinal":"cardinal"]}));e.exports=y}).call(this,n(48))},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}n.r(t);var s=function(e){if(!e)return[];Array.isArray(e)||(e=[e]);for(var t={},n=0;n<e.length;++n){var i=e[n];if(i&&"object"===r(i)&&(i=String(i)),"string"!=typeof i){var o="Locales should be strings, ".concat(JSON.stringify(i)," isn't.");throw new TypeError(o)}if("*"!==i[0]){if(!i.split("-").every((function(e){return/[a-z0-9]+/i.test(e)}))){var a=JSON.stringify(i),s="The locale ".concat(a," is not a structurally valid BCP 47 language tag.");throw new RangeError(s)}t[i]=!0}}return Object.keys(t)},c=function(e){if(!e)return"cardinal";if("cardinal"===e||"ordinal"===e)return e;throw new RangeError("Not a valid plural type: "+JSON.stringify(e))};t.default=function(e,t,n){var r=function(e){do{if(t(e))return e;e=e.replace(/-?[^-]*$/,"")}while(e);return null},o=function(e){for(var t=s(e),n=0;n<t.length;++n){var i=r(t[n]);if(i)return i}return r("undefined"!=typeof navigator&&navigator&&(navigator.userLanguage||navigator.language)||"en-US")},u=function(){function u(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,u),this._locale=o(n),this._select=t(this._locale),this._type=c(r.type),this._nf=new e("en",r)}return a(u,null,[{key:"supportedLocalesOf",value:function(e){return s(e).filter(r)}}]),a(u,[{key:"resolvedOptions",value:function(){var e=this._nf.resolvedOptions(),t=e.minimumIntegerDigits,r=e.minimumFractionDigits,i=e.maximumFractionDigits,o=e.minimumSignificantDigits,a=e.maximumSignificantDigits,s={locale:this._locale,minimumIntegerDigits:t,minimumFractionDigits:r,maximumFractionDigits:i,pluralCategories:n(this._locale,"ordinal"===this._type),type:this._type};return"number"==typeof o&&(s.minimumSignificantDigits=o,s.maximumSignificantDigits=a),s}},{key:"select",value:function(e){if(!(this instanceof u))throw new TypeError("select() called on incompatible ".concat(this));if("number"!=typeof e&&(e=Number(e)),!isFinite(e))return"other";var t=this._nf.format(Math.abs(e));return this._select(t,"ordinal"===this._type)}}]),u}();return Object.defineProperty(u,"prototype",{writable:!1}),u}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=n.minimumIntegerDigits,i=n.minimumFractionDigits,o=n.maximumFractionDigits,a=n.minimumSignificantDigits,s=n.maximumSignificantDigits;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._minID="number"==typeof r?r:1,this._minFD="number"==typeof i?i:0,this._maxFD="number"==typeof o?o:Math.max(this._minFD,3),"number"!=typeof a&&"number"!=typeof s||(this._minSD="number"==typeof a?a:1,this._maxSD="number"==typeof s?s:21)}var t,n,i;return t=e,(n=[{key:"resolvedOptions",value:function(){var e={minimumIntegerDigits:this._minID,minimumFractionDigits:this._minFD,maximumFractionDigits:this._maxFD};return"number"==typeof this._minSD&&(e.minimumSignificantDigits=this._minSD,e.maximumSignificantDigits=this._maxSD),e}},{key:"format",value:function(e){if(this._minSD){for(var t=String(e),n=0,r=0;r<t.length;++r){var i=t[r];i>="0"&&i<="9"&&++n}return n<this._minSD?e.toPrecision(this._minSD):n>this._maxSD?e.toPrecision(this._maxSD):t}return this._minFD>0?e.toFixed(this._minFD):0===this._maxFD?e.toFixed(0):String(e)}}])&&r(t.prototype,n),i&&r(t,i),e}();e.exports=i},function(e,t,n){"use strict";n.r(t),n.d(t,"DOMLocalization",(function(){return E})),n.d(t,"Localization",(function(){return g}));const r=/<|&#?\w+;/,i={"http://www.w3.org/1999/xhtml":["em","strong","small","s","cite","q","dfn","abbr","data","time","code","var","samp","kbd","sub","sup","i","b","u","mark","bdi","bdo","span","br","wbr"]},o={"http://www.w3.org/1999/xhtml":{global:["title","aria-label","aria-valuetext"],a:["download"],area:["download","alt"],input:["alt","placeholder"],menuitem:["label"],menu:["label"],optgroup:["label"],option:["label"],track:["label"],img:["alt"],textarea:["placeholder"],th:["abbr"]},"http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul":{global:["accesskey","aria-label","aria-valuetext","label","title","tooltiptext"],description:["value"],key:["key","keycode"],label:["value"],textbox:["placeholder","value"]}};function a(e,t){const{value:n}=t;if("string"==typeof n)if("title"===e.localName&&"http://www.w3.org/1999/xhtml"===e.namespaceURI)e.textContent=n;else if(r.test(n)){const t=e.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","template");t.innerHTML=n,function(e,t){for(const n of e.childNodes)if(n.nodeType!==n.TEXT_NODE)if(n.hasAttribute("data-l10n-name")){const r=u(t,n);e.replaceChild(r,n)}else if(f(n)){const t=l(n);e.replaceChild(t,n)}else console.warn(`An element of forbidden type "${n.localName}" was found in the translation. Only safe text-level elements and elements with data-l10n-name are allowed.`),e.replaceChild(h(n),n);t.textContent="",t.appendChild(e)}(t.content,e)}else e.textContent=n;c(t,e)}function s(e,t){if(!e)return!1;for(let n of e)if(n.name===t)return!0;return!1}function c(e,t){const n=t.hasAttribute("data-l10n-attrs")?t.getAttribute("data-l10n-attrs").split(",").map(e=>e.trim()):null;for(const r of Array.from(t.attributes))d(r.name,t,n)&&!s(e.attributes,r.name)&&t.removeAttribute(r.name);if(e.attributes)for(const r of Array.from(e.attributes))d(r.name,t,n)&&t.getAttribute(r.name)!==r.value&&t.setAttribute(r.name,r.value)}function u(e,t){const n=t.getAttribute("data-l10n-name"),r=e.querySelector(`[data-l10n-name="${n}"]`);if(!r)return console.warn(`An element named "${n}" wasn't found in the source.`),h(t);if(r.localName!==t.localName)return console.warn(`An element named "${n}" was found in the translation but its type ${t.localName} didn't match the element found in the source (${r.localName}).`),h(t);e.removeChild(r);return p(t,r.cloneNode(!1))}function l(e){const t=e.ownerDocument.createElement(e.localName);return p(e,t)}function h(e){return e.ownerDocument.createTextNode(e.textContent)}function f(e){const t=i[e.namespaceURI];return t&&t.includes(e.localName)}function d(e,t,n=null){if(n&&n.includes(e))return!0;const r=o[t.namespaceURI];if(!r)return!1;const i=e.toLowerCase(),a=t.localName;if(r.global.includes(i))return!0;if(!r[a])return!1;if(r[a].includes(i))return!0;if("http://www.w3.org/1999/xhtml"===t.namespaceURI&&"input"===a&&"value"===i){const e=t.type.toLowerCase();if("submit"===e||"button"===e||"reset"===e)return!0}return!1}function p(e,t){return t.textContent=e.textContent,c(e,t),t}class m extends Array{static from(e){return e instanceof this?e:new this(e)}}Symbol.iterator;class v extends m{constructor(e){if(super(),Symbol.asyncIterator in Object(e))this.iterator=e[Symbol.asyncIterator]();else{if(!(Symbol.iterator in Object(e)))throw new TypeError("Argument must implement the iteration protocol.");this.iterator=e[Symbol.iterator]()}}[Symbol.asyncIterator](){const e=this;let t=0;return{next:async()=>(e.length<=t&&e.push(e.iterator.next()),e[t++])}}async touchNext(e=1){let t=0;for(;t++<e;){const e=this[this.length-1];if(e&&(await e).done)break;this.push(this.iterator.next())}return this[this.length-1]}}class g{constructor(e=[],t){this.resourceIds=e,this.generateBundles=t,this.onChange(!0)}addResourceIds(e,t=!1){return this.resourceIds.push(...e),this.onChange(t),this.resourceIds.length}removeResourceIds(e){return this.resourceIds=this.resourceIds.filter(t=>!e.includes(t)),this.onChange(),this.resourceIds.length}async formatWithFallback(e,t){const n=[];let r=!1;for await(const i of this.bundles){r=!0;const o=w(t,i,e,n);if(0===o.size)break;if("undefined"!=typeof console){const e=i.locales[0],t=Array.from(o).join(", ");console.warn(`[fluent] Missing translations in ${e}: ${t}`)}}return r||"undefined"==typeof console||console.warn(`[fluent] Request for keys failed because no resource bundles got generated.\n  keys: ${JSON.stringify(e)}.\n  resourceIds: ${JSON.stringify(this.resourceIds)}.`),n}formatMessages(e){return this.formatWithFallback(e,b)}formatValues(e){return this.formatWithFallback(e,y)}async formatValue(e,t){const[n]=await this.formatValues([{id:e,args:t}]);return n}handleEvent(){this.onChange()}onChange(e=!1){this.bundles=v.from(this.generateBundles(this.resourceIds)),e&&this.bundles.touchNext(2)}}function y(e,t,n,r){return n.value?e.formatPattern(n.value,r,t):null}function b(e,t,n,r){const i={value:null,attributes:null};n.value&&(i.value=e.formatPattern(n.value,r,t));let o=Object.keys(n.attributes);if(o.length>0){i.attributes=new Array(o.length);for(let[a,s]of o.entries()){let o=e.formatPattern(n.attributes[s],r,t);i.attributes[a]={name:s,value:o}}}return i}function w(e,t,n,r){const i=[],o=new Set;return n.forEach(({id:n,args:a},s)=>{if(void 0!==r[s])return;let c=t.getMessage(n);if(c){if(i.length=0,r[s]=e(t,i,c,a),i.length>0&&"undefined"!=typeof console){const e=t.locales[0],r=i.join(", ");console.warn(`[fluent][resolver] errors in ${e}/${n}: ${r}.`)}}else o.add(n)}),o}class E extends g{constructor(e,t){super(e,t),this.roots=new Set,this.pendingrAF=null,this.pendingElements=new Set,this.windowElement=null,this.mutationObserver=null,this.observerConfig={attributes:!0,characterData:!1,childList:!0,subtree:!0,attributeFilter:["data-l10n-id","data-l10n-args"]}}onChange(e=!1){super.onChange(e),this.roots&&this.translateRoots()}setAttributes(e,t,n){return e.setAttribute("data-l10n-id",t),n?e.setAttribute("data-l10n-args",JSON.stringify(n)):e.removeAttribute("data-l10n-args"),e}getAttributes(e){return{id:e.getAttribute("data-l10n-id"),args:JSON.parse(e.getAttribute("data-l10n-args")||null)}}connectRoot(e){for(const t of this.roots)if(t===e||t.contains(e)||e.contains(t))throw new Error("Cannot add a root that overlaps with existing root.");if(this.windowElement){if(this.windowElement!==e.ownerDocument.defaultView)throw new Error("Cannot connect a root:\n          DOMLocalization already has a root from a different window.")}else this.windowElement=e.ownerDocument.defaultView,this.mutationObserver=new this.windowElement.MutationObserver(e=>this.translateMutations(e));this.roots.add(e),this.mutationObserver.observe(e,this.observerConfig)}disconnectRoot(e){return this.roots.delete(e),this.pauseObserving(),0===this.roots.size?(this.mutationObserver=null,this.windowElement=null,this.pendingrAF=null,this.pendingElements.clear(),!0):(this.resumeObserving(),!1)}translateRoots(){const e=Array.from(this.roots);return Promise.all(e.map(e=>this.translateFragment(e)))}pauseObserving(){this.mutationObserver&&(this.translateMutations(this.mutationObserver.takeRecords()),this.mutationObserver.disconnect())}resumeObserving(){if(this.mutationObserver)for(const e of this.roots)this.mutationObserver.observe(e,this.observerConfig)}translateMutations(e){for(const t of e)switch(t.type){case"attributes":t.target.hasAttribute("data-l10n-id")&&this.pendingElements.add(t.target);break;case"childList":for(const e of t.addedNodes)if(e.nodeType===e.ELEMENT_NODE)if(e.childElementCount)for(const t of this.getTranslatables(e))this.pendingElements.add(t);else e.hasAttribute("data-l10n-id")&&this.pendingElements.add(e)}this.pendingElements.size>0&&null===this.pendingrAF&&(this.pendingrAF=this.windowElement.requestAnimationFrame(()=>{this.translateElements(Array.from(this.pendingElements)),this.pendingElements.clear(),this.pendingrAF=null}))}translateFragment(e){return this.translateElements(this.getTranslatables(e))}async translateElements(e){if(!e.length)return;const t=e.map(this.getKeysForElement),n=await this.formatMessages(t);return this.applyTranslations(e,n)}applyTranslations(e,t){this.pauseObserving();for(let n=0;n<e.length;n++)void 0!==t[n]&&a(e[n],t[n]);this.resumeObserving()}getTranslatables(e){const t=Array.from(e.querySelectorAll("[data-l10n-id]"));return"function"==typeof e.hasAttribute&&e.hasAttribute("data-l10n-id")&&t.push(e),t}getKeysForElement(e){return{id:e.getAttribute("data-l10n-id"),args:JSON.parse(e.getAttribute("data-l10n-args")||null)}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"FluentBundle",(function(){return b})),n.d(t,"FluentResource",(function(){return V})),n.d(t,"FluentType",(function(){return r})),n.d(t,"FluentNumber",(function(){return o})),n.d(t,"FluentDateTime",(function(){return a}));class r{constructor(e){this.value=e}valueOf(){return this.value}}class i extends r{constructor(e="???"){super(e)}toString(e){return`{${this.value}}`}}class o extends r{constructor(e,t={}){super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),this.value.toString(10)}}}class a extends r{constructor(e,t={}){super(e),this.opts=t}toString(e){try{return e.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(t){return e.reportError(t),new Date(this.value).toISOString()}}}function s(e,t,n){if(n===t)return!0;if(n instanceof o&&t instanceof o&&n.value===t.value)return!0;if(t instanceof o&&"string"==typeof n){if(n===e.memoizeIntlObject(Intl.PluralRules,t.opts).select(t.value))return!0}return!1}function c(e,t,n){return t[n]?f(e,t[n].value):(e.reportError(new RangeError("No default")),new i)}function u(e,t){const n=[],r=Object.create(null);for(const i of t)"narg"===i.type?r[i.name]=l(e,i.value):n.push(l(e,i));return{positional:n,named:r}}function l(e,t){switch(t.type){case"str":return t.value;case"num":return new o(t.value,{minimumFractionDigits:t.precision});case"var":return function(e,{name:t}){let n;if(e.params){if(!Object.prototype.hasOwnProperty.call(e.params,t))return new i("$"+t);n=e.params[t]}else{if(!e.args||!Object.prototype.hasOwnProperty.call(e.args,t))return e.reportError(new ReferenceError("Unknown variable: $"+t)),new i("$"+t);n=e.args[t]}if(n instanceof r)return n;switch(typeof n){case"string":return n;case"number":return new o(n);case"object":if(n instanceof Date)return new a(n.getTime());default:return e.reportError(new TypeError(`Variable type not supported: $${t}, ${typeof n}`)),new i("$"+t)}}(e,t);case"mesg":return function(e,{name:t,attr:n}){const r=e.bundle._messages.get(t);if(!r)return e.reportError(new ReferenceError("Unknown message: "+t)),new i(t);if(n){const o=r.attributes[n];return o?f(e,o):(e.reportError(new ReferenceError("Unknown attribute: "+n)),new i(`${t}.${n}`))}if(r.value)return f(e,r.value);return e.reportError(new ReferenceError("No value: "+t)),new i(t)}(e,t);case"term":return function(e,{name:t,attr:n,args:r}){const o="-"+t,a=e.bundle._terms.get(o);if(!a)return e.reportError(new ReferenceError("Unknown term: "+o)),new i(o);if(n){const t=a.attributes[n];if(t){e.params=u(e,r).named;const n=f(e,t);return e.params=null,n}return e.reportError(new ReferenceError("Unknown attribute: "+n)),new i(`${o}.${n}`)}e.params=u(e,r).named;const s=f(e,a.value);return e.params=null,s}(e,t);case"func":return function(e,{name:t,args:n}){let r=e.bundle._functions[t];if(!r)return e.reportError(new ReferenceError(`Unknown function: ${t}()`)),new i(t+"()");if("function"!=typeof r)return e.reportError(new TypeError(`Function ${t}() is not callable`)),new i(t+"()");try{let t=u(e,n);return r(t.positional,t.named)}catch(n){return e.reportError(n),new i(t+"()")}}(e,t);case"select":return function(e,{selector:t,variants:n,star:r}){let o=l(e,t);if(o instanceof i)return c(e,n,r);for(const t of n){const n=l(e,t.key);if(s(e,o,n))return f(e,t.value)}return c(e,n,r)}(e,t);default:return new i}}function h(e,t){if(e.dirty.has(t))return e.reportError(new RangeError("Cyclic reference")),new i;e.dirty.add(t);const n=[],r=e.bundle._useIsolating&&t.length>1;for(const i of t)if("string"!=typeof i){if(e.placeables++,e.placeables>100)throw e.dirty.delete(t),new RangeError(`Too many placeables expanded: ${e.placeables}, max allowed is 100`);r&&n.push("⁨"),n.push(l(e,i).toString(e)),r&&n.push("⁩")}else n.push(e.bundle._transform(i));return e.dirty.delete(t),n.join("")}function f(e,t){return"string"==typeof t?e.bundle._transform(t):h(e,t)}class d{constructor(e,t,n){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=e,this.errors=t,this.args=n}reportError(e){if(!this.errors)throw e;this.errors.push(e)}memoizeIntlObject(e,t){let n=this.bundle._intls.get(e);n||(n={},this.bundle._intls.set(e,n));let r=JSON.stringify(t);return n[r]||(n[r]=new e(this.bundle.locales,t)),n[r]}}function p(e,t){const n=Object.create(null);for(const[r,i]of Object.entries(e))t.includes(r)&&(n[r]=i.valueOf());return n}const m=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function v(e,t){let n=e[0];if(n instanceof i)return new i(`NUMBER(${n.valueOf()})`);if(n instanceof o||n instanceof a)return new o(n.valueOf(),{...n.opts,...p(t,m)});throw new TypeError("Invalid argument to NUMBER")}const g=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function y(e,t){let n=e[0];if(n instanceof i)return new i(`DATETIME(${n.valueOf()})`);if(n instanceof o||n instanceof a)return new a(n.valueOf(),{...n.opts,...p(t,g)});throw new TypeError("Invalid argument to DATETIME")}class b{constructor(e,{functions:t,useIsolating:n=!0,transform:r=(e=>e)}={}){this._terms=new Map,this._messages=new Map,this._intls=new WeakMap,this.locales=Array.isArray(e)?e:[e],this._functions={NUMBER:v,DATETIME:y,...t},this._useIsolating=n,this._transform=r}hasMessage(e){return this._messages.has(e)}getMessage(e){return this._messages.get(e)}addResource(e,{allowOverrides:t=!1}={}){const n=[];for(let r=0;r<e.body.length;r++){let i=e.body[r];if(i.id.startsWith("-")){if(!1===t&&this._terms.has(i.id)){n.push(new Error(`Attempt to override an existing term: "${i.id}"`));continue}this._terms.set(i.id,i)}else{if(!1===t&&this._messages.has(i.id)){n.push(new Error(`Attempt to override an existing message: "${i.id}"`));continue}this._messages.set(i.id,i)}}return n}formatPattern(e,t=null,n=null){if("string"==typeof e)return this._transform(e);let r=new d(this,n,t);try{return h(r,e).toString(r)}catch(e){if(r.errors)return r.errors.push(e),(new i).toString(r);throw e}}}const w=/^(-?[a-zA-Z][\w-]*) *= */gm,E=/\.([a-zA-Z][\w-]*) *= */y,_=/\*?\[/y,k=/(-?[0-9]+(?:\.([0-9]+))?)/y,S=/([a-zA-Z][\w-]*)/y,x=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,T=/^[A-Z][A-Z0-9_-]*$/,P=/([^{}\n\r]+)/y,O=/([^\\"\n\r]*)/y,C=/\\([\\"])/y,I=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,R=/^\n+/,L=/ +$/,A=/ *\r?\n/g,M=/( *)$/,D=/{\s*/y,j=/\s*}/y,N=/\[\s*/y,B=/\s*] */y,F=/\s*\(\s*/y,U=/\s*->\s*/y,H=/\s*:\s*/y,q=/\s*,?\s*/y,z=/\s+/y;class V{constructor(e){this.body=[],w.lastIndex=0;let t=0;for(;;){let n=w.exec(e);if(null===n)break;t=w.lastIndex;try{this.body.push(s(n[1]))}catch(e){if(e instanceof SyntaxError)continue;throw e}}function n(n){return n.lastIndex=t,n.test(e)}function r(n,r){if(e[t]===n)return t++,!0;if(r)throw new r("Expected "+n);return!1}function i(e,r){if(n(e))return t=e.lastIndex,!0;if(r)throw new r("Expected "+e.toString());return!1}function o(n){n.lastIndex=t;let r=n.exec(e);if(null===r)throw new SyntaxError("Expected "+n.toString());return t=n.lastIndex,r}function a(e){return o(e)[1]}function s(e){let t=c(),r=function(){let e=Object.create(null);for(;n(E);){let t=a(E),n=c();if(null===n)throw new SyntaxError("Expected attribute value");e[t]=n}return e}();if(null===t&&0===Object.keys(r).length)throw new SyntaxError("Expected message value or attributes");return{id:e,value:t,attributes:r}}function c(){let r;if(n(P)&&(r=a(P)),"{"===e[t]||"}"===e[t])return u(r?[r]:[],1/0);let i=g();return i?r?u([r,i],i.length):(i.value=y(i.value,R),u([i],i.length)):r?y(r,L):null}function u(r=[],i){for(;;){if(n(P)){r.push(a(P));continue}if("{"===e[t]){r.push(l());continue}if("}"===e[t])throw new SyntaxError("Unbalanced closing brace");let o=g();if(!o)break;r.push(o),i=Math.min(i,o.length)}let o=r.length-1,s=r[o];"string"==typeof s&&(r[o]=y(s,L));let c=[];for(let e of r)e instanceof $&&(e=e.value.slice(0,e.value.length-i)),e&&c.push(e);return c}function l(){i(D,SyntaxError);let e=h();if(i(j))return e;if(i(U)){let t=function(){let e,t=[],i=0;for(;n(_);){r("*")&&(e=i);let n=d(),o=c();if(null===o)throw new SyntaxError("Expected variant value");t[i++]={key:n,value:o}}if(0===i)return null;if(void 0===e)throw new SyntaxError("Expected default variant");return{variants:t,star:e}}();return i(j,SyntaxError),{type:"select",selector:e,...t}}throw new SyntaxError("Unclosed placeable")}function h(){if("{"===e[t])return l();if(n(x)){let[,n,r,a=null]=o(x);if("$"===n)return{type:"var",name:r};if(i(F)){let o=function(){let n=[];for(;;){switch(e[t]){case")":return t++,n;case void 0:throw new SyntaxError("Unclosed argument list")}n.push(f()),i(q)}}();if("-"===n)return{type:"term",name:r,attr:a,args:o};if(T.test(r))return{type:"func",name:r,args:o};throw new SyntaxError("Function names must be all upper-case")}return"-"===n?{type:"term",name:r,attr:a,args:[]}:{type:"mesg",name:r,attr:a}}return p()}function f(){let e=h();return"mesg"!==e.type?e:i(H)?{type:"narg",name:e.name,value:p()}:e}function d(){let e;return i(N,SyntaxError),e=n(k)?m():{type:"str",value:a(S)},i(B,SyntaxError),e}function p(){if(n(k))return m();if('"'===e[t])return function(){r('"',SyntaxError);let n="";for(;;){if(n+=a(O),"\\"!==e[t]){if(r('"'))return{type:"str",value:n};throw new SyntaxError("Unclosed string literal")}n+=v()}}();throw new SyntaxError("Invalid expression")}function m(){let[,e,t=""]=o(k),n=t.length;return{type:"num",value:parseFloat(e),precision:n}}function v(){if(n(C))return a(C);if(n(I)){let[,e,t]=o(I),n=parseInt(e||t,16);return n<=55295||57344<=n?String.fromCodePoint(n):"�"}throw new SyntaxError("Unknown escape sequence")}function g(){let n=t;switch(i(z),e[t]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return b(e.slice(n,t))}return" "===e[t-1]&&b(e.slice(n,t))}function y(e,t){return e.replace(t,"")}function b(e){let t=e.replace(A,"\n"),n=M.exec(e)[1].length;return new $(t,n)}}}class ${constructor(e,t){this.value=e,this.length=t}}},function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(36),n(37),n(9),n(139),n(44),n(78),n(23),n(145),n(43),n(148),n(3),n(208),n(5),n(110),n(105),n(45),n(157),n(150),n(140),n(33),n(146);var a=n(187),s=n(277),c=n(35),u=n(141),l=n(278),h=n(279),f=n(280),d=n(281),p=n(282),m=n(149),v=n(283),g=n(188),y=n(284),b=n(19),w=n(285),E=n(286),_=n(287),k=n(288),S=n(289),x=n(290),T=n(291),P=n(292),O=n(210),C=n(293),I=n(294),R=n(295),L=n(296),A=n(297),M=n(298),D=n(299),j=n(300),N=n(301),B=n(120),F=n(22),U=n(302),H=n(303),q=function(){function e(t,n,i,o){var j=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var F=o||{},q={on:C,level:S,instantaneousPower:_,voltage:H,current:v,frequency:y,brightness:h,color:f,colorTemperature:p};if(this.title=n.title,this.model=t,this.listeners=[],this.connected=this.model.connected,Array.isArray(n["@type"])&&n["@type"].length>0?this["@type"]=n["@type"]:this["@type"]=[],this.selectedCapability=n.selectedCapability,this.layoutIndex=n.layoutIndex,this.iconHref=n.iconHref||"",this.baseIcon=F.baseIcon||b.getMessage("thing-icons-thing-src"),this.format=i,this.displayedProperties=this.displayedProperties||{},this.displayedActions=this.displayedActions||{},i===m.ThingFormat.LINK_ICON?(this.container=document.getElementById("floorplan"),this.x=n.floorplanX,this.y=n.floorplanY):this.container=document.getElementById("things"),this.uiHref=null,n.links){var z,V=r(n.links);try{for(V.s();!(z=V.n()).done;){var $=z.value;if("alternate"===$.rel&&"text/html"===$.mediaType){$.href.startsWith("/proxy/")?this.uiHref="".concat($.href,"?jwt=").concat(c.jwt):($.href.startsWith("http://")||$.href.startsWith("https://")||$.href.startsWith("/extensions/"))&&(this.uiHref=$.href);break}}}catch(e){V.e(e)}finally{V.f()}}if(n.href){this.href=new URL(n.href,u.ORIGIN);var W=new URLSearchParams;W.set("referrer",encodeURIComponent(this.href.pathname.replace(/%2F/g,"%252F"))),this.eventsHref="".concat(this.href.pathname.replace(/%2F/g,"%252F"),"/events?").concat(W.toString()),this.id=decodeURIComponent(this.href.pathname.split("/").pop())}if(n.properties){var K=function(e){var t=n.properties[e],i=JSON.parse(JSON.stringify(t));if(t.unit){var o=B.convert(0,t.unit).unit;o!==t.unit&&(i.unit=o,t.hasOwnProperty("minimum")&&(i.minimum=B.convert(t.minimum,t.unit).value),t.hasOwnProperty("maximum")&&(i.maximum=B.convert(t.maximum,t.unit).value),t.hasOwnProperty("enum")&&(i.enum=t.enum.map((function(e){return B.convert(e,t.unit).value}))),t.hasOwnProperty("multipleOf")&&delete i.multipleOf)}var a,c=void 0,u=r(t.links);try{for(u.s();!(a=u.n()).done;){var m=a.value;if(!m.rel||"property"===m.rel){c=m.href;break}}}catch(e){u.e(e)}finally{u.f()}if(!c)return"continue";var b=void 0;switch(t["@type"]){case"BooleanProperty":b=new l(j,e,i);break;case"OnOffProperty":b=new C(j,e,i);break;case"LevelProperty":b=new S(j,e,i);break;case"BrightnessProperty":b=new h(j,e,i);break;case"ColorProperty":b=new f(j,e,i);break;case"ColorModeProperty":b=new d(j,e,i);break;case"ColorTemperatureProperty":b=new p(j,e,i);break;case"InstantaneousPowerProperty":b=new _(j,e,i);break;case"CurrentProperty":b=new v(j,e,i);break;case"VoltageProperty":b=new H(j,e,i);break;case"FrequencyProperty":b=new y(j,e,i);break;case"MotionProperty":b=new P(j,e,i);break;case"OpenProperty":b=new I(j,e,i);break;case"LeakProperty":b=new k(j,e,i);break;case"PushedProperty":b=new R(j,e,i);break;case"ImageProperty":b=new E(j,e,i);break;case"VideoProperty":b=new U(j,e,i);break;case"TemperatureProperty":b=new M(j,e,i);break;case"AlarmProperty":b=new s(j,e,i);break;case"TargetTemperatureProperty":b=new A(j,e,i);break;case"ThermostatModeProperty":b=new D(j,e,i);break;case"HeatingCoolingProperty":b=new w(j,e,i);break;case"LockedProperty":b=new T(j,e,i);break;default:if(q.hasOwnProperty(e)){var x=q[e];"level"===e&&j["@type"].includes("Light")&&(x=q.brightness),b=new x(j,e,i)}else if(t.enum)b=new g(j,e,i);else switch(t.type){case"string":b=new L(j,e,i);break;case"integer":case"number":b=new O(j,e,i);break;case"boolean":b=new l(j,e,i);break;default:return console.warn("Unable to build property detail for:",t),"continue"}}j.displayedProperties[e]={href:c,detail:b,property:t,convertedProperty:i}};for(var G in n.properties)K(G)}if(i===m.ThingFormat.EXPANDED){if(n.actions){var X,J,Y=r(n.links);try{for(Y.s();!(J=Y.n()).done;){var Q=J.value;if("actions"===Q.rel){X=Q.href;break}}}catch(e){Y.e(e)}finally{Y.f()}if(X)for(var Z in n.actions){var ee=n.actions[Z],te=void 0;switch(ee["@type"]){case"LockAction":te=new x(this,Z,ee,X);break;case"UnlockAction":te=new N(this,Z,ee,X);break;default:te=new a(this,Z,ee,X)}this.displayedActions[Z]={detail:te}}}var ne=[];n.events?(this.displayEvents=!0,ne.push({href:this.eventsHref,name:b.getMessage("event-log"),icon:"/images/rules-icon.png"})):this.displayEvents=!1,ne.push({listener:this.handleEdit.bind(this),name:b.getMessage("edit"),icon:"/images/edit-plain.svg"},{listener:this.handleRemove.bind(this),name:b.getMessage("remove"),icon:"/images/remove.svg"}),u.buildOverflowMenu(ne),document.getElementById("things-view").classList.contains("hidden")||u.showOverflowButton()}else u.hideOverflowButton();this.findProperties(),this.element=this.render(i),i===m.ThingFormat.EXPANDED&&(this.attachExpandedView(),this.connected||u.showPersistentMessage(b.getMessage("disconnected"))),this.onPropertyStatus=this.onPropertyStatus.bind(this),this.onEvent=this.onEvent.bind(this),this.onConnected=this.onConnected.bind(this),this.updateStatus()}var t,n,i;return t=e,(n=[{key:"findProperties",value:function(){}},{key:"attachExpandedView",value:function(){var e,t=r(Array.from(Object.values(this.displayedProperties)).sort((function(e,t){return e.detail.label.localeCompare(t.detail.label)})));try{for(t.s();!(e=t.n()).done;){var n=e.value;n.hasOwnProperty("attached")&&n.attached||!n.hasOwnProperty("detail")||(n.detail.attach(),n.attached=!0)}}catch(e){t.e(e)}finally{t.f()}var i,o=r(Array.from(Object.values(this.displayedActions)).sort((function(e,t){return e.detail.label.localeCompare(t.detail.label)})));try{for(o.s();!(i=o.n()).done;){var a=i.value;a.hasOwnProperty("attached")&&a.attached||!a.hasOwnProperty("detail")||(a.detail.attach(),a.attached=!0)}}catch(e){o.e(e)}finally{o.f()}this.layout=new j(this,this.element.querySelectorAll(".thing-detail-container"))}},{key:"iconView",value:function(){var e='data-icon-href="'.concat(this.iconHref,'"')||!1;return"\n      <webthing-custom-capability ".concat(e,">\n      </webthing-custom-capability>")}},{key:"detailLink",value:function(){return'<a href="'.concat(this.href.pathname.replace(/%2F/g,"%252F"),'"\n      class="thing-details-link" data-l10n-id="thing-details"></a>')}},{key:"uiLink",value:function(){return this.uiHref.startsWith("/extensions/")?'<a href="'.concat(this.uiHref,'" class="thing-ui-link"></a>'):'<a href="'.concat(this.uiHref,'" class="thing-ui-link"\n              target="_blank" rel="noopener"></a>')}},{key:"interactiveView",value:function(){var e="thing-".concat(F.escapeHtml(this.id));return'<div class="thing" draggable="true" id="'.concat(e,'"\n      data-layout-index="').concat(this.layoutIndex,'">\n      ').concat(this.uiHref?this.uiLink():"","\n      ").concat(this.detailLink(),"\n      ").concat(this.iconView(),'\n      <span class="thing-title">').concat(F.escapeHtml(this.title),"</span>\n    </div>")}},{key:"expandedView",value:function(){for(var e="",t=0,n=Object.values(this.displayedProperties);t<n.length;t++){var r=n[t];r.hasOwnProperty("detail")&&(e+='<div class="thing-detail-container">'.concat(r.detail.view(),"</div>"))}for(var i=0,o=Object.values(this.displayedActions);i<o.length;i++){var a=o[i];a.hasOwnProperty("detail")&&(e+='<div class="thing-detail-container">'.concat(a.detail.view(),"</div>"))}return'<div class="thing">\n      '.concat(this.iconView(),"\n      ").concat(e,"\n    </div>")}},{key:"updateProperty",value:function(e,t){return this.displayedProperties.hasOwnProperty(e)&&(t=B.convert(t,this.displayedProperties[e].property.unit,this.displayedProperties[e].convertedProperty.unit).value,this.format===m.ThingFormat.EXPANDED&&this.displayedProperties[e].detail.update(t)),t}},{key:"setProperty",value:function(e,t){t=B.convert(t,this.displayedProperties[e].convertedProperty.unit,this.displayedProperties[e].property.unit).value;var n=this.displayedProperties[e].property;t=F.adjustInputValue(t,n),this.model.setProperty(e,t)}},{key:"updateStatus",value:function(){this.model.subscribe(m.PROPERTY_STATUS,this.onPropertyStatus),this.model.subscribe(m.EVENT_OCCURRED,this.onEvent),this.model.subscribe(m.CONNECTED,this.onConnected)}},{key:"registerEventListener",value:function(e,t,n){e.addEventListener(t,n),this.listeners.push({element:e,event:t,handler:n})}},{key:"cleanup",value:function(){for(var e;void 0!==(e=this.listeners.pop());)e.element.removeEventListener(e.event,e.handler);this.model.unsubscribe(m.PROPERTY_STATUS,this.onPropertyStatus),this.model.unsubscribe(m.EVENT_OCCURRED,this.onEvent),this.model.unsubscribe(m.CONNECTED,this.onConnected)}},{key:"linkIconView",value:function(){return'<div\n        class="floorplan-thing"\n        data-x="'.concat(this.x,'"\n        data-y="').concat(this.y,'"\n        data-href="').concat(this.href.pathname.replace(/%2F/g,"%252F"),'"\n        >\n      ').concat(this.iconView(),'\n      <div class="floorplan-thing-title">').concat(F.escapeHtml(this.title),"</div>\n    </div>")}},{key:"render",value:function(e){var t=document.createElement("div");if(e==m.ThingFormat.LINK_ICON)return t.innerHTML=this.linkIconView().trim(),this.container.appendChild(t.firstChild);if(e==m.ThingFormat.EXPANDED)return t.innerHTML=this.expandedView().trim(),this.container.appendChild(t.firstChild);t.innerHTML=this.interactiveView().trim(),t.firstChild.ondragstart=this.handleDragStart.bind(this),t.firstChild.ondragover=this.handleDragOver.bind(this),t.firstChild.ondragenter=this.handleDragEnter.bind(this),t.firstChild.ondragleave=this.handleDragLeave.bind(this),t.firstChild.ondragend=this.handleDragEnd.bind(this),t.firstChild.ondrop=this.handleDrop.bind(this);var n,i=r(this.container.childNodes.values());try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.dataset.layoutIndex>this.layoutIndex)return this.container.insertBefore(t.firstChild,o)}}catch(e){i.e(e)}finally{i.f()}return this.container.appendChild(t.firstChild)}},{key:"handleDragStart",value:function(e){e.target.style.cursor="grabbing",e.dataTransfer.setData("text",e.target.id),e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move","vibrate"in navigator&&navigator.vibrate(50)}},{key:"handleDragOver",value:function(e){e.preventDefault(),this.container.childNodes.forEach((function(e){e.classList.remove("drag-start","drag-end")}));for(var t=e.target;!t.classList||!t.classList.contains("thing");)t=t.parentNode;t&&(e.dataTransfer.dropEffect="move",e.clientX-t.getBoundingClientRect().x<t.getBoundingClientRect().width/2?t.classList.add("drag-start"):t.classList.add("drag-end"))}},{key:"handleDragEnter",value:function(e){e.preventDefault()}},{key:"handleDragLeave",value:function(e){e.preventDefault();for(var t=e.target;!t.classList||!t.classList.contains("thing");)t=t.parentNode;t&&t.classList.remove("drag-start","drag-end")}},{key:"handleDrop",value:function(e){e.preventDefault(),e.stopPropagation();for(var t=e.target;!t.classList||!t.classList.contains("thing");)t=t.parentNode;var n=document.getElementById(e.dataTransfer.getData("text"));if(t&&n&&t.id!==n.id){var r=e.clientX,i=t.getBoundingClientRect().x,o=t.getBoundingClientRect().width;if(this.container.removeChild(n),r-i<o/2)this.container.insertBefore(n,t);else{var a=t.nextSibling;a?this.container.insertBefore(n,a):this.container.appendChild(n)}this.container.childNodes.forEach((function(e,t){e.dataset.layoutIndex=t;var n=F.unescapeHtml(e.id).replace(/^thing-/,"");c.setThingLayoutIndex(n,t).then((function(){u.gatewayModel.refreshThings()})).catch((function(e){console.error("Error trying to arrange thing ".concat(n,": ").concat(e))}))}))}}},{key:"handleDragEnd",value:function(){this.container.childNodes.forEach((function(e){e.classList.remove("drag-start","drag-end"),e.style.cursor="grab"}))}},{key:"handleEdit",value:function(){var e=new CustomEvent("_contextmenu",{detail:{thingId:this.id,thingTitle:this.title,thingIcon:this.baseIcon,action:"edit",capabilities:this["@type"],selectedCapability:this.selectedCapability,iconHref:this.iconHref}});window.dispatchEvent(e)}},{key:"handleRemove",value:function(){var e=new CustomEvent("_contextmenu",{detail:{thingId:this.id,thingTitle:this.title,thingIcon:this.baseIcon,action:"remove"}});window.dispatchEvent(e)}},{key:"onPropertyStatus",value:function(e){for(var t in e)if(this.displayedProperties.hasOwnProperty(t)){var n=e[t];null!=n&&this.updateProperty(t,n)}}},{key:"onEvent",value:function(e){if(this.displayEvents)for(var t in e)u.showMessage('<a href="'.concat(this.eventsHref,'">').concat(F.escapeHtml(t),"</a>"),3e3)}},{key:"onConnected",value:function(e){this.connected=e,this.format===m.ThingFormat.EXPANDED&&(e?(this.layout.svg.classList.add("connected"),u.hidePersistentMessage()):(this.layout.svg.classList.remove("connected"),u.showPersistentMessage(b.getMessage("disconnected")))),e?this.element.classList.add("connected"):this.element.classList.remove("connected")}}])&&o(t.prototype,n),i&&o(t,i),e}();e.exports=q},function(e,t,n){"use strict";var r=n(8),i=n(163);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},function(e,t,n){var r=n(1),i=n(117),o=n(163),a=n(12);for(var s in i){var c=r[s],u=c&&c.prototype;if(u&&u.forEach!==o)try{a(u,"forEach",o)}catch(e){u.forEach=o}}},function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s,c,u,l,h,f,d,p,m,v,g,y,b;n(36),n(37),n(9),n(44),n(143),n(23),n(43),n(234),n(3),n(5),n(105),n(45),n(157),n(33);var w=n(142),E=n(199),_=n(235),k=n(236),S=n(237),x=n(22),T=n(19),P={HOST:window.location.host,ORIGIN:window.location.origin,MAX_PING_FAILURES:3,PING_INTERVAL:2e4,LANGUAGE:"en-US",TIMEZONE:"UTC",UNITS:{},init:function(){T.init(),document.querySelector("#thing-title-icon").innerHTML='\n      <webthing-custom-icon id="thing-title-custom-icon" class="hidden">\n      </webthing-custom-icon>',document.querySelector("#context-menu-heading-icon").innerHTML='\n      <webthing-custom-icon id="context-menu-heading-custom-icon" class="hidden">\n      </webthing-custom-icon>',document.querySelector("#edit-thing-icon").innerHTML='\n      <webthing-custom-icon id="edit-thing-custom-icon" class="hidden">\n      </webthing-custom-icon>',E.polyfill.installAll(),_.polyfill({holdToDrag:500,dragImageTranslateOverride:k.scrollBehaviourDragImageTranslateOverride}),l.init(),f.init(),u.init(),d.init(),p.init(),v.init(),g.init(),y.init(),this.views=[],this.views.things=document.getElementById("things-view"),this.views.floorplan=document.getElementById("floorplan-view"),this.views.settings=document.getElementById("settings-view"),this.views.rules=document.getElementById("rules-view"),this.views.rule=document.getElementById("rule-view"),this.views.logs=document.getElementById("logs-view"),this.currentView=this.views.things,this.displayedExtension=null,this.addThingScreen=document.getElementById("add-thing-screen"),this.menuButton=document.getElementById("menu-button"),this.menuButton.addEventListener("click",h.toggle.bind(h)),this.extensionBackButton=document.getElementById("extension-back-button"),this.overflowButton=document.getElementById("overflow-button"),this.overflowButton.addEventListener("click",this.toggleOverflowMenu.bind(this)),this.overflowMenu=document.getElementById("overflow-menu"),this.blockMessages=!1,this.messageArea=document.getElementById("message-area"),this.messageTimeout=null,this.connectivityOverlay=document.getElementById("connectivity-scrim"),this.pingerInterval=null,this.pingerLastStatus=null,this.failedPings=0,this.startPinger(),this.gatewayModel=new c,this.initWebSocket(),this.extensions={},h.init(),m.init(),s.getExtensions().then((function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var o,a=i(n[t],2),s=a[0],c=r(a[1]);try{for(c.s();!(o=c.n()).done;){var u=o.value;if(u.css){var l,h=r(u.css);try{for(h.s();!(l=h.n()).done;){var f=l.value,d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.href="/extensions/".concat(encodeURIComponent(s),"/").concat(f),document.head.appendChild(d)}}catch(e){h.e(e)}finally{h.f()}}if(u.js){var p,m=r(u.js);try{for(m.s();!(p=m.n()).done;){var v=p.value,g=document.createElement("script");g.src="/extensions/".concat(encodeURIComponent(s),"/").concat(v),document.head.appendChild(g)}}catch(e){m.e(e)}finally{m.f()}}}}catch(e){c.e(e)}finally{c.f()}}}))},initWebSocket:function(){var e=this,t="".concat(this.ORIGIN.replace(/^http/,"ws"),"/internal-logs?jwt=").concat(s.jwt);this.ws=new b(t),this.ws.addEventListener("message",(function(t){var n=JSON.parse(t.data);n&&n.message&&e.showMessage(n.message,5e3,n.url)}))},startPinger:function(){var e=this;s.ping().then((function(){"offline"===e.pingerLastStatus?window.location.reload():(e.failedPings=0,e.pingerLastStatus="online",e.connectivityOverlay.classList.add("hidden"),e.messageArea.classList.remove("disconnected"),e.messageArea.innerText===T.getMessage("gateway-unreachable")&&e.hidePersistentMessage())})).catch((function(t){console.error("Gateway unreachable:",t),++e.failedPings>=e.MAX_PING_FAILURES&&(e.connectivityOverlay.classList.remove("hidden"),e.messageArea.classList.add("disconnected"),e.showPersistentMessage(T.getMessage("gateway-unreachable")),e.pingerLastStatus="offline")})),this.pingerInterval||(this.pingerInterval=setInterval(this.startPinger.bind(this),this.PING_INTERVAL))},showThings:function(e){this.hideExtensionBackButton();var t="events"===e.pathname.split("/").pop();u.show(e.params.thingId||null,e.params.actionName||null,t,e.querystring),this.selectView("things")},showSettings:function(e){this.addThingScreen.classList.add("hidden"),this.hideExtensionBackButton(),d.show(e.params.section||null,e.params.subsection||null,e.params.id||null),this.selectView("settings")},showFloorplan:function(){this.hideExtensionBackButton(),p.show(),this.selectView("floorplan")},showRules:function(){this.hideExtensionBackButton(),v.show(),this.selectView("rules")},showRule:function(e){this.hideExtensionBackButton(),g.show(e.params.rule),this.selectView("rule")},showLogs:function(e){if(this.hideExtensionBackButton(),e.params.thingId){var t={thing:e.params.thingId,property:e.params.propId||"",type:"property"};y.show(t)}else y.show();this.selectView("logs")},registerExtension:function(e){this.extensions[e.id]=e;var t=x.escapeHtmlForIdClass(e.id),n=document.createElement("section");n.id="extension-".concat(t,"-view"),n.dataset.view="extension-".concat(t),n.classList.add("hidden"),document.body.appendChild(n);var r=this.requestedContext;r&&(r.params.extensionId==e.id&&(this.requestedContext=null,this.showExtension(r)));return n},showExtension:function(e){var t=this;this.hideExtensionBackButton();var n=e.params.extensionId;if(this.extensions.hasOwnProperty(n)){var r=this.extensions[n];r.load().then((function(){r.show(e),t.selectView("extension-".concat(x.escapeHtmlForIdClass(n),"-view")),t.displayedExtension=n}))}else s.getExtensions().then((function(r){Object.keys(r).indexOf(n)>-1?t.requestedContext=e:(console.warn("Unknown extension:",n),w("/things"))})).catch((function(e){console.warn("Could not load extensions: ",e),w("/things")}))},selectView:function(e){var t=null;(t=e.startsWith("extension-")?document.getElementById(e):this.views[e])?(this.currentView.classList.add("hidden"),this.currentView.classList.remove("selected"),null!==this.displayedExtension&&this.extensions.hasOwnProperty(this.displayedExtension)&&this.extensions[this.displayedExtension].hide(),t.classList.remove("hidden"),t.classList.add("selected"),h.selectItem(e),this.currentView=t,e.startsWith("extension-")||(this.displayedExtension=null)):console.error("Tried to select view that didn't exist:",e)},showMenuButton:function(){this.menuButton.classList.remove("hidden")},hideMenuButton:function(){this.menuButton.classList.add("hidden")},showOverflowButton:function(){this.overflowButton.classList.remove("hidden")},hideOverflowButton:function(){this.overflowMenu.classList.add("hidden"),this.overflowButton.classList.add("hidden")},hideExtensionBackButton:function(){this.extensionBackButton.classList.add("hidden"),this.extensionBackButton.href="/things"},buildOverflowMenu:function(e){var t=this;this.overflowMenu.innerHTML="";var n,i=r(e);try{var o=function(){var e=n.value,r=document.createElement("a");if(r.innerText=e.name,e.listener?(r.href="#",r.addEventListener("click",(function(n){n.preventDefault(),t.toggleOverflowMenu(),e.listener()}))):(r.href=e.href,r.addEventListener("click",(function(){t.toggleOverflowMenu()}))),e.icon){var i=document.createElement("img");i.src=e.icon,i.alt="".concat(e.name," ").concat(T.getMessage("icon")),r.insertBefore(i,r.childNodes[0])}t.overflowMenu.appendChild(r)};for(i.s();!(n=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}},toggleOverflowMenu:function(){this.overflowMenu.classList.contains("hidden")?this.overflowMenu.classList.remove("hidden"):this.overflowMenu.classList.add("hidden")},showPersistentMessage:function(e){this.showMessage(e),this.blockMessages=!0},hidePersistentMessage:function(){this.blockMessages&&(this.hideMessageArea(),this.blockMessages=!1)},showMessageArea:function(){this.messageArea.classList.remove("hidden")},hideMessageArea:function(){this.messageArea.classList.add("hidden")},showMessage:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null!==this.messageTimeout&&(clearTimeout(this.messageTimeout),this.messageTimeout=null),this.blockMessages||(r&&(e+='<br><br>\n        <a href="'.concat(x.escapeHtml(r),'" target="_blank" rel="noopener" data-l10n-id="more-information">\n        </a>')),this.messageArea.innerHTML=e,this.showMessageArea(),"number"==typeof t&&(this.messageTimeout=setTimeout((function(){n.messageTimeout=null,n.hideMessageArea()}),t)))}};if(e.exports=P,s=n(35),c=n(269),u=n(273),l=n(209),h=n(193),f=n(380),d=n(212),p=n(381),m=n(382),v=n(383),g=n(385),y=n(395),b=n(207),n(397),n(195),n(400),n(401),n(402),n(403),n(404),n(405),n(228),n(406),n(407),n(408),n(409),n(410),n(168),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(196),n(431),n(432),n(433),n(434),n(435),n(436),n(230),n(437),n(438),n(231),n(156),n(439),n(440),n(441),n(229),n(442),n(152),n(232),n(443),n(444),n(445),n(446),n(447),n(448),navigator.serviceWorker){function O(){var e=document.getElementById("update-message-area");document.getElementById("update-message-area-reload").addEventListener("click",(function(){window.location.reload(!0)})),document.getElementById("update-message-area-close").addEventListener("click",(function(){e.classList.add("hidden")})),e.classList.remove("hidden")}navigator.serviceWorker.register("/service-worker.js",{scope:"/"}).then((function(e){null!==e.active&&(null===e.waiting?(e.addEventListener("updatefound",(function(){var t=e.installing;t.addEventListener("statechange",(function(){"installed"===t.state&&O()}))})),setInterval((function(){e.update()}),36e5)):O())})),navigator.serviceWorker.ready.then(S.onReady)}window.addEventListener("load",(function e(){window.removeEventListener("load",e),T.load().then((function(){return s.getUnits()})).then((function(e){return P.UNITS=e||P.UNITS,s.getTimezone()})).then((function(e){P.TIMEZONE=e.current||P.TIMEZONE,P.LANGUAGE=T.getLanguage()||P.LANGUAGE,P.init()}))}))},function(e,t,n){(function(t){e.exports=function(){"use strict";var e=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},n=m,r=c,i=function(e){return u(c(e))},o=u,a=p,s=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function c(e){for(var t,n=[],r=0,i=0,o="";null!=(t=s.exec(e));){var a=t[0],c=t[1],u=t.index;if(o+=e.slice(i,u),i=u+a.length,c)o+=c[1];else{o&&(n.push(o),o="");var l=t[2],f=t[3],d=t[4],p=t[5],m=t[6],v=t[7],g="+"===m||"*"===m,y="?"===m||"*"===m,b=l||"/",w=d||p||(v?".*":"[^"+b+"]+?");n.push({name:f||r++,prefix:l||"",delimiter:b,optional:y,repeat:g,pattern:h(w)})}}return i<e.length&&(o+=e.substr(i)),o&&n.push(o),n}function u(t){for(var n=new Array(t.length),r=0;r<t.length;r++)"object"==typeof t[r]&&(n[r]=new RegExp("^"+t[r].pattern+"$"));return function(r){for(var i="",o=r||{},a=0;a<t.length;a++){var s=t[a];if("string"!=typeof s){var c,u=o[s.name];if(null==u){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to be defined')}if(e(u)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but received "'+u+'"');if(0===u.length){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var l=0;l<u.length;l++){if(c=encodeURIComponent(u[l]),!n[a].test(c))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but received "'+c+'"');i+=(0===l?s.prefix:s.delimiter)+c}}else{if(c=encodeURIComponent(u),!n[a].test(c))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but received "'+c+'"');i+=s.prefix+c}}else i+=s}return i}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function h(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function f(e,t){return e.keys=t,e}function d(e){return e.sensitive?"":"i"}function p(e,t){for(var n=(t=t||{}).strict,r=!1!==t.end,i="",o=e[e.length-1],a="string"==typeof o&&/\/$/.test(o),s=0;s<e.length;s++){var c=e[s];if("string"==typeof c)i+=l(c);else{var u=l(c.prefix),h=c.pattern;c.repeat&&(h+="(?:"+u+h+")*"),i+=h=c.optional?u?"(?:"+u+"("+h+"))?":"("+h+")?":u+"("+h+")"}}return n||(i=(a?i.slice(0,-2):i)+"(?:\\/(?=$))?"),i+=r?"$":n&&a?"":"(?=\\/|$)",new RegExp("^"+i,d(t))}function m(t,n,r){return e(n=n||[])?r||(r={}):(r=n,n=[]),t instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return f(e,t)}(t,n):e(t)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(m(e[i],t,n).source);return f(new RegExp("(?:"+r.join("|")+")",d(n)),t)}(t,n,r):function(e,t,n){for(var r=c(e),i=p(r,n),o=0;o<r.length;o++)"string"!=typeof r[o]&&t.push(r[o]);return f(i,t)}(t,n,r)}n.parse=r,n.compile=i,n.tokensToFunction=o,n.tokensToRegExp=a;var v,g="undefined"!=typeof document,y="undefined"!=typeof window,b="undefined"!=typeof history,w=void 0!==t,E=g&&document.ontouchstart?"touchstart":"click",_=y&&!(!window.history.location&&!window.location);function k(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}function S(e,t){if("function"==typeof e)return S.call(this,"*",e);if("function"==typeof t)for(var n=new P(e,null,this),r=1;r<arguments.length;++r)this.callbacks.push(n.middleware(arguments[r]));else"string"==typeof e?this["string"==typeof t?"redirect":"show"](e,t):this.start(e)}function x(e){if(!e.handled){var t=this._window;(this._hashbang?_&&this._getBase()+t.location.hash.replace("#!",""):_&&t.location.pathname+t.location.search)!==e.canonicalPath&&(this.stop(),e.handled=!1,_&&(t.location.href=e.canonicalPath))}}function T(e,t,n){var r=this.page=n||S,i=r._window,o=r._hashbang,a=r._getBase();"/"===e[0]&&0!==e.indexOf(a)&&(e=a+(o?"#!":"")+e);var s=e.indexOf("?");this.canonicalPath=e;var c=new RegExp("^"+a.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"));if(this.path=e.replace(c,"")||"/",o&&(this.path=this.path.replace("#!","")||"/"),this.title=g&&i.document.title,this.state=t||{},this.state.path=e,this.querystring=~s?r._decodeURLEncodedURIComponent(e.slice(s+1)):"",this.pathname=r._decodeURLEncodedURIComponent(~s?e.slice(0,s):e),this.params={},this.hash="",!o){if(!~this.path.indexOf("#"))return;var u=this.path.split("#");this.path=this.pathname=u[0],this.hash=r._decodeURLEncodedURIComponent(u[1])||"",this.querystring=this.querystring.split("#")[0]}}function P(e,t,r){var i=this.page=r||O,o=t||{};o.strict=o.strict||i._strict,this.path="*"===e?"(.*)":e,this.method="GET",this.regexp=n(this.path,this.keys=[],o)}k.prototype.configure=function(e){var t=e||{};this._window=t.window||y&&window,this._decodeURLComponents=!1!==t.decodeURLComponents,this._popstate=!1!==t.popstate&&y,this._click=!1!==t.click&&g,this._hashbang=!!t.hashbang;var n=this._window;this._popstate?n.addEventListener("popstate",this._onpopstate,!1):y&&n.removeEventListener("popstate",this._onpopstate,!1),this._click?n.document.addEventListener(E,this.clickHandler,!1):g&&n.document.removeEventListener(E,this.clickHandler,!1),this._hashbang&&y&&!b?n.addEventListener("hashchange",this._onpopstate,!1):y&&n.removeEventListener("hashchange",this._onpopstate,!1)},k.prototype.base=function(e){if(0===arguments.length)return this._base;this._base=e},k.prototype._getBase=function(){var e=this._base;if(e)return e;var t=y&&this._window&&this._window.location;return y&&this._hashbang&&t&&"file:"===t.protocol&&(e=t.pathname),e},k.prototype.strict=function(e){if(0===arguments.length)return this._strict;this._strict=e},k.prototype.start=function(e){var t=e||{};if(this.configure(t),!1!==t.dispatch){var n;if(this._running=!0,_){var r=this._window.location;n=this._hashbang&&~r.hash.indexOf("#!")?r.hash.substr(2)+r.search:this._hashbang?r.search+r.hash:r.pathname+r.search+r.hash}this.replace(n,null,!0,t.dispatch)}},k.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var e=this._window;this._click&&e.document.removeEventListener(E,this.clickHandler,!1),y&&e.removeEventListener("popstate",this._onpopstate,!1),y&&e.removeEventListener("hashchange",this._onpopstate,!1)}},k.prototype.show=function(e,t,n,r){var i=new T(e,t,this),o=this.prevContext;return this.prevContext=i,this.current=i.path,!1!==n&&this.dispatch(i,o),!1!==i.handled&&!1!==r&&i.pushState(),i},k.prototype.back=function(e,t){var n=this;if(this.len>0){var r=this._window;b&&r.history.back(),this.len--}else e?setTimeout((function(){n.show(e,t)})):setTimeout((function(){n.show(n._getBase(),t)}))},k.prototype.redirect=function(e,t){var n=this;"string"==typeof e&&"string"==typeof t&&S.call(this,e,(function(e){setTimeout((function(){n.replace(t)}),0)})),"string"==typeof e&&void 0===t&&setTimeout((function(){n.replace(e)}),0)},k.prototype.replace=function(e,t,n,r){var i=new T(e,t,this),o=this.prevContext;return this.prevContext=i,this.current=i.path,i.init=n,i.save(),!1!==r&&this.dispatch(i,o),i},k.prototype.dispatch=function(e,t){var n=0,r=0,i=this;function o(){var t=i.callbacks[n++];if(e.path===i.current)return t?void t(e,o):x.call(i,e);e.handled=!1}t?function e(){var n=i.exits[r++];if(!n)return o();n(t,e)}():o()},k.prototype.exit=function(e,t){if("function"==typeof e)return this.exit("*",e);for(var n=new P(e,null,this),r=1;r<arguments.length;++r)this.exits.push(n.middleware(arguments[r]))},k.prototype.clickHandler=function(e){if(1===this._which(e)&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){var t=e.target,n=e.path||(e.composedPath?e.composedPath():null);if(n)for(var r=0;r<n.length;r++)if(n[r].nodeName&&"A"===n[r].nodeName.toUpperCase()&&n[r].href){t=n[r];break}for(;t&&"A"!==t.nodeName.toUpperCase();)t=t.parentNode;if(t&&"A"===t.nodeName.toUpperCase()){var i="object"==typeof t.href&&"SVGAnimatedString"===t.href.constructor.name;if(!t.hasAttribute("download")&&"external"!==t.getAttribute("rel")){var o=t.getAttribute("href");if((this._hashbang||!this._samePath(t)||!t.hash&&"#"!==o)&&!(o&&o.indexOf("mailto:")>-1)&&!(i?t.target.baseVal:t.target)&&(i||this.sameOrigin(t.href))){var a=i?t.href.baseVal:t.pathname+t.search+(t.hash||"");a="/"!==a[0]?"/"+a:a,w&&a.match(/^\/[a-zA-Z]:\//)&&(a=a.replace(/^\/[a-zA-Z]:\//,"/"));var s=a,c=this._getBase();0===a.indexOf(c)&&(a=a.substr(c.length)),this._hashbang&&(a=a.replace("#!","")),(!c||s!==a||_&&"file:"===this._window.location.protocol)&&(e.preventDefault(),this.show(s))}}}}},k.prototype._onpopstate=(v=!1,y?(g&&"complete"===document.readyState?v=!0:window.addEventListener("load",(function(){setTimeout((function(){v=!0}),0)})),function(e){if(v)if(e.state){var t=e.state.path;this.replace(t,e.state)}else if(_){var n=this._window.location;this.show(n.pathname+n.search+n.hash,void 0,void 0,!1)}}):function(){}),k.prototype._which=function(e){return null==(e=e||y&&this._window.event).which?e.button:e.which},k.prototype._toURL=function(e){var t=this._window;if("function"==typeof URL&&_)return new URL(e,t.location.toString());if(g){var n=t.document.createElement("a");return n.href=e,n}},k.prototype.sameOrigin=function(e){if(!e||!_)return!1;var t=this._toURL(e),n=this._window.location;return n.protocol===t.protocol&&n.hostname===t.hostname&&(n.port===t.port||""===n.port&&(80==t.port||443==t.port))},k.prototype._samePath=function(e){if(!_)return!1;var t=this._window.location;return e.pathname===t.pathname&&e.search===t.search},k.prototype._decodeURLEncodedURIComponent=function(e){return"string"!=typeof e?e:this._decodeURLComponents?decodeURIComponent(e.replace(/\+/g," ")):e},T.prototype.pushState=function(){var e=this.page,t=e._window,n=e._hashbang;e.len++,b&&t.history.pushState(this.state,this.title,n&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},T.prototype.save=function(){var e=this.page;b&&e._window.history.replaceState(this.state,this.title,e._hashbang&&"/"!==this.path?"#!"+this.path:this.canonicalPath)},P.prototype.middleware=function(e){var t=this;return function(n,r){if(t.match(n.path,n.params))return n.routePath=t.path,e(n,r);r()}},P.prototype.match=function(e,t){var n=this.keys,r=e.indexOf("?"),i=~r?e.slice(0,r):e,o=this.regexp.exec(decodeURIComponent(i));if(!o)return!1;delete t[0];for(var a=1,s=o.length;a<s;++a){var c=n[a-1],u=this.page._decodeURLEncodedURIComponent(o[a]);void 0===u&&hasOwnProperty.call(t,c.name)||(t[c.name]=u)}return!0};var O=function e(){var t=new k;function n(){return S.apply(t,arguments)}return n.callbacks=t.callbacks,n.exits=t.exits,n.base=t.base.bind(t),n.strict=t.strict.bind(t),n.start=t.start.bind(t),n.stop=t.stop.bind(t),n.show=t.show.bind(t),n.back=t.back.bind(t),n.redirect=t.redirect.bind(t),n.replace=t.replace.bind(t),n.dispatch=t.dispatch.bind(t),n.exit=t.exit.bind(t),n.configure=t.configure.bind(t),n.sameOrigin=t.sameOrigin.bind(t),n.clickHandler=t.clickHandler.bind(t),n.create=e,Object.defineProperty(n,"len",{get:function(){return t.len},set:function(e){t.len=e}}),Object.defineProperty(n,"current",{get:function(){return t.current},set:function(e){t.current=e}}),n.Context=T,n.Route=P,n}(),C=O,I=O;return C.default=I,C}()}).call(this,n(198))},function(e,t,n){"use strict";var r=n(8),i=n(96).indexOf,o=n(144),a=n(66),s=[].indexOf,c=!!s&&1/[1].indexOf(1,-0)<0,u=o("indexOf"),l=a("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:c||!u||!l},{indexOf:function(e){return c?s.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(2);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t,n){"use strict";var r=n(8),i=n(65).map,o=n(72),a=n(66),s=o("map"),c=a("map");r({target:"Array",proto:!0,forced:!s||!c},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";n(181);var r,i=n(8),o=n(11),a=n(164),s=n(1),c=n(114),u=n(15),l=n(97),h=n(7),f=n(171),d=n(115),p=n(106).codeAt,m=n(182),v=n(30),g=n(183),y=n(27),b=s.URL,w=g.URLSearchParams,E=g.getState,_=y.set,k=y.getterFor("URL"),S=Math.floor,x=Math.pow,T=/[A-Za-z]/,P=/[\d+-.A-Za-z]/,O=/\d/,C=/^(0x|0X)/,I=/^[0-7]+$/,R=/^\d+$/,L=/^[\dA-Fa-f]+$/,A=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,M=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,D=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,j=/[\u0009\u000A\u000D]/g,N=function(e,t){var n,r,i;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";if(!(n=F(t.slice(1,-1))))return"Invalid host";e.host=n}else if(K(e)){if(t=m(t),A.test(t))return"Invalid host";if(null===(n=B(t)))return"Invalid host";e.host=n}else{if(M.test(t))return"Invalid host";for(n="",r=d(t),i=0;i<r.length;i++)n+=$(r[i],H);e.host=n}},B=function(e){var t,n,r,i,o,a,s,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(i=c[r]))return e;if(o=10,i.length>1&&"0"==i.charAt(0)&&(o=C.test(i)?16:8,i=i.slice(8==o?1:2)),""===i)a=0;else{if(!(10==o?R:8==o?I:L).test(i))return e;a=parseInt(i,o)}n.push(a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=x(256,5-t))return null}else if(a>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*x(256,3-r);return s},F=function(e){var t,n,r,i,o,a,s,c=[0,0,0,0,0,0,0,0],u=0,l=null,h=0,f=function(){return e.charAt(h)};if(":"==f()){if(":"!=e.charAt(1))return;h+=2,l=++u}for(;f();){if(8==u)return;if(":"!=f()){for(t=n=0;n<4&&L.test(f());)t=16*t+parseInt(f(),16),h++,n++;if("."==f()){if(0==n)return;if(h-=n,u>6)return;for(r=0;f();){if(i=null,r>0){if(!("."==f()&&r<4))return;h++}if(!O.test(f()))return;for(;O.test(f());){if(o=parseInt(f(),10),null===i)i=o;else{if(0==i)return;i=10*i+o}if(i>255)return;h++}c[u]=256*c[u]+i,2!=++r&&4!=r||u++}if(4!=r)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;c[u++]=t}else{if(null!==l)return;h++,l=++u}}if(null!==l)for(a=u-l,u=7;0!=u&&a>0;)s=c[u],c[u--]=c[l+a-1],c[l+--a]=s;else if(8!=u)return;return c},U=function(e){var t,n,r,i;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=S(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,i=0,o=0;o<8;o++)0!==e[o]?(i>n&&(t=r,n=i),r=null,i=0):(null===r&&(r=o),++i);return i>n&&(t=r,n=i),t}(e),n=0;n<8;n++)i&&0===e[n]||(i&&(i=!1),r===n?(t+=n?":":"::",i=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},H={},q=f({},H,{" ":1,'"':1,"<":1,">":1,"`":1}),z=f({},q,{"#":1,"?":1,"{":1,"}":1}),V=f({},z,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),$=function(e,t){var n=p(e,0);return n>32&&n<127&&!h(t,e)?e:encodeURIComponent(e)},W={ftp:21,file:null,http:80,https:443,ws:80,wss:443},K=function(e){return h(W,e.scheme)},G=function(e){return""!=e.username||""!=e.password},X=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},J=function(e,t){var n;return 2==e.length&&T.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},Y=function(e){var t;return e.length>1&&J(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},Q=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&J(t[0],!0)||t.pop()},Z=function(e){return"."===e||"%2e"===e.toLowerCase()},ee={},te={},ne={},re={},ie={},oe={},ae={},se={},ce={},ue={},le={},he={},fe={},de={},pe={},me={},ve={},ge={},ye={},be={},we={},Ee=function(e,t,n,i){var o,a,s,c,u,l=n||ee,f=0,p="",m=!1,v=!1,g=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(D,"")),t=t.replace(j,""),o=d(t);f<=o.length;){switch(a=o[f],l){case ee:if(!a||!T.test(a)){if(n)return"Invalid scheme";l=ne;continue}p+=a.toLowerCase(),l=te;break;case te:if(a&&(P.test(a)||"+"==a||"-"==a||"."==a))p+=a.toLowerCase();else{if(":"!=a){if(n)return"Invalid scheme";p="",l=ne,f=0;continue}if(n&&(K(e)!=h(W,p)||"file"==p&&(G(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=p,n)return void(K(e)&&W[e.scheme]==e.port&&(e.port=null));p="","file"==e.scheme?l=de:K(e)&&i&&i.scheme==e.scheme?l=re:K(e)?l=se:"/"==o[f+1]?(l=ie,f++):(e.cannotBeABaseURL=!0,e.path.push(""),l=ye)}break;case ne:if(!i||i.cannotBeABaseURL&&"#"!=a)return"Invalid scheme";if(i.cannotBeABaseURL&&"#"==a){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,l=we;break}l="file"==i.scheme?de:oe;continue;case re:if("/"!=a||"/"!=o[f+1]){l=oe;continue}l=ce,f++;break;case ie:if("/"==a){l=ue;break}l=ge;continue;case oe:if(e.scheme=i.scheme,a==r)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==a||"\\"==a&&K(e))l=ae;else if("?"==a)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",l=be;else{if("#"!=a){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),l=ge;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",l=we}break;case ae:if(!K(e)||"/"!=a&&"\\"!=a){if("/"!=a){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,l=ge;continue}l=ue}else l=ce;break;case se:if(l=ce,"/"!=a||"/"!=p.charAt(f+1))continue;f++;break;case ce:if("/"!=a&&"\\"!=a){l=ue;continue}break;case ue:if("@"==a){m&&(p="%40"+p),m=!0,s=d(p);for(var y=0;y<s.length;y++){var b=s[y];if(":"!=b||g){var w=$(b,V);g?e.password+=w:e.username+=w}else g=!0}p=""}else if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&K(e)){if(m&&""==p)return"Invalid authority";f-=d(p).length+1,p="",l=le}else p+=a;break;case le:case he:if(n&&"file"==e.scheme){l=me;continue}if(":"!=a||v){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&K(e)){if(K(e)&&""==p)return"Invalid host";if(n&&""==p&&(G(e)||null!==e.port))return;if(c=N(e,p))return c;if(p="",l=ve,n)return;continue}"["==a?v=!0:"]"==a&&(v=!1),p+=a}else{if(""==p)return"Invalid host";if(c=N(e,p))return c;if(p="",l=fe,n==he)return}break;case fe:if(!O.test(a)){if(a==r||"/"==a||"?"==a||"#"==a||"\\"==a&&K(e)||n){if(""!=p){var E=parseInt(p,10);if(E>65535)return"Invalid port";e.port=K(e)&&E===W[e.scheme]?null:E,p=""}if(n)return;l=ve;continue}return"Invalid port"}p+=a;break;case de:if(e.scheme="file","/"==a||"\\"==a)l=pe;else{if(!i||"file"!=i.scheme){l=ge;continue}if(a==r)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==a)e.host=i.host,e.path=i.path.slice(),e.query="",l=be;else{if("#"!=a){Y(o.slice(f).join(""))||(e.host=i.host,e.path=i.path.slice(),Q(e)),l=ge;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",l=we}}break;case pe:if("/"==a||"\\"==a){l=me;break}i&&"file"==i.scheme&&!Y(o.slice(f).join(""))&&(J(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),l=ge;continue;case me:if(a==r||"/"==a||"\\"==a||"?"==a||"#"==a){if(!n&&J(p))l=ge;else if(""==p){if(e.host="",n)return;l=ve}else{if(c=N(e,p))return c;if("localhost"==e.host&&(e.host=""),n)return;p="",l=ve}continue}p+=a;break;case ve:if(K(e)){if(l=ge,"/"!=a&&"\\"!=a)continue}else if(n||"?"!=a)if(n||"#"!=a){if(a!=r&&(l=ge,"/"!=a))continue}else e.fragment="",l=we;else e.query="",l=be;break;case ge:if(a==r||"/"==a||"\\"==a&&K(e)||!n&&("?"==a||"#"==a)){if(".."===(u=(u=p).toLowerCase())||"%2e."===u||".%2e"===u||"%2e%2e"===u?(Q(e),"/"==a||"\\"==a&&K(e)||e.path.push("")):Z(p)?"/"==a||"\\"==a&&K(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&J(p)&&(e.host&&(e.host=""),p=p.charAt(0)+":"),e.path.push(p)),p="","file"==e.scheme&&(a==r||"?"==a||"#"==a))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==a?(e.query="",l=be):"#"==a&&(e.fragment="",l=we)}else p+=$(a,z);break;case ye:"?"==a?(e.query="",l=be):"#"==a?(e.fragment="",l=we):a!=r&&(e.path[0]+=$(a,H));break;case be:n||"#"!=a?a!=r&&("'"==a&&K(e)?e.query+="%27":e.query+="#"==a?"%23":$(a,H)):(e.fragment="",l=we);break;case we:a!=r&&(e.fragment+=$(a,q))}f++}},_e=function(e){var t,n,r=l(this,_e,"URL"),i=arguments.length>1?arguments[1]:void 0,a=String(e),s=_(r,{type:"URL"});if(void 0!==i)if(i instanceof _e)t=k(i);else if(n=Ee(t={},String(i)))throw TypeError(n);if(n=Ee(s,a,null,t))throw TypeError(n);var c=s.searchParams=new w,u=E(c);u.updateSearchParams(s.query),u.updateURL=function(){s.query=String(c)||null},o||(r.href=Se.call(r),r.origin=xe.call(r),r.protocol=Te.call(r),r.username=Pe.call(r),r.password=Oe.call(r),r.host=Ce.call(r),r.hostname=Ie.call(r),r.port=Re.call(r),r.pathname=Le.call(r),r.search=Ae.call(r),r.searchParams=Me.call(r),r.hash=De.call(r))},ke=_e.prototype,Se=function(){var e=k(this),t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,a=e.path,s=e.query,c=e.fragment,u=t+":";return null!==i?(u+="//",G(e)&&(u+=n+(r?":"+r:"")+"@"),u+=U(i),null!==o&&(u+=":"+o)):"file"==t&&(u+="//"),u+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},xe=function(){var e=k(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&K(e)?t+"://"+U(e.host)+(null!==n?":"+n:""):"null"},Te=function(){return k(this).scheme+":"},Pe=function(){return k(this).username},Oe=function(){return k(this).password},Ce=function(){var e=k(this),t=e.host,n=e.port;return null===t?"":null===n?U(t):U(t)+":"+n},Ie=function(){var e=k(this).host;return null===e?"":U(e)},Re=function(){var e=k(this).port;return null===e?"":String(e)},Le=function(){var e=k(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Ae=function(){var e=k(this).query;return e?"?"+e:""},Me=function(){return k(this).searchParams},De=function(){var e=k(this).fragment;return e?"#"+e:""},je=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(o&&c(ke,{href:je(Se,(function(e){var t=k(this),n=String(e),r=Ee(t,n);if(r)throw TypeError(r);E(t.searchParams).updateSearchParams(t.query)})),origin:je(xe),protocol:je(Te,(function(e){var t=k(this);Ee(t,String(e)+":",ee)})),username:je(Pe,(function(e){var t=k(this),n=d(String(e));if(!X(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=$(n[r],V)}})),password:je(Oe,(function(e){var t=k(this),n=d(String(e));if(!X(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=$(n[r],V)}})),host:je(Ce,(function(e){var t=k(this);t.cannotBeABaseURL||Ee(t,String(e),le)})),hostname:je(Ie,(function(e){var t=k(this);t.cannotBeABaseURL||Ee(t,String(e),he)})),port:je(Re,(function(e){var t=k(this);X(t)||(""==(e=String(e))?t.port=null:Ee(t,e,fe))})),pathname:je(Le,(function(e){var t=k(this);t.cannotBeABaseURL||(t.path=[],Ee(t,e+"",ve))})),search:je(Ae,(function(e){var t=k(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Ee(t,e,be)),E(t.searchParams).updateSearchParams(t.query)})),searchParams:je(Me),hash:je(De,(function(e){var t=k(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Ee(t,e,we)):t.fragment=null}))}),u(ke,"toJSON",(function(){return Se.call(this)}),{enumerable:!0}),u(ke,"toString",(function(){return Se.call(this)}),{enumerable:!0}),b){var Ne=b.createObjectURL,Be=b.revokeObjectURL;Ne&&u(_e,"createObjectURL",(function(e){return Ne.apply(b,arguments)})),Be&&u(_e,"revokeObjectURL",(function(e){return Be.apply(b,arguments)}))}v(_e,"URL"),i({global:!0,forced:!a,sham:!o},{URL:_e})},function(e,t,n){"use strict";var r=n(8),i=n(34),o=n(179),a=n(169),s=n(2),c=1..toFixed,u=Math.floor,l=function(e,t,n){return 0===t?n:t%2==1?l(e,t-1,n*e):l(e*e,t/2,n)};r({target:"Number",proto:!0,forced:c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){c.call({})}))},{toFixed:function(e){var t,n,r,s,c=o(this),h=i(e),f=[0,0,0,0,0,0],d="",p="0",m=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*f[n],f[n]=r%1e7,r=u(r/1e7)},v=function(e){for(var t=6,n=0;--t>=0;)n+=f[t],f[t]=u(n/e),n=n%e*1e7},g=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==f[e]){var n=String(f[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(d="-",c=-c),c>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(c*l(2,69,1))-69)<0?c*l(2,-t,1):c/l(2,t,1),n*=4503599627370496,(t=52-t)>0){for(m(0,n),r=h;r>=7;)m(1e7,0),r-=7;for(m(l(10,r,1),0),r=t-1;r>=23;)v(1<<23),r-=23;v(1<<r),m(1,1),v(2),p=g()}else m(0,n),m(1<<-t,0),p=g()+a.call("0",h);return p=h>0?d+((s=p.length)<=h?"0."+a.call("0",h-s)+p:p.slice(0,s-h)+"."+p.slice(s-h)):d+p}})},function(e,t,n){"use strict";var r=n(8),i=n(31),o=n(20),a=n(2),s=n(144),c=[],u=c.sort,l=a((function(){c.sort(void 0)})),h=a((function(){c.sort(null)})),f=s("sort");r({target:"Array",proto:!0,forced:l||!h||!f},{sort:function(e){return void 0===e?u.call(o(this)):u.call(o(this),i(e))}})},function(e,t){e.exports.CONNECTED="connected",e.exports.DELETE_THING="deleteThing",e.exports.DELETE_THINGS="deleteThings",e.exports.EVENT_OCCURRED="eventOccurred",e.exports.PROPERTY_STATUS="propertyStatus",e.exports.REFRESH_THINGS="refreshThings",e.exports.ThingFormat={INTERACTIVE:0,EXPANDED:1,LINK_ICON:2}},function(e,t,n){"use strict";var r=n(8),i=n(185).trim;r({target:"String",proto:!0,forced:n(186)("trim")},{trim:function(){return i(this)}})},function(e,t,n){"use strict";var r=n(8),i=n(65).filter,o=n(72),a=n(66),s=o("filter"),c=a("filter");r({target:"Array",proto:!0,forced:!s||!c},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(13),n(3),n(14),n(5);var c=n(74),u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,n,a,s=o(u);function u(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var t=document.createElement("template");return t.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-string-label-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-string-label-property-container.inverted {\n      color: #5d9bc7;\n      background-color: white;\n    }\n\n    .webthing-string-label-property-value {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      font-weight: bold;\n      width: 100%;\n      font-size: 1.4rem;\n    }\n\n    .webthing-string-label-property-value.uppercase {\n      text-transform: uppercase;\n    }\n\n    .webthing-string-label-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(c.count,'" class="webthing-string-label-property-container">\n    <div id="value-').concat(c.count,'" class="webthing-string-label-property-value"></div>\n  </div>\n  <div id="name-').concat(c.count,'" class="webthing-string-label-property-name"></div>\n'),(e=s.call(this,t))._name=e.shadowRoot.querySelector(".webthing-string-label-property-name"),e._container=e.shadowRoot.querySelector(".webthing-string-label-property-container"),e._value=e.shadowRoot.querySelector(".webthing-string-label-property-value"),e._inverted=!1,e}return t=u,(n=[{key:"connectedCallback",value:function(){this.name||(this.name=this.dataset.name),this.value||(this.value=void 0!==this.dataset.value?this.dataset.value:""),this.inverted=void 0!==this.dataset.inverted&&"true"===this.dataset.inverted,this.uppercase&&this._value.classList.add("uppercase")}},{key:"name",get:function(){return this._name.innerText},set:function(e){this._name.innerText=e}},{key:"value",get:function(){return this._value.innerText},set:function(e){this._value.innerText=e}},{key:"inverted",get:function(){return this._inverted},set:function(e){this._inverted=!!e,this._inverted?this._container.classList.add("inverted"):this._container.classList.remove("inverted")}}])&&r(t.prototype,n),a&&r(t,a),u}(c);window.customElements.define("webthing-string-label-property",u),e.exports=u},function(e,t,n){"use strict";n(105);var r=n(35);function i(){r.userCount().then((function(e){var t;t=e>0?"/login/":"/signup/",window.location.pathname!==t&&window.location.replace(t)}))}r.isLoggedIn()?r.verifyJWT().then((function(e){e?document.body?document.body.classList.remove("hidden"):document.addEventListener("DOMContentLoaded",(function(){document.body.classList.remove("hidden")})):i()})).catch((function(){document.body.classList.remove("hidden"),document.getElementById("connectivity-scrim").classList.remove("hidden")})):i()},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9);var i=n(22),o=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.thing=t,this.name=n,this.readOnly=r,this.label=o,this.id="label-".concat(i.escapeHtmlForIdClass(this.name))}var t,n,o;return t=e,(n=[{key:"attach",value:function(){this.labelElement=this.thing.element.querySelector("#".concat(this.id))}},{key:"view",value:function(){var e=i.escapeHtml(this.label),t=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-string-label-property data-value="0" data-name="'.concat(e,'"\n        id="').concat(this.id,'" ').concat(t,">\n      </webthing-string-label-property>")}},{key:"update",value:function(e){this.labelElement&&(this.labelElement.value=e)}}])&&r(t.prototype,n),o&&r(t,o),e}();e.exports=o},function(e,t,n){"use strict";function r(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function i(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function u(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function l(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(36),n(37),n(326),n(9),n(327),n(213),n(151),n(139),n(44),n(143),n(23),n(145),n(214),n(43),n(328),n(160),n(60),n(330),n(3),n(5),n(180),n(105),n(45),n(140),n(33);var f=n(215),d={REQUIRED_FIELD_SYMBOL:"*",findSchemaDefinition:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=/^#\/definitions\/(.*)$/.exec(e);if(n&&n[1]){var r,i=n[1].split("/"),o=t,a=u(i);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(s=s.replace(/~1/g,"/").replace(/~0/g,"~"),!o.hasOwnProperty(s))throw new Error("Could not find a definition for ".concat(e,"."));o=o[s]}}catch(e){a.e(e)}finally{a.f()}return o}throw new Error("Could not find a definition for ".concat(e,"."))},retrieveSchema:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.hasOwnProperty("$ref")){var r=d.findSchemaDefinition(e.$ref,t),i=(e.$ref,c(e,["$ref"]));return d.retrieveSchema(a(a({},r),i),t,n)}if(e.hasOwnProperty("dependencies")){var o=d.resolveDependencies(e,t,n);return d.retrieveSchema(o,t,n)}return e},resolveDependencies:function(e,t,n){var r=e.dependencies,i=void 0===r?{}:r,o=c(e,["dependencies"]);for(var a in i)if(void 0!==n[a]){var s=i[a];Array.isArray(s)?o=d.withDependentProperties(o,s):d.isObject(s)&&(o=d.withDependentSchema(o,t,n,a,s))}return o},withDependentProperties:function(e,t){if(!t)return e;var n=Array.isArray(e.required)?Array.from(new Set([].concat(i(e.required),i(t)))):t;return a(a({},e),{},{required:n})},withDependentSchema:function(e,t,n,r,i){var o=d.retrieveSchema(i,t,n),a=o.oneOf,s=c(o,["oneOf"]);return e=d.mergeSchemas(e,s),void 0===a?e:d.withExactlyOneSubschema(e,t,n,r,a)},withExactlyOneSubschema:function(e,t,n,i,o){if(!Array.isArray(o))throw new Error("invalid oneOf: it is some ".concat(typeof o," instead of an array"));var u=o.filter((function(e){if(!e.properties)return!1;var t=e.properties[i];if(t){var r={type:"object",properties:s({},i,t)};return 0===f.validateFormData(n,r).errors.length}return!1}));if(1!==u.length)return console.warn("ignoring oneOf in dependencies because there isn't exactly one subschema that is valid"),e;var l=u[0],h=l.properties,p=(h[i],c(h,[i].map(r))),m=a(a({},l),{},{properties:p});return d.mergeSchemas(e,d.retrieveSchema(m,t,n))},mergeSchemas:function(e,t){return d.mergeObjects(e,t,!0)},isConstant:function(e){return Array.isArray(e.enum)&&1===e.enum.length||e.hasOwnProperty("const")},isFixedItems:function(e){return Array.isArray(e.items)&&e.items.length>0&&e.items.every((function(e){return d.isObject(e)}))},isObject:function(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)},isSelect:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=d.retrieveSchema(e,t),r=n.oneOf||n.anyOf;return!!Array.isArray(n.enum)||!!Array.isArray(r)&&r.every((function(e){return d.isConstant(e)}))},isMultiSelect:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!(!e.uniqueItems||!e.items)&&d.isSelect(e.items,t)},toConstant:function(e){if(Array.isArray(e.enum)&&1===e.enum.length)return e.enum[0];if(e.hasOwnProperty("const"))return e.const;throw new Error("schema cannot be inferred as a constant")},toIdSchema:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={$id:t||"root"};if("$ref"in e){var o=d.retrieveSchema(e,n,r);return d.toIdSchema(o,t,n,r)}if("items"in e&&!e.items.$ref)return d.toIdSchema(e.items,t,n,r);if("object"!==e.type)return i;for(var a in e.properties||{}){var s=e.properties[a],c="".concat(i.$id,"_").concat(a);i[a]=d.toIdSchema(s,c,n,r[a])}return i},mergeObjects:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object.assign({},e);return Object.keys(t).reduce((function(r,i){var o=e[i],a=t[i];return e.hasOwnProperty(i)&&d.isObject(a)?r[i]=d.mergeObjects(o,a,n):n&&Array.isArray(o)&&Array.isArray(a)?r[i]=o.concat(a):r[i]=a,r}),r)},optionsList:function(e){return e.enum?e.enum.map((function(t,n){return{label:e.enumNames&&e.enumNames[n]||String(t),value:t}})):(e.oneOf||e.anyOf).map((function(e){var t=d.toConstant(e);return{label:e.title||String(t),value:t}}))},computeDefaults:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t;if(d.isObject(r)&&d.isObject(e.default))r=d.mergeObjects(r,e.default);else if("default"in e)r=e.default;else{if("$ref"in e){var i=d.findSchemaDefinition(e.$ref,n);return d.computeDefaults(i,r,n)}d.isFixedItems(e)&&(r=e.items.map((function(e){return d.computeDefaults(e,void 0,n)})))}switch(void 0===r&&(r=e.default),e.type){case"object":return Object.keys(e.properties||{}).reduce((function(t,i){return t[i]=d.computeDefaults(e.properties[i],(r||{})[i],n),t}),{});case"array":if(e.minItems){if(d.isMultiSelect(e,n))return[];var o=r?r.length:0;if(e.minItems>o){var a=r||[],s=new Array(e.minItems-o).fill(d.computeDefaults(e.items,e.items.defaults,n));return a.concat(s)}}break;case"number":case"integer":void 0===r&&(r=e.hasOwnProperty("minimum")&&e.hasOwnProperty("maximum")?e.minimum:0);break;case"boolean":void 0===r&&(r=!1)}return r},getDefaultFormState:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!d.isObject(e))throw new Error("Invalid schema: ".concat(e));var r=d.retrieveSchema(e,n,t),i=d.computeDefaults(r,e.default,n);return void 0===t?i:d.isObject(t)?d.mergeObjects(i,t):t||i},getOptionsList:function(e){return e.enum?e.enum.map((function(t,n){return{label:e.enumNames&&e.enumNames[n]||String(t),value:t}})):(e.oneOf||e.anyOf).map((function(e){var t=d.toConstant(e);return{label:e.title||String(t),value:t}}))}};e.exports=d},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(147),n(13),n(3),n(14),n(5);var c=n(74),u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,n,a,s=o(u);function u(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var t=document.createElement("template");return t.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-numeric-label-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-numeric-label-property-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-numeric-label-property-value,\n    .webthing-numeric-label-property-unit {\n      font-weight: bold;\n    }\n\n    .webthing-numeric-label-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(c.count,'" class="webthing-numeric-label-property-container">\n    <div id="contents-').concat(c.count,'" class="webthing-numeric-label-property-contents">\n      <span id="value-').concat(c.count,'" class="webthing-numeric-label-property-value">\n      </span><span id="unit-').concat(c.count,'" class="webthing-numeric-label-property-unit"></span>\n    </div>\n  </div>\n  <div id="name-').concat(c.count,'" class="webthing-numeric-label-property-name"></div>\n'),(e=s.call(this,t))._name=e.shadowRoot.querySelector(".webthing-numeric-label-property-name"),e._value=e.shadowRoot.querySelector(".webthing-numeric-label-property-value"),e._unit=e.shadowRoot.querySelector(".webthing-numeric-label-property-unit"),e._precision=0,e}return t=u,(n=[{key:"connectedCallback",value:function(){this.name||(this.name=this.dataset.name),this.value||(this.value=void 0!==this.dataset.value?this.dataset.value:""),this.unit||(this.unit=void 0!==this.dataset.unit?this.dataset.unit:""),this.precision||(this.precision=void 0!==this.dataset.precision?this.dataset.precision:0)}},{key:"name",get:function(){return this._name.innerText},set:function(e){this._name.innerText=e}},{key:"value",get:function(){return this._value.innerText},set:function(e){e=Number(e),this._value.innerText=e.toFixed(this.precision)}},{key:"unit",get:function(){return this._unit.innerText},set:function(e){this._unit.innerText=e}},{key:"precision",get:function(){return this._precision},set:function(e){this._precision=parseInt(e,10)}}])&&r(t.prototype,n),a&&r(t,a),u}(c);window.customElements.define("webthing-numeric-label-property",u),e.exports=u},function(e,t,n){"use strict";var r,i=n(8),o=n(29).f,a=n(16),s=n(158),c=n(24),u=n(159),l=n(25),h="".startsWith,f=Math.min,d=u("startsWith");i({target:"String",proto:!0,forced:!!(l||d||(r=o(String.prototype,"startsWith"),!r||r.writable))&&!d},{startsWith:function(e){var t=String(c(this));s(e);var n=a(f(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return h?h.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){var r=n(103);e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},function(e,t,n){var r=n(0)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},function(e,t,n){var r=n(8),i=n(171);r({target:"Object",stat:!0,forced:Object.assign!==i},{assign:i})},function(e,t,n){"use strict";function r(e,t,n,r){var i=r?" !== ":" === ",o=r?" || ":" && ",a=r?"!":"",s=r?"":"!";switch(e){case"null":return t+i+"null";case"array":return a+"Array.isArray("+t+")";case"object":return"("+a+t+o+"typeof "+t+i+'"object"'+o+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+i+'"number"'+o+s+"("+t+" % 1)"+o+t+i+t+(n?o+a+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+i+'"'+e+'"'+(n?o+a+"isFinite("+t+")":"")+")";default:return"typeof "+t+i+'"'+e+'"'}}e.exports={copy:function(e,t){for(var n in t=t||{},e)t[n]=e[n];return t},checkDataType:r,checkDataTypes:function(e,t,n){switch(e.length){case 1:return r(e[0],t,n,!0);default:var i="",a=o(e);for(var s in a.array&&a.object&&(i=a.null?"(":"(!"+t+" || ",i+="typeof "+t+' !== "object")',delete a.null,delete a.array,delete a.object),a.number&&delete a.integer,a)i+=(i?" && ":"")+r(s,t,n,!0);return i}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var n=[],r=0;r<t.length;r++){var o=t[r];(i[o]||"array"===e&&"array"===o)&&(n[n.length]=o)}if(n.length)return n}else{if(i[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:o,getProperty:c,escapeQuotes:u,equal:n(190),ucs2length:n(334),varOccurences:function(e,t){t+="[^0-9]";var n=e.match(new RegExp(t,"g"));return n?n.length:0},varReplace:function(e,t,n){return t+="([^0-9])",n=n.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),n+"$1")},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var n in e)if(t[n])return!0},schemaHasRulesExcept:function(e,t,n){if("boolean"==typeof e)return!e&&"not"!=n;for(var r in e)if(r!=n&&t[r])return!0},schemaUnknownRules:function(e,t){if("boolean"==typeof e)return;for(var n in e)if(!t[n])return n},toQuotedString:l,getPathExpr:function(e,t,n,r){return d(e,n?"'/' + "+t+(r?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):r?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,n){var r=l(n?"/"+p(t):c(t));return d(e,r)},getData:function(e,t,n){var r,i,o,a;if(""===e)return"rootData";if("/"==e[0]){if(!h.test(e))throw new Error("Invalid JSON-pointer: "+e);i=e,o="rootData"}else{if(!(a=e.match(f)))throw new Error("Invalid JSON-pointer: "+e);if(r=+a[1],"#"==(i=a[2])){if(r>=t)throw new Error("Cannot access property/index "+r+" levels up, current level is "+t);return n[t-r]}if(r>t)throw new Error("Cannot access data "+r+" levels up, current level is "+t);if(o="data"+(t-r||""),!i)return o}for(var s=o,u=i.split("/"),l=0;l<u.length;l++){var d=u[l];d&&(o+=c(m(d)),s+=" && "+o)}return s},unescapeFragment:function(e){return m(decodeURIComponent(e))},unescapeJsonPointer:m,escapeFragment:function(e){return encodeURIComponent(p(e))},escapeJsonPointer:p};var i=o(["string","number","integer","boolean","null"]);function o(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}var a=/^[a-z$_][a-z$_0-9]*$/i,s=/'|\\/g;function c(e){return"number"==typeof e?"["+e+"]":a.test(e)?"."+e:"['"+u(e)+"']"}function u(e){return e.replace(s,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function l(e){return"'"+u(e)+"'"}var h=/^\/(?:[^~]|~0|~1)*$/,f=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function d(e,t){return'""'==e?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function p(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function m(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},function(e,t,n){var r=n(6),i=n(102);e.exports=function(e,t,n){var o,a;return i&&"function"==typeof(o=t.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&i(e,a),e}},function(e,t,n){"use strict";var r=n(65).forEach,i=n(144),o=n(66),a=i("forEach"),s=o("forEach");e.exports=a&&s?[].forEach:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}},function(e,t,n){var r=n(2),i=n(0),o=n(25),a=i("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9);var i=n(120),o=n(22),a=function(){function e(t,n,r,a,s,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.thing=t,this.name=n,this.readOnly=r,this.label=a,this.unit=i.nameToAbbreviation(s),this.precision=c,this.id="label-".concat(o.escapeHtmlForIdClass(this.name))}var t,n,a;return t=e,(n=[{key:"attach",value:function(){this.labelElement=this.thing.element.querySelector("#".concat(this.id))}},{key:"view",value:function(){var e=o.escapeHtml(this.label),t=o.escapeHtml(this.unit),n=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-numeric-label-property data-value="0" data-name="'.concat(e,'"\n        data-unit="').concat(t,'" data-precision="').concat(this.precision,'" id="').concat(this.id,'"\n        ').concat(n,">\n      </webthing-numeric-label-property>")}},{key:"update",value:function(e){this.label&&(this.labelElement.value=parseFloat(e)||0)}}])&&r(t.prototype,n),a&&r(t,a),e}();e.exports=a},function(e,t,n){"use strict";n(9),n(151),n(194);var r=n(175),i={icon:function(e){return e.selectedCapability?r.capabilityHasIcon(e.selectedCapability)||!e.iconHref?r.capabilityToIcon(e.selectedCapability):e.iconHref:e.iconHref?e.iconHref:r.defaultIcon()},byProperty:function(e){return function(t){if(!e)return console.warn("byProperty property undefined",(new Error).stack),!1;var n="/things/".concat(encodeURIComponent(e.thing),"/properties/").concat(encodeURIComponent(e.id)),r=t.properties[e.id];return r&&r.links.filter((function(e){return(!e.rel||"property"===e.rel)&&e.href===n})).length>0}},byThing:function(e){return function(t){return t.href==="/things/".concat(encodeURIComponent(e))}},thingFromPart:function(e,t){var n=null;return"EventTrigger"===t.type||"ActionEffect"===t.type?n=e.things.filter(i.byThing(t.thing))[0]:t.property&&(n=e.things.filter(i.byProperty(t.property))[0]),n},extractProperty:function(e){return decodeURIComponent(e.match(/properties\/([^/]+)/)[1])},extractThing:function(e){return decodeURIComponent(e.match(/things\/([^/]+)/)[1])}};e.exports=i},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(147),n(13),n(3),n(14),n(5);var c=n(74),u=document.createElement("template");u.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-label-capability-container {\n      box-sizing: border-box;\n      width: 12.8rem;\n      height: 12.8rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      transform: translate(0);\n      background-color: #89b6d6;\n    }\n\n    .webthing-label-capability-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      font-size: 2.8rem;\n      font-weight: bold;\n      width: 12.8rem;\n    }\n  </style>\n  <div id="container" class="webthing-label-capability-container">\n    <div id="contents" class="webthing-label-capability-contents">\n      <span id="value" class="webthing-label-capability-value">\n      </span><span id="unit" class="webthing-label-capability-unit"></span>\n    </div>\n  </div>\n';var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=s.call(this,u))._value=e.shadowRoot.querySelector(".webthing-label-capability-value"),e._unit=e.shadowRoot.querySelector(".webthing-label-capability-unit"),e._precision=0,e._level=0,e}return t=c,(n=[{key:"connectedCallback",value:function(){this.level||(this.level=void 0!==this.dataset.level?this.dataset.level:0),this.unit||(this.unit=void 0!==this.dataset.unit?this.dataset.unit:""),this.precision||(this.precision=void 0!==this.dataset.precision?this.dataset.precision:0)}},{key:"level",get:function(){return this._level},set:function(e){this._level=Number(e),this._value.innerText=this._level.toFixed(this.precision)}},{key:"unit",get:function(){return this._unit.innerText},set:function(e){this._unit.innerText=e}},{key:"precision",get:function(){return this._precision},set:function(e){this._precision=parseInt(e,10)}}])&&r(t.prototype,n),a&&r(t,a),c}(c);window.customElements.define("webthing-label-capability",l),e.exports=l},function(e,t,n){"use strict";var r=n(34),i=n(24);e.exports="".repeat||function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t,n){"use strict";var r=n(203),i=n(205);e.exports=r("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},function(e,t,n){"use strict";var r=n(11),i=n(2),o=n(73),a=n(75),s=n(68),c=n(20),u=n(69),l=Object.assign,h=Object.defineProperty;e.exports=!l||i((function(){if(r&&1!==l({b:1},l(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||"abcdefghijklmnopqrst"!=o(l({},t)).join("")}))?function(e,t){for(var n=c(e),i=arguments.length,l=1,h=a.f,f=s.f;i>l;)for(var d,p=u(arguments[l++]),m=h?o(p).concat(h(p)):o(p),v=m.length,g=0;v>g;)d=m[g++],r&&!f.call(p,d)||(n[d]=p[d]);return n}:l},function(e,t,n){var r=n(11),i=n(1),o=n(71),a=n(162),s=n(10).f,c=n(49).f,u=n(103),l=n(76),h=n(112),f=n(15),d=n(2),p=n(27).set,m=n(108),v=n(0)("match"),g=i.RegExp,y=g.prototype,b=/a/g,w=/a/g,E=new g(b)!==b,_=h.UNSUPPORTED_Y;if(r&&o("RegExp",!E||_||d((function(){return w[v]=!1,g(b)!=b||g(w)==w||"/a/i"!=g(b,"i")})))){for(var k=function(e,t){var n,r=this instanceof k,i=u(e),o=void 0===t;if(!r&&i&&e.constructor===k&&o)return e;E?i&&!o&&(e=e.source):e instanceof k&&(o&&(t=l.call(e)),e=e.source),_&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var s=a(E?new g(e,t):g(e,t),r?this:y,k);return _&&n&&p(s,{sticky:n}),s},S=function(e){e in k||s(k,e,{configurable:!0,get:function(){return g[e]},set:function(t){g[e]=t}})},x=c(g),T=0;x.length>T;)S(x[T++]);y.constructor=k,k.prototype=y,f(i,"RegExp",k)}m("RegExp")},function(e,t,n){"use strict";var r=n(276),i=n(304),o=n(305),a=n(306),s=n(211),c=n(307),u=n(308),l=n(309),h=n(310),f=n(311),d=n(312),p=n(313),m=n(314),v=n(315),g=n(316),y=n(174),b=n(317),w=n(318),E=n(319),_=n(320),k=n(138),S=n(321);e.exports={createThingFromCapability:function(e,t,n,x){if(e)switch(e){case"OnOffSwitch":return new y(t,n,x);case"MultiLevelSwitch":return new g(t,n,x);case"ColorControl":return new s(t,n,x);case"ColorSensor":return new c(t,n,x);case"EnergyMonitor":return new l(t,n,x);case"BinarySensor":return new o(t,n,x);case"MultiLevelSensor":return new v(t,n,x);case"SmartPlug":return new w(t,n,x);case"Light":return new d(t,n,x);case"DoorSensor":return new u(t,n,x);case"MotionSensor":return new m(t,n,x);case"LeakSensor":return new f(t,n,x);case"PushButton":return new b(t,n,x);case"VideoCamera":return new S(t,n,x);case"Camera":return new a(t,n,x);case"TemperatureSensor":return new E(t,n,x);case"HumiditySensor":return new h(t,n,x);case"Alarm":return new r(t,n,x);case"Thermostat":return new _(t,n,x);case"Lock":return new p(t,n,x);case"BarometricPressureSensor":return new i(t,n,x)}return new k(t,n,x)},getClassFromCapability:function(e){switch(e){case"OnOffSwitch":return"on-off-switch";case"MultiLevelSwitch":return"multi-level-switch";case"ColorControl":return"color-control";case"ColorSensor":return"color-sensor";case"EnergyMonitor":return"energy-monitor";case"BinarySensor":return"binary-sensor";case"MultiLevelSensor":return"multi-level-sensor";case"SmartPlug":return"smart-plug";case"Light":return"light";case"DoorSensor":return"door-sensor";case"MotionSensor":return"motion-sensor";case"LeakSensor":return"leak-sensor";case"PushButton":return"push-button";case"VideoCamera":return"video-camera";case"Camera":return"camera";case"TemperatureSensor":return"temperature-sensor";case"HumiditySensor":return"humidity-sensor";case"Alarm":return"alarm";case"Thermostat":return"thermostat";case"Lock":return"lock";case"BarometricPressureSensor":return"barometric-pressure-sensor"}return""}}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(60),n(13),n(3),n(14),n(61),n(5);var l=n(149),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(f,e);var t,n,s,h=a(f);function f(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),r=r||{baseIcon:"/images/thing-icons/on_off_switch.svg"},(i=h.call(this,e,t,n,r)).format!==l.ThingFormat.LINK_ICON&&i.icon.addEventListener("click",i.handleClick.bind(c(i))),i}return t=f,(n=[{key:"findProperties",value:function(){for(var e in this.onProperty=null,this.displayedProperties)if("OnOffProperty"===this.displayedProperties[e].property["@type"]){this.onProperty=e;break}null===this.onProperty&&this.displayedProperties.hasOwnProperty("on")&&(this.onProperty="on")}},{key:"updateProperty",value:function(e,t){if(t=i(u(f.prototype),"updateProperty",this).call(this,e,t),this.displayedProperties.hasOwnProperty(e))return e===this.onProperty&&(this.icon.on=!!t),t}},{key:"handleClick",value:function(){var e=!this.icon.on;this.icon.on=null,this.model.setProperty(this.onProperty,e).catch((function(e){console.error("Error trying to toggle switch: ".concat(e))}))}},{key:"iconView",value:function(){return"\n      <webthing-on-off-switch-capability>\n      </webthing-on-off-switch-capability>"}},{key:"icon",get:function(){return this.element.querySelector("webthing-on-off-switch-capability")}}])&&r(t.prototype,n),s&&r(t,s),f}(n(138));e.exports=h},function(e,t,n){"use strict";var r=n(19);function i(){return r.getMessage("thing-icons-thing-src")}function o(e){switch(e){case"OnOffSwitch":return"/images/thing-icons/on_off_switch.svg";case"MultiLevelSwitch":return"/images/thing-icons/multi_level_switch.svg";case"ColorControl":case"ColorSensor":return"/images/thing-icons/color_control.svg";case"EnergyMonitor":return"/images/thing-icons/energy_monitor.svg";case"BinarySensor":return"/images/thing-icons/binary_sensor.svg";case"MultiLevelSensor":return"/images/thing-icons/multi_level_sensor.svg";case"SmartPlug":return"/images/thing-icons/smart_plug.svg";case"Light":return"/images/thing-icons/light.svg";case"DoorSensor":return"/images/thing-icons/door_sensor.svg";case"MotionSensor":return"/images/thing-icons/motion_sensor.svg";case"LeakSensor":return"/images/thing-icons/leak_sensor.svg";case"PushButton":return"/images/thing-icons/push_button.svg";case"VideoCamera":return"/images/thing-icons/video_camera.svg";case"Camera":return"/images/thing-icons/camera.svg";case"TemperatureSensor":return"/images/thing-icons/temperature_sensor.svg";case"HumiditySensor":return"/images/thing-icons/multi_level_sensor.svg";case"Alarm":return"/images/thing-icons/alarm.svg";case"Thermostat":return"/images/thing-icons/thermostat.svg";case"Lock":return"/images/thing-icons/lock.svg";case"BarometricPressureSensor":return"/images/thing-icons/multi_level_sensor.svg";case"Custom":default:return i()}}e.exports={capabilityHasIcon:function(e){return o(e)!==i()},capabilityToIcon:o,defaultIcon:i}},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9);var i=n(388),o=n(22),a=function(){"use strict";function e(t,n,r,a,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onPresentationChange=n,this.onRuleChange=r,this.role="",this.rulePart=null,this.elt=document.createElement("div"),this.elt.classList.add("rule-part-container"),this.elt.innerHTML='<div class="rule-part-block">\n        <img class="rule-part-icon" src="'.concat(encodeURI(s),'"/>\n      </div>\n      <div class="rule-part-info">\n        <h3 class="rule-part-name">\n        ').concat(o.escapeHtml(a),"\n        </h3>\n      </div>"),this.rulePartBlock=this.elt.querySelector(".rule-part-block"),this.ruleArea=t,this.onDown=this.onDown.bind(this),this.onMove=this.onMove.bind(this),this.onUp=this.onUp.bind(this),this.ruleArea.appendChild(this.elt),this.draggable=new i(this.elt,this.onDown,this.onMove,this.onUp);var c=document.getElementById("drag-hint");this.flexDir=window.getComputedStyle(c).flexDirection}var t,n,a;return t=e,(n=[{key:"onDown",value:function(){var e=this.elt.querySelector(".open");e&&(e.classList.remove("open"),document.activeElement.blur()),this.resetState={transform:this.elt.style.transform},document.getElementById("delete-area").classList.add("delete-active"),this.elt.classList.add("dragging"),this.ruleArea.classList.add("drag-location-hint"),this.onPresentationChange()}},{key:"onMove",value:function(e,t,n,r){var i=this.ruleArea.getBoundingClientRect(),o=document.getElementById("delete-area").getBoundingClientRect().height;t>window.innerHeight-o?(this.rulePartBlock.classList.remove("trigger"),this.rulePartBlock.classList.remove("effect")):"row"===this.flexDir?n<i.width/2?(this.rulePartBlock.classList.add("trigger"),this.rulePartBlock.classList.remove("effect")):(this.rulePartBlock.classList.remove("trigger"),this.rulePartBlock.classList.add("effect")):"column"===this.flexDir&&(r<i.height/2?(this.rulePartBlock.classList.add("trigger"),this.rulePartBlock.classList.remove("effect")):(this.rulePartBlock.classList.remove("trigger"),this.rulePartBlock.classList.add("effect"))),this.snapToGrid(n,r)}},{key:"snapToGrid",value:function(e,t){var n=40*Math.floor((e-20)/40)+20,r=40*Math.floor((t-20)/40)+20;r<20&&(r=20),this.elt.style.transform="translate(".concat(n,"px,").concat(r,"px)")}},{key:"onUp",value:function(e,t){this.elt.classList.remove("dragging");var n=document.getElementById("delete-area"),r=n.getBoundingClientRect().height;n.classList.remove("delete-active"),this.ruleArea.classList.remove("drag-location-hint"),this.rulePartBlock.classList.contains("trigger")?this.role="trigger":this.rulePartBlock.classList.contains("effect")&&(this.role="effect"),t>window.innerHeight-r&&this.remove(),this.onRuleChange()}},{key:"reset",value:function(){this.elt.style.transform=this.resetState.transform,"trigger"===this.role?(this.rulePartBlock.classList.add("trigger"),this.rulePartBlock.classList.remove("effect")):"effect"===this.role?(this.rulePartBlock.classList.remove("trigger"),this.rulePartBlock.classList.add("effect")):this.remove()}},{key:"setRulePart",value:function(e){this.rulePart=e,e.trigger?(this.role="trigger",this.rulePartBlock.classList.add("trigger")):e.effect&&(this.role="effect",this.rulePartBlock.classList.add("effect"))}},{key:"snapToCenter",value:function(e,t){if(this.role){var n=document.getElementById("drag-hint"),r=window.getComputedStyle(n).flexDirection,i=this.ruleArea.getBoundingClientRect(),o=this.elt.getBoundingClientRect();void 0===e&&(e=0,t=1);var a=(e+1)/(t+1);if("row"===r){var s=i.height*a-o.height/2,c=i.width/4-o.width/2;"effect"===this.role&&(c=3*i.width/4-o.width/2),this.snapToGrid(c,s)}else if("column"===r){var u=i.width*a-o.width/2,l=i.height/4-o.height/2;"effect"===this.role&&(l=3*i.height/4-o.height/2),this.snapToGrid(u,l)}this.flexDir=r}}},{key:"remove",value:function(){this.ruleArea.removeChild(this.elt),this.rulePart=null,this.role="removed",this.onRuleChange()}}])&&r(t.prototype,n),a&&r(t,a),e}();e.exports=a},function(e,t,n){"use strict";var r=n(20),i=n(70),o=n(16);e.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:i(c,n);u>s;)t[s++]=e;return t}},function(e,t,n){var r=n(31),i=n(20),o=n(69),a=n(16),s=function(e){return function(t,n,s,c){r(n);var u=i(t),l=o(u),h=a(u.length),f=e?h-1:0,d=e?-1:1;if(s<2)for(;;){if(f in l){c=l[f],f+=d;break}if(f+=d,e?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?f>=0:h>f;f+=d)f in l&&(c=n(c,l[f],f,u));return c}};e.exports={left:s(!1),right:s(!0)}},function(e,t,n){var r=n(17);e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},function(e,t,n){"use strict";var r=n(203),i=n(205);e.exports=r("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},function(e,t,n){"use strict";var r=n(106).charAt,i=n(27),o=n(111),a=i.set,s=i.getterFor("String Iterator");o(String,"String",(function(e){a(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=s(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r=/[^\0-\u007E]/,i=/[.\u3002\uFF0E\uFF61]/g,o="Overflow: input needs wider integers to process",a=Math.floor,s=String.fromCharCode,c=function(e){return e+22+75*(e<26)},u=function(e,t,n){var r=0;for(e=n?a(e/700):e>>1,e+=a(e/t);e>455;r+=36)e=a(e/35);return a(r+36*e/(e+38))},l=function(e){var t,n,r=[],i=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t}(e)).length,l=128,h=0,f=72;for(t=0;t<e.length;t++)(n=e[t])<128&&r.push(s(n));var d=r.length,p=d;for(d&&r.push("-");p<i;){var m=2147483647;for(t=0;t<e.length;t++)(n=e[t])>=l&&n<m&&(m=n);var v=p+1;if(m-l>a((2147483647-h)/v))throw RangeError(o);for(h+=(m-l)*v,l=m,t=0;t<e.length;t++){if((n=e[t])<l&&++h>2147483647)throw RangeError(o);if(n==l){for(var g=h,y=36;;y+=36){var b=y<=f?1:y>=f+26?26:y-f;if(g<b)break;var w=g-b,E=36-b;r.push(s(c(b+w%E))),g=a(w/E)}r.push(s(c(g))),f=u(h,v,p==d),h=0,++p}}++h,++l}return r.join("")};e.exports=function(e){var t,n,o=[],a=e.toLowerCase().replace(i,".").split(".");for(t=0;t<a.length;t++)n=a[t],o.push(r.test(n)?"xn--"+l(n):n);return o.join(".")}},function(e,t,n){"use strict";n(23);var r=n(8),i=n(21),o=n(164),a=n(15),s=n(107),c=n(30),u=n(116),l=n(27),h=n(97),f=n(7),d=n(32),p=n(63),m=n(4),v=n(6),g=n(47),y=n(26),b=n(184),w=n(62),E=n(0),_=i("fetch"),k=i("Headers"),S=E("iterator"),x=l.set,T=l.getterFor("URLSearchParams"),P=l.getterFor("URLSearchParamsIterator"),O=/\+/g,C=Array(4),I=function(e){return C[e-1]||(C[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},R=function(e){try{return decodeURIComponent(e)}catch(t){return e}},L=function(e){var t=e.replace(O," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(I(n--),R);return t}},A=/[!'()~]|%20/g,M={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},D=function(e){return M[e]},j=function(e){return encodeURIComponent(e).replace(A,D)},N=function(e,t){if(t)for(var n,r,i=t.split("&"),o=0;o<i.length;)(n=i[o++]).length&&(r=n.split("="),e.push({key:L(r.shift()),value:L(r.join("="))}))},B=function(e){this.entries.length=0,N(this.entries,e)},F=function(e,t){if(e<t)throw TypeError("Not enough arguments")},U=u((function(e,t){x(this,{type:"URLSearchParamsIterator",iterator:b(T(e).entries),kind:t})}),"Iterator",(function(){var e=P(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),H=function(){h(this,H,"URLSearchParams");var e,t,n,r,i,o,a,s,c,u=arguments.length>0?arguments[0]:void 0,l=this,d=[];if(x(l,{type:"URLSearchParams",entries:d,updateURL:function(){},updateSearchParams:B}),void 0!==u)if(v(u))if("function"==typeof(e=w(u)))for(n=(t=e.call(u)).next;!(r=n.call(t)).done;){if((a=(o=(i=b(m(r.value))).next).call(i)).done||(s=o.call(i)).done||!o.call(i).done)throw TypeError("Expected sequence with length 2");d.push({key:a.value+"",value:s.value+""})}else for(c in u)f(u,c)&&d.push({key:c,value:u[c]+""});else N(d,"string"==typeof u?"?"===u.charAt(0)?u.slice(1):u:u+"")},q=H.prototype;s(q,{append:function(e,t){F(arguments.length,2);var n=T(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){F(arguments.length,1);for(var t=T(this),n=t.entries,r=e+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;t.updateURL()},get:function(e){F(arguments.length,1);for(var t=T(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){F(arguments.length,1);for(var t=T(this).entries,n=e+"",r=[],i=0;i<t.length;i++)t[i].key===n&&r.push(t[i].value);return r},has:function(e){F(arguments.length,1);for(var t=T(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){F(arguments.length,1);for(var n,r=T(this),i=r.entries,o=!1,a=e+"",s=t+"",c=0;c<i.length;c++)(n=i[c]).key===a&&(o?i.splice(c--,1):(o=!0,n.value=s));o||i.push({key:a,value:s}),r.updateURL()},sort:function(){var e,t,n,r=T(this),i=r.entries,o=i.slice();for(i.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(i[t].key>e.key){i.splice(t,0,e);break}t===n&&i.push(e)}r.updateURL()},forEach:function(e){for(var t,n=T(this).entries,r=d(e,arguments.length>1?arguments[1]:void 0,3),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new U(this,"keys")},values:function(){return new U(this,"values")},entries:function(){return new U(this,"entries")}},{enumerable:!0}),a(q,S,q.entries),a(q,"toString",(function(){for(var e,t=T(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(j(e.key)+"="+j(e.value));return n.join("&")}),{enumerable:!0}),c(H,"URLSearchParams"),r({global:!0,forced:!o},{URLSearchParams:H}),o||"function"!=typeof _||"function"!=typeof k||r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,i=[e];return arguments.length>1&&(v(t=arguments[1])&&(n=t.body,"URLSearchParams"===p(n)&&((r=t.headers?new k(t.headers):new k).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=g(t,{body:y(0,String(n)),headers:y(0,r)}))),i.push(t)),_.apply(this,i)}}),e.exports={URLSearchParams:H,getState:T}},function(e,t,n){var r=n(4),i=n(62);e.exports=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return r(t.call(e))}},function(e,t,n){var r=n(24),i="["+n(165)+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},function(e,t,n){var r=n(2),i=n(165);e.exports=function(e){return r((function(){return!!i[e]()||"​᠎"!="​᠎"[e]()||i[e].name!==e}))}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9),n(23),n(3),n(5),n(105),n(33),n(146);var i=n(35),o=n(22),a=n(142),s=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.thing=t,this.name=n,this.label=r.title||r.label||n,this.input=r.input,this.href=i,this.id="action-button-".concat(o.escapeHtmlForIdClass(this.name))}var t,n,s;return t=e,(n=[{key:"attach",value:function(){this.button=this.thing.element.querySelector("#".concat(this.id)),this.button.addEventListener("click",this.handleClick.bind(this))}},{key:"view",value:function(){var e="";if(void 0!==this.input){var t="".concat(window.location.pathname,"/actions/").concat(encodeURIComponent(this.name).replace(/%2F/g,"%252F")),n=new URLSearchParams;n.set("referrer",encodeURIComponent(window.location.pathname)),this.inputPageRef="".concat(t,"?").concat(n.toString()),"object"==typeof this.input&&(this.input.hasOwnProperty("required")&&Array.isArray(this.input.required)&&this.input.required.length>0||"object"!==this.input.type)&&(e="disabled")}return"\n      <webthing-action ".concat(e,' id="').concat(this.id,'"\n        data-name="').concat(o.escapeHtml(this.label),'">\n      </webthing-action>')}},{key:"handleClick",value:function(){var e,t,n,r=this;void 0===this.input?i.postJson(this.href,(e={},t=this.name,n={input:{}},t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)).catch((function(e){console.error('Error performing action "'.concat(r.name,'": ').concat(e))})):a(this.inputPageRef)}}])&&r(t.prototype,n),s&&r(t,s),e}();e.exports=s},function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(36),n(37),n(9),n(44),n(23),n(43),n(3),n(5),n(45),n(33);var a=n(120),s=n(22),c=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.thing=t,this.name=n,this.readOnly=!!r.readOnly,this.label=r.title||n,this.type=r.type,this.unit=r.unit?a.nameToAbbreviation(r.unit):null,this.choices=r.enum,this.id="enum-".concat(s.escapeHtmlForIdClass(this.name))}var t,n,i;return t=e,(n=[{key:"attach",value:function(){this.select=this.thing.element.querySelector("#".concat(this.id));var e=s.debounce(500,this.set.bind(this));this.select.addEventListener("change",e)}},{key:"view",value:function(){var e=this.unit||"";if(this.readOnly){if("number"===this.type||"integer"===this.type){var t=0;if("number"===this.type){var n,i=r(this.choices);try{for(i.s();!(n=i.n()).done;){var o=n.value,a="".concat(o).split(".")[1];"string"==typeof a&&(t=Math.max(t,a.length))}}catch(e){i.e(e)}finally{i.f()}}return'\n          <webthing-numeric-label-property\n            data-name="'.concat(s.escapeHtml(this.label),'" data-unit="').concat(e,'"\n            data-precision="').concat(t,'" id="').concat(this.id,'">\n          </webthing-numeric-label-property>')}return'\n          <webthing-string-label-property\n            data-name="'.concat(s.escapeHtml(this.label),'" id="').concat(this.id,'">\n          </webthing-string-label-property>')}return'\n        <webthing-enum-property data-name="'.concat(s.escapeHtml(this.label),'"\n          data-unit="').concat(e,'" data-type="').concat(this.type,'" id="').concat(this.id,'"\n          data-choices="').concat(btoa(JSON.stringify(this.choices)),'">\n        </webthing-enum-property>')}},{key:"update",value:function(e){this.select&&(this.select.value=e)}},{key:"set",value:function(){this.thing.setProperty(this.name,this.select.value)}}])&&o(t.prototype,n),i&&o(t,i),e}();e.exports=c},function(e,t,n){"use strict";var r=n(333),i=n(190),o=n(161),a=n(216),s=n(335);function c(e,t,n){var r=this._refs[n];if("string"==typeof r){if(!this._refs[r])return c.call(this,e,t,r);r=this._refs[r]}if((r=r||this._schemas[n])instanceof a)return p(r.schema,this._opts.inlineRefs)?r.schema:r.validate||this._compile(r);var i,o,s,l=u.call(this,t,n);return l&&(i=l.schema,t=l.root,s=l.baseId),i instanceof a?o=i.validate||e.call(this,i.schema,t,void 0,s):void 0!==i&&(o=p(i,this._opts.inlineRefs)?i:e.call(this,i,t,void 0,s)),o}function u(e,t){var n=r.parse(t),i=v(n),o=m(this._getId(e.schema));if(0===Object.keys(e.schema).length||i!==o){var s=y(i),c=this._refs[s];if("string"==typeof c)return l.call(this,e,c,n);if(c instanceof a)c.validate||this._compile(c),e=c;else{if(!((c=this._schemas[s])instanceof a))return;if(c.validate||this._compile(c),s==y(t))return{schema:c,root:e,baseId:o};e=c}if(!e.schema)return;o=m(this._getId(e.schema))}return f.call(this,n,o,e.schema,e)}function l(e,t,n){var r=u.call(this,e,t);if(r){var i=r.schema,o=r.baseId;e=r.root;var a=this._getId(i);return a&&(o=b(o,a)),f.call(this,n,o,i,e)}}e.exports=c,c.normalizeId=y,c.fullPath=m,c.url=b,c.ids=function(e){var t=y(this._getId(e)),n={"":t},a={"":m(t,!1)},c={},u=this;return s(e,{allKeys:!0},(function(e,t,s,l,h,f,d){if(""!==t){var p=u._getId(e),m=n[l],v=a[l]+"/"+h;if(void 0!==d&&(v+="/"+("number"==typeof d?d:o.escapeFragment(d))),"string"==typeof p){p=m=y(m?r.resolve(m,p):p);var g=u._refs[p];if("string"==typeof g&&(g=u._refs[g]),g&&g.schema){if(!i(e,g.schema))throw new Error('id "'+p+'" resolves to more than one schema')}else if(p!=y(v))if("#"==p[0]){if(c[p]&&!i(e,c[p]))throw new Error('id "'+p+'" resolves to more than one schema');c[p]=e}else u._refs[p]=v}n[t]=m,a[t]=v}})),c},c.inlineRef=p,c.schema=u;var h=o.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function f(e,t,n,r){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var i=e.fragment.split("/"),a=1;a<i.length;a++){var s=i[a];if(s){if(void 0===(n=n[s=o.unescapeFragment(s)]))break;var c;if(!h[s]&&((c=this._getId(n))&&(t=b(t,c)),n.$ref)){var l=b(t,n.$ref),f=u.call(this,r,l);f&&(n=f.schema,r=f.root,t=f.baseId)}}}return void 0!==n&&n!==r.schema?{schema:n,root:r,baseId:t}:void 0}}var d=o.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function p(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var n;if(Array.isArray(t)){for(var r=0;r<t.length;r++)if("object"==typeof(n=t[r])&&!e(n))return!1}else for(var i in t){if("$ref"==i)return!1;if("object"==typeof(n=t[i])&&!e(n))return!1}return!0}(e):t?function e(t){var n,r=0;if(Array.isArray(t)){for(var i=0;i<t.length;i++)if("object"==typeof(n=t[i])&&(r+=e(n)),r==1/0)return 1/0}else for(var o in t){if("$ref"==o)return 1/0;if(d[o])r++;else if("object"==typeof(n=t[o])&&(r+=e(n)+1),r==1/0)return 1/0}return r}(e)<=t:void 0)}function m(e,t){return!1!==t&&(e=y(e)),v(r.parse(e))}function v(e){return r.serialize(e).split("#")[0]+"#"}var g=/#\/?$/;function y(e){return e?e.replace(g,""):""}function b(e,t){return t=y(t),r.resolve(e,t)}},function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n}},function(e,t,n){"use strict";var r=n(189);function i(e,t,n){this.message=n||i.message(e,t),this.missingRef=r.url(e,t),this.missingSchema=r.normalizeId(r.fullPath(this.missingRef))}function o(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:o((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:o(i)},i.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(36),n(37),n(9),n(150);var o,a,s=n(155),c=n(365),u=n(366),l=n(367),h=n(224),f=n(22),d=function(){function e(t,n,i,o,a,c){var u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],h=arguments.length>8&&void 0!==arguments[8]&&arguments[8];r(this,e),this.retrievedSchema=s.retrieveSchema(t,a,n),this.schema=t,this.formData=n,this.idSchema=i,this.name=o,this.definitions=a,this.onChange=c,this.required=u,this.disabled=l,this.readOnly=h}var t,n,d;return t=e,(n=[{key:"getFieldType",value:function(){var e={array:a,boolean:l,integer:c,number:c,object:o,string:u}[this.retrievedSchema.type];return e||h}},{key:"render",value:function(){var e=this.getFieldType(),t=this.retrievedSchema.type,n=f.escapeHtmlForIdClass(this.idSchema.$id),r=this.retrievedSchema.description,i=["form-group","field","field-".concat(t)].join(" ").trim(),o=this.retrievedSchema.title||this.name;null!=o&&(o=f.escapeHtml(o),o=this.required?o+s.REQUIRED_FIELD_SYMBOL:o);var a=!0,c=!0;"array"===t&&(a=c=s.isMultiSelect(this.schema,this.definitions)),"object"===t&&(a=c=!1);var u=document.createElement("div");u.className=i,u.innerHTML=(a&&o?'<div id="'.concat(n,'__label" class="control-label">').concat(o,"</div>"):"")+(c&&r?'<p id="'.concat(n,'__description" class="field-description">').concat(f.escapeHtml(r),"</p>"):"");var l=new e(this.schema,this.formData,this.idSchema,this.name,this.definitions,this.onChange,this.required,this.disabled,this.readOnly).render();return u.appendChild(l),u}}])&&i(t.prototype,n),d&&i(t,d),e}();e.exports=d,o=n(368),a=n(369)},function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(36),n(37),n(9),n(44),n(143),n(23),n(43),n(3),n(5),n(157),n(33);var o=n(35),a=n(22),s={init:function(){this.element=document.getElementById("main-menu"),this.scrim=document.getElementById("menu-scrim"),this.hidden=!0,this.element.addEventListener("click",this.handleClick.bind(this)),this.scrim.addEventListener("click",this.handleScrimClick.bind(this)),this.items={},this.items.things=[document.getElementById("things-menu-item")],this.items.settings=[document.getElementById("settings-menu-item")],this.items.floorplan=[document.getElementById("floorplan-menu-item")],this.items.rules=[document.getElementById("rules-menu-item")],this.items.rule=[document.getElementById("rules-menu-item")],this.items.logs=[document.getElementById("logs-menu-item")],this.currentItem="things",this.menuButton=document.getElementById("menu-button")},getExperimentSetting:function(e){o.getExperimentSetting(e).then((function(t){t?s.showItem(e):s.hideItem(e)})).catch((function(t){console.warn("".concat(e," experiment setting is not yet set ").concat(t))}))},show:function(){this.element.classList.remove("hidden"),this.scrim.classList.remove("hidden"),this.menuButton.classList.add("menu-shown"),this.hidden=!1},hide:function(){this.element.classList.add("hidden"),this.scrim.classList.add("hidden"),this.menuButton.classList.remove("menu-shown"),this.hidden=!0},toggle:function(){this.hidden?this.show():this.hide()},handleClick:function(e){"A"==e.target.tagName&&this.hide()},handleScrimClick:function(e){this.hide()},selectItem:function(e){if(this.items[e]){var t,n=r(this.items[this.currentItem]);try{for(n.s();!(t=n.n()).done;){t.value.classList.remove("selected")}}catch(e){n.e(e)}finally{n.f()}var i,o=r(this.items[e]);try{for(o.s();!(i=o.n()).done;){i.value.classList.add("selected")}}catch(e){o.e(e)}finally{o.f()}this.currentItem=e}else e.startsWith("extension-")||console.error("Tried to select a menu item that didn't exist:",e)},showItem:function(e){var t,n=r(this.items[e]);try{for(n.s();!(t=n.n()).done;){t.value.classList.remove("hidden")}}catch(e){n.e(e)}finally{n.f()}},hideItem:function(e){var t,n=r(this.items[e]);try{for(n.s();!(t=n.n()).done;){t.value.classList.add("hidden")}}catch(e){n.e(e)}finally{n.f()}},addExtensionItem:function(e,t){var n=a.escapeHtmlForIdClass(e.id),r=document.createElement("a");r.id="extension-".concat(n,"-menu-item"),r.href="/extensions/".concat(encodeURIComponent(e.id)),r.innerText=t;var i=document.createElement("li");i.appendChild(r);var o=document.querySelector("#main-menu > ul"),s=Array.from(o.querySelectorAll("li")),c=document.getElementById("settings-menu-item").parentNode,u=document.getElementById("logout").parentNode,l=s.slice(s.indexOf(c)+1,s.indexOf(u));if(0===l.length)o.insertBefore(i,u);else{for(var h=u;l.length>0;){var f=l.pop();if(t.localeCompare(f.firstChild.innerText)>0)break;h=f}o.insertBefore(i,h)}this.items[e.view.id]=[r]}};e.exports=s},function(e,t,n){"use strict";var r=n(98),i=n(4),o=n(16),a=n(24),s=n(101),c=n(99);r("match",1,(function(e,t,n){return[function(t){var n=a(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=i(e),u=String(this);if(!a.global)return c(a,u);var l=a.unicode;a.lastIndex=0;for(var h,f=[],d=0;null!==(h=c(a,u));){var p=String(h[0]);f[d]=p,""===p&&(a.lastIndex=s(u,o(a.lastIndex),l)),d++}return 0===d?null:f}]}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(13),n(3),n(14),n(5);var u=n(74),l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,n,a,c=o(l);function l(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var n=document.createElement("template");return n.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-action-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-action-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-action-button {\n      background-color: #698ba4;\n      text-transform: uppercase;\n      height: 4rem;\n      width: 8rem;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      border: none;\n      border-radius: 0.5rem;\n      padding: 1rem;\n      color: #fff;\n      z-index: 10;\n      background-size: 3rem;\n      background-repeat: no-repeat;\n      background-position: center;\n    }\n\n    .webthing-action-button:hover {\n      background-color: #59768a;\n    }\n\n    .webthing-action-button:active {\n      background-color: #496071;\n    }\n\n    .webthing-action-button:disabled {\n      background-color: #79a1bd;\n    }\n\n    .webthing-action-button::-moz-focus-inner {\n      border: 0;\n    }\n\n    .webthing-action-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(u.count,'" class="webthing-action-container">\n    <div id="contents-').concat(u.count,'" class="webthing-action-contents">\n      <button id="button-').concat(u.count,'" type="button" class="webthing-action-button"></button>\n    </div>\n  </div>\n  <div id="name-').concat(u.count,'" class="webthing-action-name"></div>\n'),(t=c.call(this,n)).opts=e||{},t._button=t.shadowRoot.querySelector(".webthing-action-button"),t._name=t.shadowRoot.querySelector(".webthing-action-name"),t._href=null,t._onClick=t.__onClick.bind(s(t)),t}return t=l,(n=[{key:"connectedCallback",value:function(){this.name=this.dataset.name,this._upgradeProperty("href"),this._button.addEventListener("click",this._onClick)}},{key:"disconnectedCallback",value:function(){this._button.removeEventListener("click",this._onClick)}},{key:"__onClick",value:function(e){e.preventDefault(),e.stopPropagation(),this._href?window.location.href=this._href:(this.value=e.target.value,this.dispatchEvent(new CustomEvent("click",{bubbles:!0})))}},{key:"href",get:function(){return this._href},set:function(e){this._href=e}},{key:"name",get:function(){return this._name.innerText},set:function(e){this.opts.icon?this._button.style.backgroundImage="url('".concat(this.opts.icon,"')"):this._button.innerText=e,this._name.innerText=e}}])&&r(t.prototype,n),a&&r(t,a),l}(u);window.customElements.define("webthing-action",l),e.exports=l},function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(36),n(37),n(9),n(44),n(23),n(43),n(13),n(3),n(14),n(5),n(33);var h=n(74),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(l,e);var t,n,i,c=s(l);function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=document.createElement("template");return t.innerHTML="\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-enum-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-enum-property-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-enum-property-select {\n      height: 3rem;\n      width: 7rem;\n      text-align: left;\n      background-color: #d2d9de;\n      color: #333;\n      border: none;\n      border-radius: 0.5rem;\n      padding: 0.5rem;\n      margin: 0.5rem 0;\n      font-size: 1.5rem;\n      -moz-appearance: none;\n      -webkit-appearance: none;\n      appearance: none;\n      background-image: url('/images/select-arrow-dark.svg');\n      background-repeat: no-repeat;\n      background-size: 1.25rem;\n      background-position: calc(100% - 0.5rem);\n    }\n\n    .webthing-enum-property-unit.hidden {\n      display: none;\n    }\n\n    .webthing-enum-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id=\"container-".concat(h.count,'" class="webthing-enum-property-container">\n    <div id="contents-').concat(h.count,'" class="webthing-enum-property-contents">\n      <select id="select-').concat(h.count,'" class="webthing-enum-property-select"></select>\n      <div id="unit-').concat(h.count,'" class="webthing-enum-property-unit"></div>\n    </div>\n  </div>\n  <div id="name-').concat(h.count,'" class="webthing-enum-property-name"></div>\n'),(e=c.call(this,t))._select=e.shadowRoot.querySelector(".webthing-enum-property-select"),e._unit=e.shadowRoot.querySelector(".webthing-enum-property-unit"),e._name=e.shadowRoot.querySelector(".webthing-enum-property-name"),e._type="string",e._upperCaseOptions=!1,e._onChange=e.__onChange.bind(u(e)),e}return t=l,(n=[{key:"connectedCallback",value:function(){this.name=this.dataset.name,this.value=void 0!==this.dataset.value?this.dataset.value:"",this.unit=void 0!==this.dataset.unit?this.dataset.unit:"",this.type=void 0!==this.dataset.type?this.dataset.type:"string",this.choices=void 0!==this.dataset.choices?JSON.parse(atob(this.dataset.choices)):[],this.readOnly=void 0!==this.dataset.readOnly&&"true"===this.dataset.readOnly,this._upgradeProperty("value"),this._select.addEventListener("change",this._onChange)}},{key:"disconnectedCallback",value:function(){this._select.removeEventListener("change",this._onChange)}},{key:"_setUnitClass",value:function(){this.unit?this._unit.classList.remove("hidden"):this._unit.classList.add("hidden")}},{key:"__onChange",value:function(e){e.preventDefault(),this.value=e.target.options[e.target.selectedIndex].value,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}},{key:"value",get:function(){if(0===this._select.options.length)return"";var e=this._select.options[this._select.selectedIndex].value;switch(this.type){case"integer":return parseInt(e,10);case"number":return parseFloat(e);case"string":default:return e}},set:function(e){e="".concat(e),this._select.value=e}},{key:"readOnly",get:function(){return this._select.hasAttribute("disabled")},set:function(e){var t=Boolean(e);t?this._select.setAttribute("disabled",""):this._select.removeAttribute("disabled"),this._select.disabled=t}},{key:"name",get:function(){return this._name.innerText},set:function(e){this._name.innerText=e}},{key:"unit",get:function(){return this._unit.innerText},set:function(e){this._unit.innerText=e,this._setUnitClass()}},{key:"type",get:function(){return this._type},set:function(e){this._type=e}},{key:"choices",get:function(){return this._select.options},set:function(e){this._select.innerHTML="";var t,n=r(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,o=document.createElement("option");o.value=i,this._upperCaseOptions?o.innerText=i.toUpperCase():o.innerText=i,this._select.appendChild(o)}}catch(e){n.e(e)}finally{n.f()}}}])&&o(t.prototype,n),i&&o(t,i),l}(h);window.customElements.define("webthing-enum-property",f),e.exports=f},function(e,t,n){var r=n(11),i=n(73),o=n(18),a=n(68).f,s=function(e){return function(t){for(var n,s=o(t),c=i(s),u=c.length,l=0,h=[];u>l;)n=c[l++],r&&!a.call(s,n)||h.push(e?[n,s[n]]:s[n]);return h}};e.exports={entries:s(!0),values:s(!1)}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,h=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&d())}function d(){if(!l){var e=s(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){(function(e){
/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
!function(){var n="undefined"!=typeof window?window:e,r={};for(var i in function(e,t,n){var r;function i(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var o="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var a=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var r=0;r<n.length;++r){var i=n[r];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);function s(e,t){if(t){for(var n=a,r=e.split("."),i=0;i<r.length-1;i++){var s=r[i];s in n||(n[s]={}),n=n[s]}(s=t(i=n[r=r[r.length-1]]))!=i&&null!=s&&o(n,r,{configurable:!0,writable:!0,value:s})}}function c(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function u(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:i(e)}}function l(e){if(!(e instanceof Array)){e=u(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}s("Symbol",(function(e){function t(e,t){this.a=e,o(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.a};var n=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t("jscomp_symbol_"+(r||"")+"_"+n++,r)}})),s("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=a[t[n]];"function"==typeof r&&"function"!=typeof r.prototype[e]&&o(r.prototype,e,{configurable:!0,writable:!0,value:function(){return c(i(this))}})}return e}));var h,f="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)h=Object.setPrototypeOf;else{var d;e:{var p={};try{p.__proto__={Wd:!0},d=p.Wd;break e}catch(e){}d=!1}h=d?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var m=h;function v(e,t){if(e.prototype=f(t.prototype),e.prototype.constructor=e,m)m(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n]}function g(){this.j=!1,this.g=null,this.b=void 0,this.a=1,this.f=this.h=0,this.v=this.c=null}function y(e){if(e.j)throw new TypeError("Generator is already running");e.j=!0}function b(e,t){e.c={td:t,yd:!0},e.a=e.h||e.f}function w(e,t,n){return e.a=n,{value:t}}function E(e){e.a=0}function _(e,t,n){e.h=t,null!=n&&(e.f=n)}function k(e){e.h=0,e.f=2}function S(e,t){e.a=t,e.h=0}function x(e){e.h=0;var t=e.c.td;return e.c=null,t}function T(e){e.v=[e.c],e.h=0,e.f=0}function P(e,t){var n=e.v.splice(0)[0];(n=e.c=e.c||n)?n.yd?e.a=e.h||e.f:null!=n.u&&e.f<n.u?(e.a=n.u,e.c=null):e.a=e.f:e.a=t}function O(e){this.a=new g,this.b=e}function C(e,t,n,r){try{var i=t.call(e.a.g,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.a.j=!1,i;var o=i.value}catch(t){return e.a.g=null,b(e.a,t),I(e)}return e.a.g=null,r.call(e.a,o),I(e)}function I(e){for(;e.a.a;)try{var t=e.b(e.a);if(t)return e.a.j=!1,{value:t.value,done:!1}}catch(t){e.a.b=void 0,b(e.a,t)}if(e.a.j=!1,e.a.c){if(t=e.a.c,e.a.c=null,t.yd)throw t.td;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function R(e){this.next=function(t){return y(e.a),e.a.g?t=C(e,e.a.g.next,t,e.a.l):(e.a.l(t),t=I(e)),t},this.throw=function(t){return y(e.a),e.a.g?t=C(e,e.a.g.throw,t,e.a.l):(b(e.a,t),t=I(e)),t},this.return=function(t){return function(e,t){y(e.a);var n=e.a.g;return n?C(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.a.return):(e.a.return(t),I(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function L(e,t){var n=new R(new O(t));return m&&m(n,e.prototype),n}function A(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(r,i){!function e(o){o.done?r(o.value):Promise.resolve(o.value).then(t,n).then(e,i)}(e.next())}))}(new R(new O(e)))}function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function D(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var o=e[i];if(t.call(n,o,i,e))return{Y:i,Sd:o}}return{Y:-1,Sd:void 0}}function j(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}g.prototype.l=function(e){this.b=e},g.prototype.return=function(e){this.c={return:e},this.a=this.f},g.prototype.u=function(e){this.a=e},s("Promise",(function(e){function t(e){this.b=0,this.g=void 0,this.a=[];var t=this.c();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var i=a.setTimeout;n.prototype.c=function(e){i(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.f(e)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.c=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.w),reject:e(this.f)}},t.prototype.w=function(e){if(e===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.C(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.h(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(e){return void this.f(e)}"function"==typeof t?this.G(t,e):this.h(e)},t.prototype.f=function(e){this.j(2,e)},t.prototype.h=function(e){this.j(1,e)},t.prototype.j=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.g=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)o.b(this.a[e]);this.a=null}};var o=new n;return t.prototype.C=function(e){var t=this.c();e.Zb(t.resolve,t.reject)},t.prototype.G=function(e,t){var n=this.c();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){o(e)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.Zb(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Zb=function(e,t){function n(){switch(r.b){case 1:e(r.g);break;case 2:t(r.g);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?o.b(n):this.a.push(n)},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var i=u(e),o=i.next();!o.done;o=i.next())r(o.value).Zb(t,n)}))},t.all=function(e){var n=u(e),i=n.next();return i.done?r([]):new t((function(e,t){function o(t){return function(n){a[t]=n,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).Zb(o(a.length-1),t),i=n.next()}while(!i.done)}))},t})),s("WeakMap",(function(e){function t(e){if(this.a=(c+=Math.random()+1).toString(),e){e=u(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function r(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function i(e){if(!M(e,s)){var t=new n;o(e,s,{value:t})}}function a(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(i(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(e){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();a("freeze"),a("preventExtensions"),a("seal");var c=0;return t.prototype.set=function(e,t){if(!r(e))throw Error("Invalid WeakMap key");if(i(e),!M(e,s))throw Error("WeakMap key fail: "+e);return e[s][this.a]=t,this},t.prototype.get=function(e){return r(e)&&M(e,s)?e[s][this.a]:void 0},t.prototype.has=function(e){return r(e)&&M(e,s)&&M(e[s],this.a)},t.prototype.delete=function(e){return!!(r(e)&&M(e,s)&&M(e[s],this.a))&&delete e[s][this.a]},t})),s("Map",(function(e){function t(){var e={};return e.Fa=e.next=e.head=e}function n(e,t){var n=e.a;return c((function(){if(n){for(;n.head!=e.a;)n=n.Fa;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?o.has(t)?n=o.get(t):(n=""+ ++a,o.set(t,n)):n="p_"+t;var r=e.b[n];if(r&&M(e.b,n))for(var i=0;i<r.length;i++){var s=r[i];if(t!=t&&s.key!=s.key||t===s.key)return{id:n,list:r,index:i,X:s}}return{id:n,list:r,index:-1,X:void 0}}function i(e){if(this.b={},this.a=t(),this.size=0,e){e=u(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(u([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&!((i=r.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!r.next().done)}catch(e){return!1}}())return e;var o=new WeakMap;i.prototype.set=function(e,t){var n=r(this,e=0===e?0:e);return n.list||(n.list=this.b[n.id]=[]),n.X?n.X.value=t:(n.X={next:this.a,Fa:this.a.Fa,head:this.a,key:e,value:t},n.list.push(n.X),this.a.Fa.next=n.X,this.a.Fa=n.X,this.size++),this},i.prototype.delete=function(e){return!(!(e=r(this,e)).X||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.b[e.id],e.X.Fa.next=e.X.next,e.X.next.Fa=e.X.Fa,e.X.head=null,this.size--,!0)},i.prototype.clear=function(){this.b={},this.a=this.a.Fa=t(),this.size=0},i.prototype.has=function(e){return!!r(this,e).X},i.prototype.get=function(e){return(e=r(this,e).X)&&e.value},i.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},i.prototype.keys=function(){return n(this,(function(e){return e.key}))},i.prototype.values=function(){return n(this,(function(e){return e.value}))},i.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var a=0;return i})),s("Set",(function(e){function t(e){if(this.a=new Map,e){e=u(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.a.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(u([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&i.value[1]==t&&(!(i=r.next()).done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&r.next().done)}catch(e){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.a.set(e,e),this.size=this.a.size,this},t.prototype.delete=function(e){return e=this.a.delete(e),this.size=this.a.size,e},t.prototype.clear=function(){this.a.clear(),this.size=0},t.prototype.has=function(e){return this.a.has(e)},t.prototype.entries=function(){return this.a.entries()},t.prototype.values=function(){return this.a.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.a.forEach((function(r){return e.call(t,r,r,n)}))},t)})),s("Array.prototype.findIndex",(function(e){return e||function(e,t){return D(this,e,t).Y}})),s("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}})),s("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),s("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length,i=t||0;for(0>i&&(i=Math.max(i+r,0));i<r;i++){var o=n[i];if(o===e||Object.is(o,e))return!0}return!1}})),s("String.prototype.includes",(function(e){return e||function(e,t){return-1!==j(this,e,"includes").indexOf(e,t||0)}})),s("Array.from",(function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var r=[],i="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof i){e=i.call(e);for(var o=0;!(i=e.next()).done;)r.push(t.call(n,i.value,o++))}else for(i=e.length,o=0;o<i;o++)r.push(t.call(n,e[o],o));return r}})),s("Array.prototype.find",(function(e){return e||function(e,t){return D(this,e,t).Sd}})),s("Math.log2",(function(e){return e||function(e){return Math.log(e)/Math.LN2}}));var N="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)M(r,i)&&(e[i]=r[i])}return e};s("Object.assign",(function(e){return e||N})),s("Object.values",(function(e){return e||function(e){var t,n=[];for(t in e)M(e,t)&&n.push(e[t]);return n}})),s("String.prototype.startsWith",(function(e){return e||function(e,t){for(var n=j(this,e,"startsWith"),r=n.length,i=e.length,o=Math.max(0,Math.min(0|t,n.length)),a=0;a<i&&o<r;)if(n[o++]!=e[a++])return!1;return a>=i}}));var B=this||self;function F(e,t){var n,r=e.split("."),i=B;r[0]in i||void 0===i.execScript||i.execScript("var "+r[0]);for(;r.length&&(n=r.shift());)r.length||void 0===t?i=i[n]&&i[n]!==Object.prototype[n]?i[n]:i[n]={}:i[n]=t}
/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function U(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function H(e,t,n){var r=Math.pow(e.c,t);n=n*(1-r)+r*e.a,isNaN(n)||(e.a=n,e.b+=t)}function q(e){return e.a/(1-Math.pow(e.c,e.b))}function z(){this.b=new U(2),this.c=new U(5),this.a=0}function V(){}function $(){}function W(){}function K(){}z.prototype.getBandwidthEstimate=function(e){return 128e3>this.a?e:Math.min(q(this.b),q(this.c))};var G=new Set;if(e.console&&e.console.log.bind){var X={},J=(X[1]=console.error.bind(console),X[2]=console.warn.bind(console),X[3]=console.info.bind(console),X[4]=console.log.bind(console),X[5]=console.debug.bind(console),X[6]=console.debug.bind(console),X);W=J[2],$=J[1]}function Y(e,t){for(var n=[],r=u(e),i=r.next();!i.done;i=r.next())n.push(t(i.value));return n}var Q=function e(t){var n;return L(e,(function(e){return 1==e.a&&(n=0),3!=e.a?n<t?w(e,n,3):e.u(0):(n++,e.u(2))}))},Z=function e(t){var n,r,i,o,a,s;return L(e,(function(e){return 1==e.a&&(n=-1,i=r=void 0,o=u(t),a=o.next()),5!=e.a?a.done?-1==n?e.u(0):w(e,{Y:n,Ie:r,item:i,next:void 0},0):(s=a.value,0<=n?w(e,{Y:n,item:i,Ie:r,next:s},5):e.u(5)):(n++,r=i,i=s,a=o.next(),e.u(2))}))},ee=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;
/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/
/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/
function te(e){var t;e instanceof te?(ne(this,e.ra),this.Ya=e.Ya,this.qa=e.qa,re(this,e.ob),this.ia=e.ia,ie(this,e.a.clone()),this.Oa=e.Oa):e&&(t=String(e).match(ee))?(ne(this,t[1]||"",!0),this.Ya=oe(t[2]||""),this.qa=oe(t[3]||"",!0),re(this,t[4]),this.ia=oe(t[5]||"",!0),ie(this,t[6]||"",!0),this.Oa=oe(t[7]||"")):this.a=new de(null)}function ne(e,t,n){e.ra=n?oe(t,!0):t,e.ra&&(e.ra=e.ra.replace(/:$/,""))}function re(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.ob=t}else e.ob=null}function ie(e,t,n){t instanceof de?e.a=t:(n||(t=ae(t,he)),e.a=new de(t))}function oe(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function ae(e,t,n){return null!=e?(e=encodeURI(e).replace(t,se),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function se(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(r=te.prototype).ra="",r.Ya="",r.qa="",r.ob=null,r.ia="",r.Oa="",r.toString=function(){var e=[],t=this.ra;if(t&&e.push(ae(t,ce,!0),":"),t=this.qa){e.push("//");var n=this.Ya;n&&e.push(ae(n,ce,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.ob)&&e.push(":",String(t))}return(t=this.ia)&&(this.qa&&"/"!=t.charAt(0)&&e.push("/"),e.push(ae(t,"/"==t.charAt(0)?le:ue,!0))),(t=this.a.toString())&&e.push("?",t),(t=this.Oa)&&e.push("#",ae(t,fe)),e.join("")},r.resolve=function(e){var t=this.clone();"data"===t.ra&&(t=new te);var n=!!e.ra;n?ne(t,e.ra):n=!!e.Ya,n?t.Ya=e.Ya:n=!!e.qa,n?t.qa=e.qa:n=null!=e.ob;var r=e.ia;if(n)re(t,e.ob);else if(n=!!e.ia){if("/"!=r.charAt(0))if(this.qa&&!this.ia)r="/"+r;else{var i=t.ia.lastIndexOf("/");-1!=i&&(r=t.ia.substr(0,i+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],a=0;a<r.length;){var s=r[a++];"."==s?i&&a==r.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&a==r.length&&o.push("")):(o.push(s),i=!0)}r=o.join("/")}}return n?t.ia=r:n=""!==e.a.toString(),n?ie(t,e.a.clone()):n=!!e.Oa,n&&(t.Oa=e.Oa),t},r.clone=function(){return new te(this)};var ce=/[#\/\?@]/g,ue=/[#\?:]/g,le=/[#\?]/g,he=/[#\?@]/g,fe=/#/g;function de(e){this.a=e||null}function pe(e){this.b=e,this.a=null}function me(e){this.b=e,this.a=null}function ve(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0};this.j=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.f=null==e.baseDelay?n.baseDelay:e.baseDelay,this.h=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.g=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.a=0,this.b=this.f,(this.c=void 0!==t&&t)&&(this.a=1)}function ge(e){var t,n;return A((function(r){if(1==r.a){if(e.a>=e.j){if(!e.c)throw new ye(be,we,Ee);e.a=1,e.b=e.f}return t=e.a,e.a++,0==t?r.return():(n=e.b*(1+(2*Math.random()-1)*e.h),w(r,new Promise((function(e){new me(e).R(n/1e3)})),2))}e.b*=e.g,E(r)}))}function ye(e,t,n,r){for(var i=[],o=3;o<arguments.length;++o)i[o-3]=arguments[o];this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1}(r=de.prototype).ga=null,r.ac=null,r.add=function(e,t){if(!this.ga&&(this.ga={},this.ac=0,this.a))for(var n=this.a.split("&"),r=0;r<n.length;r++){var i=n[r].indexOf("="),o=null;if(0<=i){var a=n[r].substring(0,i);o=n[r].substring(i+1)}else a=n[r];a=decodeURIComponent(a.replace(/\+/g," ")),o=o||"",this.add(a,decodeURIComponent(o.replace(/\+/g," ")))}return this.a=null,(n=this.ga.hasOwnProperty(e)&&this.ga[e])||(this.ga[e]=n=[]),n.push(t),this.ac++,this},r.toString=function(){if(this.a)return this.a;if(!this.ga)return"";var e,t=[];for(e in this.ga)for(var n=encodeURIComponent(e),r=this.ga[e],i=0;i<r.length;i++){var o=n;""!==r[i]&&(o+="="+encodeURIComponent(r[i])),t.push(o)}return this.a=t.join("&")},r.clone=function(){var e=new de;if(e.a=this.a,this.ga){var t,n={};for(t in this.ga)n[t]=this.ga[t].concat();e.ga=n,e.ac=this.ac}return e},pe.prototype.R=function(t){var n=this;this.stop();var r=!0,i=null;return this.a=function(){e.clearTimeout(i),r=!1},i=e.setTimeout((function(){r&&n.b()}),1e3*t),this},pe.prototype.stop=function(){this.a&&(this.a(),this.a=null)},me.prototype.Ob=function(){return this.stop(),this.b(),this},me.prototype.R=function(e){var t=this;return this.stop(),this.a=new pe((function(){t.b()})).R(e),this},me.prototype.xa=function(e){var t=this;return this.stop(),this.a=new pe((function(){t.a.R(e),t.b()})).R(e),this},me.prototype.stop=function(){this.a&&(this.a.stop(),this.a=null)},F("shaka.util.Timer",me),me.prototype.stop=me.prototype.stop,me.prototype.tickEvery=me.prototype.xa,me.prototype.tickAfter=me.prototype.R,me.prototype.tickNow=me.prototype.Ob,ye.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},F("shaka.util.Error",ye);var be=2;ye.Severity={RECOVERABLE:1,CRITICAL:be};var we=7;ye.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:we,CAST:8,STORAGE:9,ADS:10};var Ee=1010;function _e(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n}function ke(e,t){this.promise=e,this.c=t,this.a=!1}function Se(e){return new ke(Promise.reject(e),(function(){return Promise.resolve()}))}function xe(){var e=Promise.reject(new ye(be,we,7001));return e.catch((function(){})),new ke(e,(function(){return Promise.resolve()}))}function Te(e){return new ke(Promise.resolve(e),(function(){return Promise.resolve()}))}function Pe(e){return new ke(e,(function(){return e.catch((function(){}))}))}function Oe(e){return new ke(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function Ce(){}function Ie(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(Re(e)==Re(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;for(var n=Ae(e),r=Ae(t),i=u(Q(e.byteLength)),o=i.next();!o.done;o=i.next())if(n[o=o.value]!=r[o])return!1;return!0}function Re(e){return e instanceof ArrayBuffer?e:e.buffer}function Le(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Ae(e,t,n){return De(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function Me(e,t,n){return De(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function De(e,t,n,r){var i=(e.byteOffset||0)+e.byteLength;return t=Math.max(0,Math.min((e.byteOffset||0)+t,i)),new r(Re(e),t,Math.min(t+Math.max(n,0),i)-t)}function je(t,n){for(var r in n=void 0===n?{}:n)Object.defineProperty(this,r,{value:n[r],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function Ne(){this.a={}}function Be(){this.Cc=new Ne,this.Vb=this}function Fe(e){var t=new Set;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var r=n.constructor==Array;if(n.constructor!=Object&&!r)return null;t.add(n);var i,o=r?[]:{};for(i in n)o[i]=e(n[i]);return r&&(o.length=n.length),o}}(e)}function Ue(e){var t,n={};for(t in e)n[t]=e[t];return n}function He(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function qe(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function ze(e,t,n){if(n||(n=He),e.length!=t.length)return!1;t=t.slice();for(var r={},i=(e=u(e)).next();!i.done;r={rc:r.rc},i=e.next()){if(r.rc=i.value,-1==(i=t.findIndex(function(e){return function(t){return n(e.rc,t)}}(r))))return!1;t[i]=t[t.length-1],t.pop()}return 0==t.length}function Ve(){this.a=[]}function $e(e,t){e.a.push(t.finally((function(){qe(e.a,t)})))}function We(e){Be.call(this),this.f=!1,this.g=new Ve,this.a=new Set,this.b=new Set,this.c=e||null}function Ke(e,t,n){n=n||Qe;var r=Ze[e];(!r||n>=r.priority)&&(Ze[e]={priority:n,He:t})}function Ge(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null}}function Xe(){this.a=0}function Je(e,t,n){ke.call(this,e,t),this.b=n}ye.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:Ee,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004},_e.prototype.resolve=function(){},_e.prototype.reject=function(){},ke.prototype.abort=function(){return this.a=!0,this.c()},ke.prototype.finally=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},ke.prototype.U=function(e,t){function n(n){return function(s){if(i.a&&n)o.reject(a);else{var c=n?e:t;c?r=function(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then((function(){}),(function(){}))})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}(c,s,o):(n?o.resolve:o.reject)(s)}}}function r(){return o.reject(a),i.abort()}var i=this,o=new _e,a=new ye(be,we,7001);return this.promise.then(n(!0),n(!1)),new ke(o,(function(){return r()}))},F("shaka.util.AbortableOperation",ke),ke.prototype.chain=ke.prototype.U,ke.prototype.finally=ke.prototype.finally,ke.all=Oe,ke.prototype.abort=ke.prototype.abort,ke.notAbortable=Pe,ke.completed=Te,ke.aborted=xe,ke.failed=Se,F("shaka.util.BufferUtils",Ce),Ce.toDataView=Me,Ce.toUint8=Ae,Ce.toArrayBuffer=Le,Ce.equal=Ie,je.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},je.prototype.stopImmediatePropagation=function(){this.a=!0},je.prototype.stopPropagation=function(){},Ne.prototype.push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},Ne.prototype.get=function(e){return(e=this.a[e])?e.slice():null},Ne.prototype.remove=function(e,t){e in this.a&&(this.a[e]=this.a[e].filter((function(e){return e!=t})))},Be.prototype.addEventListener=function(e,t){this.Cc.push(e,t)},Be.prototype.removeEventListener=function(e,t){this.Cc.remove(e,t)},Be.prototype.dispatchEvent=function(e){for(var t=this.Cc.get(e.type)||[],n=(t=u(t)).next();!n.done;n=t.next()){n=n.value,e.target=this.Vb,e.currentTarget=this.Vb;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(e){}if(e.a)break}return e.defaultPrevented},Ve.prototype.destroy=function(){for(var e=[],t=u(this.a),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch((function(){})),e.push(n.abort());return this.a=[],Promise.all(e)},v(We,Be),(r=We.prototype).Je=function(e){this.a.add(e)},r.bf=function(e){this.a.delete(e)},r.be=function(){this.a.clear()},r.Ke=function(e){this.b.add(e)},r.cf=function(e){this.b.delete(e)},r.ce=function(){this.b.clear()},r.destroy=function(){return this.f=!0,this.a.clear(),this.b.clear(),this.g.destroy()},r.request=function(e,t){var n=this,r=new Xe;if(this.f){var i=Promise.reject(new ye(be,we,7001));return i.catch((function(){})),new Je(i,(function(){return Promise.resolve()}),r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Fe(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},t.uris=Fe(t.uris);var o=(i=function(e,t,n){for(var r=Te(void 0),i={},o=(e=u(e.a)).next();!o.done;i={uc:i.uc},o=e.next())i.uc=o.value,r=r.U(function(e){return function(){return n.body&&(n.body=Le(n.body)),e.uc(t,n)}}(i));return r.U(void 0,(function(e){if(e instanceof ye&&7001==e.code)throw e;throw new ye(be,1,1006,e)}))}(this,e,t)).U((function(){return function e(t,n,r,i,o,a,s){var c=new te(r.uris[o]),u=c.ra,l=!1;u||(u=(u=location.protocol).slice(0,-1),ne(c,u),r.uris[o]=c.toString()),u=u.toLowerCase();var h,f=(u=Ze[u])?u.He:null;return f?Pe(ge(i)).U((function(){return t.f?xe():(h=Date.now(),f(r.uris[o],r,n,(function(e,r,i){t.c&&n==Ye&&(t.c(e,r),l=!0,s.a=i)})))})).U((function(e){return null==e.timeMs&&(e.timeMs=Date.now()-h),{response:e,Ae:l}}),(function(c){if(t.f)return xe();if(c instanceof ye){if(7001==c.code)throw c;if(c.code==Ee)throw a;if(1==c.severity){var u=new je("retry",{error:c});return t.dispatchEvent(u),o=(o+1)%r.uris.length,e(t,n,r,i,o,c,s)}}throw c})):Se(new ye(be,1,1e3,c))}(n,e,t,new ve(t.retryParameters,!1),0,null,r)})),a=o.U((function(t){return function(e,t,n){for(var r=Te(void 0),i={},o=(e=u(e.b)).next();!o.done;i={vc:i.vc},o=e.next())i.vc=o.value,r=r.U(function(e){return function(){var r=n.response;return r.data&&(r.data=Le(r.data)),e.vc(t,r)}}(i));return r.U((function(){return n}),(function(e){var t=be;if(e instanceof ye){if(7001==e.code)throw e;t=e.severity}throw new ye(t,1,1007,e)}))}(n,e,t)})),s=Date.now(),c=0;i.promise.then((function(){c=Date.now()-s}),(function(){}));var l=0;o.promise.then((function(){l=Date.now()}),(function(){}));var h=a.U((function(t){var r=Date.now()-l,i=t.response;return i.timeMs+=c,i.timeMs+=r,t.Ae||!n.c||i.fromCache||e!=Ye||n.c(i.timeMs,i.data.byteLength),i}),(function(e){throw e&&(e.severity=be),e}));return i=new Je(h.promise,(function(){return h.abort()}),r),$e(this.g,i),i},F("shaka.net.NetworkingEngine",We),We.prototype.request=We.prototype.request,We.prototype.destroy=We.prototype.destroy,We.makeRequest=Ge,We.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}},We.prototype.clearAllResponseFilters=We.prototype.ce,We.prototype.unregisterResponseFilter=We.prototype.cf,We.prototype.registerResponseFilter=We.prototype.Ke,We.prototype.clearAllRequestFilters=We.prototype.be,We.prototype.unregisterRequestFilter=We.prototype.bf,We.prototype.registerRequestFilter=We.prototype.Je,We.unregisterScheme=function(e){delete Ze[e]},We.registerScheme=Ke,We.NumBytesRemainingClass=Xe,v(Je,ke),We.PendingRequest=Je;var Ye=1;We.RequestType={MANIFEST:0,SEGMENT:Ye,LICENSE:2,APP:3,TIMING:4};var Qe=3;We.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Qe};var Ze={};function et(e){this.a=!1,this.b=new _e,this.c=e}function tt(e,t){if(e.a){if(t instanceof ye&&7003==t.code)throw t;throw new ye(be,we,7003,t)}}function nt(){this.a=new Ne}function rt(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.a=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!n.has(e)})),function(e){var t=it;if(null==t){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(e){t=!1}it=t}return t||!1}(e)?t:t.capture||!1}(e,r),this.target.addEventListener(t,n,this.a)}et.prototype.destroy=function(){var e=this;return this.a?this.b:(this.a=!0,this.c().then((function(){e.b.resolve()}),(function(){e.b.resolve()})))},(r=nt.prototype).release=function(){this.Wa(),this.a=null},r.o=function(e,t,n,r){this.a&&(e=new rt(e,t,n,r),this.a.push(t,e))},r.ha=function(e,t,n,r){var i=this;this.o(e,t,(function r(o){i.oa(e,t,r),n(o)}),r)},r.oa=function(e,t,n){if(this.a)for(var r=this.a.get(t)||[],i=(r=u(r)).next();!i.done;i=r.next())(i=i.value).target!=e||n!=i.listener&&n||(i.oa(),this.a.remove(t,i))},r.Wa=function(){if(this.a){var e,t=this.a,n=[];for(e in t.a)n.push.apply(n,l(t.a[e]));for(n=(t=u(n)).next();!n.done;n=t.next())n.value.oa();this.a.a={}}},F("shaka.util.EventManager",nt),nt.prototype.removeAll=nt.prototype.Wa,nt.prototype.unlisten=nt.prototype.oa,nt.prototype.listenOnce=nt.prototype.ha,nt.prototype.listen=nt.prototype.o,nt.prototype.release=nt.prototype.release,rt.prototype.oa=function(){this.target.removeEventListener(this.type,this.listener,this.a),this.listener=this.target=null,this.a=!1};var it=void 0;function ot(){}function at(e){return new te(e=Nt(e)).qa}function st(e,t,n){function r(e){Me(o).setUint32(a,e.byteLength,!0),a+=4,o.set(Ae(e),a),a+=e.byteLength}if(!n||!n.byteLength)throw new ye(be,6,6015);var i;i="string"==typeof t?Ft(t,!0):t,e=Ft(e=Nt(e),!0);var o=new Uint8Array(12+e.byteLength+i.byteLength+n.byteLength),a=0;return r(e),r(i),r(n),o}function ct(e){this.b=e,this.a=void 0}function ut(e,t){this.a=e,this.b=t}function lt(e,t){var n=new ut(4,0),r=dt,i=r.a,o=n.b-i.b;(0<(n.a-i.a||o)?r.c:r.b)(r.a,n,e,t)}function ht(e,t,n,r){W([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function ft(e,t,n,r){$([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(""))}F("shaka.util.FairPlayUtils",ot),ot.initDataTransform=st,ot.defaultGetContentId=at,ct.prototype.value=function(){return null==this.a&&(this.a=this.b()),this.a},ut.prototype.toString=function(){return"v"+this.a+"."+this.b};var dt=null;function pt(e,t){return e.concat(t)}function mt(){}function vt(e){return null!=e}function gt(e){var t=Object.create(e.prototype||Object.prototype);return(e=e.call(t))||(lt("Factories requiring new","Factories should be plain functions"),e=t),e}function yt(e,t){if(0==t.length)return e;var n=t.map((function(e){return new te(e)}));return e.map((function(e){return new te(e)})).map((function(e){return n.map((function(t){return e.resolve(t)}))})).reduce(pt,[]).map((function(e){return e.toString()}))}function bt(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:new Set}}var wt={Ba:"video",cb:"audio",$:"text",pf:"image",ff:"application"};function Et(e){for(var t=new Map,n=u(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function _t(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function kt(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function St(e){var t=(e=e.split("."))[0];return e.pop(),[t,e.join(".")]}var xt=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function Tt(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function Pt(e){return""!=Rt().canPlayType(e)}function Ot(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!It("Tizen")}function Ct(){if(!Ot())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function It(e){return(navigator.userAgent||"").includes(e)}function Rt(){return At||(Lt||(Lt=new me((function(){At=null}))),(At=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(At=document.createElement("video")),Lt.R(1),At)}var Lt=null,At=null;function Mt(){}function Dt(e){if(!e)return"";239==(e=Ae(e))[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=Ut(e),e=escape(e);try{return decodeURIComponent(e)}catch(e){throw new ye(be,2,2004)}}function jt(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new ye(be,2,2004);var r=Math.floor(e.byteLength/2);n=new Uint16Array(r),e=Me(e);for(var i=(r=u(Q(r))).next();!i.done;i=r.next())n[i=i.value]=e.getUint16(2*i,t);return Ut(n)}function Nt(e){function t(e){return n.byteLength<=e||32<=n[e]&&126>=n[e]}if(!e)return"";var n=Ae(e);if(239==n[0]&&187==n[1]&&191==n[2])return Dt(n);if(254==n[0]&&255==n[1])return jt(n.subarray(2),!1);if(255==n[0]&&254==n[1])return jt(n.subarray(2),!0);if(0==n[0]&&0==n[2])return jt(e,!1);if(0==n[1]&&0==n[3])return jt(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Dt(e);throw new ye(be,2,2003)}function Bt(e){e=encodeURIComponent(e);var t=unescape(e);e=new Uint8Array(t.length);for(var n=(t=u(Z(t))).next();!n.done;n=t.next())e[(n=n.value).Y]=n.item.charCodeAt(0);return Le(e)}function Ft(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),i=u(Z(e)),o=i.next();!o.done;o=i.next())o=o.value,r.setUint16(2*o.Y,o.item.charCodeAt(0),t);return n}function Ut(e){return Ht.value()(e)}F("shaka.util.StringUtils",Mt),Mt.resetFromCharCode=function(){Ht.a=void 0},Mt.toUTF16=Ft,Mt.toUTF8=Bt,Mt.fromBytesAutoDetect=Nt,Mt.fromUTF16=jt,Mt.fromUTF8=Dt;var Ht=new ct((function(){function e(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}}for(var t={Ia:65536};0<t.Ia;(t={Ia:t.Ia}).Ia/=2)if(e(t.Ia))return function(e){return function(t){for(var n="",r=0;r<t.length;r+=e.Ia)n+=String.fromCharCode.apply(null,t.subarray(r,r+e.Ia));return n}}(t);return null}));function qt(){}function zt(e){return e=Ut(Ae(e)),btoa(e)}function Vt(e,t){t=null==t||t;var n=zt(e).replace(/\+/g,"-").replace(/\//g,"_");return t?n:n.replace(/[=]*$/,"")}function $t(t){var n=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));t=new Uint8Array(n.length);for(var r=(n=u(Z(n))).next();!r.done;r=n.next())t[(r=r.value).Y]=r.item.charCodeAt(0);return t}function Wt(t){for(var n=t.length/2,r=new Uint8Array(n),i=(n=u(Q(n))).next();!i.done;i=n.next())r[i=i.value]=e.parseInt(t.substr(2*i,2),16);return r}function Kt(e){var t=Ae(e);e="";for(var n=(t=u(t)).next();!n.done;n=t.next())1==(n=(n=n.value).toString(16)).length&&(n="0"+n),e+=n;return e}function Gt(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];var r=0,i=u(t);for(n=i.next();!n.done;n=i.next())r+=n.value.byteLength;for(r=new Uint8Array(r),i=0,n=(t=u(t)).next();!n.done;n=t.next())n=n.value,r.set(Ae(n),i),i+=n.byteLength;return r}function Xt(e,t){var n=this;t=void 0===t?1:t,this.s=e,this.v=new Set,this.a=this.h=null,this.M=!1,this.G=0,this.c=null,this.b=new nt,this.f=new Map,this.l=[],this.j=new _e,this.i=null,this.g=function(t){n.j.reject(t),e.onError(t)},this.ca=new Map,this.T=new Map,this.I=new me((function(){return function(e){var t=e.ca,n=e.T;n.clear(),t.forEach((function(e,t){return n.set(t,e)})),(t=Array.from(n.values())).length&&t.every((function(e){return"expired"==e}))&&e.g(new ye(be,6,6014)),e.s.hc(_t(n))}(n)})),this.w=!1,this.C=[],this.H=!1,this.W=new me((function(){!function(e){e.f.forEach((function(t,n){var r=t.Uc,i=n.expiration;isNaN(i)&&(i=1/0),i!=r&&(e.s.onExpirationUpdated(n.sessionId,i),t.Uc=i)}))}(n)})).xa(t),this.j.catch((function(){})),this.D=new et((function(){return function(e){return A((function(t){switch(t.a){case 1:return e.b.release(),e.b=null,e.j.reject(),e.W.stop(),e.W=null,e.I.stop(),e.I=null,w(t,hn(e),2);case 2:if(!e.a){t.u(3);break}return _(t,4),w(t,e.a.setMediaKeys(null),6);case 6:S(t,5);break;case 4:x(t);case 5:e.a=null;case 3:e.c=null,e.v.clear(),e.h=null,e.l=[],e.i=null,e.g=function(){},e.s=null,E(t)}}))}(n)}))}function Jt(e,t,n){return e.l=n,e.w=0<n.length,Yt(e,t)}function Yt(t,n){var r=function(t){if(0==(t=Et(t.i.clearKeys)).size)return null;var n=[],r=[];t.forEach((function(e,t){var i=Wt(t),o=Wt(e);i={kty:"oct",kid:Vt(i,!1),k:Vt(o,!1)},n.push(i),r.push(i.kid)})),t=JSON.stringify({keys:n});var i=JSON.stringify({kids:r});return i=[{initData:Ae(Bt(i)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:i,keyIds:new Set(r)}}(t);if(r)for(var i=u(n),o=i.next();!o.done;o=i.next())(o=o.value).video&&o.video.encrypted&&(o.video.drmInfos=[r]),o.audio&&o.audio.encrypted&&(o.audio.drmInfos=[r]);for((r=n.some((function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)})))||function(e,t){var n=[];t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:new Set})}));for(var r=u(e),i=r.next();!i.done;i=r.next())(i=i.value).video&&i.video.encrypted&&(i.video.drmInfos=n),i.audio&&i.audio.encrypted&&(i.audio.drmInfos=n)}(n,i=Et(t.i.servers)),o=(i=u(n)).next();!o.done;o=i.next())for(var a=(o=u(((o=o.value).video?o.video.drmInfos:[]).concat(o.audio?o.audio.drmInfos:[]))).next();!a.done;a=o.next())mn(a.value,Et(t.i.servers),Et(t.i.advanced||{}));return(i=function(e,t){for(var n=new Set,r=u(t),i=r.next();!i.done;i=r.next()){var o=u(((i=i.value).video?i.video.drmInfos:[]).concat(i.audio?i.audio.drmInfos:[]));for(i=o.next();!i.done;i=o.next())n.add(i.value)}for(r=u(n),i=r.next();!i.done;i=r.next())mn(i.value,Et(e.i.servers),Et(e.i.advanced||{}));o=e.w?"required":"optional";var a=e.w?["persistent-license"]:["temporary"];for(r=new Map,n=u(n),i=n.next();!i.done;i=n.next())i=i.value,r.set(i.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:o,sessionTypes:a,label:i.keySystem,drmInfos:[]});for(n=u(t),i=n.next();!i.done;i=n.next())for(i=i.value,o=u([i.audio,i.video]),i=o.next();!i.done;i=o.next())if(a=i.value){var s=kt(a.mimeType,a.codecs),c=u(a.drmInfos);for(i=c.next();!i.done;i=c.next()){var l=i.value;(i=r.get(l.keySystem)).drmInfos.push(l),l.distinctiveIdentifierRequired&&(i.distinctiveIdentifier="required"),l.persistentStateRequired&&(i.persistentState="required"),l={robustness:("audio"==a.type?l.audioRobustness:l.videoRobustness)||"",contentType:s},"audio"==a.type?i.audioCapabilities.push(l):i.videoCapabilities.push(l)}}return r}(t,n)).size?(i=on(t,i),r?i:i.catch((function(){}))):(t.M=!0,Promise.resolve())}function Qt(e){var t;return A((function(n){if(1==n.a)return e.h&&e.c&&e.c.serverCertificate&&e.c.serverCertificate.length?(_(n,3),w(n,e.h.setServerCertificate(e.c.serverCertificate),5)):n.u(0);if(3!=n.a)return S(n,0);throw t=x(n),new ye(be,6,6004,t.message)}))}function Zt(e){for(var t=(e.c?e.c.initData:[])||[],n=u(t),r=n.next();!r.done;r=n.next())sn(e,(r=r.value).initDataType,r.initData);for(r=(n=u(e.l)).next();!r.done;r=n.next())an(e,r.value);return t.length||e.l.length||e.j.resolve(),e.j}function en(e,t,n){for(var r=e.f.values(),i=(r=u(r)).next();!i.done;i=r.next())if(Ie(n,i.value.initData)&&!It("Tizen 2"))return;sn(e,t,n)}function tn(e){return e?e.keySystem:""}function nn(e,t){return!!It("Edge/")||e.v.has(t)}function rn(e){return e=Y(e=e.f.keys(),(function(e){return e.sessionId})),Array.from(e)}function on(e,t){var n,r,i,o,a,s,c,l,h,f,d,p,m,v,g,y,b,E,k,T,P;return A((function(O){switch(O.a){case 1:if(1==t.size&&t.has(""))throw new ye(be,6,6e3);for(n=u(t.values()),r=n.next();!r.done;r=n.next())0==(i=r.value).audioCapabilities.length&&delete i.audioCapabilities,0==i.videoCapabilities.length&&delete i.videoCapabilities;a=u([!0,!1]),s=a.next();case 2:if(s.done){O.u(4);break}c=s.value,l=u(t.keys()),h=l.next();case 5:if(h.done){O.u(7);break}if(f=h.value,d=t.get(f),d.drmInfos.some((function(e){return!!e.licenseServerUri}))!=c){O.u(6);break}return _(O,8),w(O,navigator.requestMediaKeySystemAccess(f,[d]),10);case 10:o=O.b,O.u(7);break;case 8:x(O);case 9:tt(e.D);case 6:h=l.next(),O.u(5);break;case 7:if(o){O.u(4);break}s=a.next(),O.u(2);break;case 4:if(!o)throw new ye(be,6,6001);for(tt(e.D),_(O,11),e.v.clear(),p=o.getConfiguration(),m=p.audioCapabilities||[],v=p.videoCapabilities||[],g=u(m),y=g.next();!y.done;y=g.next())b=y.value,e.v.add(b.contentType);for(E=u(v),y=E.next();!y.done;y=E.next())k=y.value,e.v.add(k.contentType);if(e.c=function(e,t){var n=[],r=[],i=[],o=new Set;return function(e,t,n,r,i){for(var o={},a=(e=u(e)).next();!a.done;o={la:o.la},a=e.next()){if(o.la=a.value,t.includes(o.la.licenseServerUri)||t.push(o.la.licenseServerUri),o.la.serverCertificate&&(n.some(function(e){return function(t){return Ie(t,e.la.serverCertificate)}}(o))||n.push(o.la.serverCertificate)),o.la.initData){a={};for(var s=u(o.la.initData),c=s.next();!c.done;a={Qb:a.Qb},c=s.next())a.Qb=c.value,r.some(function(e){return function(t){var n=e.Qb;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&Ie(t.initData,n.initData)}}(a))||r.push(a.Qb)}if(o.la.keyIds)for(a=u(o.la.keyIds),s=a.next();!s.done;s=a.next())i.add(s.value)}}(t.drmInfos,n,r,i,o),{keySystem:e,licenseServerUri:n[0],distinctiveIdentifierRequired:"required"==t.distinctiveIdentifier,persistentStateRequired:"required"==t.persistentState,audioRobustness:(t.audioCapabilities?t.audioCapabilities[0].robustness:"")||"",videoRobustness:(t.videoCapabilities?t.videoCapabilities[0].robustness:"")||"",serverCertificate:r[0],initData:i,keyIds:o}}(o.keySystem,t.get(o.keySystem)),!e.c.licenseServerUri)throw new ye(be,6,6012,e.c.keySystem);return w(O,o.createMediaKeys(),13);case 13:T=O.b,tt(e.D),e.h=T,e.M=!0,S(O,0);break;case 11:if(P=x(O),tt(e.D,P),e.c=null,e.v.clear(),P instanceof ye)throw P;throw new ye(be,6,6002,P.message)}}))}function an(e,t){var n,r,i,o,a;return A((function(s){switch(s.a){case 1:try{n=e.h.createSession("persistent-license")}catch(t){return r=new ye(be,6,6005,t.message),e.g(r),s.return(Promise.reject(r))}return e.b.o(n,"message",(function(t){e.a&&e.i.delayLicenseRequestUntilPlayed&&e.a.paused&&!e.H?e.C.push(t):un(e,t)})),e.b.o(n,"keystatuseschange",(function(t){return ln(e,t)})),i={initData:null,loaded:!1,Uc:1/0,ya:null},e.f.set(n,i),_(s,2),w(s,n.load(t),4);case 4:return o=s.b,tt(e.D),o?(i.loaded=!0,pn(e)&&e.j.resolve(),s.return(n)):(e.f.delete(n),e.g(new ye(be,6,6013)),s.return(Promise.resolve()));case 2:a=x(s),tt(e.D,a),e.f.delete(n),e.g(new ye(be,6,6005,a.message));case 3:return s.return(Promise.resolve())}}))}function sn(e,t,n){try{var r=e.w?e.h.createSession("persistent-license"):e.h.createSession()}catch(t){return void e.g(new ye(be,6,6005,t.message))}e.b.o(r,"message",(function(t){e.a&&e.i.delayLicenseRequestUntilPlayed&&e.a.paused&&!e.H?e.C.push(t):un(e,t)})),e.b.o(r,"keystatuseschange",(function(t){return ln(e,t)})),e.f.set(r,{initData:n,loaded:!1,Uc:1/0,ya:null});try{n=e.i.initDataTransform(n,t,e.c)}catch(n){return t=n,n instanceof ye||(t=new ye(be,6,6016,n)),void e.g(t)}e.i.logLicenseExchange&&Vt(n),r.generateRequest(t,n).catch((function(t){if(!e.D.a){e.f.delete(r);var n=t.errorCode;if(n&&n.systemCode){var i=n.systemCode;0>i&&(i+=Math.pow(2,32)),i="0x"+i.toString(16)}e.g(new ye(be,6,6006,t.message,t,i))}}))}function cn(e,t,n){return"skd"==t&&(t=n.serverCertificate,e=st(e,n=at(e),t)),e}function un(e,t){var n,r,i,o,a,s,c,l,h,f,d,p;A((function(m){switch(m.a){case 1:return n=t.target,e.i.logLicenseExchange&&Vt(t.message),r=e.f.get(n),i=e.c.licenseServerUri,o=e.i.advanced[e.c.keySystem],"individualization-request"==t.messageType&&o&&o.individualizationServer&&(i=o.individualizationServer),(a=Ge([i],e.i.retryParameters)).body=t.message,a.method="POST",a.licenseRequestType=t.messageType,a.sessionId=n.sessionId,"com.microsoft.playready"!=e.c.keySystem&&"com.chromecast.playready"!=e.c.keySystem||function(e){var t=jt(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){for(var n=u((t=(new DOMParser).parseFromString(t,"application/xml")).getElementsByTagName("HttpHeader")),r=n.next();!r.done;r=n.next())r=r.value,e.headers[r.getElementsByTagName("name")[0].textContent]=r.getElementsByTagName("value")[0].textContent;e.body=$t(t.getElementsByTagName("Challenge")[0].textContent)}else e.headers["Content-Type"]="text/xml; charset=utf-8"}(a),s=Date.now(),_(m,2),w(m,e.s.lb.request(2,a).promise,4);case 4:c=m.b,S(m,3);break;case 2:return l=x(m),h=new ye(be,6,6007,l),e.g(h),r&&r.ya&&r.ya.reject(h),m.return();case 3:return e.D.a?m.return():(e.G+=(Date.now()-s)/1e3,e.i.logLicenseExchange&&Vt(c.data),_(m,5),w(m,n.update(c.data),7));case 7:S(m,6);break;case 5:return f=x(m),d=new ye(be,6,6008,f.message),e.g(d),r&&r.ya&&r.ya.reject(d),m.return();case 6:p=new je("drmsessionupdate"),e.s.onEvent(p),r&&(r.ya&&r.ya.resolve(),new me((function(){r.loaded=!0,pn(e)&&e.j.resolve()})).R(vn)),E(m)}}))}function ln(e,t){var n=t.target,r=e.f.get(n),i=!1;n.keyStatuses.forEach((function(t,n){if("string"==typeof n){var o=n;n=t,t=o}if(!("com.microsoft.playready"!=e.c.keySystem||16!=n.byteLength||It("Tizen")||It("VITIS")||It("Web0S")||It("TiVo"))){var a=(o=Me(n)).getUint32(0,!0),s=o.getUint16(4,!0),c=o.getUint16(6,!0);o.setUint32(0,a,!1),o.setUint16(4,s,!1),o.setUint16(6,c,!1)}"com.microsoft.playready"==e.c.keySystem&&"status-pending"==t&&(t="usable"),"status-pending"!=t&&(r.loaded=!0),"expired"==t&&(i=!0),o=Kt(n),e.ca.set(o,t)}));var o=n.expiration-Date.now();(0>o||i&&1e3>o)&&r&&!r.ya&&(e.f.delete(n),n.close().catch((function(){}))),pn(e)&&(e.j.resolve(),e.I.R(gn))}function hn(e){var t;return A((function(n){return t=Array.from(e.f.keys()),e.f.clear(),w(n,Promise.all(t.map((function(e){return A((function(t){return 1==t.a?(_(t,2),w(t,Promise.all([e.close(),e.closed]),4)):2!=t.a?S(t,0):(x(t),void E(t))}))}))),0)}))}function fn(e,t){var n=t.audio,r=t.video;if(n&&n.encrypted&&!nn(e,kt(n.mimeType,n.codecs))||r&&r.encrypted&&!nn(e,kt(r.mimeType,r.codecs)))return!1;var i=tn(e.c);return 0==(n=(r?r.drmInfos:[]).concat(n?n.drmInfos:[])).length||n.some((function(e){return e.keySystem==i}))}function dn(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],r=u(e),i=r.next();!i.done;i=r.next()){i=i.value;for(var o=u(t),a=o.next();!a.done;a=o.next())if(a=a.value,i.keySystem==a.keySystem){o=(o=(o=[]).concat(i.initData||[])).concat(a.initData||[]);var s=i.keyIds&&a.keyIds?new Set(l(i.keyIds).concat(l(a.keyIds))):i.keyIds||a.keyIds;n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||a.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||a.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||a.persistentStateRequired,videoRobustness:i.videoRobustness||a.videoRobustness,audioRobustness:i.audioRobustness||a.audioRobustness,serverCertificate:i.serverCertificate||a.serverCertificate,initData:o,keyIds:s});break}}return n}function pn(e){return function(e,t){for(var n=u(e),r=n.next();!r.done;r=n.next())if(!t(r.value))return!1;return!0}(e=e.f.values(),(function(e){return e.loaded}))}function mn(t,n,r){!t.keySystem||"org.w3.clearkey"==t.keySystem&&t.licenseServerUri||(n.size&&(n=n.get(t.keySystem)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(r=r.get(t.keySystem))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=r.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=r.persistentStateRequired),t.videoRobustness||(t.videoRobustness=r.videoRobustness),t.audioRobustness||(t.audioRobustness=r.audioRobustness),t.serverCertificate||(t.serverCertificate=r.serverCertificate)),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==t.keySystem&&(t.keySystem="com.chromecast.playready"))}F("shaka.util.Uint8ArrayUtils",qt),qt.concat=Gt,qt.toHex=Kt,qt.fromHex=Wt,qt.fromBase64=$t,qt.toBase64=Vt,qt.toStandardBase64=zt,qt.equal=function(e,t){return lt("shaka.util.Uint8ArrayUtils.equal","Please use shaka.util.BufferUtils.equal instead."),Ie(e,t)},Xt.prototype.destroy=function(){return this.D.destroy()},Xt.prototype.configure=function(e){this.i=e},Xt.prototype.yb=function(e){var t,n,r,i=this;return A((function(o){if(1==o.a)return i.h?(i.a=e,i.b.ha(i.a,"play",(function(){for(var e=u(i.C),t=e.next();!t.done;t=e.next())un(i,t.value);i.H=!0,i.C=[]})),"webkitCurrentPlaybackTargetIsWireless"in i.a&&i.b.o(i.a,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return hn(i)})),t=(t=i.a.setMediaKeys(i.h)).catch((function(e){return Promise.reject(new ye(be,6,6003,e.message))})),n=Qt(i),w(o,Promise.all([t,n]),2)):(i.b.ha(e,"encrypted",(function(){i.g(new ye(be,6,6010))})),o.return());tt(i.D),Zt(i),i.c.initData.length||i.l.length||(r=function(e){return en(i,e.initDataType,Ae(e.initData))},i.b.o(i.a,"encrypted",r)),E(o)}))},Xt.prototype.Cb=function(){for(var e=1/0,t=this.f.keys(),n=(t=u(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e};var vn=5,gn=.5,yn=new ct((function(){return Le(new Uint8Array([0]))}));function bn(){this.a=new muxjs.mp4.CaptionParser,this.g=[],this.f={}}function wn(){}function En(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function _n(e,t,n){return n=void 0===n?0:n,!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t+n>=e.start(0)}function kn(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,r=u(Sn(e)),i=r.next();!i.done;i=r.next()){var o=i.value;i=o.start,(o=o.end)>t&&(n+=o-Math.max(i,t))}return n}function Sn(e){if(!e)return[];for(var t=[],n=u(Q(e.length)),r=n.next();!r.done;r=n.next())r=r.value,t.push({start:e.start(r),end:e.end(r)});return t}function xn(){var e=this;this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.b=null,this.h=[],this.c=[],this.g=[],this.f=!1,this.a.on("data",(function(t){e.c=t.captions,e.g=t.metadata,e.h.push(Gt(t.initSegment,t.data))})),this.a.on("done",(function(){var t={data:Gt.apply(qt,l(e.h)),captions:e.c,metadata:e.g};e.b.resolve(t),e.f=!1}))}function Tn(t,n){if(!e.muxjs||"mp2t"!=t.toLowerCase().split(";")[0].split("/")[1])return!1;if(n)return MediaSource.isTypeSupported(Pn(n,t));var r=Pn("audio",t),i=Pn("video",t);return MediaSource.isTypeSupported(r)||MediaSource.isTypeSupported(i)}function Pn(e,t){var n=t.replace(/mp2t/i,"mp4");"audio"==e&&(n=n.replace("video","audio"));var r=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(r){var i="avc1.",o=r[1],a=Number(r[2]);i=("66"==o?i+"4200":"77"==o?i+"4d00":i+"6400")+(a>>4).toString(16),i+=(15&a).toString(16),n=n.replace(r[0],i)}return n}function On(e,t,n){this.startTime=e,this.direction=Mn,this.endTime=t,this.payload=n,this.region=new qn,this.position=null,this.positionAlign=Cn,this.size=0,this.textAlign=In,this.writingMode=Dn,this.lineInterpretation=jn,this.line=null,this.lineHeight="",this.lineAlign=Nn,this.displayAlign=Ln,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Fn,this.fontStyle=Un,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.spacer=!1,this.cellResolution={columns:32,rows:15}}bn.prototype.init=function(e){var t=muxjs.mp4.probe;e=Ae(e),this.g=t.videoTrackIds(e),this.f=t.timescale(e),this.a.init()},bn.prototype.b=function(e,t){var n=Ae(e);(n=this.a.parse(n,this.g,this.f))&&n.captions&&t(n.captions),this.a.clearParsedCaptions()},bn.prototype.c=function(){this.a.resetCaptionStream()},wn.prototype.init=function(){},wn.prototype.b=function(){},wn.prototype.c=function(){},xn.prototype.destroy=function(){return this.a.dispose(),this.a=null,Promise.resolve()},F("shaka.text.Cue",On);var Cn="auto";On.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Cn};var In="center",Rn={LEFT:"left",RIGHT:"right",CENTER:In,START:"start",END:"end"};On.textAlign=Rn;var Ln="after",An={BEFORE:"before",CENTER:"center",AFTER:Ln};On.displayAlign=An;var Mn="ltr";On.direction={HORIZONTAL_LEFT_TO_RIGHT:Mn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Dn="horizontal-tb";On.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Dn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var jn=0;On.lineInterpretation={LINE_NUMBER:jn,PERCENTAGE:1};var Nn="start",Bn={CENTER:"center",START:Nn,END:"end"};On.lineAlign=Bn;var Fn=400;On.fontWeight={NORMAL:Fn,BOLD:700};var Un="normal",Hn={NORMAL:Un,ITALIC:"italic",OBLIQUE:"oblique"};function qn(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=zn,this.scroll=Vn}On.fontStyle=Hn,On.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},F("shaka.text.CueRegion",qn);var zn=1;qn.units={PX:0,PERCENTAGE:zn,LINES:2};var Vn="";function $n(e){this.l=null,this.c=e,this.f=this.v=0,this.g=1/0,this.b=this.a=null,this.j="",this.h=new Map}function Wn(t){return!!(Gn[t]||e.muxjs&&"application/cea-608"==t)}function Kn(e,t,n,r,i){for(var o=n+" "+r,a=new Map,s=(t=u(t)).next();!s.done;s=t.next()){var c=s.value;s=c.stream,a.has(s)||a.set(s,new Map),a.get(s).has(o)||a.get(s).set(o,[]),c.startTime+=i,c.endTime+=i,c.startTime>=e.f&&c.startTime<e.g&&(c=new On(c.startTime,c.endTime,c.text),a.get(s).get(o).push(c),s==e.j&&e.c.append([c]))}for(o=(i=u(a.keys())).next();!o.done;o=i.next())for(o=o.value,e.h.has(o)||e.h.set(o,new Map),s=(t=u(a.get(o).keys())).next();!s.done;s=t.next())s=s.value,c=a.get(o).get(s),e.h.get(o).set(s,c);e.a=null==e.a?Math.max(n,e.f):Math.min(e.a,Math.max(n,e.f)),e.b=Math.max(e.b,Math.min(r,e.g))}qn.scrollMode={NONE:Vn,UP:"up"},$n.prototype.destroy=function(){return this.c=this.l=null,this.h.clear(),Promise.resolve()},$n.prototype.remove=function(e,t){var n=this;return A((function(r){if(1==r.a)return w(r,Promise.resolve(),2);!n.c||!n.c.remove(e,t)||null==n.a||t<=n.a||e>=n.b||(e<=n.a&&t>=n.b?n.a=n.b=null:e<=n.a&&t<n.b?n.a=t:e>n.a&&t>=n.b&&(n.b=e)),E(r)}))},F("shaka.text.TextEngine",$n),$n.prototype.destroy=$n.prototype.destroy,$n.unregisterParser=function(e){delete Gn[e]},$n.registerParser=function(e,t){Gn[e]=t};var Gn={};function Xn(e,t,n,r){var i=this;this.a=e,this.h=n,this.f={},this.c=null,this.C=r||function(){},this.g={},this.b=new nt,this.l={},this.v=t,this.w=new _e,this.j=function(e,t){var n=new MediaSource;return e.b.ha(n,"sourceopen",t.resolve),e.a.src=lr(n),n}(this,this.w),this.D=new et((function(){return function(e){var t,n,r,i,o,a,s;return A((function(c){if(1==c.a){for(n in t=[],e.g)for(r=e.g[n],i=r[0],e.g[n]=r.slice(0,1),i&&t.push(i.p.catch(mt)),o=u(r.slice(1)),a=o.next();!a.done;a=o.next())a.value.p.reject(new ye(be,we,7003,void 0));for(s in e.c&&t.push(e.c.destroy()),e.h&&t.push(e.h.destroy()),e.l)t.push(e.l[s].destroy());return w(c,Promise.all(t),2)}e.b&&(e.b.release(),e.b=null),e.a&&(e.a.removeAttribute("src"),e.a.load(),e.a=null),e.j=null,e.c=null,e.h=null,e.f={},e.l={},e.v=null,e.g={},E(c)}))}(i)}))}function Jn(e){var t=kt(e.mimeType,e.codecs),n=function(e){var t=[e.mimeType];return xt.forEach((function(n,r){var i=e[r];i&&t.push(n+'="'+i+'"')})),t.join(";")}(e);return Wn(t)||MediaSource.isTypeSupported(n)||Tn(t,e.type)}function Yn(e,t){e.c||(e.c=new $n(e.h)),"application/cea-608"!=t&&(e.c.l=gt(Gn[t]))}function Qn(e){return!e.j||"ended"==e.j.readyState}function Zn(e,t){if("text"==t)var n=e.c.a;else n=!(n=tr(e,t))||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function er(e,t){return"text"==t?e.c.b:En(tr(e,t))}function tr(e,t){try{return e.f[t].buffered}catch(e){return null}}function nr(t,n,r,i,o,a){var s,c,u,l;return A((function(h){return 1==h.a?n==(s=wt).$?w(h,function(e,t,n,r){var i,o,a;return A((function(s){return 1==s.a?w(s,Promise.resolve(),2):e.l&&e.c?null==n||null==r?(e.l.parseInit(Ae(t)),s.return()):(i={periodStart:e.v,segmentStart:n,segmentEnd:r},o=e.l.parseMedia(Ae(t),i),a=o.filter((function(t){return t.startTime>=e.f&&t.startTime<e.g})),e.c.append(a),null==e.a&&(e.a=Math.max(n,e.f)),e.b=Math.min(r,e.g),void E(s)):s.return()}))}(t.c,r,i,o),0):t.l[n]?w(h,function(e,t){e.f=!0,e.b=new _e,e.h=[],e.c=[],e.g=[];var n=Ae(t);return e.a.push(n),e.a.flush(),e.f&&e.b.reject(new ye(be,3,3018)),e.b}(t.l[n],r),10):(a&&e.muxjs&&(t.c||Yn(t,"text/vtt"),null==i&&null==o?t.v.init(r):t.v.b(r,(function(e){e.length&&Kn(t.c,e,i,o,t.f[s.Ba].timestampOffset)}))),w(h,ar(t,n,(function(){t.f[n].appendBuffer(r)})),0)):(c=h.b,t.c||Yn(t,"text/vtt"),c.metadata&&(u=t.f[n].timestampOffset,t.C(c.metadata,u)),c.captions&&c.captions.length&&(l=t.f[s.Ba].timestampOffset,Kn(t.c,c.captions,i,o,l)),w(h,ar(t,n,(function(){t.f[n].appendBuffer(c.data)})),0))}))}function rr(e,t){var n=er(e,"video")||0;!function(e,t,n){if(e.j=t,t=e.h.get(t))for(var r=u(t.keys()),i=r.next();!i.done;i=r.next())(i=t.get(i.value).filter((function(e){return e.endTime<=n})))&&e.c.append(i)}(e.c,t,n)}function ir(e,t){return A((function(n){return t==wt.$?e.c?(e.v.c(),w(n,e.c.remove(0,1/0),0)):n.return():w(n,ar(e,t,(function(){var n=e.j.duration;0>=n?or(e,t):e.f[t].remove(0,n)})),0)}))}function or(e,t){var n=e.g[t][0];n&&(n.p.resolve(),cr(e,t))}function ar(e,t,n){return tt(e.D),n={start:n,p:new _e},e.g[t].push(n),1==e.g[t].length&&ur(e,t),n.p}function sr(e,t){var n,r,i,o,a;return A((function(s){switch(s.a){case 1:for(i in tt(e.D),n=[],r={},e.f)r.ub=new _e,o={start:function(e){return function(){return e.ub.resolve()}}(r),p:r.ub},e.g[i].push(o),n.push(r.ub),1==e.g[i].length&&o.start(),r={ub:r.ub};return _(s,2),w(s,Promise.all(n),4);case 4:S(s,3);break;case 2:throw x(s);case 3:try{t()}catch(e){throw new ye(be,3,3015,e)}finally{for(a in e.f)cr(e,a)}E(s)}}))}function cr(e,t){e.g[t].shift(),ur(e,t)}function ur(e,t){var n=e.g[t][0];if(n)try{n.start()}catch(r){"QuotaExceededError"==r.name?n.p.reject(new ye(be,3,3017,t)):n.p.reject(new ye(be,3,3015,r)),cr(e,t)}}(r=Xn.prototype).destroy=function(){return this.D.destroy()},r.init=function(e,t){var n,r,i,o,a,s,c,l=this;return A((function(h){if(1==h.a)return n=wt,w(h,l.w,2);for(r={},i=u(e.keys()),o=i.next();!o.done;r={ka:r.ka},o=i.next())r.ka=o.value,a=e.get(r.ka),s=kt(a.mimeType,a.codecs),r.ka==n.$?Yn(l,s):(!t&&MediaSource.isTypeSupported(s)||!Tn(s,r.ka)||(l.l[r.ka]=new xn,s=Pn(r.ka,s)),c=l.j.addSourceBuffer(s),l.b.o(c,"error",function(e){return function(){l.g[e.ka][0].p.reject(new ye(be,3,3014,l.a.error?l.a.error.code:0))}}(r)),l.b.o(c,"updateend",function(e){return function(){return or(l,e.ka)}}(r)),l.f[r.ka]=c,l.g[r.ka]=[]);E(h)}))},r.bc=function(){var e={total:Sn(this.a.buffered),audio:Sn(tr(this,"audio")),video:Sn(tr(this,"video")),text:[]};if(this.c){var t=this.c.a,n=this.c.b;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},r.remove=function(e,t,n){var r=this;return A((function(i){return w(i,e==wt.$?r.c.remove(t,n):ar(r,e,(function(){n<=t?or(r,e):r.f[e].remove(t,n)})),0)}))},r.flush=function(e){var t=this;return A((function(n){return e==wt.$?n.return():w(n,ar(t,e,(function(){t.a.currentTime-=.001,or(t,e)})),0)}))},r.endOfStream=function(e){var t=this;return A((function(n){return w(n,sr(t,(function(){Qn(t)||(e?t.j.endOfStream(e):t.j.endOfStream())})),0)}))},r.wa=function(e){var t=this;return A((function(n){return w(n,sr(t,(function(){t.j.duration=e})),0)}))},r.getDuration=function(){return this.j.duration};var lr=e.URL.createObjectURL;function hr(e,t){return e=pr(e),t=pr(t),e.split("-")[0]==t.split("-")[0]}function fr(e,t){e=pr(e),t=pr(t);var n=e.split("-"),r=t.split("-");return n[0]==r[0]&&1==n.length&&2==r.length}function dr(e,t){e=pr(e),t=pr(t);var n=e.split("-"),r=t.split("-");return 2==n.length&&2==r.length&&n[0]==r[0]}function pr(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=yr.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function mr(e,t){return e=pr(e),(t=pr(t))==e?4:fr(t,e)?3:dr(t,e)?2:fr(e,t)?1:0}function vr(e){return e.language?pr(e.language):e.audio&&e.audio.language?pr(e.audio.language):e.video&&e.video.language?pr(e.video.language):"und"}function gr(e,t){for(var n=pr(e),r=new Set,i=u(t),o=i.next();!o.done;o=i.next())r.add(pr(o.value));for(o=(i=u(r)).next();!o.done;o=i.next())if((o=o.value)==n)return o;for(o=(i=u(r)).next();!o.done;o=i.next())if(fr(o=o.value,n))return o;for(o=(i=u(r)).next();!o.done;o=i.next())if(dr(o=o.value,n))return o;for(o=(r=u(r)).next();!o.done;o=r.next())if(fr(n,o=o.value))return o;return null}var yr=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function br(e,t){function n(e){var t="";e.video&&(t=St(e.video.codecs)[0]);var n="";return e.audio&&(n=St(e.audio.codecs)[0]),t+"-"+n}for(var r=Or(e.variants,t),i=new Ne,o=(r=u(r)).next();!o.done;o=r.next()){var a=n(o=o.value);i.push(a,o)}var s=null,c=1/0;!function(e,t){for(var n in e.a)t(n,e.a[n])}(i,(function(e,t){for(var n=0,r=0,i=u(t),o=i.next();!o.done;o=i.next())n+=o.value.bandwidth||0,++r;(n/=r)<c&&(s=e,c=n)})),e.variants=e.variants.filter((function(e){return n(e)==s}))}function wr(e,t,n){function r(e,t,n){return e>=t&&e<=n}var i=e.video;return!(i&&i.width&&i.height&&(!r(i.width,t.minWidth,Math.min(t.maxWidth,n.width))||!r(i.height,t.minHeight,Math.min(t.maxHeight,n.height))||!r(i.width*i.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function Er(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function _r(e){var t=e.audio,n=e.video,r=t?t.codecs:null,i=n?n.codecs:null,o=[];i&&o.push(i),r&&o.push(r);var a=[];n&&a.push(n.mimeType),t&&a.push(t.mimeType),a=a[0]||null;var s=[];t&&s.push(t.kind),n&&s.push(n.kind),s=s[0]||null;var c=new Set;if(t)for(var l=u(t.roles),h=l.next();!h.done;h=l.next())c.add(h.value);if(n)for(h=(l=u(n.roles)).next();!h.done;h=l.next())c.add(h.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:s,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:a,codecs:o.join(", "),audioCodec:r,videoCodec:i,primary:e.primary,roles:Array.from(c),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.label=t.label,e.audioRoles=t.roles),e}function kr(e){return{id:e.id,active:!1,type:"text",bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId}}function Sr(e){return e.__shaka_id||(e.__shaka_id=Rr++),e.__shaka_id}function xr(e){var t=Tr(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind]),t}function Tr(e){return{id:Sr(e),active:!1,type:"",bandwidth:0,language:pr(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}}function Pr(e){return e.allowedByApplication&&e.allowedByKeySystem}function Or(e,t){for(var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),r=new Map,i=(n=u(n)).next();!i.done;i=n.next()){var o=(i=i.value).audio.channelsCount;r.has(o)||r.set(o,[]),r.get(o).push(i)}return 0==(n=Array.from(r.keys())).length?e:(i=n.filter((function(e){return e<=t}))).length?r.get(Math.max.apply(Math,l(i))):r.get(Math.min.apply(Math,l(n)))}function Cr(e,t,n){var r=e,i=e.filter((function(e){return e.primary}));i.length&&(r=i);var o=r.length?r[0].language:"";if(r=r.filter((function(e){return e.language==o})),t){var a=gr(pr(t),e.map((function(e){return e.language})));a&&(r=e.filter((function(e){return pr(e.language)==a})))}if(n){if((e=Ir(r,n)).length)return e}else if((e=r.filter((function(e){return 0==e.roles.length}))).length)return e;return(e=r.map((function(e){return e.roles})).reduce(pt,[])).length?Ir(r,e[0]):r}function Ir(e,t){return e.filter((function(e){return e.roles.includes(t)}))}var Rr=0;function Lr(){this.h=null,this.c=!1,this.a=new z,this.b=[],this.g=1,this.j=!1,this.i=this.f=null}function Ar(e,t){return e&&(t=t.filter((function(t){return wr(t,e,{width:1/0,height:1/0})}))),t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}function Mr(e,t){this.a=e,this.b=new Set([e]);for(var n=u(t=t||[]),r=n.next();!r.done;r=n.next())this.add(r.value)}function Dr(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var r=t.audio;n=!(n.channelsCount==r.channelsCount&&jr(n,r)&&Nr(n.roles,r.roles))}return!n&&(n=e.video&&t.video)&&(n=!(jr(n=e.video,r=t.video)&&Nr(n.roles,r.roles))),!n}function jr(e,t){if(e.mimeType!=t.mimeType)return!1;var n=e.codecs.split(",").map((function(e){return St(e)[0]})),r=t.codecs.split(",").map((function(e){return St(e)[0]}));if(n.length!=r.length)return!1;n.sort(),r.sort();for(var i=u(Q(n.length)),o=i.next();!o.done;o=i.next())if(n[o=o.value]!=r[o])return!1;return!0}function Nr(e,t){var n=new Set(e),r=new Set(t);if(n.delete("main"),r.delete("main"),n.size!=r.size)return!1;for(var i=(n=u(n)).next();!i.done;i=n.next())if(!r.has(i.value))return!1;return!0}function Br(e){this.a=e,this.b=new Fr(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function Fr(e,t,n,r,i){this.f=e,this.c=t,this.a=n,this.b=void 0===r?"":r,this.g=void 0===i?"":i}function Ur(){this.a=zr,this.b=(new Map).set(zr,2).set(qr,1)}function Hr(e,t,n){e.b.set(zr,n).set(qr,t)}(r=Lr.prototype).stop=function(){this.h=null,this.c=!1,this.b=[],this.g=1,this.f=null},r.init=function(e){this.h=e},r.chooseVariant=function(){var e=Ar(this.i.restrictions,this.b),t=this.a.getBandwidthEstimate(this.i.defaultBandwidthEstimate);this.b.length&&!e.length&&(e=[(e=Ar(null,this.b))[0]]);for(var n=e[0]||null,r=(e=u(Z(e))).next();!r.done;r=e.next()){var i=r.value;r=i.item;var o=isNaN(this.g)?1:Math.abs(this.g);i=o*(i.next||{bandwidth:1/0}).bandwidth/this.i.bandwidthUpgradeTarget,t>=o*r.bandwidth/this.i.bandwidthDowngradeTarget&&t<=i&&(n=r)}return this.f=Date.now(),n},r.enable=function(){this.c=!0},r.disable=function(){this.c=!1},r.segmentDownloaded=function(e,t){var n=this.a;if(!(16e3>t)){var r=8e3*t/e,i=e/1e3;n.a+=t,H(n.b,i,r),H(n.c,i,r)}if(null!=this.f&&this.c)e:{if(this.j){if(Date.now()-this.f<1e3*this.i.switchInterval)break e}else{if(!(128e3<=this.a.a))break e;this.j=!0}n=this.chooseVariant(),this.a.getBandwidthEstimate(this.i.defaultBandwidthEstimate),n&&this.h(n)}},r.getBandwidthEstimate=function(){return this.a.getBandwidthEstimate(this.i.defaultBandwidthEstimate)},r.setVariants=function(e){this.b=e},r.playbackRateChanged=function(e){this.g=e},r.configure=function(e){this.i=e},F("shaka.abr.SimpleAbrManager",Lr),Lr.prototype.configure=Lr.prototype.configure,Lr.prototype.playbackRateChanged=Lr.prototype.playbackRateChanged,Lr.prototype.setVariants=Lr.prototype.setVariants,Lr.prototype.getBandwidthEstimate=Lr.prototype.getBandwidthEstimate,Lr.prototype.segmentDownloaded=Lr.prototype.segmentDownloaded,Lr.prototype.disable=Lr.prototype.disable,Lr.prototype.enable=Lr.prototype.enable,Lr.prototype.chooseVariant=Lr.prototype.chooseVariant,Lr.prototype.init=Lr.prototype.init,Lr.prototype.stop=Lr.prototype.stop,Mr.prototype.add=function(e){return!!Dr(this.a,e)&&(this.b.add(e),!0)},Mr.prototype.values=function(){return this.b.values()},Br.prototype.create=function(e){var t=this,n=e.filter((function(e){return Dr(t.a,e)}));return n.length?new Mr(n[0],n):this.b.create(e)},Fr.prototype.create=function(e){var t=[];t=function(e,t){var n=gr(pr(t),e.map((function(e){return vr(e)})));return n?e.filter((function(e){return n==vr(e)})):[]}(e,this.f);var n=e.filter((function(e){return e.primary}));for(t=t.length?t:n.length?n:e,this.c&&((e=function(e,t,n){return e.filter((function(e){if(n){var r=e[n];return r&&r.roles.includes(t)}return r=e.audio,e=e.video,r&&r.roles.includes(t)||e&&e.roles.includes(t)}))}(t,this.c,this.g)).length&&(t=e)),this.a&&((e=Or(t,this.a)).length&&(t=e)),this.b&&((e=function(e,t){return e.filter((function(e){return!!e.audio&&e.audio.label.toLowerCase()==t.toLowerCase()}))}(t,this.b)).length&&(t=e)),e=new Mr(t[0]),n=(t=u(t)).next();!n.done;n=t.next())n=n.value,Dr(e.a,n)&&e.add(n);return e};var qr=0,zr=1;function Vr(){}function $r(e,t,n,r){var i,o,a,s;return A((function(c){if(1==c.a)return r&&(i=Kr[r.toLowerCase()])?c.return(i):(o=Wr(e))&&(a=Gr[o])?c.return(a):r?c.u(2):w(c,function(e,t,n){var r,i,o;return A((function(a){return 1==a.a?((r=Ge([e],n)).method="HEAD",w(a,t.request(0,r).promise,2)):(i=a.b,o=i.headers["content-type"],a.return(o?o.toLowerCase().split(";").shift():""))}))}(e,t,n),3);if(2!=c.a&&(r=c.b)&&(s=Kr[r]))return c.return(s);throw new ye(be,4,4e3,e)}))}function Wr(e){return 1==(e=new te(e).ia.split("/").pop().split(".")).length?"":e.pop().toLowerCase()}F("shaka.media.ManifestParser",Vr),Vr.unregisterParserByMime=function(e){delete Kr[e]},Vr.registerParserByMime=function(e,t){Kr[e]=t},Vr.registerParserByExtension=function(e,t){Gr[e]=t};var Kr={},Gr={};function Xr(e){var t=this;this.a=e,this.f=!1,this.b=this.a.dc(),this.c=new me((function(){t.a.Dd(.25*t.b)}))}function Jr(e){e.c.stop();var t=e.f?0:e.b;if(0<=t)try{return void(e.a.dc()!=t&&e.a.fd(t))}catch(e){}e.c.xa(.25),0!=e.a.dc()&&e.a.fd(0)}function Yr(e,t,n){this.c=e,this.b=t,this.a=n}function Qr(e,t,n,r,i,o,a,s,c){this.startTime=e,this.endTime=t,this.c=n,this.b=r,this.a=i,this.f=o,this.timestampOffset=a,this.appendWindowStart=s,this.appendWindowEnd=c}function Zr(e,t,n){this.f=e,this.kc=t,this.h=this.g=1/0,this.a=1,this.b=this.c=null,this.j=0,this.l=!0,this.v=0,this.w=void 0===n||n}function ei(e,t){this.g=e,this.h=ni(e),this.a=e.a.currentTime,this.f=Date.now()/1e3,this.b=!1,this.j=t,this.c=function(){}}function ti(e){this.a=e}function ni(e){if(e.a.paused||0==e.a.playbackRate||0==e.a.buffered.length)var t=!1;else e:{t=e.a.currentTime;for(var n=(e=u(Sn(e.a.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start||t>n.end-.5)){t=!0;break e}t=!1}return t}function ri(e,t,n,r,i){var o=this;this.a=e,this.w=t,this.i=n,this.v=i,this.b=new nt,this.j=!1,this.l=e.readyState,this.f=!1,this.c=r,this.h=!1,this.b.o(e,"waiting",(function(){return ii(o)})),this.g=new me((function(){ii(o)})).xa(.25)}function ii(e){if(0!=e.a.readyState){if(e.a.seeking){if(!e.j)return}else e.j=!1;if(!e.a.paused){e.a.readyState!=e.l&&(e.f=!1,e.l=e.a.readyState);var t=e.i.smallGapLimit,n=e.a.currentTime,r=e.a.buffered,i=function(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return null;var n=It("Edge/")||It("Trident/")||It("Tizen")||It("CrKey")?.5:.1,r=Sn(e).findIndex((function(e,r,i){return e.start>t&&(0==r||i[r-1].end-t<=n)}));return 0<=r?r:null}(r,n);if(null==i){if(e.c){i=ni(r=(e=e.c).g);var o=r.a.currentTime;n=Date.now()/1e3,e.a==o&&e.h==i||(e.f=n,e.a=o,e.h=i,e.b=!1),(o=n-e.f)>=e.j&&i&&!e.b&&(e.c(e.a,o),e.b=!0,e.a=r.a.currentTime)}}else if((0!=i||e.h)&&!((o=r.start(i))>=e.w.Da())){var a=o-n;t=a<=t;var s=!1;.001>a||(t||e.f||(e.f=!0,(n=new je("largegap",{currentTime:n,gapSize:a})).cancelable=!0,e.v(n),e.i.jumpLargeGaps&&!n.defaultPrevented&&(s=!0)),!t&&!s)||(0!=i&&r.end(i-1),e.a.currentTime=o)}}}}function oi(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=ai.get(t),n.ha(e,t,r))}Xr.prototype.release=function(){this.c&&(this.c.stop(),this.c=null),this.a=null},Xr.prototype.set=function(e){this.b=e,Jr(this)},Yr.prototype.Ic=function(){return this.b},Yr.prototype.Hc=function(){return this.a},F("shaka.media.InitSegmentReference",Yr),Yr.prototype.getEndByte=Yr.prototype.Hc,Yr.prototype.getStartByte=Yr.prototype.Ic,Qr.prototype.ve=function(){return this.startTime},Qr.prototype.ie=function(){return this.endTime},Qr.prototype.Ic=function(){return this.b},Qr.prototype.Hc=function(){return this.a},F("shaka.media.SegmentReference",Qr),Qr.prototype.getEndByte=Qr.prototype.Hc,Qr.prototype.getStartByte=Qr.prototype.Ic,Qr.prototype.getEndTime=Qr.prototype.ie,Qr.prototype.getStartTime=Qr.prototype.ve,(r=Zr.prototype).getDuration=function(){return this.g},r.ne=function(){return this.a},r.wa=function(e){this.g=e},r.ue=function(){return this.f},r.Nd=function(e){this.j=e},r.Nb=function(e){this.l=e},r.gd=function(e){this.h=e},r.We=function(e){this.kc=e},r.he=function(){return this.kc},r.mb=function(e){if(0!=e.length){var t=e[e.length-1].endTime;this.Sc(e[0].startTime),this.a=e.reduce((function(e,t){return Math.max(e,t.endTime-t.startTime)}),this.a),this.b=Math.max(this.b,t),null!=this.f&&this.w&&(this.f=(Date.now()+this.j)/1e3-this.b-this.a)}},r.Sc=function(e){this.c=null==this.c?e:Math.min(this.c,e)},r.Rc=function(e){this.a=Math.max(this.a,e)},r.offset=function(e){null!=this.c&&(this.c+=e),null!=this.b&&(this.b+=e)},r.S=function(){return 1/0==this.g&&!this.l},r.Sa=function(){return 1/0!=this.g&&!this.l},r.Pa=function(){return Math.max(this.v,this.Ka()-this.h)},r.Od=function(e){this.v=e},r.Ka=function(){return this.S()||this.Sa()?Math.min(Math.max(0,(Date.now()+this.j)/1e3-this.a-this.f),this.g):this.g},r.Eb=function(e){var t=Math.max(this.c,this.v);return 1/0==this.h?t:Math.max(t,Math.min(this.Ka()-this.h+e,this.Da()))},r.ib=function(){return this.Eb(0)},r.Da=function(){return Math.max(0,this.Ka()-(this.S()||this.Sa()?this.kc:0))},r.Rd=function(){return!(null==this.f||null!=this.b&&this.w)},F("shaka.media.PresentationTimeline",Zr),Zr.prototype.usingPresentationStartTime=Zr.prototype.Rd,Zr.prototype.getSeekRangeEnd=Zr.prototype.Da,Zr.prototype.getSeekRangeStart=Zr.prototype.ib,Zr.prototype.getSafeSeekRangeStart=Zr.prototype.Eb,Zr.prototype.getSegmentAvailabilityEnd=Zr.prototype.Ka,Zr.prototype.setUserSeekStart=Zr.prototype.Od,Zr.prototype.getSegmentAvailabilityStart=Zr.prototype.Pa,Zr.prototype.isInProgress=Zr.prototype.Sa,Zr.prototype.isLive=Zr.prototype.S,Zr.prototype.offset=Zr.prototype.offset,Zr.prototype.notifyMaxSegmentDuration=Zr.prototype.Rc,Zr.prototype.notifyMinSegmentStartTime=Zr.prototype.Sc,Zr.prototype.notifySegments=Zr.prototype.mb,Zr.prototype.getDelay=Zr.prototype.he,Zr.prototype.setDelay=Zr.prototype.We,Zr.prototype.setSegmentAvailabilityDuration=Zr.prototype.gd,Zr.prototype.setStatic=Zr.prototype.Nb,Zr.prototype.setClockOffset=Zr.prototype.Nd,Zr.prototype.getPresentationStartTime=Zr.prototype.ue,Zr.prototype.setDuration=Zr.prototype.wa,Zr.prototype.getMaxSegmentDuration=Zr.prototype.ne,Zr.prototype.getDuration=Zr.prototype.getDuration,ei.prototype.release=function(){this.g=null,this.c=function(){}},ri.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.g&&(this.g.stop(),this.g=null),this.c&&(this.c.release(),this.c=null),this.a=this.w=this.v=null},ri.prototype.Vc=function(){this.h=!0,ii(this)};var ai=new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]]);function si(e,t,n){var r=this;this.a=e,this.g=t,this.f=n,this.h=!1,this.b=new nt,this.c=new fi(e),oi(this.a,HTMLMediaElement.HAVE_METADATA,this.b,(function(){li(r,r.f)}))}function ci(e){return e.h?e.a.currentTime:e.f}function ui(e,t){0<e.a.readyState?di(e.c,t):oi(e.a,HTMLMediaElement.HAVE_METADATA,e.b,(function(){li(e,e.f)}))}function li(e,t){.001>Math.abs(e.a.currentTime-t)?hi(e):(e.b.ha(e.a,"seeking",(function(){hi(e)})),di(e.c,0==e.a.currentTime?t:e.a.currentTime))}function hi(e){e.h=!0,e.b.o(e.a,"seeking",(function(){return e.g()}))}function fi(e){var t=this;this.b=e,this.h=10,this.g=this.f=this.c=0,this.a=new me((function(){0>=t.c||t.b.currentTime!=t.f?t.a.stop():(t.b.currentTime=t.g,t.c--)}))}function di(e,t){e.f=e.b.currentTime,e.g=t,e.c=e.h,e.b.currentTime=t,e.a.xa(.1)}function pi(e){var t=this;this.a=e,this.f=!1,this.c=null,this.b=new nt,oi(this.a,HTMLMediaElement.HAVE_CURRENT_DATA,this.b,(function(){null==t.c?t.f=!0:(t.b.ha(t.a,"seeking",(function(){t.f=!0})),t.a.currentTime=Math.max(0,t.a.currentTime+t.c))}))}function mi(e,t,n,r,i,o){var a=this;this.b=e,this.a=t.presentationTimeline,this.C=t.minBufferTime||0,this.i=n,this.w=i,this.j=null,this.f=new ri(e,t.presentationTimeline,n,function(e,t){if(!t.stallEnabled)return null;var n=t.stallSkip,r=new ei(new ti(e),t.stallThreshold);return function(e,t){e.c=t}(r,(function(){e.currentTime+=n})),r}(e,n),o),this.c=new si(e,(function(){var e=a.f;e.j=!0,e.h=!1,e.f=!1;var t=ci(a.c);return e=gi(a,t),.001<Math.abs(e-t)&&(t=(new Date).getTime()/1e3,!a.j||a.j<t-1)?(a.j=t,ui(a.c,e),e=void 0):(a.w(),e=void 0),e}),function(e,t){return null==t?t=1/0>e.a.getDuration()?e.a.ib():e.a.Da():0>t&&(t=e.a.Da()+t),vi(e,yi(e,t))}(this,r)),this.h=new me((function(){if(0!=a.b.readyState&&!a.b.paused){var e=a.b.currentTime,t=a.a.ib(),n=a.a.Da();3>n-t&&(t=n-3),e<t&&(e=gi(a,e),a.b.currentTime=e)}})).xa(.25)}function vi(e,t){var n=e.a.getDuration();return t>=n?n-e.i.durationBackoff:t}function gi(e,t){var n=Math.max(e.C,e.i.rebufferingGoal),r=e.i.safeSeekOffset,i=e.a.ib(),o=e.a.Da(),a=e.a.getDuration();3>o-i&&(i=o-3);var s=e.a.Eb(n),c=e.a.Eb(r);return n=e.a.Eb(n+r),t>=a?vi(e,t):t>o?o:t<i?_n(e.b.buffered,c)?c:n:t>=s||_n(e.b.buffered,t)?t:n}function yi(e,t){var n=e.a.ib();return t<n||t>(n=e.a.Da())?n:t}function bi(e){var t=this;this.c=e,this.a=new Set,this.b=new me((function(){wi(t,!1)})).xa(.25)}function wi(e,t){for(var n=u(e.a),r=n.next();!r.done;r=n.next()){r=r.value;for(var i=e.c.currentTime,o=t,a=u(r.g.a),s=a.next();!s.done;s=a.next()){s=s.value;var c=r.f.get(s),l=i<s.startTime?ki:i>s.endTime?xi:Si;r.f.set(s,l);for(var h=u(r.h),f=h.next();!f.done;f=h.next())(f=f.value).$a==c&&f.Za==l&&f.Ra(s,o)}}}function Ei(){this.b=function(){},this.a=new Set}function _i(e){var t=this;this.g=e,this.f=new Map,this.a=function(){},this.b=function(){},this.c=function(){},this.h=[{$a:null,Za:Si,Ra:function(e,n){return t.a(e,n)}},{$a:ki,Za:Si,Ra:function(e,n){return t.a(e,n)}},{$a:xi,Za:Si,Ra:function(e,n){return t.a(e,n)}},{$a:Si,Za:ki,Ra:function(e,n){return t.b(e,n)}},{$a:Si,Za:xi,Ra:function(e,n){return t.b(e,n)}},{$a:ki,Za:xi,Ra:function(e,n){return t.c(e,n)}},{$a:xi,Za:ki,Ra:function(e,n){return t.c(e,n)}}]}si.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.c&&(this.c.release(),this.c=null),this.g=function(){},this.a=null},fi.prototype.release=function(){this.a&&(this.a.stop(),this.a=null),this.b=null},pi.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.a=null},pi.prototype.l=function(e){this.c=this.f?this.c:e},pi.prototype.g=function(){return(this.f?this.a.currentTime:this.c)||0},pi.prototype.v=function(){},mi.prototype.release=function(){this.c&&(this.c.release(),this.c=null),this.f&&(this.f.release(),this.f=null),this.h&&(this.h.stop(),this.h=null),this.b=this.c=this.a=this.i=null,this.w=function(){}},mi.prototype.l=function(e){ui(this.c,e)},mi.prototype.g=function(){var e=ci(this.c);return 0<this.b.readyState&&!this.b.paused?yi(this,e):e},mi.prototype.v=function(){this.f.Vc()},bi.prototype.release=function(){this.b.stop();for(var e=u(this.a),t=e.next();!t.done;t=e.next())t.value.release();this.a.clear()},Ei.prototype.release=function(){this.b=function(){},this.a.clear()},_i.prototype.release=function(){this.g=null,this.f.clear(),this.a=function(){},this.b=function(){},this.c=function(){}};var ki=1,Si=2,xi=3;function Ti(e){this.a=e,this.b=null,this.c=0}function Pi(e,t,n){return new Ti([new Qr(e,e+t,(function(){return n}),0,null,null,e,e,e+t)])}function Oi(e){this.b=e,this.a=this.b.find(0)||0}function Ci(){Ti.call(this,[]),this.f=[]}function Ii(e,t){this.P=Me(e),this.a=t==Li,this.B=0}function Ri(){return new ye(be,3,3e3)}(r=Ti.prototype).destroy=function(){return lt("shaka.media.SegmentIndex","Please use release() instead of destroy()."),this.release(),Promise.resolve()},r.release=function(){this.a=[],this.b&&this.b.stop(),this.b=null},r.find=function(e){for(var t=this.a.length-1;0<=t;--t){var n=this.a[t];if(e>=n.startTime&&e<n.endTime)return t+this.c}return this.a.length&&e<this.a[0].startTime?this.c:null},r.get=function(e){return 0==this.a.length||0>(e-=this.c)||e>=this.a.length?null:this.a[e]},r.offset=function(e){for(var t=u(this.a),n=t.next();!n.done;n=t.next())(n=n.value).startTime+=e,n.endTime+=e,n.timestampOffset+=e},r.kb=function(e){var t,n=this.a[this.a.length-1];t=this.a.length?e.filter((function(e){return e.startTime>=n.startTime})):e,n&&t.length&&t[0].startTime==n.startTime&&this.a.pop(),this.a.push.apply(this.a,l(t))},r.Na=function(e){var t=this.a.length;this.a=this.a.filter((function(t){return t.endTime>e})),this.c+=t-this.a.length},r.Ja=function(e,t){for(;this.a.length&&this.a[this.a.length-1].startTime>=t;)this.a.pop();for(;this.a.length&&this.a[0].endTime<=e;)this.a.shift(),this.c++;if(0!=this.a.length){var n=this.a[this.a.length-1];this.a[this.a.length-1]=new Qr(n.startTime,t,n.c,n.b,n.a,n.f,n.timestampOffset,n.appendWindowStart,n.appendWindowEnd)}},r.mc=function(e,t){var n=this;this.b&&this.b.stop(),this.b=new me((function(){var e=t();n.a.push.apply(n.a,l(e)),0==n.a.length&&(n.b.stop(),n.b=null)})),this.b.xa(e)},Ti.prototype[Symbol.iterator]=function(){return new Oi(this)},F("shaka.media.SegmentIndex",Ti),Ti.forSingleSegment=Pi,Ti.prototype.updateEvery=Ti.prototype.mc,Ti.prototype.fit=Ti.prototype.Ja,Ti.prototype.evict=Ti.prototype.Na,Ti.prototype.merge=Ti.prototype.kb,Ti.prototype.offset=Ti.prototype.offset,Ti.prototype.get=Ti.prototype.get,Ti.prototype.find=Ti.prototype.find,Ti.prototype.release=Ti.prototype.release,Ti.prototype.destroy=Ti.prototype.destroy,Oi.prototype.seek=function(e){return null==(e=this.b.find(e))?(this.a=Math.pow(2,31),null):(this.a=e,this.b.get(this.a++))},Oi.prototype.current=function(){return this.b.get(this.a-1)},Oi.prototype.next=function(){var e=this.b.get(this.a++);return{value:e,done:!e}},F("shaka.media.SegmentIterator",Oi),Oi.prototype.next=Oi.prototype.next,Oi.prototype.current=Oi.prototype.current,Oi.prototype.seek=Oi.prototype.seek,v(Ci,Ti),(r=Ci.prototype).clone=function(){var e=new Ci;return e.f=this.f.slice(),e},r.release=function(){for(var e=u(this.f),t=e.next();!t.done;t=e.next())t.value.release();this.f=[]},r.find=function(e){for(var t=0,n=u(this.f),r=n.next();!r.done;r=n.next()){var i=(r=r.value).find(e);if(null!=i)return i+t;t+=r.c+r.a.length}return null},r.get=function(e){for(var t=0,n=u(this.f),r=n.next();!r.done;r=n.next()){var i=(r=r.value).get(e-t);if(i)return i;t+=r.c+r.a.length}return null},r.offset=function(){},r.kb=function(){},r.Na=function(){},r.Ja=function(){},r.mc=function(){},F("shaka.media.MetaSegmentIndex",Ci),Ci.prototype.updateEvery=Ci.prototype.mc,Ci.prototype.fit=Ci.prototype.Ja,Ci.prototype.evict=Ci.prototype.Na,Ci.prototype.merge=Ci.prototype.kb,Ci.prototype.offset=Ci.prototype.offset,Ci.prototype.get=Ci.prototype.get,Ci.prototype.find=Ci.prototype.find,Ci.prototype.release=Ci.prototype.release,(r=Ii.prototype).sa=function(){return this.B<this.P.byteLength},r.te=function(){return this.B},r.je=function(){return this.P.byteLength},r.na=function(){try{var e=this.P.getUint8(this.B);return this.B+=1,e}catch(e){throw Ri()}},r.Kb=function(){try{var e=this.P.getUint16(this.B,this.a);return this.B+=2,e}catch(e){throw Ri()}},r.J=function(){try{var e=this.P.getUint32(this.B,this.a);return this.B+=4,e}catch(e){throw Ri()}},r.Hd=function(){try{var e=this.P.getInt32(this.B,this.a);return this.B+=4,e}catch(e){throw Ri()}},r.pb=function(){try{if(this.a)var e=this.P.getUint32(this.B,!0),t=this.P.getUint32(this.B+4,!0);else t=this.P.getUint32(this.B,!1),e=this.P.getUint32(this.B+4,!1)}catch(e){throw Ri()}if(2097151<t)throw new ye(be,3,3001);return this.B+=8,t*Math.pow(2,32)+e},r.Va=function(e){if(this.B+e>this.P.byteLength)throw Ri();var t=Ae(this.P,this.B,e);return this.B+=e,t},r.skip=function(e){if(this.B+e>this.P.byteLength)throw Ri();this.B+=e},r.Jd=function(e){if(this.B<e)throw Ri();this.B-=e},r.seek=function(e){if(0>e||e>this.P.byteLength)throw Ri();this.B=e},r.Xc=function(){for(var e=this.B;this.sa()&&0!=this.P.getUint8(this.B);)this.B+=1;return e=Ae(this.P,e,this.B-e),this.B+=1,Dt(e)},F("shaka.util.DataViewReader",Ii),Ii.prototype.readTerminatedString=Ii.prototype.Xc,Ii.prototype.seek=Ii.prototype.seek,Ii.prototype.rewind=Ii.prototype.Jd,Ii.prototype.skip=Ii.prototype.skip,Ii.prototype.readBytes=Ii.prototype.Va,Ii.prototype.readUint64=Ii.prototype.pb,Ii.prototype.readInt32=Ii.prototype.Hd,Ii.prototype.readUint32=Ii.prototype.J,Ii.prototype.readUint16=Ii.prototype.Kb,Ii.prototype.readUint8=Ii.prototype.na,Ii.prototype.getLength=Ii.prototype.je,Ii.prototype.getPosition=Ii.prototype.te,Ii.prototype.hasMoreData=Ii.prototype.sa;var Li=1;function Ai(){this.c=[],this.b=[],this.a=!1}function Mi(e){for(var t=null!=e.flags?12:8;e.reader.sa()&&!e.parser.a;)e.parser.jc(e.start+t,e.reader,e.partialOkay)}function Di(e){for(var t=null!=e.flags?12:8,n=e.reader.J(),r=(n=u(Q(n))).next();!r.done&&(e.parser.jc(e.start+t,e.reader,e.partialOkay),!e.parser.a);r=n.next());}function ji(e){return function(t){e(t.reader.Va(t.reader.P.byteLength-t.reader.B))}}function Ni(e){for(var t=0,n=(e=u(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Bi(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}Ii.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Li},(r=Ai.prototype).K=function(e,t){var n=Ni(e);return this.c[n]=Fi,this.b[n]=t,this},r.ea=function(e,t){var n=Ni(e);return this.c[n]=Ui,this.b[n]=t,this},r.stop=function(){this.a=!0},r.parse=function(e,t){var n=new Ii(e,0);for(this.a=!1;n.sa()&&!this.a;)this.jc(0,n,t)},r.jc=function(e,t,n){var r=t.B,i=t.J(),o=t.J();switch(i){case 0:i=t.P.byteLength-r;break;case 1:i=t.pb()}var a=this.b[o];if(a){var s=null,c=null;this.c[o]==Ui&&(s=(c=t.J())>>>24,c&=16777215),o=r+i,n&&o>t.P.byteLength&&(o=t.P.byteLength),a({parser:this,partialOkay:n||!1,version:s,flags:c,reader:t=new Ii(t=0<(o-=t.B)?t.Va(o):new Uint8Array(0),0),size:i,start:r+e})}else t.skip(Math.min(r+i-t.B,t.P.byteLength-t.B))},F("shaka.util.Mp4Parser",Ai),Ai.typeToString=Bi,Ai.allData=ji,Ai.sampleDescription=Di,Ai.children=Mi,Ai.prototype.parseNext=Ai.prototype.jc,Ai.prototype.parse=Ai.prototype.parse,Ai.prototype.stop=Ai.prototype.stop,Ai.prototype.fullBox=Ai.prototype.ea,Ai.prototype.box=Ai.prototype.K;var Fi=0,Ui=1;function Hi(e,t,n,r){return e=Ge(e,r),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function qi(e,t){var n=this;this.s=t,this.m=e,this.i=null,this.f=1,this.c=this.b=null,this.a=new Map,this.h=!1,this.j=null,this.g=!1,this.D=new et((function(){return function(e){var t,n,r,i;return A((function(o){if(1==o.a){for(t=[],n=u(e.a.values()),r=n.next();!r.done;r=n.next())to(i=r.value),t.push(no(i));return w(o,Promise.all(t),2)}e.a.clear(),e.s=null,e.m=null,e.i=null,E(o)}))}(n)}))}function zi(e,t){var n=e.a.get("video");if(n){var r=n.stream;if(r)if(t){var i=r.trickModeVideo;i&&!n.Xa&&(Wi(e,i,!1,0,!1),n.Xa=r)}else(r=n.Xa)&&(n.Xa=null,Wi(e,r,!0,0,!1))}}function Vi(e,t,n,r){n=void 0!==n&&n,r=void 0===r?0:r,e.b=t,e.h&&(t.video&&Wi(e,t.video,n,r,!1),t.audio&&Wi(e,t.audio,n,r,!1))}function $i(e,t){e.c=t,e.h&&Wi(e,t,!0,0,!1)}function Wi(e,t,n,r,i){var o=e.a.get(t.type);o||"text"!=t.type?o&&(o.Xa&&(t.trickModeVideo?(o.Xa=t,t=t.trickModeVideo):o.Xa=null),o.stream!=t||i)&&("text"==t.type&&Yn(e.s.L,kt(t.mimeType,t.codecs)),o.stream=t,o.stream.segmentIndex?o.va=o.stream.segmentIndex[Symbol.iterator]():o.va=null,n&&(o.zb?o.oc=!0:o.Ua?(o.rb=!0,o.$b=r,o.oc=!0):(to(o),Zi(e,o,!0,r).catch((function(t){e.s&&e.s.onError(t)})))),function(e,t){var n,r;return A((function(i){if(1==i.a)return t.Ea?(n=t.stream,r=t.Ea,n.segmentIndex?i.u(2):w(i,n.createSegmentIndex(),2)):i.return();if(t.Ea!=r||t.stream!=n)return i.return();t.va=t.stream.segmentIndex[Symbol.iterator]();var o=e.s.cc(),a=er(e.s.L,t.type),s=Xi(e,t,o,a),c=s&&s.a?s.a-s.b:null;s&&!c&&(c=(s.endTime-s.startTime)*(t.stream.bandwidth||0)/8),c?((s=s.f)&&(c+=(s.a?s.a-s.b:null)||0),o=8*c/(s=e.s.getBandwidthEstimate())<(a||0)-o-Math.max(e.m.minBufferTime||0,e.i.rebufferingGoal)||t.Ea.b.a>c):o=!1,o&&t.Ea.abort(),E(i)}))}(e,o).catch((function(t){e.s&&e.s.onError(t)}))):function(e,t){var n,r,i,o,a;A((function(s){switch(s.a){case 1:return n=wt,_(s,2),w(s,ir(e.s.L,n.$),4);case 4:S(s,3);break;case 2:r=x(s),e.s&&e.s.onError(r);case 3:i=kt(t.mimeType,t.codecs),Yn(e.s.L,i),o=e.s.L.h,(o.isTextVisible()||e.i.alwaysStreamText)&&(a=Gi(t),e.a.set(n.$,a),eo(e,a,0)),E(s)}}))}(e,t)}function Ki(e,t){t.zb||t.rb||(t.Ua?(t.rb=!0,t.$b=0):null==Zn(e.s.L,t.type)?null==t.Ha&&eo(e,t,0):(to(t),Zi(e,t,!1,0).catch((function(t){e.s&&e.s.onError(t)}))))}function Gi(e){var t=e.segmentIndex?e.segmentIndex[Symbol.iterator]():null;return{stream:e,type:e.type,Hb:null,va:t,La:null,Oc:null,Pc:null,Nc:null,Mc:null,Xa:null,endOfStream:!1,Ua:!1,Ha:null,rb:!1,$b:0,oc:!1,zb:!1,Zc:!1,Fb:!1,Ea:null}}function Xi(e,t,n,r){return t.stream==t.Hb?t.va.current():t.La?t.va.seek(t.La.endTime):r?t.va.seek(r):((r=t.va.seek(Math.max(n-e.i.inaccurateManifestTolerance,0)))&&Ji(e,r)||(r=t.va.seek(n)),r)}function Ji(e,t){var n=e.m.presentationTimeline,r=n.Ka();return!(t.endTime<n.Pa()||t.startTime>r)}function Yi(e){return e&&"text"==e.type&&"application/cea-608"==e.stream.mimeType}function Qi(e,t,n){var r,i,o,a;return A((function(s){return 1==s.a?(r=Ye,i=Hi(n.c(),n.b,n.a,e.i.retryParameters),o=e.s.lb.request(r,i),t.Ea=o,w(s,o.promise,2)):(a=s.b,t.Ea=null,s.return(a.data))}))}function Zi(e,t,n,r){var i,o;return A((function(a){return 1==a.a?(t.rb=!1,t.oc=!1,t.$b=0,t.zb=!0,r?(i=e.s.cc(),o=e.s.L.getDuration(),w(a,e.s.L.remove(t.type,i+r,o),3)):w(a,ir(e.s.L,t.type),4)):3!=a.a?(tt(e.D),n?w(a,e.s.L.flush(t.type),3):a.u(3)):(tt(e.D),t.Hb=null,t.La=null,t.zb=!1,t.endOfStream=!1,eo(e,t,0),void E(a))}))}function eo(e,t,n){t.Ha=new pe((function(){var n;return A((function(r){return 1==r.a?(_(r,2),w(r,e.Ib(t),4)):2!=r.a?S(r,0):(n=x(r),e.s&&e.s.onError(n),void E(r))}))})).R(n)}function to(e){null!=e.Ha&&(e.Ha.stop(),e.Ha=null)}function no(e){return A((function(t){return e.Ea?w(t,e.Ea.abort(),0):t.u(0)}))}function ro(e,t){A((function(n){if(1==n.a)return w(n,ge(e.j),2);tt(e.D),e.s.onError(t),t.handled||e.i.failureCallback(t),E(n)}))}function io(e,t){var n=ca(),r=this;this.h=t,this.c=e,this.f=n,this.j=null,this.g=[],this.b=this.a=null,this.l=Promise.resolve().then((function(){return function(e){return A((function(t){if(e.D.a)t=t.u(0);else{if(0==e.g.length||e.a&&!e.a.Qa)var n=!1;else{e.a&&(e.a.ta.Ta(),e.a=null);var r=(n=e.g.shift()).create(e.f);r?(n.ta.nb(),e.a={node:r.node,payload:r.payload,Qa:r.Qa,ta:n.ta}):n.ta.ic(),n=!0}n?n=Promise.resolve():e.a?n=function(e){var t,n;return A((function(r){switch(r.a){case 1:return e.c=e.h.pe(e.c,e.f,e.a.node,e.a.payload),_(r,2),e.b=e.h.ee(e.c,e.f,e.a.payload),w(r,e.b.promise,4);case 4:e.b=null,e.c==e.a.node&&(e.a.ta.fc(),e.a=null),S(r,0);break;case 2:return 7001==(t=x(r)).code?e.a.ta.Ta():e.a.ta.onError(t),e.a=null,e.b=null,n=e,w(r,e.h.handleError(e.f,t),5);case 5:n.c=r.b,E(r)}}))}(e):(e.h.Fe(e.c),e.j=new _e,n=e.j),t=w(t,n,1)}return t}))}(r)})),this.D=new et((function(){return function(e){var t,n;return A((function(r){if(1==r.a)return e.b&&e.b.abort(),ao(e),w(r,e.l,2);for(e.a&&e.a.ta.Ta(),t=u(e.g),n=t.next();!n.done;n=t.next())n.value.ta.Ta();e.a=null,e.g=[],e.h=null,E(r)}))}(r)}))}function oo(e,t){var n={nb:function(){},fc:function(){},Ta:function(){},onError:function(){},ic:function(){},Jf:function(){}};return e.g.push({create:t,ta:n}),e.b&&e.b.abort(),ao(e),n}function ao(e){e.j&&(e.j.resolve(),e.j=null)}function so(e){this.a=null;for(var t=u(Array.from(e.textTracks)),n=t.next();!n.done;n=t.next())(n=n.value).mode="disabled","Shaka Player TextTrack"==n.label&&(this.a=n);this.a||(this.a=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden"}function co(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function uo(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var r=u(Array.from(e.cues)),i=r.next();!i.done;i=r.next())(i=i.value)&&t(i)&&e.removeCue(i);e.mode=n}function lo(){}function ho(e,t){var n=this;this.h=!1,this.f=[],this.a=e,this.g=t,this.b=document.createElement("div"),this.b.classList.add("shaka-text-container"),this.g.appendChild(this.b),this.j=new me((function(){fo(n)})).xa(.25),this.c=new Map}function fo(e){function t(t){return e.f.includes(t)&&e.h&&t.startTime<=n&&t.endTime>=n}for(var n=e.a.currentTime,r=u(e.c.keys()),i=r.next();!i.done;i=r.next())if(!t(i=i.value)){var o=e.c.get(i);e.b.removeChild(o),e.c.delete(i)}for(r=new Set(e.c.values()),o=(i=u(Array.from(e.b.childNodes))).next();!o.done;o=i.next())o=o.value,r.has(o)||e.b.removeChild(o);for(i=(r=u(r=e.f.filter((function(n){return t(n)&&!e.c.has(n)})).sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime})))).next();!i.done;i=r.next())mo(e,e.b,i.value)}function po(e,t,n){var r=document.createElement("span");return n.spacer?r.style.display="block":vo(e,r,n,!0),t.appendChild(r),r}function mo(e,t,n){if(n.nestedCues.length){var r=document.createElement("p");r.style.width="100%",vo(e,r,n,!1);for(var i=0;i<n.nestedCues.length;i++)po(e,r,n.nestedCues[i]);t.appendChild(r),e.c.set(n,r)}else e.c.set(n,po(e,t,n))}function vo(e,t,n,r){var i=t.style;i.whiteSpace="pre-line",t.textContent=n.payload,r&&(i.backgroundColor=n.backgroundColor),i.border=n.border,i.color=n.color,i.direction=n.direction,i.opacity=n.opacity,i.paddingLeft=go(n.linePadding,n,e.g),i.paddingRight=go(n.linePadding,n,e.g),n.backgroundImage&&(i.backgroundImage="url('"+n.backgroundImage+"')",i.backgroundRepeat="no-repeat",i.backgroundSize="contain",i.backgroundPosition="center",""==n.backgroundColor&&(i.backgroundColor="transparent")),n.backgroundImage&&n.region&&(t=n.region.widthUnits==zn?"%":"px",i.height=n.region.height+(n.region.heightUnits==zn?"%":"px"),i.width=n.region.width+t),i.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end",n.nestedCues.length&&(i.alignItems="center",i.display="flex",i.flexDirection="column",i.margin="0"),r&&(i.maxWidth="100%"),i.fontFamily=n.fontFamily,i.fontWeight=n.fontWeight.toString(),i.fontStyle=n.fontStyle,i.letterSpacing=n.letterSpacing,i.fontSize=go(n.fontSize,n,e.g),n.line?1==n.lineInterpretation&&(i.position="absolute",n.writingMode==Dn?n.lineAlign==Nn?i.top=n.line+"%":"end"==n.lineAlign&&(i.bottom=n.line+"%"):"vertical-lr"==n.writingMode?n.lineAlign==Nn?i.left=n.line+"%":"end"==n.lineAlign&&(i.right=n.line+"%"):n.lineAlign==Nn?i.right=n.line+"%":"end"==n.lineAlign&&(i.left=n.line+"%")):n.region&&n.region.id&&!r&&(e=n.region.widthUnits==zn?"%":"px",r=n.region.viewportAnchorUnits==zn?"%":"px",i.height=n.region.height+(n.region.heightUnits==zn?"%":"px"),i.width=n.region.width+e,i.position="absolute",i.top=n.region.viewportAnchorY+r,i.left=n.region.viewportAnchorX+r),i.lineHeight=n.lineHeight,n.position&&(n.writingMode==Dn?i.paddingLeft=n.position:i.paddingTop=n.position),"line-left"==n.positionAlign?i.cssFloat="left":"line-right"==n.positionAlign&&(i.cssFloat="right"),i.textAlign=n.textAlign,i.textDecoration=n.textDecoration.join(" "),i.writingMode=n.writingMode,n.size&&(n.writingMode==Dn?i.width=n.size+"%":i.height=n.size+"%")}function go(e,t,n){var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),af:r[2]}:null;if(!r)return e;var i=r.value;switch(r.af){case"%":return i/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*i/t.cellResolution.rows+"px";default:return e}}function yo(){}function bo(e,t,n,r,i){var o,a=i in r,s=!0;for(o in t){var c=i+"."+o,u=a?r[i]:n[o];a||o in n?void 0===t[o]?void 0===u||a?delete e[o]:e[o]=Fe(u):u.constructor==Object&&t[o]&&t[o].constructor==Object?(e[o]||(e[o]=Fe(u)),c=bo(e[o],t[o],u,r,c),s=s&&c):typeof t[o]!=typeof u||null==t[o]||"function"!=typeof t[o]&&t[o].constructor!=u.constructor?($("Invalid config, wrong type for "+c),s=!1):("function"==typeof n[o]&&n[o].length!=t[o].length&&W("Unexpected number of arguments for "+c),e[o]=t[o]):($("Invalid config, unrecognized key "+c),s=!1)}return s}function wo(e,t){for(var n={},r=n,i=0,o=0;!(0>(i=e.indexOf(".",i)));)0!=i&&"\\"==e[i-1]||(r[o=e.substring(o,i).replace(/\\\./g,".")]={},r=r[o],o=i+1),i+=1;return r[e.substring(o).replace(/\\\./g,".")]=t,n}function Eo(){}function _o(){var e=1e6,t=1/0;navigator.connection&&(e=1e6*navigator.connection.downlink,navigator.connection.saveData&&(t=360));var n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:cn,logLicenseExchange:!1,updateExpirationTime:1},r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,defaultPresentationDelay:0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1},hls:{ignoreTextStreamFailures:!1,useFullSegmentsForStartTime:!1}},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},failureCallback:function(e){return[e]},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2};It("Web0S")&&(i.stallEnabled=!1);var o={trackSelectionCallback:function(e){return A((function(t){return t.return(e)}))},progressCallback:function(e,t){return[e,t]},usePersistentLicense:!0},a={drm:n,manifest:r,streaming:i,offline:o,abrFactory:function(){return new Lr},abr:{enabled:!0,defaultBandwidthEstimate:e,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return o.trackSelectionCallback=function(e){return A((function(t){return t.return(function(e,t){var n=e.filter((function(e){return"variant"==e.type})),r=[],i=gr(t,n.map((function(e){return e.language})));i&&(r=n.filter((function(e){return pr(e.language)==i}))),0==r.length&&(r=n.filter((function(e){return e.primary}))),0==r.length&&(n.map((function(e){return e.language})),r=n);var o=r.filter((function(e){return e.height&&480>=e.height}));if(o.length&&(o.sort((function(e,t){return t.height-e.height})),r=o.filter((function(e){return e.height==o[0].height}))),n=[],r.length){var a=Math.floor(r.length/2);r.sort((function(e,t){return e.bandwidth-t.bandwidth})),n.push(r[a])}for(r=u(e),a=r.next();!a.done;a=r.next())"text"==(a=a.value).type&&n.push(a);return n}(e,a.preferredAudioLanguage))}))},a}function ko(e,t,n){var r={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return bo(e,t,n||_o(),r,"")}function So(){this.a=null,this.b=[]}function xo(e,t){if(null==e.a)e.a={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.a.duration=n-e.a.timestamp,e.a.state!=t&&(e.b.push(e.a),e.a={timestamp:n,state:t,duration:0})}}function To(e,t){var n=0;e.a&&e.a.state==t&&(n+=e.a.duration);for(var r=u(e.b),i=r.next();!i.done;i=r.next())n+=(i=i.value).state==t?i.duration:0;return n}function Po(){this.b=this.c=null,this.a=[]}function Oo(e,t,n){e.c!=t&&(e.c=t,e.a.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth}))}function Co(e,t,n){e.b!=t&&(e.b=t,e.a.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Io(){this.g=this.h=this.w=this.l=this.C=this.c=this.v=this.f=this.G=this.H=this.I=this.j=this.M=NaN,this.b=new So,this.a=new Po}function Ro(t,n){Be.call(this);var r=this;this.g=Da,this.Yb=this.a=null,this.T=!1,this.b=new nt,this.yc=this.j=this.wb=this.m=this.Wb=this.l=this.c=this.Xb=this.C=this.Tb=this.w=this.za=this.v=this.G=this.h=this.N=null,this.od=1e9,this.i=Fo(this),this.Ec={width:1/0,height:1/0},this.f=null,this.xb=new Fr(this.i.preferredAudioLanguage,this.i.preferredVariantRole,this.i.preferredAudioChannelCount),this.ca=this.i.preferredTextLanguage,this.Ub=this.i.preferredTextRole,this.zc=[],n&&n(this),this.N=function(e){return new We((function(t,n){e.j&&e.j.segmentDownloaded(t,n)}))}(this),this.H=null,Ha&&(this.H=gt(Ha)),this.b.o(e,"online",(function(){r.$c()})),this.da={name:"detach"},this.Ca={name:"attach"},this.M={name:"unload"},this.pc={name:"manifest-parser"},this.Dc={name:"manifest"},this.pa={name:"media-source"},this.Ac={name:"drm-engine"},this.I={name:"load"},this.Fc={name:"src-equals-drm-engine"},this.Aa={name:"src-equals"};var i=new Map;i.set(this.Ca,(function(e,t){return Pe(function(e,t,n){return null==t.A&&(t.A=n.A,e.b.o(t.A,"error",(function(){var t=Zo(e);t&&Yo(e,t)}))),e.a=t.A,Promise.resolve()}(r,e,t))})),i.set(this.da,(function(e){return e.A&&(r.b.oa(e.A,"error"),e.A=null),r.a=null,Pe(e=Promise.resolve())})),i.set(this.M,(function(e){return Pe(Ao(r,e))})),i.set(this.pa,(function(t){return Pe(t=function(t,n){var r,i,o,a,s;return A((function(c){if(1==c.a)return r=e.muxjs?new bn:new wn,i=t.i.textDisplayFactory,o=gt(i),t.Bc=i,a=function(e,n){t.H&&t.H.onHlsTimedMetadata(e,n)},w(c,(s=new Xn(n.A,r,o,a)).w,2);t.G=s,E(c)}))}(r,t))})),i.set(this.pc,(function(e,t){return Pe(function(e,t,n){var r,i,o,a;return A((function(s){if(1==s.a)return t.mimeType=n.mimeType,t.uri=n.uri,r=t.uri,i=e.N,e.wb=r,o=e,w(s,$r(r,i,e.i.manifest.retryParameters,t.mimeType),2);o.Wb=s.b,e.l=gt(e.Wb),a=Fe(e.i.manifest),n.A&&"AUDIO"===n.A.nodeName&&(a.disableVideo=!0),e.l.configure(a),E(s)}))}(r,e,t))})),i.set(this.Dc,(function(e){return function(e,t){var n=t.uri,r=e.N;e.Xb=new Ei,function(e,t){e.b=t}(e.Xb,(function(t){Qo(e,Pa,t),e.H&&e.H.onDashTimedMetadata(t)}));var i={networkingEngine:r,filter:function(t){return A((function(n){return n.return(e.fb(t))}))},onTimelineRegionAdded:function(t){var n=e.Xb;e:{for(var r=u(n.a),i=r.next();!i.done;i=r.next())if((i=i.value).schemeIdUri==t.schemeIdUri&&i.id==t.id&&i.startTime==t.startTime&&i.endTime==t.endTime){r=i;break e}r=null}null==r&&(n.a.add(t),n.b(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return Yo(e,t)}},o=Date.now()/1e3;return new ke(function(){var t,r,a,s;return A((function(c){if(1==c.a)return t=e,w(c,e.l.start(n,i),2);if(t.m=c.b,r=Lo(ba),e.dispatchEvent(r),0==e.m.variants.length)throw new ye(be,4,4036);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}(e.m),a=Date.now()/1e3,s=a-o,e.f.v=s,E(c)}))}(),(function(){return e.l.stop()}))}(r,e)})),i.set(this.Ac,(function(){return Pe(function(e){var t,n;return A((function(r){if(1==r.a)return t=Date.now()/1e3,n=!0,e.h=Mo(e,{lb:e.N,onError:function(t){Yo(e,t)},hc:function(t){ea(e,t)},onExpirationUpdated:function(t,n){ta(e,t,n)},onEvent:function(r){e.dispatchEvent(r),r.type==da&&n&&(n=!1,e.f.c=Date.now()/1e3-t)}}),e.h.configure(e.i.drm),w(r,Jt(e.h,e.m.variants,e.m.offlineSessionIds),2);e.fb(e.m),E(r)}))}(r))})),i.set(this.I,(function(e,t){return Pe(function(e,t,n){var r,i,o,a,s,c,l,h,f,d;return A((function(p){switch(p.a){case 1:return t.startTime=n.startTime,r=t.A,i=t.uri,e.wb=i,e.w=new Xr({dc:function(){return t.A.playbackRate},fd:function(e){t.A.playbackRate=e},Dd:function(e){t.A.currentTime+=e}}),o=function(){return qo(e)},a=function(){return Ho(e)},e.b.o(r,"playing",o),e.b.o(r,"pause",o),e.b.o(r,"ended",o),e.b.o(r,"ratechange",a),s=e.i.abrFactory,e.j&&e.yc==s||(e.yc=s,e.j=gt(s),"function"!=typeof e.j.playbackRateChanged&&(lt("AbrManager","Please use an AbrManager with playbackRateChanged function."),e.j.playbackRateChanged=function(){}),e.j.configure(e.i.abr)),function(e){for(var t=new Map,n=u(e.m.variants),r=n.next();!r.done;r=n.next())if((r=r.value).video&&r.video.closedCaptions)for(var i=u((r=r.video).closedCaptions.keys()),o=i.next();!o.done;o=i.next())if(o=o.value,!t.has(o)){var a={id:e.od++,originalId:o,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"application/cea-608",codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:r.closedCaptions.get(o),label:null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:r.roles,channelsCount:null,audioSamplingRate:null,closedCaptions:null};t.set(o,a)}for(t=u(t.values()),n=t.next();!n.done;n=t.next())e.m.textStreams.push(n.value)}(e),e.xb=new Fr(e.i.preferredAudioLanguage,e.i.preferredVariantRole,e.i.preferredAudioChannelCount),e.ca=e.i.preferredTextLanguage,function(e,t,n){0<t&&(e.S()||e.Od(t)),t=e.getDuration(),n<t&&(e.S()||e.wa(n))}(e.m.presentationTimeline,e.i.playRangeStart,e.i.playRangeEnd),w(p,e.h.yb(r),2);case 2:if(e.j.init((function(t,n,r){n=void 0!==n&&n,r=void 0===r?0:r,e.c&&t!=e.c.b&&(Oo(e.f.a,t,!0),Vi(e.c,t,n,r),$o(e))})),e.v=function(e,t){return new mi(e.a,e.m,e.i.streaming,t,(function(){if(e.za&&wi(e.za,!0),e.c)for(var t=e.c,n=t.s.cc(),r=t.i.smallGapLimit,i=u(t.a.keys()),o=i.next();!o.done;o=i.next()){var a;o=o.value,(a=null==er(t.s.L,o))||(a=t.s.L,"text"==o?a=null!=(a=a.c).a&&null!=a.b&&(n>=a.a&&n<a.b):a=_n(a=tr(a,o),n,r)),a||Ki(t,t.a.get(o))}e.C&&jo(e)}),(function(t){return e.dispatchEvent(t)}))}(e,t.startTime),e.za=function(e){var t=new _i(e.Xb);!function(e,t,n,r){e.a=t,e.b=n,e.c=r}(t,(function(t){Qo(e,Oa,t)}),(function(t){Qo(e,Ca,t)}),(function(t,n){n||(Qo(e,Oa,t),Qo(e,Ca,t))}));var n=new bi(e.a);return n.a.add(t),n}(e),c=Math.max(e.m.minBufferTime,e.i.streaming.rebufferingGoal),Do(e,c),br(e.m,e.i.preferredAudioChannelCount),e.c=function(e){return new qi(e.m,{cc:function(){return e.v.g()},getBandwidthEstimate:function(){return e.j.getBandwidthEstimate()},L:e.G,lb:e.N,onError:function(t){return Yo(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Ge:function(){e.l&&e.l.update&&e.l.update()},Vc:function(){e.v&&e.v.v(),jo(e)}})}(e),e.c.configure(e.i.streaming),e.g=ja,e.dispatchEvent(Lo(Sa)),l=zo(e)?e.j.chooseVariant():null,Oo(e.f.a,l,!0),Vi(e.c,l,!1,0),(h=Cr(e.m.textStreams,e.ca,e.Ub)[0]||null)&&Co(e.f.a,h,!0),h?(l.audio&&function(e,t,n){return e=pr(e.i.preferredTextLanguage),t=pr(t.language),hr(n=pr(n.language),e)&&!hr(t,n)}(e,l.audio,h)&&(e.T=!0),e.T&&e.G.h.setTextVisibility(!0),Xo(e)):e.T=!1,h&&(e.i.streaming.alwaysStreamText||e.Lc())&&$i(e.c,h),!e.i.streaming.startAtSegmentBoundary){p.u(3);break}return f=e.v.g(),w(p,function(e,t){var n,r,i,o,a;return A((function(s){return 1==s.a?(n=e.audio,r=e.video,i=function(e,t){var n,r;return A((function(i){return 1==i.a?e?w(i,e.createSegmentIndex(),2):i.return(null):(n=e.segmentIndex[Symbol.iterator]().seek(t))?(r=n.startTime,i.return(r)):i.return(null)}))},w(s,i(n,t),2)):3!=s.a?(o=s.b,w(s,i(r,t),3)):null!=(a=s.b)&&null!=o?s.return(Math.max(a,o)):null!=a?s.return(a):null!=o?s.return(o):s.return(t)}))}(l,f),4);case 4:d=p.b,e.v.l(d);case 3:return w(p,e.c.start(),5);case 5:e.i.abr.enabled&&(e.j.enable(),Jo(e)),e.fb(e.m),Wo(e),$o(e),zo(e),e.m.variants.some((function(e){return e.primary})),e.b.ha(r,"loadedmetadata",(function(){e.f.f=Date.now()/1e3-n.hd})),E(p)}}))}(r,e,t))})),i.set(this.Fc,(function(e){return Pe(e=function(e,t){var n,r,i,o;return A((function(a){return 1==a.a?(n=wt,r=Date.now()/1e3,i=!0,e.h=Mo(e,{lb:e.N,onError:function(t){Yo(e,t)},hc:function(t){ea(e,t)},onExpirationUpdated:function(t,n){ta(e,t,n)},onEvent:function(t){e.dispatchEvent(t),t.type==da&&i&&(i=!1,e.f.c=Date.now()/1e3-r)}}),e.h.configure(e.i.drm),o={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"video/mp4",codecs:"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:n.Ba,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0},w(a,Jt(e.h,[o],[]),2)):w(a,e.h.yb(t.A),0)}))}(r,e))})),i.set(this.Aa,(function(e,t){return function(e,t,n){function r(){return qo(e)}t.uri=n.uri,t.startTime=n.startTime,e.wb=t.uri,e.v=new pi(t.A),null!=t.startTime&&e.v.l(t.startTime),e.w=new Xr({dc:function(){return t.A.playbackRate},fd:function(e){t.A.playbackRate=e},Dd:function(e){t.A.currentTime+=e}}),Do(e,e.i.streaming.rebufferingGoal),e.b.o(t.A,"playing",r),e.b.o(t.A,"pause",r),e.b.o(t.A,"ended",r),e.b.o(t.A,"ratechange",(function(){return Ho(e)})),"none"!=e.a.preload&&e.b.ha(e.a,"loadedmetadata",(function(){e.f.f=Date.now()/1e3-n.hd})),e.a.audioTracks&&(e.b.o(e.a.audioTracks,"addtrack",(function(){return Wo(e)})),e.b.o(e.a.audioTracks,"removetrack",(function(){return Wo(e)})),e.b.o(e.a.audioTracks,"change",(function(){return Wo(e)}))),e.a.textTracks&&(e.b.o(e.a.textTracks,"addtrack",(function(t){Wo(e),function(e,t){var n=t.track;"metadata"==n.kind&&(n.mode="hidden",e.b.o(n,"cuechange",(function(){if(n.activeCues)for(var t=u(n.activeCues),r=t.next();!r.done;r=t.next())r=r.value,e.dispatchEvent(Lo(wa,{startTime:r.startTime,endTime:r.endTime,type:r.type,payload:r.value})),e.H&&e.H.onCueMetadataChange(r.value)})),new me((function(){for(var t=Bo(e),n=(t=u(t)).next();!n.done;n=t.next())n.value.mode="hidden"})).Ob().R(.5))}(e,t)})),e.b.o(e.a.textTracks,"removetrack",(function(){return Wo(e)})),e.b.o(e.a.textTracks,"change",(function(){return Wo(e)}))),t.A.src=t.uri,e.g=Na,e.dispatchEvent(Lo(Sa));var i=new _e;oi(e.a,HTMLMediaElement.HAVE_METADATA,e.b,(function(){i.resolve()}));var o=!1;return e.zc.push((function(){o=!0})),oi(e.a,HTMLMediaElement.HAVE_CURRENT_DATA,e.b,(function(){return A((function(t){return 1==t.a?o?t.return():(function(e){var t=e.i.preferredAudioLanguage;if(""!=t){e.bd(t);var n=e.i.preferredVariantRole;""!=n&&e.bd(t,n)}}(e),Bo(e).find((function(e){return"disabled"!=e.mode}))?t.u(2):w(t,new Promise((function(t){e.b.ha(e.a.textTracks,"change",t),new me(t).R(1)})),2)):o?t.return():(function(e){var t=e.i.preferredTextLanguage;if(""!=t){e.cd(t);var n=e.i.preferredTextRole;""!=n&&e.cd(t,n)}}(e),void E(t))}))})),e.a.error?i.reject(Zo(e)):"none"==e.a.preload&&(W('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),i.resolve()),e.b.ha(e.a,"error",(function(){i.reject(Zo(e))})),new ke(i,(function(){return i.reject(new ye(be,we,7001)),Promise.resolve()}))}(r,e,t)})),this.W=new io(this.da,{pe:function(e,t,n,i){var o=null;return e==r.da&&(o=n==r.da?r.da:r.Ca),e==r.Ca&&(o=n==r.da||t.A!=i.A?r.da:n==r.Ca?r.Ca:n==r.pa||n==r.I?r.pa:n==r.Aa?r.Fc:null),e==r.pa&&(o=n==r.I&&t.A==i.A?r.pc:r.M),e==r.pc&&(o=sa(r.I,r.Dc,r.M,n,t,i)),e==r.Dc&&(o=sa(r.I,r.Ac,r.M,n,t,i)),e==r.Ac&&(o=sa(r.I,r.I,r.M,n,t,i)),e==r.Fc&&(o=n==r.Aa&&t.A==i.A?r.Aa:r.M),e!=r.I&&e!=r.Aa||(o=r.M),e==r.M&&(o=i.A&&t.A==i.A?r.Ca:r.da),o},ee:function(e,t,n){return r.dispatchEvent(Lo(Ea,{state:e.name})),i.get(e)(t,n)},handleError:function(e){return A((function(t){return 1==t.a?w(t,Ao(r,e),2):t.return(e.A?r.Ca:r.da)}))},Fe:function(e){r.dispatchEvent(Lo(_a,{state:e.name}))}}),t&&this.yb(t,!0)}function Lo(e,t){return new je(e,t)}function Ao(e,t){var n,r,i,o,a,s,c,l,h;return A((function(f){switch(f.a){case 1:return e.g!=Ma&&(e.g=Da),n=e.zc.map((function(e){return e()})),e.zc=[],w(f,Promise.all(n),2);case 2:if(e.dispatchEvent(Lo(Ra)),t.mimeType=null,t.startTime=null,t.uri=null,t.A&&(e.b.oa(t.A,"loadedmetadata"),e.b.oa(t.A,"playing"),e.b.oa(t.A,"pause"),e.b.oa(t.A,"ended"),e.b.oa(t.A,"ratechange")),e.za&&(e.za.release(),e.za=null),e.Tb&&(e.Tb.stop(),e.Tb=null),!e.l){f.u(3);break}return w(f,e.l.stop(),4);case 4:e.l=null,e.Wb=null;case 3:if(!e.j){f.u(5);break}return w(f,e.j.stop(),5);case 5:if(!e.c){f.u(7);break}return w(f,e.c.destroy(),8);case 8:e.c=null;case 7:if(e.w&&(e.w.release(),e.w=null),e.v&&(e.v.release(),e.v=null),!e.G){f.u(9);break}return w(f,e.G.destroy(),10);case 10:e.G=null;case 9:if(e.H&&e.H.onAssetUnload(),!t.A||!t.A.src){f.u(11);break}return w(f,new Promise((function(e){return new me(e).R(.1)})),12);case 12:t.A.removeAttribute("src"),t.A.load();case 11:if(!e.h){f.u(13);break}return w(f,e.h.destroy(),14);case 14:e.h=null;case 13:if(e.wb=null,e.C=null,e.m){for(r=u(e.m.variants),i=r.next();!i.done;i=r.next())for(o=i.value,a=u([o.audio,o.video]),s=a.next();!s.done;s=a.next())(c=s.value)&&c.segmentIndex&&c.segmentIndex.release();for(l=u(e.m.textStreams),s=l.next();!s.done;s=l.next())(h=s.value).segmentIndex&&h.segmentIndex.release()}e.m=null,e.f=new Io,e.Bc=null,Uo(e),E(f)}}))}function Mo(e,t){return new Xt(t,e.i.drm.updateExpirationTime)}function Do(e,t){e.C=new Ur,e.C.a=qr,Hr(e.C,t,Math.min(.5,t/2)),Uo(e),e.Tb=new me((function(){jo(e)})).xa(.25)}function jo(e){switch(e.g){case Na:if(e.a.ended)var t=!0;else{var n=En(e.a.buffered);t=null!=n&&n>=e.a.duration-1}break;case ja:e:if(e.a.ended||Qn(e.G))t=!0;else{if(e.m.presentationTimeline.S()){n=e.m.presentationTimeline.Ka();var r=En(e.a.buffered);if(null!=r&&r>=n){t=!0;break e}}t=!1}break;default:t=!1}r=kn(e.a.buffered,e.a.currentTime);var i=t,o=(n=e.C).b.get(n.a);t=n.a,r=i||r>=o?zr:qr,n.a=r,t!=r&&Uo(e)}function No(e){if(e.l){var t=Fe(e.i.manifest);e.a&&"AUDIO"===e.a.nodeName&&(t.disableVideo=!0),e.l.configure(t)}if(e.h&&e.h.configure(e.i.drm),e.c){e.c.configure(e.i.streaming);try{e.fb(e.m)}catch(t){Yo(e,t)}e.j&&zo(e),!(t=e.c.b)||t.allowedByApplication&&t.allowedByKeySystem||Vo(e)}if(e.G&&(t=e.i.textDisplayFactory,e.Bc!=t)){var n=gt(t),r=e.G,i=r.h;r.h=n,i&&(n.setTextVisibility(i.isTextVisible()),i.destroy()),r.c&&(r.c.c=n),e.Bc=t,e.c&&((n=(t=e.c).a.get("text"))&&Wi(t,n.stream,!0,0,!0))}e.j&&(e.j.configure(e.i.abr),e.i.abr.enabled?e.j.enable():e.j.disable(),Jo(e)),e.C&&(t=e.i.streaming.rebufferingGoal,e.m&&(t=Math.max(t,e.m.minBufferTime)),Hr(e.C,t,Math.min(.5,t/2)))}function Bo(e){return Array.from(e.a.textTracks).filter((function(e){return"metadata"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function Fo(e){var t=_o();return t.streaming.failureCallback=function(t){e.S()&&[1001,1002,1003].includes(t.code)&&(t.severity=1,e.$c())},t.textDisplayFactory=function(){return e.Yb?new ho(e.a,e.Yb):new so(e.a)},t}function Uo(e){var t=e.Kc();if(e.f&&e.C&&e.v){var n=e.w;n.f=t,Jr(n),qo(e)}e.dispatchEvent(Lo(fa,{buffering:t}))}function Ho(e){var t=e.a.playbackRate;0!=t&&(e.w&&e.w.set(t),t=Lo(ka),e.dispatchEvent(t))}function qo(e){if(e.f&&e.C){var t=e.f.b;e.C.a==qr?xo(t,"buffering"):e.a.paused?xo(t,"paused"):e.a.ended?xo(t,"ended"):xo(t,"playing")}}function zo(e){try{na(e,e.m)}catch(t){return Yo(e,t),!1}var t=e.m.variants.filter((function(e){return Pr(e)}));return t=e.xb.create(t),e.j.setVariants(Array.from(t.values())),!0}function Vo(e){var t;if(t=zo(e)?e.j.chooseVariant():null){if(t==e.c.b)return;Oo(e.f.a,t,!0),Vi(e.c,t,!0,0),Ko(e)}$o(e)}function $o(e){ra(e,Lo(ha))}function Wo(e){ra(e,Lo(Ia))}function Ko(e){ra(e,Lo(La))}function Go(e){ra(e,Lo(xa))}function Xo(e){ra(e,Lo(Ta))}function Jo(e){ra(e,Lo(la,{If:e.i.abr.enabled}))}function Yo(e,t){if(e.g!=Ma){var n=Lo(ma,{detail:t});e.dispatchEvent(n),n.defaultPrevented&&(t.handled=!0)}}function Qo(e,t,n){e.dispatchEvent(Lo(t,{detail:{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}}))}function Zo(e){if(!e.a.error)return null;var t=e.a.error.code;if(1==t)return null;var n=e.a.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new ye(be,3,3016,t,n,e.a.error.message)}function ea(e,t){if(e.c){var n=Object.keys(t),r=1==n.length&&"00"==n[0],i=!1;if(n.length)for(var o=(n=u(e.m.variants)).next();!o.done;o=n.next()){var a=[];(o=o.value).audio&&a.push(o.audio),o.video&&a.push(o.video);for(var s=(a=u(a)).next();!s.done;s=a.next()){var c=s.value;if(s=o.allowedByKeySystem,c.keyIds.size){o.allowedByKeySystem=!0;for(var l=(c=u(c.keyIds)).next();!l.done;l=c.next())l=l.value,l=t[r?"00":l],o.allowedByKeySystem=o.allowedByKeySystem&&!!l&&!Fa.includes(l)}s!=o.allowedByKeySystem&&(i=!0)}}i&&zo(e),(r=e.c.b)&&!r.allowedByKeySystem&&Vo(e),i&&Wo(e)}}function ta(e,t,n){e.l&&e.l.onExpirationUpdated&&e.l.onExpirationUpdated(t,n),t=Lo(va),e.dispatchEvent(t)}function na(e,t){var n=e.h?_t(e.h.T):{},r=Object.keys(n);r=r.length&&"00"==r[0];for(var i=!1,o=!1,a=new Set,s=new Set,c=u(t.variants),l=c.next();!l.done;l=c.next()){var h=[];(l=l.value).audio&&h.push(l.audio),l.video&&h.push(l.video);for(var f=(h=u(h)).next();!f.done;f=h.next())if((f=f.value).keyIds.size)for(var d=(f=u(f.keyIds)).next();!d.done;d=f.next()){d=d.value;var p=n[r?"00":d];p?Fa.includes(p)&&s.add(p):a.add(d)}l.allowedByApplication?l.allowedByKeySystem&&(i=!0):o=!0}if(!i)throw n={hasAppRestrictions:o,missingKeys:Array.from(a),restrictedKeyStatuses:Array.from(s)},new ye(be,4,4012,n)}function ra(e,t){A((function(n){if(1==n.a)return w(n,Promise.resolve(),2);e.g!=Ma&&e.dispatchEvent(t),E(n)}))}function ia(e){for(var t=new Set,n=(e=u(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(pr(n.language)):t.add("und");return t}function oa(e){for(var t=new Map,n=(e=u(e)).next();!n.done;n=e.next()){var r=n.value;n="und";var i=[];for(r.language&&(n=pr(r.language)),(i="variant"==r.type?r.audioRoles:r.roles)&&i.length||(i=[""]),t.has(n)||t.set(n,new Set),i=(r=u(i)).next();!i.done;i=r.next())i=i.value,t.get(n).add(i)}var o=[];return t.forEach((function(e,t){for(var n=u(e),r=n.next();!r.done;r=n.next())o.push({language:t,role:r.value})})),o}function aa(){return new ye(be,we,7e3)}function sa(e,t,n,r,i,o){return r==e&&i.A==o.A&&i.uri==o.uri&&i.mimeType==o.mimeType?t:n}function ca(){return{A:null,mimeType:null,startTime:null,hd:NaN,uri:null}}function ua(e){return new Promise((function(t,n){e.Ta=function(){return n(aa())},e.fc=function(){return t()},e.onError=function(e){return n(e)},e.ic=function(){return n(aa())}}))}qi.prototype.destroy=function(){return this.D.destroy()},qi.prototype.configure=function(e){this.i=e,this.j=new ve({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0},!0)},qi.prototype.start=function(){var e=this;return A((function(t){if(1==t.a)return w(t,function(e){var t,n,r,i,o,a,s,c,l,h;return A((function(f){if(1==f.a){if(t=wt,!e.b)throw new ye(be,5,5006);return n=new Map,r=new Set,e.b.audio&&(n.set(t.cb,e.b.audio),r.add(e.b.audio)),e.b.video&&(n.set(t.Ba,e.b.video),r.add(e.b.video)),e.c&&(n.set(t.$,e.c),r.add(e.c)),i=e.s.L,o=e.i.forceTransmuxTS,w(f,i.init(n,o),2)}tt(e.D);var d=e.m.presentationTimeline.getDuration();for(1/0>d?e.s.L.wa(d):e.s.L.wa(Math.pow(2,32)),a=u(n.keys()),s=a.next();!s.done;s=a.next())c=s.value,l=n.get(c),e.a.has(c)||(h=Gi(l),e.a.set(c,h),eo(e,h,0));E(f)}))}(e),2);tt(e.D),e.h=!0,E(t)}))},qi.prototype.Ib=function(e){var t,n,r,i,o=this;return A((function(a){switch(a.a){case 1:if(tt(o.D),e.Ua||null==e.Ha||e.zb)return a.return();if(e.Ha=null,!e.rb){a.u(2);break}return w(a,Zi(o,e,e.oc,e.$b),3);case 3:return a.return();case 2:if(e.stream.segmentIndex){a.u(4);break}return t=e.stream,w(a,e.stream.createSegmentIndex(),5);case 5:if(t!=e.stream)return null==e.Ha&&eo(o,e,0),a.return();Yi(e)||(e.va=e.stream.segmentIndex[Symbol.iterator]());case 4:try{null!=(n=function(e,t){if(Yi(t))return rr(e.s.L,t.stream.originalId||""),null;var n=e.s.cc(),r=t.Hb&&t.La?t.La.endTime:n,i=function(e,t,n){return"text"==t?null==(e=e.c).b||e.b<n?0:e.b-Math.max(n,e.a):kn(e=tr(e,t),n)}(e.s.L,t.type,n),o=Math.max(e.m.minBufferTime||0,e.i.rebufferingGoal,e.i.bufferingGoal)*e.f;if(r>=e.m.presentationTimeline.getDuration())return t.endOfStream=!0,"video"==t.type&&(n=e.a.get("text"))&&Yi(n)&&(n.endOfStream=!0),null;if(t.endOfStream=!1,i>=o)return.5;if(i=er(e.s.L,t.type),!(i=Xi(e,t,n,i))||!Ji(e,i))return 1;o=1/0;for(var a=Array.from(e.a.values()),s=(a=u(a)).next();!s.done;s=a.next())Yi(s=s.value)||(o=Math.min(o,s.Hb&&s.La?s.La.endTime:n));return r>=o+e.m.presentationTimeline.a?1:(function(e,t,n,r){var i,o,a,s,c,u;return A((function(l){switch(l.a){case 1:return i=wt,o=t.stream,t.Ua=!0,a=function(e,t,n){var r,i,o,a,s,c,u;return A((function(l){return r=[],i=Math.max(0,n.appendWindowStart-.1),o=n.appendWindowEnd+.01,(a=n.timestampOffset)==t.Pc&&i==t.Nc&&o==t.Mc||(s=function(){var n;return A((function(r){if(1==r.a)return _(r,2),t.Nc=i,t.Mc=o,t.Pc=a,w(r,function(e,t,n,r,i){return A((function(o){return t==wt.$?(e.c.v=n,function(e,t,n){e.f=t,e.g=n}(e.c,r,i),o.return()):w(o,Promise.all([ar(e,t,(function(){var n=e.f[t].appendWindowStart,r=e.f[t].appendWindowEnd;e.f[t].abort(),e.f[t].appendWindowStart=n,e.f[t].appendWindowEnd=r,or(e,t)})),ar(e,t,(function(){var r=n;0>r&&(r+=.001),e.f[t].timestampOffset=r,or(e,t)})),ar(e,t,(function(){e.f[t].appendWindowStart=0,e.f[t].appendWindowEnd=i,e.f[t].appendWindowStart=r,or(e,t)}))]),0)}))}(e.s.L,t.type,a,i,o),4);if(2!=r.a)return S(r,0);throw n=x(r),t.Nc=null,t.Mc=null,t.Pc=null,n}))},r.push(s())),n.f!=t.Oc&&(t.Oc=n.f)&&(c=Qi(e,t,n.f),u=function(){var n,r,i;return A((function(o){switch(o.a){case 1:return _(o,2),w(o,c,4);case 4:return n=o.b,tt(e.D),r=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,w(o,nr(e.s.L,t.type,n,null,null,r),5);case 5:S(o,0);break;case 2:throw i=x(o),t.Oc=null,i}}))},r.push(u())),w(l,Promise.all(r),0)}))}(e,t,r),s=Qi(e,t,r),_(l,2),w(l,Promise.all([a,s]),4);case 4:return c=l.b,tt(e.D),e.g?l.return():w(l,function(e,t,n,r,i,o){var a;return A((function(s){return 1==s.a?(a=r.closedCaptions&&0<r.closedCaptions.size,null!=r.emsgSchemeIdUris&&0<r.emsgSchemeIdUris.length&&(new Ai).ea("emsg",(function(t){var n=r.emsgSchemeIdUris,o=t.reader.Xc(),a=t.reader.Xc(),s=t.reader.J(),c=t.reader.J(),u=t.reader.J(),l=t.reader.J();t=t.reader.Va(t.reader.P.byteLength-t.reader.B);var h=i.startTime+c/s;n.includes(o)&&("urn:mpeg:dash:event:2012"==o?e.s.Ge():(n=new je(pa,{detail:{startTime:h,endTime:h+u/s,schemeIdUri:o,value:a,timescale:s,presentationTimeDelta:c,eventDuration:u,id:l,messageData:t}}),e.s.onEvent(n)))})).parse(o),w(s,function(e,t,n){var r,i,o;return A((function(a){if(1==a.a)return r=Math.max(e.i.bufferBehind,e.m.presentationTimeline.a),null==(i=Zn(e.s.L,t.type))||0>=(o=n-i-r)?a.return():w(a,e.s.L.remove(t.type,i,i+o),2);tt(e.D),E(a)}))}(e,t,n),2)):3!=s.a?(tt(e.D),w(s,nr(e.s.L,t.type,o,i.startTime,i.endTime,a),3)):(tt(e.D),t.Hb=r,t.La=i,t.stream==r&&t.va.next(),void E(s))}))}(e,t,n,o,r,c[1]),5);case 5:if(tt(e.D),e.g)return l.return();t.Ua=!1,t.Zc=!1,e.s.L.bc(),t.rb||e.s.Vc(),eo(e,t,0),S(l,0);break;case 2:if(u=x(l),tt(e.D,u),e.g)return l.return();t.Ua=!1,t.type==i.$&&e.i.ignoreTextStreamFailures?e.a.delete(i.$):7001==u.code?(t.Ua=!1,t.Ha=null,eo(e,t,0)):3017==u.code?function(e,t,n){if(!Array.from(e.a.values()).some((function(e){return e!=t&&e.Zc}))){var r=Math.round(100*e.f);if(20<r)e.f-=.2;else{if(!(4<r))return t.Fb=!0,e.g=!0,void e.s.onError(n);e.f-=.04}t.Zc=!0}eo(e,t,4)}(e,t,u):(t.Fb=!0,u.severity=be,ro(e,u)),E(l)}}))}(e,t,n,i).catch((function(){})),null)}(o,e))&&(eo(o,e,n),e.Fb=!1)}catch(e){return ro(o,e),a.return()}if(r=Array.from(o.a.values()),!o.h||!r.every((function(e){return e.endOfStream}))){a.u(0);break}return w(a,o.s.L.endOfStream(),7);case 7:tt(o.D),0!=(i=o.s.L.getDuration())&&i<o.m.presentationTimeline.getDuration()&&o.m.presentationTimeline.wa(i),E(a)}}))},io.prototype.destroy=function(){return this.D.destroy()},(r=so.prototype).remove=function(e,t){return!!this.a&&(uo(this.a,(function(n){return n.startTime<t&&n.endTime>e})),!0)},r.append=function(e){for(var t=[],n=(e=u(e)).next();!n.done;n=e.next())(n=n.value).nestedCues.length?t=t.concat(n.nestedCues):t.push(n);var r=[];e=this.a.cues?Array.from(this.a.cues):[],n={};for(var i=(t=u(t)).next();!i.done;n={bb:n.bb},i=t.next())n.bb=i.value,e.some(function(e){return function(t){return t.startTime==e.bb.startTime&&t.endTime==e.bb.endTime&&t.text==e.bb.payload}}(n))||(i=co(n.bb))&&r.push(i);for(n=(t=u(t=r.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:r.indexOf(t)-r.indexOf(e)})))).next();!n.done;n=t.next())this.a.addCue(n.value)},r.destroy=function(){return this.a&&(uo(this.a,(function(){return!0})),this.a.mode="disabled"),this.a=null,Promise.resolve()},r.isTextVisible=function(){return"showing"==this.a.mode},r.setTextVisibility=function(e){this.a.mode=e?"showing":"hidden"},F("shaka.text.SimpleTextDisplayer",so),so.prototype.setTextVisibility=so.prototype.setTextVisibility,so.prototype.isTextVisible=so.prototype.isTextVisible,so.prototype.destroy=so.prototype.destroy,so.prototype.append=so.prototype.append,so.prototype.remove=so.prototype.remove,F("shaka.util.Dom",lo),lo.removeAllChildren=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},(r=ho.prototype).append=function(e){for(var t={},n=(e=u(e)).next();!n.done;t={ab:t.ab},n=e.next())t.ab=n.value,this.f.some(function(e){return function(t){return t.payload==e.ab.payload&&t.startTime==e.ab.startTime&&t.endTime==e.ab.endTime}}(t))||this.f.push(t.ab);fo(this)},r.destroy=function(){this.g.removeChild(this.b),this.b=null,this.h=!1,this.f=[],this.j&&this.j.stop(),this.c.clear()},r.remove=function(e,t){return!!this.b&&(this.f=this.f.filter((function(n){return n.startTime<e||n.endTime>=t})),fo(this),!0)},r.isTextVisible=function(){return this.h},r.setTextVisibility=function(e){this.h=e},F("shaka.text.UITextDisplayer",ho),ho.prototype.setTextVisibility=ho.prototype.setTextVisibility,ho.prototype.isTextVisible=ho.prototype.isTextVisible,ho.prototype.remove=ho.prototype.remove,ho.prototype.destroy=ho.prototype.destroy,ho.prototype.append=ho.prototype.append,F("shaka.util.ConfigUtils",yo),yo.convertToConfigObject=wo,yo.mergeConfigObjects=bo,F("shaka.util.PlayerConfiguration",Eo),Eo.mergeConfigObjects=ko,v(Ro,Be),(r=Ro.prototype).destroy=function(){var e,t=this;return A((function(n){switch(n.a){case 1:return t.g==Ma?n.return():(t.g=Ma,e=oo(t.W,(function(){return{node:t.da,payload:ca(),Qa:!1}})),w(n,new Promise((function(t){e.nb=function(){},e.fc=function(){t()},e.Ta=function(){t()},e.onError=function(){t()},e.ic=function(){t()}})),2));case 2:return w(n,t.W.destroy(),3);case 3:if(t.b&&(t.b.release(),t.b=null),t.yc=null,t.j=null,t.i=null,t.f=null,t.Yb=null,!t.N){n.u(0);break}return w(n,t.N.destroy(),5);case 5:t.N=null,E(n)}}))},r.yb=function(e,t){if(t=void 0===t||t,this.g==Ma)return Promise.reject(aa());var n=ca();n.A=e,Tt()||(t=!1);var r=t?this.pa:this.Ca,i=oo(this.W,(function(){return{node:r,payload:n,Qa:!1}}));return i.nb=function(){},ua(i)},r.detach=function(){var e=this;if(this.g==Ma)return Promise.reject(aa());var t=oo(this.W,(function(){return{node:e.da,payload:ca(),Qa:!1}}));return t.nb=function(){},ua(t)},r.ld=function(e){var t=this;if(e=void 0===e||e,this.g==Ma)return Promise.reject(aa());Tt()||(e=!1);var n=ca(),r=oo(this.W,(function(r){var i=r.A&&e?t.pa:r.A?t.Ca:t.da;return n.A=r.A,{node:i,payload:n,Qa:!1}}));return r.nb=function(){},ua(r)},r.load=function(e,t,n){var r=this;if(this.g==Ma)return Promise.reject(aa());this.dispatchEvent(Lo(ya));var i=ca();i.uri=e,i.hd=Date.now()/1e3,n&&(i.mimeType=n),void 0!==t&&(i.startTime=t);var o=function(e,t){if(!Tt())return!0;var n=t.mimeType,r=t.uri||"";return n||(n={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"}[Wr(r)]),!!n&&(""!=(t.A||Rt()).canPlayType(n)&&(!Tt()||!(n in Kr)&&!(Wr(r)in Gr)||Ot()&&e.i.streaming.useNativeHlsOnSafari))}(this,i)?this.Aa:this.I,a=oo(this.W,(function(e){return null==e.A?null:(i.A=e.A,{node:o,payload:i,Qa:!0})}));return this.f=new Io,a.nb=function(){},new Promise((function(e,t){a.ic=function(){return t(new ye(be,we,7002))},a.fc=function(){e(),r.dispatchEvent(Lo(ga))},a.Ta=function(){return t(aa())},a.onError=function(e){return t(e)}}))},r.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=wo(e,t)),e.manifest&&e.manifest.dash&&"defaultPresentationDelay"in e.manifest.dash&&(lt("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),e.manifest.defaultPresentationDelay=e.manifest.dash.defaultPresentationDelay,delete e.manifest.dash.defaultPresentationDelay);var n=ko(this.i,e,Fo(this));return No(this),n},r.getConfiguration=function(){var e=Fo(this);return ko(e,this.i,Fo(this)),e},r.Pe=function(){for(var e in this.i)delete this.i[e];ko(this.i,Fo(this),Fo(this)),No(this)},r.ke=function(){return this.g},r.oe=function(){return this.a},r.Db=function(){return this.N},r.Gc=function(){return this.wb},r.vd=function(){return function(e,t){for(var n=[],r=1;r<arguments.length;++r)n[r-1]=arguments[r];G.has(e)||(G.add(e),W.apply(V,l(n)))}("getAdManager","Shaka Player's ad features are currently in BETA and are NOT yet covered by semantic versioning compatibility guarantees.  The API may change at any time!"),this.H},r.S=function(){return this.m?this.m.presentationTimeline.S():!(!this.a||!this.a.src)&&1/0==this.a.duration},r.Sa=function(){return!!this.m&&this.m.presentationTimeline.Sa()},r.Be=function(){if(this.m){var e=this.m.variants;return!!e.length&&!e[0].video}return!(!this.a||!this.a.src)&&(this.a.videoTracks?0==this.a.videoTracks.length:0==this.a.videoHeight)},r.Ld=function(){if(this.m){var e=this.m.presentationTimeline;return{start:e.ib(),end:e.Da()}}return this.a&&this.a.src&&(e=this.a.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},r.keySystem=function(){return tn(this.drmInfo())},r.drmInfo=function(){return this.h?this.h.c:null},r.Cb=function(){return this.h?this.h.Cb():1/0},r.Kc=function(){return!!this.C&&this.C.a==qr},r.qe=function(){return this.a?this.w?this.w.b:1:0},r.$e=function(e){0==e?W("A trick play rate of 0 is unsupported!"):(this.a.paused&&this.a.play(),this.w.set(e),this.g==ja&&(this.j.playbackRateChanged(e),zi(this.c,1<Math.abs(e))))},r.$d=function(){this.g==Na&&this.w.set(1),this.g==ja&&(this.w.set(1),this.j.playbackRateChanged(1),zi(this.c,!1))},r.Jc=function(){if(this.m){for(var e=this.c?this.c.b:null,t=[],n=u(this.m.variants),r=n.next();!r.done;r=n.next())if(Pr(r=r.value)){var i=_r(r);i.active=r==e,t.push(i)}return t}return this.a&&this.a.audioTracks?Array.from(this.a.audioTracks).map((function(e){return xr(e)})):[]},r.ec=function(){if(this.m){for(var e=this.c?this.c.c:null,t=[],n=u(this.m.textStreams),r=n.next();!r.done;r=n.next()){var i=kr(r=r.value);i.active=r==e,t.push(i)}return t}return this.a&&this.a.src&&this.a.textTracks?Bo(this).map((function(e){var t=Tr(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),t})):[]},r.Md=function(e){if(this.m&&this.c){var t=this.m.textStreams.find((function(t){return t.id==e.id}));t&&t!=this.c.c&&(Co(this.f.a,t,!1),$i(this.c,t),Go(this),this.ca=t.language)}else if(this.a&&this.a.src&&this.a.textTracks){for(var n=(t=u(t=Bo(this))).next();!n.done;n=t.next())Sr(n=n.value)==e.id?n.mode=this.T?"showing":"hidden":n.mode="disabled";Go(this)}},r.Qe=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?0:n,this.m&&this.c){this.i.abr.enabled&&W("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=this.m.variants.find((function(t){return t.id==e.id}));r&&Pr(r)&&r!=this.c.b&&(Oo(this.f.a,r,!1),Vi(this.c,r,t,n),Ko(this),this.xb=new Br(r),zo(this))}else if(this.a&&this.a.audioTracks){for(n=(t=u(t=Array.from(this.a.audioTracks))).next();!n.done;n=t.next())Sr(n=n.value)==e.id&&(n.enabled=!0);Ko(this)}},r.ge=function(){return oa(this.Jc())},r.ye=function(){return oa(this.ec())},r.fe=function(){return Array.from(ia(this.Jc()))},r.xe=function(){return Array.from(ia(this.ec()))},r.bd=function(e,t){if(this.m&&this.v)this.xb=new Fr(e,t||"",0,"","audio"),Vo(this);else if(this.a&&this.a.audioTracks){for(var n=Array.from(this.a.audioTracks),r=pr(e),i=(n=u(n)).next();!i.done;i=n.next()){var o=xr(i=i.value);pr(o.language)!=r||t&&!o.roles.includes(t)||(i.enabled=!0)}Ko(this)}},r.cd=function(e,t){if(this.m&&this.v){this.ca=e,this.Ub=t||"";var n=Cr(this.m.textStreams,this.ca,this.Ub)[0]||null;n&&n!=this.c.c&&(Co(this.f.a,n,!1),this.i.streaming.alwaysStreamText||this.Lc())&&($i(this.c,n),Go(this))}else{var r=pr(e);(n=this.ec().find((function(e){return pr(e.language)==r&&(!t||e.roles.includes(t))})))&&this.Md(n)}},r.Re=function(e){if(this.m&&this.v){for(var t=null,n=u(this.m.variants),r=n.next();!r.done;r=n.next())if((r=r.value).audio.label==e){t=r;break}null!=t&&(this.xb=new Fr(t.language,"",0,e),Vo(this))}},r.Lc=function(){var e=this.T;return this.G?this.G.h.isTextVisible():this.a&&this.a.src&&this.a.textTracks?Bo(this).some((function(e){return"showing"==e.mode})):e},r.Xe=function(e){if(e=!!e,this.T!=e){if(this.T=e,this.g==ja)this.G.h.setTextVisibility(e),this.i.streaming.alwaysStreamText||(e?this.c.c||0<(e=Cr(this.m.textStreams,this.ca,this.Ub)).length&&($i(this.c,e[0]),Go(this)):function(e){var t=e.a.get("text");t&&(to(t),no(t).catch((function(){})),e.a.delete("text"))}(this.c));else if(this.a&&this.a.src&&this.a.textTracks)for(var t=Bo(this),n=(t=u(t)).next();!n.done;n=t.next())"disabled"!=(n=n.value).mode&&(n.mode=e?"showing":"hidden");Xo(this)}},r.se=function(){if(!this.S())return null;var e=this.W.f,t=0;if(this.v)t=this.v.g();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.m?new Date(1e3*(this.m.presentationTimeline.f+t)):this.a&&this.a.getStartDate?(e=this.a.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*t)):null},r.wd=function(){if(!this.S())return null;if(this.m)return new Date(1e3*this.m.presentationTimeline.f);if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?null:e}return null},r.bc=function(){if(this.g==ja)return this.G.bc();var e={total:[],audio:[],video:[],text:[]};return this.g==Na&&(e.total=Sn(this.a.buffered)),e},r.getStats=function(){if(this.g!=ja&&this.g!=Na)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};qo(this);var e=this.a;if(e.getVideoPlaybackQuality){e=e.getVideoPlaybackQuality();var t=this.f,n=Number(e.totalVideoFrames);t.I=Number(e.droppedVideoFrames),t.H=n,this.f.G=Number(e.corruptedVideoFrames)}this.h?e=(e=this.h).G?e.G:NaN:e=NaN,this.f.C=e,this.g==ja&&((e=this.c.b)&&(this.f.h=(this.w?this.w.b:1)*e.bandwidth),e&&e.video&&(t=this.f,n=e.video.height||NaN,t.M=e.video.width||NaN,t.j=n),this.S()&&(e=this.wd().valueOf()+1e3*this.Ld().end,this.f.l=(Date.now()-e)/1e3),this.m&&this.m.presentationTimeline&&(this.f.w=this.m.presentationTimeline.a),e=this.j.getBandwidthEstimate(),this.f.g=e);var r=this.f;e=r.M,t=r.j,n=r.h;for(var i=r.H,o=r.I,a=r.G,s=r.g,c=r.f,l=r.v,h=r.c,f=To(r.b,"playing"),d=To(r.b,"paused"),p=To(r.b,"buffering"),m=r.C,v=r.l,g=r.w,y=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],r=u(e.b),i=r.next();!i.done;i=r.next())n.push(t(i.value));return e.a&&n.push(t(e.a)),n}(r.b),b=[],w=(r=u(r.a.a)).next();!w.done;w=r.next())w=w.value,b.push({timestamp:w.timestamp,id:w.id,type:w.type,fromAdaptation:w.fromAdaptation,bandwidth:w.bandwidth});return{width:e,height:t,streamBandwidth:n,decodedFrames:i,droppedFrames:o,corruptedFrames:a,estimatedBandwidth:s,loadLatency:c,manifestTimeSeconds:l,drmTimeSeconds:h,playTime:f,pauseTime:d,bufferingTime:p,licenseTime:m,liveLatency:v,maxSegmentDuration:g,stateHistory:y,switchHistory:b}},r.addTextTrack=function(e,t,n,r,i,o){if(this.g==Na)throw Error("State error!");if(this.g!=ja)throw Error("State error!");var a=this.m.presentationTimeline.getDuration();if(1/0==a)throw new ye(1,4,4033);return e={id:this.od++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Pi(0,a,[e]),mimeType:r,codecs:i||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:o||null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},this.m.textStreams.push(e),Wo(this),kr(e)},r.ed=function(e,t){this.Ec.width=e,this.Ec.height=t},r.$c=function(){if(this.g==ja){var e=this.c;if(e.D.a)e=!1;else if(e.g)e=!1;else{for(var t=u(e.a.values()),n=t.next();!n.done;n=t.next())(n=n.value).Fb&&(n.Fb=!1,eo(e,n,.1));e=!0}}else e=!1;return e},r.le=function(){return W("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.m},r.me=function(){return this.Wb},r.Pd=function(e){this.Yb=e},r.fb=function(e){if(function(e,t,n){n.variants=n.variants.filter((function(n){if(e&&e.M&&!fn(e,n))return!1;var r=n.audio;return n=n.video,!(r&&!Jn(r)||n&&!Jn(n)||r&&t&&t.audio&&!Er(r,t.audio)||n&&t&&t.video&&!Er(n,t.video))})),n.textStreams=n.textStreams.filter((function(e){return Wn(kt(e.mimeType,e.codecs))}))}(this.h,this.c?this.c.b:null,e),!e.variants.some(Pr))throw new ye(be,4,4032);for(var t=this.i.restrictions,n=this.Ec,r=!1,i=u(e.variants),o=i.next();!o.done;o=i.next()){var a=(o=o.value).allowedByApplication;o.allowedByApplication=wr(o,t,n),a!=o.allowedByApplication&&(r=!0)}if(r&&this.c&&Wo(this),t=this.h?this.h.c:null)for(r=(n=u(e.variants)).next();!r.done;r=n.next())for(i=(r=u(((r=r.value).video?r.video.drmInfos:[]).concat(r.audio?r.audio.drmInfos:[]))).next();!i.done;i=r.next())if((i=i.value).keySystem==t.keySystem)for(o=(i=u(i.initData||[])).next();!o.done;o=i.next())o=o.value,en(this.h,o.initDataType,o.initData);na(this,e)},F("shaka.Player",Ro),Ro.prototype.setVideoContainer=Ro.prototype.Pd,Ro.prototype.getManifestParserFactory=Ro.prototype.me,Ro.prototype.getManifest=Ro.prototype.le,Ro.prototype.retryStreaming=Ro.prototype.$c,Ro.prototype.setMaxHardwareResolution=Ro.prototype.ed,Ro.prototype.addTextTrack=Ro.prototype.addTextTrack,Ro.prototype.getStats=Ro.prototype.getStats,Ro.prototype.getBufferedInfo=Ro.prototype.bc,Ro.prototype.getPresentationStartTimeAsDate=Ro.prototype.wd,Ro.prototype.getPlayheadTimeAsDate=Ro.prototype.se,Ro.prototype.setTextTrackVisibility=Ro.prototype.Xe,Ro.prototype.isTextTrackVisible=Ro.prototype.Lc,Ro.prototype.selectVariantsByLabel=Ro.prototype.Re,Ro.prototype.selectTextLanguage=Ro.prototype.cd,Ro.prototype.selectAudioLanguage=Ro.prototype.bd,Ro.prototype.getTextLanguages=Ro.prototype.xe,Ro.prototype.getAudioLanguages=Ro.prototype.fe,Ro.prototype.getTextLanguagesAndRoles=Ro.prototype.ye,Ro.prototype.getAudioLanguagesAndRoles=Ro.prototype.ge,Ro.prototype.selectVariantTrack=Ro.prototype.Qe,Ro.prototype.selectTextTrack=Ro.prototype.Md,Ro.prototype.getTextTracks=Ro.prototype.ec,Ro.prototype.getVariantTracks=Ro.prototype.Jc,Ro.prototype.cancelTrickPlay=Ro.prototype.$d,Ro.prototype.trickPlay=Ro.prototype.$e,Ro.prototype.getPlaybackRate=Ro.prototype.qe,Ro.prototype.isBuffering=Ro.prototype.Kc,Ro.prototype.getExpiration=Ro.prototype.Cb,Ro.prototype.drmInfo=Ro.prototype.drmInfo,Ro.prototype.keySystem=Ro.prototype.keySystem,Ro.prototype.seekRange=Ro.prototype.Ld,Ro.prototype.isAudioOnly=Ro.prototype.Be,Ro.prototype.isInProgress=Ro.prototype.Sa,Ro.prototype.isLive=Ro.prototype.S,Ro.prototype.getAdManager=Ro.prototype.vd,Ro.prototype.getAssetUri=Ro.prototype.Gc,Ro.prototype.getNetworkingEngine=Ro.prototype.Db,Ro.prototype.getMediaElement=Ro.prototype.oe,Ro.prototype.getLoadMode=Ro.prototype.ke,Ro.prototype.resetConfiguration=Ro.prototype.Pe,Ro.prototype.getConfiguration=Ro.prototype.getConfiguration,Ro.prototype.configure=Ro.prototype.configure,Ro.prototype.load=Ro.prototype.load,Ro.prototype.unload=Ro.prototype.ld,Ro.prototype.detach=Ro.prototype.detach,Ro.prototype.attach=Ro.prototype.yb,Ro.probeSupport=function(){var e,t,n,r,i;return A((function(o){if(1==o.a)return w(o,function(){var e,t,n,r,i,o;return A((function(a){return 1==a.a?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),n=[{videoCapabilities:t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:t}],r=new Map,i=function(e){var t,i,o;return A((function(a){switch(a.a){case 1:return _(a,2),w(a,navigator.requestMediaKeySystemAccess(e,n),4);case 4:return t=a.b,o=!!(i=t.getConfiguration().sessionTypes)&&i.includes("persistent-license"),It("Tizen 3")&&(o=!1),r.set(e,{persistentState:o}),w(a,t.createMediaKeys(),5);case 5:S(a,0);break;case 2:x(a),r.set(e,null),E(a)}}))},o=e.map((function(e){return i(e)})),w(a,Promise.all(o),2)):a.return(_t(r))}))}(),2);e=o.b;var a={};if(Tt()){for(var s in Kr)a[s]=!0;for(var c in Gr)a[c]=!0}s={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var l=(c=u(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!l.done;l=c.next())a[l=l.value]=Tt()?!!Kr[l]:Pt(l);for(var h in s)a[h]=Tt()?!!Gr[h]:Pt(s[h]);for(t=a,a={},s=(h=u('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(","))).next();!s.done;s=h.next())a[s=s.value]=Tt()?!!Wn(s)||(MediaSource.isTypeSupported(s)||Tn(s)):Pt(s),a[c=s.split(";")[0]]=a[c]||a[s];for(i in n={manifest:t,media:a,drm:e},r=Ua)n[i]=r[i]();return o.return(n)}))},Ro.isBrowserSupported=function(){if(!(e.Promise&&e.Uint8Array&&Array.prototype.forEach))return!1;var t=Ct();return!(t&&12>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!Tt()||Pt("application/x-mpegurl"))},Ro.setAdManagerFactory=function(e){Ha=e},Ro.registerSupportPlugin=function(e,t){Ua[e]=t},Ro.prototype.destroy=Ro.prototype.destroy;var la="abrstatuschanged",ha="adaptation",fa="buffering",da="drmsessionupdate",pa="emsg",ma="error",va="expirationupdated",ga="loaded",ya="loading",ba="manifestparsed",wa="metadata",Ea="onstatechange",_a="onstateidle",ka="ratechange",Sa="streaming",xa="textchanged",Ta="texttrackvisibility",Pa="timelineregionadded",Oa="timelineregionenter",Ca="timelineregionexit",Ia="trackschanged",Ra="unloading",La="variantchanged",Aa={gf:la,hf:ha,jf:fa,kf:da,mf:pa,Error:ma,nf:va,qf:"largegap",rf:ga,sf:ya,tf:ba,Metadata:wa,uf:Ea,vf:_a,wf:ka,xf:Sa,yf:xa,zf:Ta,Af:Pa,Bf:Oa,Cf:Ca,Df:Ia,Ef:Ra,Ff:La},Ma=0,Da=1,ja=2,Na=3;Ro.LoadMode={DESTROYED:Ma,NOT_LOADED:Da,MEDIA_SOURCE:ja,SRC_EQUALS:Na},Ro.version="v3.0.1";var Ba=["3","0"];dt=new function(e){this.a=e,this.c=ht,this.b=ft}(new ut(Number(Ba[0]),Number(Ba[1])));var Fa=["output-restricted","internal-error"],Ua={},Ha=null;function qa(){this.a=[],this.f=this.b=this.c=0}function za(e,t){var n=this;this.c=e,this.a=t,this.f=!1,this.g=this.a.getVolume(),this.b=new nt,this.b.o(this.a,google.ima.AdEvent.Type.PAUSED,(function(){n.f=!0})),this.b.o(this.a,google.ima.AdEvent.Type.RESUMED,(function(){n.f=!1}))}function Va(e,t,n,r){var i=this;this.j=e,this.a=t,this.l=NaN,this.f=r,this.h=null,this.b=new nt,google.ima.settings.setLocale(n),(e=new google.ima.AdDisplayContainer(this.j,this.a)).initialize(),this.g=new google.ima.AdsLoader(e),this.g.getSettings().setPlayerType("shaka-player"),this.g.getSettings().setPlayerVersion("v3.0.1"),this.c=null,this.b.ha(this.g,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(e){!function(e,t){e.f(new je("ads-loaded",{loadTime:Date.now()/1e3-e.l})),e.c=t.getAdsManager(e.a),e.f(new je("ima-ad-manager-loaded",{imaAdsManager:e.c}));var n=e.c.getCuePoints();if(n.length){for(var r=[],i=(n=u(n)).next();!i.done;i=n.next())r.push(new Ya(i.value));e.f(new je("ad-cue-points-changed",{cuepoints:r}))}e.b.o(e.c,google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){$a(e,t)})),e.b.o(e.c,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(t){Wa(e,t)})),e.b.o(e.c,google.ima.AdEvent.Type.STARTED,(function(t){Wa(e,t)})),e.b.o(e.c,google.ima.AdEvent.Type.FIRST_QUARTILE,(function(){e.f(new je("ad-first-quartile"))})),e.b.o(e.c,google.ima.AdEvent.Type.MIDPOINT,(function(){e.f(new je("ad-midpoint"))})),e.b.o(e.c,google.ima.AdEvent.Type.THIRD_QUARTILE,(function(){e.f(new je("ad-third-quartile"))})),e.b.o(e.c,google.ima.AdEvent.Type.COMPLETE,(function(){e.f(new je("ad-complete"))})),e.b.o(e.c,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(){Ka(e)})),e.b.o(e.c,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(){Ka(e)})),e.b.o(e.c,google.ima.AdEvent.Type.SKIPPED,(function(){e.f(new je("ad-skipped"))})),e.b.o(e.c,google.ima.AdEvent.Type.VOLUME_CHANGED,(function(){e.f(new je("ad-volume-changed"))})),e.b.o(e.c,google.ima.AdEvent.Type.VOLUME_MUTED,(function(){e.f(new je("ad-muted"))})),e.b.o(e.c,google.ima.AdEvent.Type.PAUSED,(function(){e.h.f=!0,e.f(new je("ad-paused"))})),e.b.o(e.c,google.ima.AdEvent.Type.RESUMED,(function(){e.h.f=!1,e.f(new je("ad-resumed"))})),e.b.o(e.c,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(function(){e.f(new je("ad-skip-state-changed"))})),e.b.o(e.c,google.ima.AdEvent.Type.CLICK,(function(){e.f(new je("ad-clicked"))}));try{e.c.init(e.a.offsetWidth,e.a.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.b.o(e.a,"loadeddata",(function(){e.c.resize(e.a.offsetWidth,e.a.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),e.c.start()}catch(t){Ka(e)}}(i,e)})),this.b.o(this.g,google.ima.AdEvent.Type.AD_ERROR,(function(e){$a(i,e)})),this.a.onended=function(){i.g.contentComplete()}}function $a(e,t){t.getError(),Ka(e),e.f(new je("ad-cue-points-changed",{cuepoints:[]}))}function Wa(e,t){var n=t.getAd();e.h=new za(n,e.c),e.f(new je("ad-started",{ad:e.h,sdkAdObject:n})),e.j.setAttribute("ad-active","true"),e.a.pause()}function Ka(e){e.f(new je("ad-stopped")),e.j.removeAttribute("ad-active"),e.a.play()}function Ga(e,t){this.c=e,this.b=null,this.a=t}function Xa(e,t,n,r){var i=this;this.v=e,this.a=t,this.g=null,this.G=NaN,this.f=r,this.C=!1,this.w=this.h=this.j=null,this.l="",this.b=new nt,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.c=new google.ima.dai.api.StreamManager(this.a,this.v,e),this.b.o(this.c,google.ima.dai.api.StreamEvent.Type.LOADED,(function(e){!function(e,t){e.f(new je("ads-loaded",{loadTime:Date.now()/1e3-e.G}));var n=t.getStreamData().url;e.g.resolve(n),e.g=null,e.C||e.b.o(e.a,"seeked",(function(){var t=e.a.currentTime;if(0!=t){e.c.streamTimeForContentTime(t);var n=e.c.previousCuePointForStreamTime(t);n&&!n.played&&(e.j=t,e.a.currentTime=n.start)}}))}(i,e)})),this.b.o(this.c,google.ima.dai.api.StreamEvent.Type.ERROR,(function(){i.l.length?i.g.resolve(i.l):i.g.reject("IMA Stream request returned an error and there was no backup asset uri provided."),i.g=null})),this.b.o(this.c,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,(function(){})),this.b.o(this.c,google.ima.dai.api.StreamEvent.Type.STARTED,(function(e){e=e.getAd(),i.h=new Ga(e,i.a),i.w&&(i.h.b=i.w),i.f(new je("ad-started",{ad:i.h})),i.v.setAttribute("ad-active","true")})),this.b.o(this.c,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,(function(){i.v.removeAttribute("ad-active");var e=i.a.currentTime;i.j&&i.j>e&&(i.a.currentTime=i.j,i.j=null)})),this.b.o(this.c,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,(function(e){i.w=e.getStreamData().adProgressData,i.h&&(i.h.b=i.w)})),this.b.o(this.c,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,(function(){i.f(new je("ad-first-quartile"))})),this.b.o(this.c,google.ima.dai.api.StreamEvent.Type.MIDPOINT,(function(){i.f(new je("ad-midpoint"))})),this.b.o(this.c,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,(function(){i.f(new je("ad-third-quartile"))})),this.b.o(this.c,google.ima.dai.api.StreamEvent.Type.COMPLETE,(function(){i.f(new je("ad-complete")),i.f(new je("ad-stopped")),i.v.removeAttribute("ad-active"),i.h=null})),this.b.o(this.c,google.ima.dai.api.StreamEvent.Type.SKIPPED,(function(){i.f(new je("ad-skipped")),i.f(new je("ad-stopped"))})),this.b.o(this.c,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,(function(e){var t=e.getStreamData();e=[];for(var n=(t=u(t.cuepoints)).next();!n.done;n=t.next())n=n.value,e.push(new Ya(n.start,n.end));i.f(new je("ad-cue-points-changed",{cuepoints:e}))}))}function Ja(){Be.call(this),this.a=this.b=null,this.f=new qa,this.c=navigator.language}function Ya(e,t){this.start=e,this.end=void 0===t?null:t}function Qa(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof je){var n={};for(i in t){var r=t[i];r&&"object"==typeof r?"detail"==i&&(n[i]=r):i in Event||(n[i]=r)}return n}if(t instanceof Error){var i=new Set(["name","message","stack"]);for(n in t)i.add(n);for(n=(r=u(Object.getOwnPropertyNames(t))).next();!n.done;n=r.next())i.add(n.value);for(r={},n=(i=u(i)).next();!n.done;n=i.next())r[n=n.value]=t[n];i={__type__:"Error",contents:r}}else if(t instanceof TimeRanges)for(i={__type__:"TimeRanges",length:t.length,start:[],end:[]},r=(n=u(Sn(t))).next();!r.done;r=n.next()){var o=(r=r.value).end;i.start.push(r.start),i.end.push(o)}else i=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return i}}))}function Za(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){n=t.contents;var r,i=Error(n.message);for(r in n)i[r]=n[r];n=i}else n=t;return n}))}(r=za.prototype).getDuration=function(){return this.c.getDuration()},r.getRemainingTime=function(){return this.a.getRemainingTime()},r.isPaused=function(){return this.f},r.isSkippable=function(){return 0<=this.c.getSkipTimeOffset()},r.getTimeUntilSkippable=function(){var e=this.c.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},r.canSkipNow=function(){return this.a.getAdSkippableState()},r.skip=function(){return this.a.skip()},r.pause=function(){return this.a.pause()},r.play=function(){return this.a.resume()},r.getVolume=function(){return this.a.getVolume()},r.setVolume=function(e){return this.a.setVolume(e)},r.isMuted=function(){return 0==this.a.getVolume()},r.resize=function(e,t){this.a.resize(e,t,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},r.setMuted=function(e){e?(this.g=this.getVolume(),this.setVolume(0)):this.setVolume(this.g)},r.getSequenceLength=function(){var e=this.c.getAdPodInfo();return null==e?1:e.getTotalAds()},r.getPositionInSequence=function(){var e=this.c.getAdPodInfo();return null==e?1:e.getAdPosition()},r.release=function(){this.a=this.c=null},F("shaka.ads.ClientSideAd",za),za.prototype.release=za.prototype.release,za.prototype.getPositionInSequence=za.prototype.getPositionInSequence,za.prototype.getSequenceLength=za.prototype.getSequenceLength,za.prototype.setMuted=za.prototype.setMuted,za.prototype.resize=za.prototype.resize,za.prototype.isMuted=za.prototype.isMuted,za.prototype.setVolume=za.prototype.setVolume,za.prototype.getVolume=za.prototype.getVolume,za.prototype.play=za.prototype.play,za.prototype.pause=za.prototype.pause,za.prototype.skip=za.prototype.skip,za.prototype.canSkipNow=za.prototype.canSkipNow,za.prototype.getTimeUntilSkippable=za.prototype.getTimeUntilSkippable,za.prototype.isSkippable=za.prototype.isSkippable,za.prototype.isPaused=za.prototype.isPaused,za.prototype.getRemainingTime=za.prototype.getRemainingTime,za.prototype.getDuration=za.prototype.getDuration,Va.prototype.stop=function(){this.c.stop()},(r=Ga.prototype).getDuration=function(){return this.b?this.b.duration:-1},r.getRemainingTime=function(){return this.b?this.b.duration-this.b.currentTime:-1},r.isPaused=function(){return this.a.paused},r.isSkippable=function(){return this.c.isSkippable()},r.getTimeUntilSkippable=function(){var e=this.c.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},r.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},r.skip=function(){this.a.currentTime+=this.getRemainingTime()},r.pause=function(){return this.a.pause()},r.play=function(){return this.a.play()},r.getVolume=function(){return this.a.volume},r.setVolume=function(e){this.a.volume=e},r.isMuted=function(){return this.a.muted},r.resize=function(){},r.setMuted=function(e){this.a.muted=e},r.getSequenceLength=function(){var e=this.c.getAdPodInfo();return null==e?1:e.getTotalAds()},r.getPositionInSequence=function(){var e=this.c.getAdPodInfo();return null==e?1:e.getAdPosition()},r.release=function(){this.a=this.b=this.c=null},F("shaka.ads.ServerSideAd",Ga),Ga.prototype.release=Ga.prototype.release,Ga.prototype.getPositionInSequence=Ga.prototype.getPositionInSequence,Ga.prototype.getSequenceLength=Ga.prototype.getSequenceLength,Ga.prototype.setMuted=Ga.prototype.setMuted,Ga.prototype.resize=Ga.prototype.resize,Ga.prototype.isMuted=Ga.prototype.isMuted,Ga.prototype.setVolume=Ga.prototype.setVolume,Ga.prototype.getVolume=Ga.prototype.getVolume,Ga.prototype.play=Ga.prototype.play,Ga.prototype.pause=Ga.prototype.pause,Ga.prototype.skip=Ga.prototype.skip,Ga.prototype.canSkipNow=Ga.prototype.canSkipNow,Ga.prototype.getTimeUntilSkippable=Ga.prototype.getTimeUntilSkippable,Ga.prototype.isSkippable=Ga.prototype.isSkippable,Ga.prototype.isPaused=Ga.prototype.isPaused,Ga.prototype.getRemainingTime=Ga.prototype.getRemainingTime,Ga.prototype.getDuration=Ga.prototype.getDuration,Xa.prototype.stop=function(){this.c.reset(),this.l="",this.j=null},Xa.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.c.onTimedMetadata(t)}},v(Ja,Be),(r=Ja.prototype).setLocale=function(e){this.c=e},r.initClientSide=function(t,n){var r=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new ye(be,10,1e4);this.b=new Va(t,n,this.c,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":r.f.a.push(e.loadTime);break;case"ad-started":r.f.c++;break;case"ad-complete":r.f.b++;break;case"ad-skipped":r.f.f++}r.dispatchEvent(e)}))},r.onAssetUnload=function(){this.b&&this.b.stop(),this.dispatchEvent(new je("ad-stopped")),this.f=new qa},r.requestClientSideAds=function(e){if(!this.b)throw new ye(1,10,10001);var t=this.b;t.l=Date.now()/1e3,t.g.requestAds(e)},r.initServerSide=function(t,n){var r=this;if(!e.google||!google.ima||!google.ima.dai)throw new ye(be,10,10002);this.a=new Xa(t,n,this.c,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":r.f.a.push(e.loadTime);break;case"ad-started":r.f.c++;break;case"ad-complete":r.f.b++;break;case"ad-skipped":r.f.f++}r.dispatchEvent(e)})),this.replaceServerSideAdTagParameters({mpt:"shaka",mpv:"v3.0.1"})},r.requestServerSideStream=function(e,t){if(!this.a)throw new ye(1,10,10003);var n=this.a,r=void 0===t?"":t;return n.g?n=Promise.reject(new ye(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.C=!0),n.g=new _e,n.c.requestStream(e),n.l=r||"",n.G=Date.now()/1e3,n=n.g),n},r.replaceServerSideAdTagParameters=function(e){if(!this.a)throw new ye(1,10,10003);this.a.c.replaceAdTagParameters(e)},r.getStats=function(){var e=this.f;return{loadTimes:e.a,started:e.c,playedCompletely:e.b,skipped:e.f}},r.onDashTimedMetadata=function(e){if(this.a&&"urn:google:dai:2018"==e.schemeIdUri){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.a.c.processMetadata(t,n,e.startTime)}},r.onHlsTimedMetadata=function(e,t){for(var n=u(e),r=n.next();!r.done;r=n.next())r=r.value,this.a&&r.data&&r.cueTime&&this.a.c.processMetadata("ID3",r.data,r.cueTime+t)},r.onCueMetadataChange=function(e){this.a&&this.a.onCueMetadataChange(e)},F("shaka.ads.AdManager",Ja),Ja.prototype.onCueMetadataChange=Ja.prototype.onCueMetadataChange,Ja.prototype.onHlsTimedMetadata=Ja.prototype.onHlsTimedMetadata,Ja.prototype.onDashTimedMetadata=Ja.prototype.onDashTimedMetadata,Ja.prototype.getStats=Ja.prototype.getStats,Ja.prototype.replaceServerSideAdTagParameters=Ja.prototype.replaceServerSideAdTagParameters,Ja.prototype.requestServerSideStream=Ja.prototype.requestServerSideStream,Ja.prototype.initServerSide=Ja.prototype.initServerSide,Ja.prototype.requestClientSideAds=Ja.prototype.requestClientSideAds,Ja.prototype.onAssetUnload=Ja.prototype.onAssetUnload,Ja.prototype.initClientSide=Ja.prototype.initClientSide,Ja.prototype.setLocale=Ja.prototype.setLocale,Ja.ADS_LOADED="ads-loaded",Ja.AD_STARTED="ad-started",Ja.AD_FIRST_QUARTILE="ad-first-quartile",Ja.AD_MIDPOINT="ad-midpoint",Ja.AD_THIRD_QUARTILE="ad-third-quartile",Ja.AD_COMPLETE="ad-complete",Ja.AD_STOPPED="ad-stopped",Ja.AD_SKIPPED="ad-skipped",Ja.AD_VOLUME_CHANGED="ad-volume-changed",Ja.AD_MUTED="ad-muted",Ja.AD_PAUSED="ad-paused",Ja.AD_RESUMED="ad-resumed",Ja.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Ja.CUEPOINTS_CHANGED="ad-cue-points-changed",Ja.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Ja.AD_CLICKED="ad-clicked",Ha=function(){return new Ja};var es="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),ts="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),ns=["loop","playbackRate"],rs=["pause","play"],is={getAssetUri:2,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},os={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},as=[["getConfiguration","configure"]],ss=[["isTextTrackVisible","setTextTrackVisibility"]],cs="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay".split(" "),us=["attach","detach","load","unload"];function ls(e,t,n,r,i,o){var a=this;this.T=e,this.f=new me(t),this.W=n,this.l=!1,this.C=r,this.M=i,this.H=o,this.b=this.h=!1,this.I="",this.j=null,this.v=function(){return ms(a)},this.w=function(e,t){var n=Za(t);switch(n.type){case"event":var r=n.targetName;n=new je((n=n.event).type,n),a.C(r,n);break;case"update":for(var i in r=n.update)for(var o in n=a.a[i]||{},r[i])n[o]=r[i][o];a.l&&(a.W(),a.l=!1);break;case"asyncComplete":if(i=n.id,n=n.error,o=a.c[i],delete a.c[i],o)if(n){for(r in i=new ye(n.severity,n.category,n.code),n)i[r]=n[r];o.reject(i)}else o.resolve()}},this.a={video:{},player:{}},this.G=0,this.c={},this.g=null,Es.add(this)}function hs(e,t,n){ws=n,n.addUpdateListener(e.v),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.w),ms(e),gs(e,{type:"init",initState:t,appData:e.j}),e.g.resolve()}function fs(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.g.reject(new ye(be,8,n,t))}function ds(e,t){var n=e.H();e.g=new _e,e.l=!0,hs(e,n,t)}function ps(e){var t=ws;t.removeUpdateListener(e.v),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.w)}function ms(e){var t=!!ws&&"connected"==ws.status;if(e.b&&!t){for(var n in e.M(),e.a)e.a[n]={};vs(e)}e.b=t,e.I=t?ws.receiver.friendlyName:"",e.f.Ob()}function vs(e){for(var t in e.c){var n=e.c[t];delete e.c[t],n.reject(new ye(1,we,7e3))}}function gs(e,t){var n=Qa(t),r=ws;try{r.sendMessage("urn:x-cast:com.google.shaka.v2",n,(function(){}),K)}catch(t){throw r=new je("error",{detail:n=new ye(be,8,8005,t)}),e.C("player",r),e.gb(),n}}(r=ls.prototype).destroy=function(){return Es.delete(this),vs(this),ws&&ps(this),this.f&&(this.f.stop(),this.f=null),this.M=this.C=null,this.b=this.h=!1,this.w=this.v=this.g=this.c=this.a=this.j=null,Promise.resolve()},r.fa=function(){return this.b},r.Yc=function(){return this.I},r.init=function(){if(e.chrome&&chrome.cast&&chrome.cast.isAvailable&&this.T.length){this.h=!0,this.f.Ob();var t=new chrome.cast.SessionRequest(this.T);t=new chrome.cast.ApiConfig(t,(function(e){for(var t=u(Es),n=t.next();!n.done;n=t.next())ds(n.value,e)}),(function(e){for(var t=u(Es),n=t.next();!n.done;n=t.next())n=n.value,bs="available"==e,n.f.Ob()}),"origin_scoped"),chrome.cast.initialize(t,(function(){}),(function(){})),bs&&this.f.R(ys),(t=ws)&&t.status!=chrome.cast.SessionStatus.STOPPED?ds(this,t):ws=null}},r.dd=function(e){this.j=e,this.b&&gs(this,{type:"appData",appData:this.j})},r.cast=function(e){var t=this;return A((function(n){if(!t.h)throw new ye(1,8,8e3);if(!bs)throw new ye(1,8,8001);if(t.b)throw new ye(1,8,8002);return t.g=new _e,chrome.cast.requestSession((function(n){return hs(t,e,n)}),(function(e){return fs(t,e)})),w(n,t.g,0)}))},r.gb=function(){if(this.b){if(vs(this),ws){ps(this);try{ws.stop((function(){}),(function(){}))}catch(e){}ws=null}ms(this)}},r.get=function(e,t){var n=this;if("video"==e){if(rs.includes(t))return function(r){for(var i=[],o=0;o<arguments.length;++o)i[o]=arguments[o];return n.Id.apply(n,[e,t].concat(l(i)))}}else if("player"==e){if(os[t]&&!this.get("player","isLive")())return function(){};if(cs.includes(t))return function(r){for(var i=[],o=0;o<arguments.length;++o)i[o]=arguments[o];return n.Id.apply(n,[e,t].concat(l(i)))};if(us.includes(t))return function(r){for(var i=[],o=0;o<arguments.length;++o)i[o]=arguments[o];return n.Me.apply(n,[e,t].concat(l(i)))};if(is[t])return function(){return n.a[e][t]}}return this.a[e][t]},r.set=function(e,t,n){this.a[e][t]=n,gs(this,{type:"set",targetName:e,property:t,value:n})},r.Id=function(e,t,n){for(var r=[],i=2;i<arguments.length;++i)r[i-2]=arguments[i];gs(this,{type:"call",targetName:e,methodName:t,args:r})},r.Me=function(e,t,n){for(var r=[],i=2;i<arguments.length;++i)r[i-2]=arguments[i];i=new _e;var o=this.G.toString();this.G++,this.c[o]=i;try{gs(this,{type:"asyncCall",targetName:e,methodName:t,args:r,id:o})}catch(e){i.reject(e)}return i};var ys=.02,bs=!1,ws=null,Es=new Set;function _s(e,t,n){Be.call(this);var r=this;this.f=e,this.c=t,this.b=this.j=this.g=this.l=this.h=null,this.w=n,this.v=new Map,this.a=new ls(n,(function(){return xs(r)}),(function(){return Ts(r)}),(function(e,t){return Cs(r,e,t)}),(function(){return Ps(r)}),(function(){return Ss(r)})),function(e){e.a.init(),e.b=new nt;for(var t=u(es),n=t.next();!n.done;n=t.next())e.b.o(e.f,n.value,(function(t){e.a.fa()||(t=new je(t.type,t),e.g.dispatchEvent(t))}));for(var r in Aa)e.b.o(e.c,Aa[r],(function(t){e.a.fa()||e.j.dispatchEvent(t)}));for(var i in e.h={},t={},e.f)t.sb=i,Object.defineProperty(e.h,t.sb,{configurable:!1,enumerable:!0,get:function(t){return function(){return Os(e,t.sb)}}(t),set:function(t){return function(n){var r=t.sb;e.a.fa()?e.a.set("video",r,n):e.f[r]=n}}(t)}),t={sb:t.sb};e.l={},ks(e,(function(t){Object.defineProperty(e.l,t,{configurable:!1,enumerable:!0,get:function(){return function(e,t){if(e.v.has(t)&&(t=e.v.get(t)),"addEventListener"==t)return function(t,n,r){return e.j.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.j.removeEventListener(t,n,r)};if("getMediaElement"==t)return function(){return e.h};if("getSharedConfiguration"==t)return e.a.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.c.Db()};if("getAdManager"==t)return function(){return e.c.vd()};if("setVideoContainer"==t)return function(t){return e.c.Pd(t)};if(e.a.fa()){if("getManifest"==t||"drmInfo"==t)return function(){return W(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return W(t+"() does not work while casting!"),Promise.resolve()}}return e.a.fa()&&0==Object.keys(e.a.a.video).length&&is[t]||!e.a.fa()?e.c[t].bind(e.c):e.a.get("player",t)}(e,t)}})})),function(e){var t=new Map;ks(e,(function(n,r){if(t.has(r)){var i=t.get(r);n.length<i.length?e.v.set(n,i):e.v.set(i,n)}else t.set(r,n)}))}(e),e.g=new Be,e.g.Vb=e.h,e.j=new Be,e.j.Vb=e.l}(this)}function ks(e,t){function n(e){return"constructor"!=e&&"function"==typeof r[e]&&!i.has(e)}var r=e.c,i=new Set;for(o in r)n(o)&&(i.add(o),t(o,r[o]));for(var o=Object.getPrototypeOf(r),a=Object.getPrototypeOf({});o&&o!=a;){for(var s=u(Object.getOwnPropertyNames(o)),c=s.next();!c.done;c=s.next())n(c=c.value)&&(i.add(c),t(c,r[c]));o=Object.getPrototypeOf(o)}}function Ss(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.c.Gc(),startTime:null};e.f.pause();for(var n=u(ns),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.f[r];for(e.f.ended||(t.startTime=e.f.currentTime),r=(n=u(as)).next();!r.done;r=n.next()){var i=r.value;r=i[1],i=e.c[i[0]](),t.player[r]=i}for(r=(n=u(ss)).next();!r.done;r=n.next())r=(i=r.value)[1],i=e.c[i[0]](),t.playerAfterLoad[r]=i;return t}function xs(e){var t=new je("caststatuschanged");e.dispatchEvent(t)}function Ts(e){var t=new je(e.h.paused?"pause":"play");e.g.dispatchEvent(t)}function Ps(e){for(var t=u(as),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.a.get("player",r[0])(),e.c[n](r)}var i=e.a.get("player","getAssetUri")();n=e.a.get("video","ended"),t=Promise.resolve();var o=e.f.autoplay;r=null,n||(r=e.a.get("video","currentTime")),i&&(e.f.autoplay=!1,t=e.c.load(i,r));var a={};for(r=(n=u(ns)).next();!r.done;r=n.next())r=r.value,a[r]=e.a.get("video",r);t.then((function(){if(e.f){for(var t=u(ns),n=t.next();!n.done;n=t.next())n=n.value,e.f[n]=a[n];for(n=(t=u(ss)).next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.a.get("player",r[0])(),e.c[n](r)}e.f.autoplay=o,i&&e.f.play()}}),(function(t){t=new je(ma,{detail:t}),e.c.dispatchEvent(t)}))}function Os(e,t){if("addEventListener"==t)return function(t,n,r){return e.g.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.g.removeEventListener(t,n,r)};if(e.a.fa()&&0==Object.keys(e.a.a.video).length){var n=e.f[t];if("function"!=typeof n)return n}return e.a.fa()?e.a.get("video",t):("function"==typeof(n=e.f[t])&&(n=n.bind(e.f)),n)}function Cs(e,t,n){e.a.fa()&&("video"==t?e.g.dispatchEvent(n):"player"==t&&e.j.dispatchEvent(n))}function Is(e,t,n,r){Be.call(this);var i=this;this.a=e,this.c=t,this.b=new nt,this.I={video:e,player:t},this.C=n||function(){},this.M=r||function(e){return e},this.f=null,this.G=!1,this.j=!0,this.h=0,this.w=!1,this.v=!0,this.l=this.g=null,this.H=new me((function(){Ms(i)})),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Rs(e)},t.onSenderDisconnected=function(){return Rs(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&Bs(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.g),Bs(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.g)},e.l=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.l.onMessage=function(t){return function(e,t){var n=Za(t.data);switch(n.type){case"PLAY":e.a.play(),Fs(e);break;case"PAUSE":e.a.pause(),Fs(e);break;case"SEEK":var r=n.currentTime,i=n.resumeState;null!=r&&(e.a.currentTime=Number(r)),i&&"PLAYBACK_START"==i?(e.a.play(),Fs(e)):i&&"PLAYBACK_PAUSE"==i&&(e.a.pause(),Fs(e));break;case"STOP":e.c.ld().then((function(){e.c&&Fs(e)}));break;case"GET_STATUS":js(e,Number(n.requestId));break;case"VOLUME":i=n.volume,r=i.level,i=i.muted;var o=e.a.volume,a=e.a.muted;null!=r&&(e.a.volume=Number(r)),null!=i&&(e.a.muted=i),o==e.a.volume&&a==e.a.muted||Fs(e);break;case"LOAD":e.h=0,e.w=!1,e.v=!1,r=n.media,i=n.currentTime,o=e.M(r.contentId),a=n.autoplay||!0,e.C(r.customData),a&&(e.a.autoplay=!0),e.c.load(o,i).then((function(){e.c&&js(e)})).catch((function(t){var r="LOAD_FAILED";t.category==we&&7e3==t.code&&(r="LOAD_CANCELLED"),Bs(e,{requestId:Number(n.requestId),type:r},e.l)}));break;default:Bs(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.l)}}(e,t)},e.g=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.g.onMessage=function(t){return function(e,t){var n=Za(t.data);switch(n.type){case"init":e.h=0,e.w=!1,e.v=!0,function(e,t,n){var r,i,o,a,s,c,u,l,h;A((function(f){switch(f.a){case 1:for(r in t.player)i=t.player[r],e.c[r](i);return e.C(n),o=e.a.autoplay,t.manifest?(e.a.autoplay=!1,_(f,5),w(f,e.c.load(t.manifest,t.startTime),7)):w(f,Promise.resolve(),3);case 7:S(f,3);break;case 5:return a=x(f),s=new je(ma,{detail:a}),e.c.dispatchEvent(s),f.return();case 3:if(!e.c)return f.return();for(c in t.video)u=t.video[c],e.a[c]=u;for(l in t.playerAfterLoad)h=t.playerAfterLoad[l],e.c[l](h);e.a.autoplay=o,t.manifest&&(e.a.play(),Fs(e)),E(f)}}))}(e,n.initState,n.appData),Ms(e);break;case"appData":e.C(n.appData);break;case"set":var r=n.targetName,i=n.property;if(n=n.value,"video"==r){var o=cast.receiver.CastReceiverManager.getInstance();if("volume"==i){o.setSystemVolumeLevel(n);break}if("muted"==i){o.setSystemVolumeMuted(n);break}}e.I[r][i]=n;break;case"call":(r=e.I[n.targetName])[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,i=n.methodName,"player"==r&&"load"==i&&(e.h=0,e.w=!1);var a=n.id,s=t.senderId;o=e.I[r],n=o[i].apply(o,n.args),"player"==r&&"load"==i&&(n=n.then((function(){e.v=!0}))),n.then((function(){return Ns(e,s,a,null)}),(function(t){return Ns(e,s,a,t)}))}}(e,t)},t.start();for(var n=(t=u(es)).next();!n.done;n=t.next())e.b.o(e.a,n.value,(function(t){return As(e,"video",t)}));for(var r in Aa)e.b.o(e.c,Aa[r],(function(t){return As(e,"player",t)}));cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.c.ed(3840,2160):e.c.ed(1920,1080),e.b.o(e.a,"loadeddata",(function(){e.w=!0})),e.b.o(e.c,"loading",(function(){e.j=!1,Ls(e)})),e.b.o(e.a,"playing",(function(){e.j=!1,Ls(e)})),e.b.o(e.a,"pause",(function(){Ls(e)})),e.b.o(e.c,"unloading",(function(){e.j=!0,Ls(e)})),e.b.o(e.a,"ended",(function(){new me((function(){e.a&&e.a.ended&&(e.j=!0,Ls(e))})).R(Hs)}))}(this)}function Rs(e){e.h=0,e.v=!0,e.G=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Ls(e)}function Ls(e){var t;A((function(n){return 1==n.a?w(n,Promise.resolve(),2):e.c?(t=new je("caststatuschanged"),e.dispatchEvent(t),Ds(e)||Fs(e),void E(n)):n.return()}))}function As(e,t,n){e.c&&(Ms(e),Bs(e,{type:"event",targetName:t,event:n},e.g))}function Ms(e){e.H.R(Us);for(var t={video:{},player:{}},n=u(ts),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.a[r];if(e.c.S())for(var i in os)0==e.h%os[i]&&(t.player[i]=e.c[i]());for(var o in is)0==e.h%is[o]&&(t.player[o]=e.c[o]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),e.w&&(e.h+=1),Bs(e,{type:"update",update:t},e.g),Ds(e)}function Ds(e){return!(!e.v||!e.a.duration&&!e.c.S())&&(js(e),e.v=!1,!0)}function js(e,t){var n={contentId:e.c.Gc(),streamType:e.c.S()?"LIVE":"BUFFERED",contentType:""};e.c.S()||(n.duration=e.a.duration),e.f&&(n.metadata=e.f),Fs(e,void 0===t?0:t,n)}function Ns(e,t,n,r){e.c&&Bs(e,{type:"asyncComplete",id:n,error:r},e.g,t)}function Bs(e,t,n,r){e.G&&(e=Qa(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function Fs(e,t,n){n=void 0===n?null:n;var r={mediaSessionId:0,playbackRate:e.a.playbackRate,playerState:e.j?qs:e.c.Kc()?Vs:e.a.paused?$s:zs,currentTime:e.a.currentTime,supportedMediaCommands:63,volume:{level:e.a.volume,muted:e.a.muted}};n&&(r.media=n),Bs(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[r]},e.l)}e.__onGCastApiAvailable=function(e){if(e)for(var t=(e=u(Es)).next();!t.done;t=e.next())t.value.init()},v(_s,Be),(r=_s.prototype).destroy=function(e){return e&&this.a.gb(),this.b&&(this.b.release(),this.b=null),e=[],this.c&&(e.push(this.c.destroy()),this.c=null),this.a&&(e.push(this.a.destroy()),this.a=null),this.l=this.h=this.f=null,Promise.all(e)},r.ze=function(){return this.h},r.re=function(){return this.l},r.Zd=function(){return this.a.h&&bs},r.fa=function(){return this.a.fa()},r.Yc=function(){return this.a.Yc()},r.cast=function(){var e,t=this;return A((function(n){return 1==n.a?(e=Ss(t),w(n,t.a.cast(e),2)):t.c?w(n,t.c.ld(),0):n.return()}))},r.dd=function(e){this.a.dd(e)},r.Ye=function(){!function(e){if(e.b){var t=e.H();chrome.cast.requestSession((function(n){return hs(e,t,n)}),(function(t){return fs(e,t)}))}}(this.a)},r.gb=function(){this.a.gb()},r.ae=function(e){var t=this;return A((function(n){if(1==n.a)return e==t.w?n.return():(t.w=e,t.a.gb(),w(n,t.a.destroy(),2));t.a=null,t.a=new ls(e,(function(){return xs(t)}),(function(){return Ts(t)}),(function(e,n){return Cs(t,e,n)}),(function(){return Ps(t)}),(function(){return Ss(t)})),t.a.init(),E(n)}))},F("shaka.cast.CastProxy",_s),_s.prototype.changeReceiverId=_s.prototype.ae,_s.prototype.forceDisconnect=_s.prototype.gb,_s.prototype.suggestDisconnect=_s.prototype.Ye,_s.prototype.setAppData=_s.prototype.dd,_s.prototype.cast=_s.prototype.cast,_s.prototype.receiverName=_s.prototype.Yc,_s.prototype.isCasting=_s.prototype.fa,_s.prototype.canCast=_s.prototype.Zd,_s.prototype.getPlayer=_s.prototype.re,_s.prototype.getVideo=_s.prototype.ze,_s.prototype.destroy=_s.prototype.destroy,v(Is,Be),(r=Is.prototype).isConnected=function(){return this.G},r.Ce=function(){return this.j},r.Ue=function(e){this.f=e},r.de=function(){this.f=null},r.Ve=function(e){this.f||(this.f={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.f.title=e},r.Te=function(e){this.f||(this.f={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.f.images=[{url:e}]},r.Se=function(e){this.f||(this.f={}),this.f.artist=e,this.f.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},r.destroy=function(){var e,t=this;return A((function(n){if(1==n.a)return t.b&&(t.b.release(),t.b=null),e=[],t.c&&(e.push(t.c.destroy()),t.c=null),t.H&&(t.H.stop(),t.H=null),t.a=null,t.I=null,t.C=null,t.G=!1,t.j=!0,t.g=null,t.l=null,w(n,Promise.all(e),2);cast.receiver.CastReceiverManager.getInstance().stop(),E(n)}))},F("shaka.cast.CastReceiver",Is),Is.prototype.destroy=Is.prototype.destroy,Is.prototype.setContentArtist=Is.prototype.Se,Is.prototype.setContentImage=Is.prototype.Te,Is.prototype.setContentTitle=Is.prototype.Ve,Is.prototype.clearContentMetadata=Is.prototype.de,Is.prototype.setContentMetadata=Is.prototype.Ue,Is.prototype.isIdle=Is.prototype.Ce,Is.prototype.isConnected=Is.prototype.isConnected;var Us=.5,Hs=5,qs="IDLE",zs="PLAYING",Vs="BUFFERING",$s="PAUSED";function Ws(e){var t=this;this.a=[],this.b=[],this.data=[],(new Ai).K("moov",Mi).ea("pssh",(function(e){if(!(1<e.version)){var n=Ae(e.reader.P,-12,e.size);if(t.data.push(n),t.a.push(Kt(e.reader.Va(16))),0<e.version){n=e.reader.J();for(var r=(n=u(Q(n))).next();!r.done;r=n.next())r=Kt(e.reader.Va(16)),t.b.push(r)}}})).parse(e)}function Ks(e,t){var n=Xs(e,t);return 1!=n.length?null:n[0]}function Gs(e,t,n){return 1!=(e=Js(e,t,n)).length?null:e[0]}function Xs(e,t){return Array.from(e.childNodes).filter((function(e){return e instanceof Element&&e.tagName==t}))}function Js(e,t,n){return Array.from(e.childNodes).filter((function(e){return e instanceof Element&&e.localName==n&&e.namespaceURI==t}))}function Ys(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function Qs(e){return Array.from(e.childNodes).every((function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}))?e.textContent.trim():null}function Zs(e,t,n,r){r=void 0===r?null:r;var i=null;return null!=(e=e.getAttribute(t))&&(i=n(e)),null==i?r:i}function ec(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null}function tc(e){return e&&(e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function nc(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function rc(e){return 0==(e=Number(e))%1?e:null}function ic(e){return 0==(e=Number(e))%1&&0<e?e:null}function oc(e){return 0==(e=Number(e))%1&&0<=e?e:null}function ac(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(e)?null:e}function sc(e,t){var n=new DOMParser,r=null,i=null;try{i=n.parseFromString(e,"text/xml")}catch(e){}return i&&i.documentElement.tagName==t&&(r=i.documentElement),r&&0<r.getElementsByTagName("parsererror").length?null:r}function cc(e,t){try{return sc(Dt(e),t)}catch(e){return null}}function uc(e,t){var n=function(e){for(var t=[],n=(e=u(e)).next();!n.done;n=e.next())(n=lc(n.value))&&t.push(n);return t}(e),r=null,i=[],o=[],a=new Set(n.map((function(e){return e.keyId})));if(a.delete(null),1<a.size)throw new ye(be,4,4010);if(t||(o=n.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.Kd||(r=e.init||r,!1)}))).length&&(0==(i=function(e,t){for(var n=[],r=u(t),i=r.next();!i.done;i=r.next()){i=i.value;var o=hc.get(i.Kd);if(o){var a;if(a=Gs(i.node,"urn:microsoft:playready","pro")){a=$t(a.textContent);var s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),c=a.length,l=s.length+16+c,h=new Uint8Array(l),f=Me(h),d=0;f.setUint32(d,l),d+=4,f.setUint32(d,1886614376),d+=4,f.setUint32(d,0),d+=4,h.set(s,d),d+=s.length,f.setUint32(d,c),d+=4,h.set(a,d),a=[{initData:h,initDataType:"cenc",keyId:i.keyId}]}else a=null;a=bt(o,i.init||e||a),(o=fc.get(o))&&(a.licenseServerUri=o(i)),n.push(a)}}return n}(r,o)).length&&(i=[bt("",r)])),n.length&&(t||!o.length))for(i=[],o=(n=u(hc.values())).next();!o.done;o=n.next())"org.w3.clearkey"!=(o=o.value)&&i.push(bt(o,r));if(a=Array.from(a)[0]||null)for(o=(n=u(i)).next();!o.done;o=n.next())for(var s=(o=u(o.value.initData)).next();!s.done;s=o.next())s.value.keyId=a;return{rd:a,Gf:r,drmInfos:i,ud:!0}}function lc(e){var t=e.getAttribute("schemeIdUri"),n=Ys(e,"urn:mpeg:cenc:2013","default_KID"),r=Js(e,"urn:mpeg:cenc:2013","pssh").map(Qs);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new ye(be,4,4009);var i=[];try{i=r.map((function(e){return{initDataType:"cenc",initData:$t(e),keyId:null}}))}catch(e){throw new ye(be,4,4007)}return{node:e,Kd:t,keyId:n,init:0<i.length?i:null}}var hc=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime"),fc=(new Map).set("com.widevine.alpha",(function(e){return(e=Gs(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",(function(e){return(e=Gs(e.node,"urn:microsoft:playready","pro"))&&(e=function(e){var t=0,n=Me(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var i=n.getUint16(e,!0);if(e+=2,0!=(1&i)||i+e>n.byteLength){n=[];break e}var o=Ae(n,e,i);t.push({type:r,value:o}),e+=i}n=t}return n}(e=$t(e.textContent)).filter((function(e){return 1===e.type}))[0])&&(e=sc(e=jt(e.value,!0),"WRMHEADER"))?function(e){for(var t=(e=u(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())for(var n=(t=u(t.value.childNodes)).next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent;return""}(e):""}));function dc(t,n,r,i,o){var a={RepresentationID:n,Number:r,Bandwidth:i,Time:o};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,n,r,i){if("$$"==t)return"$";var o=a[n];if(null==o)return t;switch("RepresentationID"==n&&r&&(r=void 0),"Time"==n&&(o=Math.round(o)),i){case void 0:case"d":case"i":case"u":t=o.toString();break;case"o":t=o.toString(8);break;case"x":t=o.toString(16);break;case"X":t=o.toString(16).toUpperCase();break;default:t=o.toString()}return r=e.parseInt(r,10)||1,Array(Math.max(0,r-t.length)+1).join("0")+t}))}function pc(e,t){var n=mc(e,t,"timescale"),r=1;n&&(r=ic(n)||1),(n=ic((n=mc(e,t,"duration"))||""))&&(n/=r);var i=mc(e,t,"startNumber"),o=Number(mc(e,t,"presentationTimeOffset"))||0,a=oc(i||"");null!=i&&null!=a||(a=1);var s=vc(e,t,"SegmentTimeline");if(i=null,s){i=r;var c=e.O.duration||1/0,l=Xs(s,"S");s=[];for(var h=-o,f=(l=u(Z(l))).next();!f.done;f=l.next()){var d=(f=f.value).item,p=f.next,m=Zs(d,"t",oc);f=Zs(d,"d",oc);var v=Zs(d,"r",rc);if(null!=m&&(m-=o),!f)break;if(d=null!=m?m:h,0>(m=v||0))if(p){if(null==(p=Zs(p,"t",oc)))break;if(d>=p)break;m=Math.ceil((p-d)/f)-1}else{if(1/0==c)break;if(d/i>=c)break;m=Math.ceil((c*i-d)/f)-1}for(0<s.length&&d!=h&&(s[s.length-1].end=d/i),m=(p=u(Q(m+1))).next();!m.done;m=p.next())h=d+f,s.push({start:d/i,end:h/i,df:d}),d=h}i=s}return{timescale:r,Z:n,qb:a,Ga:o/r||0,md:o,timeline:i}}function mc(e,t,n){return[t(e.F),t(e.aa),t(e.ja)].filter(vt).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function vc(e,t,n){return[t(e.F),t(e.aa),t(e.ja)].filter(vt).map((function(e){return Ks(e,n)})).reduce((function(e,t){return e||t}))}function gc(e,t,n,r,i,o){if(o=void 0===o?0:o,Ys(e,"http://www.w3.org/1999/xlink","href")){var a=function(e,t,n,r,i,o){for(var a=Ys(e,"http://www.w3.org/1999/xlink","href"),s=Ys(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",c=u(Array.from(e.attributes)),l=c.next();!l.done;l=c.next())"http://www.w3.org/1999/xlink"==(l=l.value).namespaceURI&&e.removeAttributeNS(l.namespaceURI,l.localName);if(5<=o)return Se(new ye(be,4,4028));if("onLoad"!=s)return Se(new ye(be,4,4027));var h=yt([r],[a]);return i.request(0,Ge(h,t)).U((function(r){if(!(r=cc(r.data,e.tagName)))return Se(new ye(be,4,4001,a));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;r.childNodes.length;){var s=r.childNodes[0];r.removeChild(s),e.appendChild(s)}for(s=(r=u(Array.from(r.attributes))).next();!s.done;s=r.next())e.setAttributeNode(s.value.cloneNode(!1));return gc(e,t,n,h[0],i,o+1)}))}(e,t,n,r,i,o);return n&&(a=a.U(void 0,(function(){return gc(e,t,n,r,i,o)}))),a}a=[];for(var s=u(Array.from(e.childNodes)),c=s.next();!c.done;c=s.next())(c=c.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==Ys(c,"http://www.w3.org/1999/xlink","href")?e.removeChild(c):"SegmentTimeline"!=c.tagName&&a.push(gc(c,t,n,r,i,o)));return Oe(a).U((function(){return e}))}function yc(e,t,n,r,i,o,a){var s,c=(new Ai).ea("sidx",(function(e){s=function(e,t,n,r,i,o,a){var s=[];a.reader.skip(4);var c=a.reader.J();if(0==c)throw new ye(be,3,3005);if(0==a.version)var l=a.reader.J(),h=a.reader.J();else l=a.reader.pb(),h=a.reader.pb();a.reader.skip(2);var f=a.reader.Kb();for(e=e+a.size+h,f=u(Q(f)),h=f.next();!h.done;h=f.next()){var d=a.reader.J();h=(2147483648&d)>>>31,d&=2147483647;var p=a.reader.J();if(a.reader.skip(4),1==h)throw new ye(be,3,3006);s.push(new Qr(l/c+n,(l+p)/c+n,(function(){return o}),e,e+d-1,t,n,r,i)),l+=p,e+=d}return a.parser.stop(),s}(t,r,i,o,a,n,e)}));if(e&&c.parse(e),s)return s;throw new ye(be,3,3004)}function bc(e){this.b=Me(e),this.a=new Ii(this.b,0)}function wc(e){var t=Ec(e);if(7<t.length)throw new ye(be,3,3002);for(var n=0,r=(t=u(t)).next();!r.done;r=t.next())n=256*n+r.value;t=Ec(e);e:{for(var i=(r=u(_c)).next();!i.done;i=r.next())if(Ie(t,new Uint8Array(i.value))){r=!0;break e}r=!1}if(r)t=e.b.byteLength-e.a.B;else{if(8==t.length&&224&t[1])throw new ye(be,3,3001);r=0;for(var o=(i=u(Z(t))).next();!o.done;o=i.next()){var a=(o=o.value).item;r=0==o.Y?a&(1<<8-t.length)-1:256*r+a}t=r}return t=e.a.B+t<=e.b.byteLength?t:e.b.byteLength-e.a.B,r=Me(e.b,e.a.B,t),e.a.skip(t),new kc(n,r)}function Ec(e){var t=e.a.B,n=e.a.na();if(0==n)throw new ye(be,3,3002);return n=8-Math.floor(Math.log2(n)),e.a.skip(n-1),Ae(e.b,t,n)}bc.prototype.sa=function(){return this.a.sa()};var _c=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function kc(e,t){this.id=e,this.a=t}function Sc(e){if(8<e.a.byteLength)throw new ye(be,3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new ye(be,3,3001);for(var t=0,n=u(Q(e.a.byteLength)),r=n.next();!r.done;r=n.next())t=256*t+(r=e.a.getUint8(r.value));return t}function xc(e){var t=new bc(e.a);if(179!=(e=wc(t)).id)throw new ye(be,3,3013);if(e=Sc(e),183!=(t=wc(t)).id)throw new ye(be,3,3012);t=new bc(t.a);for(var n=0;t.sa();){var r=wc(t);if(241==r.id){n=Sc(r);break}}return{ef:e,Le:n}}function Tc(e,t){var n=vc(e,t,"Initialization");if(!n)return null;var r=e.F.ma,i=n.getAttribute("sourceURL");i&&(r=yt(e.F.ma,[i])),i=0;var o=null;return(n=Zs(n,"range",nc))&&(i=n.start,o=n.end),new Yr((function(){return r}),i,o)}function Pc(e,t){var n=Number(mc(e,Cc,"presentationTimeOffset"))||0,r=mc(e,Cc,"timescale"),i=1;r&&(i=ic(r)||1);var o=n/i||0,a=Tc(e,Cc);!function(e,t){if(Rc(e,t),!Ic(e))throw new ye(be,4,4002)}(e,a);var s=Ue(e);return{hb:function(){var e=vc(s,Cc,"RepresentationIndex"),n=s.F.ma;return e&&(e=e.getAttribute("sourceURL"))&&(n=yt(s.F.ma,[e])),e=Ic(s),Oc(s,t,a,n,e.start,e.end,o)}}}function Oc(e,t,n,r,i,o,a){var s,c,u,l,h,f,d,p,m,v,g,y,b,E,_;return A((function(k){var S;if(1==k.a)return s=e.presentationTimeline,c=!e.eb||!e.O.zd,u=e.O.start,l=e.O.duration,h=e.F.mimeType.split("/")[1],d=null,p=[(f=t)(r,i,o),"webm"==h?f(n.c(),n.b,n.a):null],f=null,w(k,Promise.all(p),2);if(m=k.b,v=m[0],g=m[1]||null,null,b=u-a,E=u,_=l?u+l:1/0,"mp4"==h)var x=yc(v,i,r,n,b,E,_);else{if(440786851!=wc(x=new bc(g)).id)throw new ye(be,3,3008);var T=wc(x);if(408125543!=T.id)throw new ye(be,3,3009);for(x=T.a.byteOffset,T=new bc(T.a),S=null;T.sa();){var P=wc(T);if(357149030==P.id){S=P;break}}if(!S)throw new ye(be,3,3010);for(S=new bc(S.a),P=1e6,T=null;S.sa();){var O=wc(S);if(2807729==O.id)P=Sc(O);else if(17545==O.id)if(4==O.a.byteLength)T=O.a.getFloat32(0);else{if(8!=O.a.byteLength)throw new ye(be,3,3003);T=O.a.getFloat64(0)}}if(null==T)throw new ye(be,3,3011);if(T=(S={Ze:S=P/1e9,duration:T*S}).Ze,S=S.duration,475249515!=(P=wc(new bc(v))).id)throw new ye(be,3,3007);x=function(e,t,n,r,i,o,a,s,c){function u(){return i}var l=[];e=new bc(e.a);for(var h=null,f=null;e.sa();){var d=wc(e);if(187==d.id){var p=xc(d);p&&(d=n*p.ef,p=t+p.Le,null!=h&&l.push(new Qr(h+a,d+a,u,f,p-1,o,a,s,c)),h=d,f=p)}}return null!=h&&l.push(new Qr(h+a,r+a,u,f,null,o,a,s,c)),l}(P,x,T,S,r,n,b,E,_)}return y=x,s.mb(y),d=new Ti(y),c&&d.Ja(E,_),k.return(d)}))}function Cc(e){return e.Lb}function Ic(e){var t=vc(e,Cc,"RepresentationIndex");return e=nc((e=mc(e,Cc,"indexRange"))||""),t&&(e=Zs(t,"range",nc,e)),e}function Rc(e,t){var n=e.F.mimeType.split("/")[1];if("text"!=e.F.contentType&&"mp4"!=n&&"webm"!=n)throw new ye(be,4,4006);if("webm"==n&&!t)throw new ye(be,4,4005)}function Lc(e,t){var n=Tc(e,Ac),r=function(e){var t=function(e){return[e.F.Ma,e.aa.Ma,e.ja.Ma].filter(vt).map((function(e){return Xs(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){return t.getAttribute("indexRange")&&!e.xd&&(e.xd=!0),{Ee:t.getAttribute("media"),start:(t=Zs(t,"mediaRange",nc,{start:0,end:null})).start,end:t.end}}))}(e),n=(e=pc(e,Ac)).qb;0==n&&(n=1);var r=0;return e.Z?r=e.Z*(n-1):e.timeline&&0<e.timeline.length&&(r=e.timeline[0].start),{Z:e.Z,startTime:r,qb:n,Ga:e.Ga,timeline:e.timeline,jb:t}}(e);if(!r.Z&&!r.timeline&&1<r.jb.length)throw new ye(be,4,4002);if(!r.Z&&!e.O.duration&&!r.timeline&&1==r.jb.length)throw new ye(be,4,4002);if(r.timeline&&0==r.timeline.length)throw new ye(be,4,4002);var i=null,o=null;return e.ja.id&&e.F.id&&(o=e.ja.id+","+e.F.id,i=t[o]),n=function(e,t,n,r,i){var o=r.jb.length;r.timeline&&r.timeline.length!=r.jb.length&&(o=Math.min(r.timeline.length,r.jb.length));for(var a=e-r.Ga,s=t?e+t:1/0,c=[],l=r.startTime,h={},f=(o=u(Q(o))).next();!f.done;h={sc:h.sc},f=o.next()){f=f.value;var d=r.jb[f];h.sc=yt(n,[d.Ee]);var p;p=null!=r.Z?l+r.Z:r.timeline?r.timeline[f].end:l+t,c.push(new Qr(e+l,e+p,function(e){return function(){return e.sc}}(h),d.start,d.end,i,a,e,s)),l=p}return c}(e.O.start,e.O.duration,e.F.ma,r,n),i?(i.kb(n),i.Na(e.presentationTimeline.Pa())):(e.presentationTimeline.mb(n),i=new Ti(n),o&&e.eb&&(t[o]=i)),e.eb&&e.O.zd||i.Ja(e.O.start,e.O.duration?e.O.start+e.O.duration:1/0),{hb:function(){return Promise.resolve(i)}}}function Ac(e){return e.Ma}function Mc(e,t,n,r,i){var o=function(e){var t=mc(e,Dc,"initialization");if(!t)return null;var n=e.F.id,r=e.bandwidth||null,i=e.F.ma;return new Yr((function(){var e=dc(t,n,null,r,null);return yt(i,[e])}),0,null)}(e),a=function(e){var t=pc(e,Dc),n=mc(e,Dc,"media");return e=mc(e,Dc,"index"),{Z:t.Z,timescale:t.timescale,qb:t.qb,Ga:t.Ga,md:t.md,timeline:t.timeline,Qc:n,Gb:e}}(e);!function(e){var t=e.Gb?1:0;if(t+=e.timeline?1:0,0==(t+=e.Z?1:0))throw new ye(be,4,4002);if(1!=t&&(e.Gb&&(e.timeline=null),e.Z=null),!e.Gb&&!e.Qc)throw new ye(be,4,4002)}(a);var s=Ue(e);if(a.Gb)return Rc(e,o),{hb:function(){var e=dc(a.Gb,s.F.id,null,s.bandwidth||null,null);return e=yt(s.F.ma,[e]),Oc(s,t,o,e,0,null,a.Ga)}};if(a.Z)return r||(e.presentationTimeline.Rc(a.Z),e.presentationTimeline.Sc(e.O.start)),{hb:function(){return function(e,t,n,r){function i(e){var n=(e-f)*h,i=n+t.Ga;return new Qr(n+=s,Math.min(n+h,l),(function(){var t=dc(p,v,e,m,i*d);return yt(g,[t])}),0,null,r,y,s,l)}function o(){var e=[Math.max(a.Pa(),s),Math.min(a.Ka(),l)].map((function(e){return e-s}));return[Math.ceil(e[0]/h),Math.ceil(e[1]/h)-1].map((function(e){return e+f}))}var a=e.presentationTimeline,s=e.O.start,c=e.O.duration,l=c?s+c:1/0,h=t.Z,f=t.qb,d=t.timescale,p=t.Qc,m=e.bandwidth||null,v=e.F.id,g=e.F.ma,y=s-t.Ga,b=o();for(e=b[1],c=[],n=Math.max(b[0],b[1]-n);n<=e;++n)b=i(n),c.push(b);var w=new Ti(c);if(a.Ka()<l){var E=e+1;w.mc(h,(function(){w.Na(a.Pa());var e=u(o());e.next(),e=e.next().value;for(var t=[];E<=e;){var n=i(E);t.push(n),E++}return t}))}return Promise.resolve(w)}(s,a,i,o)}};var c=null;r=null,e.ja.id&&e.F.id&&(r=e.ja.id+","+e.F.id,c=n[r]);var l=function(e,t,n){var r=e.O.start,i=e.O.duration,o=r-t.Ga;i=i?r+i:1/0;for(var a=[],s={},c=u(Z(t.timeline)),l=c.next();!l.done;s={tc:s.tc,wc:s.wc,qc:s.qc,xc:s.xc},l=c.next()){var h=(l=l.value).item,f=h.start,d=h.df;h=h.end,s.wc=l.Y+t.qb,s.xc=d+t.md,s.tc=e.F.id,s.qc=e.bandwidth||null,a.push(new Qr(r+f,r+h,function(n){return function(){var r=dc(t.Qc,n.tc,n.wc,n.qc||null,n.xc);return yt(e.F.ma,[r]).map((function(e){return e.toString()}))}}(s),0,null,n,o,r,i))}return a}(s,a,o),h=e.O.start,f=e.O.duration?e.O.start+e.O.duration:1/0,d=1/0!=f;return c?(d&&new Ti(l).Ja(h,f),c.kb(l),c.Na(e.presentationTimeline.Pa())):(e.presentationTimeline.mb(l),c=new Ti(l),r&&e.eb&&(n[r]=c)),d&&c.Ja(h,f),{hb:function(){return Promise.resolve(c)}}}function Dc(e){return e.Mb}function jc(){this.f=[],this.a=[],this.b=[],this.c=[],this.g=new Set}function Nc(e){var t,n,r,i,o,a,s,c,l,h,f,d,p,m,v,g,y,b,E,_;return A((function(k){switch(k.a){case 1:if(t=wt,1==e.length)return k.return(e[0]);for(n=e.map((function(e){return e.filter((function(e){return e.type==t.cb}))})),r=e.map((function(e){return e.filter((function(e){return e.type==t.Ba}))})),i=e.map((function(e){return e.filter((function(e){return e.type==t.$}))})),o=u(i),a=o.next();!a.done;a=o.next())a.value.push({id:0,originalId:"",primary:!1,type:"text",mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null});return w(k,Bc([],n,0,Hc,zc),2);case 2:return s=k.b,w(k,Bc([],r,0,Hc,zc),3);case 3:return c=k.b,w(k,Bc([],i,0,Hc,zc),4);case 4:if(l=k.b,h=0,c.length&&s.length)for(m=u(s),v=m.next();!v.done;v=m.next())for(g=v.value,y=u(c),b=y.next();!b.done;b=y.next())E=b.value,_=h++,E.variantIds.push(_),g.variantIds.push(_);else for(f=c.concat(s),d=u(f),p=d.next();!p.done;p=d.next())p.value.variantIds=[h++];return k.return(c.concat(s,l))}}))}function Bc(e,t,n,r,i){var o,a,s,c,l,h,f,d,p,m,v,g,y,b,E,_,k,S,x;return A((function(T){switch(T.a){case 1:for(o=wt,a=[],s=u(Z(t)),c=s.next();!c.done;c=s.next())l=c.value,h=l.Y,f=l.item,h>=n?a.push(new Set(f)):a.push(new Set);d=u(e),p=d.next();case 2:if(p.done){T.u(4);break}return w(T,function(e,t,n,r,i){var o;return A((function(a){return 1==a.a?(o=Vc(t,e))?w(a,Promise.all(o.map((function(e){return e.createSegmentIndex()}))),2):a.return(!1):(Fc(e,o,n,r,i),a.return(!0))}))}(p.value,t,n,i,a),5);case 5:if(!T.b)throw new ye(be,4,4037);p=d.next(),T.u(2);break;case 4:m=u(a),v=m.next();case 6:if(v.done){T.u(8);break}g=v.value,y=u(g),b=y.next();case 9:if(b.done){v=m.next(),T.u(6);break}return w(T,function(e,t,n,r,i){var o,a;return A((function(s){return 1==s.a?(o=n(e),(a=Vc(t,o))?o.createSegmentIndex?w(s,Promise.all(a.map((function(e){return e.createSegmentIndex()}))),2):s.u(2):s.return(null)):(Fc(o,a,0,r,i),s.return(o))}))}(b.value,t,r,i,a),12);case 12:(E=T.b)&&e.push(E),b=y.next(),T.u(9);break;case 8:for(_=u(a),v=_.next();!v.done;v=_.next())for(k=v.value,S=u(k),b=S.next();!b.done;b=S.next())if((x=b.value).type!=o.$||x.language)throw new ye(be,4,4037);return T.return(e)}}))}function Fc(e,t,n,r,i){for(var o=(t=u(Z(t))).next();!o.done;o=t.next()){var a=o.value;if(o=a.Y,a=a.item,o>=n){r(e,a);var s=!0;"audio"==e.type&&0==mr(e.language,a.language)&&(s=!1),s&&i[o].delete(a)}}}function Uc(e){return(e=Object.assign({},e)).originalId=null,e.createSegmentIndex=function(){return Promise.resolve()},e.segmentIndex=new Ci,e.emsgSchemeIdUris=[],e.keyIds=new Set,e.closedCaptions=null,e.trickModeVideo=null,e}function Hc(e){return(e=Object.assign({},e)).keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function qc(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles))),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris))));var n=t.keyIds;if(n=new Set(l(e.keyIds).concat(l(n))),e.keyIds=n,null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),n=dn(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!n.length)throw new ye(be,4,4038);if(e.drmInfos=n,e.encrypted=e.encrypted&&t.encrypted,e.bandwidth=Math.max(e.bandwidth||0,t.bandwidth||0),e.width&&(e.width=Math.max(e.width,t.width||0)),e.height&&(e.height=Math.max(e.height,t.height||0)),e.frameRate&&(e.frameRate=Math.max(e.frameRate,t.frameRate||0)),e.audioSamplingRate&&(e.audioSamplingRate=Math.max(e.audioSamplingRate,t.audioSamplingRate||0)),e.channelsCount&&(e.channelsCount=Math.max(e.channelsCount,t.channelsCount||0)),t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var r=(n=u(t.closedCaptions)).next();!r.done;r=n.next()){var i=u(r.value);r=i.next().value,i=i.next().value,e.closedCaptions.set(r,i)}}e.segmentIndex.f.push(t.segmentIndex),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Uc(t.trickModeVideo),e.trickModeVideo.segmentIndex=e.segmentIndex.clone()),qc(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&qc(e.trickModeVideo,t)}function zc(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var n=t.keyIds;if(n=new Set(l(e.keyIds).concat(l(n))),e.keyIds=n,e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,l(t.segments)),t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var r=(n=u(t.closedCaptions)).next();!r.done;r=n.next()){var i=u(r.value);r=i.next().value,i=i.next().value,e.closedCaptions.set(r,i)}}}function Vc(e,t){for(var n=[],r=u(e),i=r.next();!i.done;i=r.next()){for(var o=t,a={audio:$c,video:$c,text:Wc}[o.type],s={audio:Kc,video:Gc,text:Xc}[o.type],c=null,l=(i=u(i.value)).next();!l.done;l=i.next())!a(o,l=l.value)||c&&!s(o,c,l)||(c=l);if(!(o=c))return null;n.push(o)}return n}function $c(e,t){var n;if(!(n=t.mimeType!=e.mimeType||St(t.codecs)[0]!=St(e.codecs)[0])&&(n=e.drmInfos)){n=e.drmInfos;var r=t.drmInfos;n=!(!n.length||!r.length||0<dn(n,r).length)}return!n}function Wc(e,t){return!!e.language&&(!t.language||0!=mr(e.language,t.language)&&t.kind==e.kind)}function Kc(e,t,n){if(e.id==n.id)return!0;var r=mr(e.language,t.language),i=mr(e.language,n.language);return i>r||!(i<r)&&(!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&(e.roles.length?(r=t.roles.filter((function(t){return e.roles.includes(t)})),(i=n.roles.filter((function(t){return e.roles.includes(t)}))).length>r.length||!(i.length<r.length)&&n.roles.length<t.roles.length):(r=Jc(e.channelsCount,t.channelsCount,n.channelsCount))==Qc||r!=eu&&((r=Jc(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==Qc||r!=eu&&!(!e.bandwidth||Yc(e.bandwidth,t.bandwidth,n.bandwidth)!=Qc))))}function Gc(e,t,n){if(e.id==n.id)return!0;var r=Jc(e.width*e.height,t.width*t.height,n.width*n.height);if(r==Qc)return!0;if(r==eu)return!1;if(e.frameRate){if((r=Jc(e.frameRate,t.frameRate,n.frameRate))==Qc)return!0;if(r==eu)return!1}return!(!e.bandwidth||Yc(e.bandwidth,t.bandwidth,n.bandwidth)!=Qc)}function Xc(e,t,n){if(e.id==n.id)return!0;var r=mr(e.language,t.language),i=mr(e.language,n.language);if(i>r)return!0;if(i<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(e.roles.length){if(r=t.roles.filter((function(t){return e.roles.includes(t)})),(i=n.roles.filter((function(t){return e.roles.includes(t)}))).length>r.length)return!0;if(i.length<r.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function Jc(e,t,n){if(t>e){if(n<=e||n-e<t-e)return Qc}else{if(n>e)return eu;if(e-n<e-t)return Qc}return Zc}function Yc(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?Qc:t<e?eu:Zc}jc.prototype.release=function(){for(var e=u(this.a.concat(this.b,this.c)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.a=[],this.b=[],this.c=[],this.f=[]};var Qc=1,Zc=0,eu=-1;function tu(){var e=this;this.s=this.i=null,this.b=[],this.m=null,this.l=1,this.f={},this.a=new jc,this.h=0,this.j=new U(5),this.g=new me((function(){e.Ib()})),this.c=new Ve}function nu(e){var t,n,r,i,o,a,s;return A((function(c){return 1==c.a?(t=Ge(e.b,e.i.retryParameters),n=e.s.networkingEngine,r=Date.now(),i=n.request(0,t),$e(e.c,i),w(c,i.promise,2)):3!=c.a?(o=c.b,e.s?(o.uri&&!e.b.includes(o.uri)&&e.b.unshift(o.uri),w(c,function(e,t,n){var r,i,o,a;return A((function(s){if(1==s.a){if(!(r=cc(t,"MPD")))throw new ye(be,4,4001,n);return i=e.i.dash.xlinkFailGracefully,o=gc(r,e.i.retryParameters,i,n,e.s.networkingEngine),$e(e.c,o),w(s,o.promise,2)}return a=s.b,s.return(function(e,t,n){var r,i,o,a,s,c,l,h,f,d,p,m,v,g,y,b,k,T,P,O,C;return A((function(I){switch(I.a){case 1:r=[n],0<(i=Xs(t,"Location").map(Qs).filter(vt)).length&&(o=yt(r,i),r=e.b=o),a=Xs(t,"BaseURL").map(Qs),s=yt(r,a),c=e.i.dash.ignoreMinBufferTime,l=0,c||(l=Zs(t,"minBufferTime",tc)||0),e.h=Zs(t,"minimumUpdatePeriod",tc,-1),h=Zs(t,"availabilityStartTime",ec),f=Zs(t,"timeShiftBufferDepth",tc),d=e.i.dash.ignoreSuggestedPresentationDelay,p=null,d||(p=Zs(t,"suggestedPresentationDelay",tc)),m=Zs(t,"maxSegmentDuration",tc),v=t.getAttribute("type")||"static",e.m?g=e.m.presentationTimeline:(y=e.i.defaultPresentationDelay||1.5*l,g=new Zr(h,null!=p?p:y,e.i.dash.autoCorrectDrift)),b={eb:"static"!=v,presentationTimeline:g,ja:null,O:null,aa:null,F:null,bandwidth:0,xd:!1};for(var R=Zs(t,"mediaPresentationDuration",tc),L=[],M=0,D=Xs(t,"Period"),j=(D=u(Z(D))).next();!j.done;j=D.next()){var N=j.value;j=N.item,N=N.next,M=Zs(j,"start",tc,M);var B=Zs(j,"duration",tc),F=null;if(N){var U=Zs(N,"start",tc);null!=U&&(F=U-M)}else null!=R&&(F=R-M);if(null==F&&(F=B),j=ru(e,b,s,{start:M,duration:F,node:j,zd:null==F||!N}),L.push(j),null==F){M=null;break}M+=F}return T=(k=null!=R?{periods:L,duration:R,sd:!1}:{periods:L,duration:M,sd:!0}).duration,P=k.periods,g.Nb("static"==v),"static"!=v&&k.sd||g.wa(T||1/0),g.S()&&!isNaN(e.i.availabilityWindowOverride)&&(f=e.i.availabilityWindowOverride),null==f&&(f=1/0),g.gd(f),g.Rc(m||1),w(I,function(e,t,n){var r,i,o,a,s,c,l,h,f,d,p,m,v,g,y,b,_,k,S,x,T,P,O,C,I,R,L,M;return A((function(A){switch(A.a){case 1:if(r=wt,!n&&1==t.length){i=t[0],e.a=i.nd,e.b=i.Td,e.c=i.textStreams,A.u(2);break}for(o=-1,a=u(Z(t)),s=a.next();!s.done;s=a.next())c=s.value,l=c.Y,h=c.item,e.g.has(h.id)||(e.g.add(h.id),-1==o&&(o=l));if(-1==o)return A.return();for(f=t.map((function(e){return e.nd})),d=t.map((function(e){return e.Td})),p=t.map((function(e){return e.textStreams})),m=u(p),v=m.next();!v.done;v=m.next())v.value.push({id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ti([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null});return w(A,Bc(e.a,f,o,Uc,qc),3);case 3:return w(A,Bc(e.b,d,o,Uc,qc),4);case 4:return w(A,Bc(e.c,p,o,Uc,qc),2);case 2:if(g=0,y=[],e.b.length&&e.a.length)for(T=u(e.a),P=T.next();!P.done;P=T.next())for(O=P.value,C=u(e.b),I=C.next();!I.done;I=C.next())R=I.value,L=dn(O.drmInfos,R.drmInfos),O.drmInfos.length&&R.drmInfos.length&&!L.length||(M=g++,y.push({id:M,language:O.language,primary:O.primary,audio:O,video:R,bandwidth:(O.bandwidth||0)+(R.bandwidth||0),drmInfos:L,allowedByApplication:!0,allowedByKeySystem:!0}));else for(b=e.b.concat(e.a),_=u(b),k=_.next();!k.done;k=_.next())S=k.value,x=g++,y.push({id:x,language:S.language,primary:S.primary,audio:S.type==r.cb?S:null,video:S.type==r.Ba?S:null,bandwidth:S.bandwidth||0,drmInfos:S.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0});e.f=y,E(A)}}))}(e.a,P,b.eb),2);case 2:if(e.m){e.m.variants=e.a.f,e.m.textStreams=e.a.c,I.u(3);break}if(e.m={presentationTimeline:g,variants:e.a.f,textStreams:e.a.c,offlineSessionIds:[],minBufferTime:l||0},!g.Rd()){I.u(3);break}return O=Xs(t,"UTCTiming"),w(I,function(e,t,n){var r,i,o,a,s,c,l,h;return A((function(f){switch(f.a){case 1:r=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}})),i=e.i.dash.clockSyncUri,!r.length&&i&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),o=u(r),a=o.next();case 2:if(a.done){f.u(4);break}switch(s=a.value,_(f,5),c=s.scheme,l=s.value,c){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return f.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return f.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return h=Date.parse(l),f.return(isNaN(h)?0:h-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":W("NTP UTCTiming scheme is not supported");break;default:W("Unrecognized scheme in UTCTiming element",c)}f.u(9);break;case 7:return w(f,su(e,t,l,"HEAD"),10);case 10:return f.return(f.b);case 8:return w(f,su(e,t,l,"GET"),11);case 11:return f.return(f.b);case 9:S(f,3);break;case 5:x(f);case 3:a=o.next(),f.u(2);break;case 4:return W("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),f.return(0)}}))}(e,s,O),5);case 5:if(C=I.b,!e.s)return I.return();g.Nd(C);case 3:return w(I,e.s.filter(e.m),0)}}))}(e,a,n))}))}(e,o.data,o.uri),3)):c.return(0)):(a=Date.now(),s=(a-r)/1e3,H(e.j,1,s),c.return(s))}))}function ru(e,t,n,r){t.ja=au(r.node,null,n),t.O=r,t.ja.id||(t.ja.id="__shaka_period_"+r.start);for(var i=(n=u(n=Xs(r.node,"EventStream"))).next();!i.done;i=n.next())cu(e,r.start,r.duration,i.value);if(n=Xs(r.node,"AdaptationSet").map((function(n){return function(e,t,n){if(t.aa=au(n,t.ja,null),"image"==t.aa.contentType)return null;var r=!1,i=Xs(n,"Role"),o=i.map((function(e){return e.getAttribute("value")})).filter(vt),a=void 0,s="text"==t.aa.contentType;s&&(a="subtitle");for(var c=(i=u(i)).next();!c.done;c=i.next()){var h=(c=c.value).getAttribute("schemeIdUri");if(null==h||"urn:mpeg:dash:role:2011"==h)switch(c=c.getAttribute("value"),c){case"main":r=!0;break;case"caption":case"subtitle":a=c}}h=Xs(n,"EssentialProperty"),i=null,c=!1;for(var f=(h=u(h)).next();!f.done;f=h.next())"http://dashif.org/guidelines/trickmode"==(f=f.value).getAttribute("schemeIdUri")?i=f.getAttribute("value"):c=!0;h=Xs(n,"Accessibility");var d=new Map;for(h=u(h),f=h.next();!f.done;f=h.next()){var p=f.value;if(f=p.getAttribute("schemeIdUri"),p=p.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==f||"urn:scte:dash:cc:cea-708:2015"==f)if(f=1,null!=p)for(var m=(p=u(p.split(";"))).next();!m.done;m=p.next()){var v=m.value,g=m=void 0;v.includes("=")?(v=v.split("="),m=v[0].startsWith("CC")?v[0]:"CC"+v[0],g=v[1].split(",")[0].split(":").pop()):(m="CC"+f,f+=2,g=v),d.set(m,pr(g))}else d.set("CC1","und");else"urn:mpeg:dash:role:2011"==f&&null!=p&&(o.push(p),"captions"==p&&(a="caption"))}if(c)return null;var y=uc(c=Xs(n,"ContentProtection"),e.i.dash.ignoreDrmInfo),b=pr(n.getAttribute("lang")||"und"),_=n.getAttribute("label");if((c=Xs(n,"Label"))&&c.length&&((c=c[0]).textContent&&(_=c.textContent)),c=Xs(n,"Representation"),0==(n=c.map((function(n){return function(e,t,n,r,i,o,a,s,c,u){if(t.F=au(u,t.aa,null),!function(e){var t=e.Lb?1:0;return t+=e.Ma?1:0,0==(t+=e.Mb?1:0)?"text"==e.contentType||"application"==e.contentType:(1!=t&&(e.Lb&&(e.Ma=null),e.Mb=null),!0)}(t.F))return null;var l=t.O.start;t.bandwidth=Zs(u,"bandwidth",ic)||0;var h=t.F.contentType;h="text"==h||"application"==h;try{var f=function(t,n,r){return function(e,t,n,r){var i,o,a,s,c;return A((function(u){return 1==u.a?(i=Ye,o=Hi(t,n,r,e.i.retryParameters),a=e.s.networkingEngine,s=a.request(i,o),$e(e.c,s),w(u,s.promise,2)):(c=u.b,u.return(c.data))}))}(e,t,n,r)};if(t.F.Lb)var d=Pc(t,f);else if(t.F.Ma)d=Lc(t,e.f);else if(t.F.Mb)d=Mc(t,f,e.f,!!e.m,e.i.dash.initialSegmentLimit);else{var p=t.F.ma,m=t.O.duration||0;d={hb:function(){return Promise.resolve(Pi(l,m,p))}}}}catch(e){if(h&&4002==e.code)return null;throw e}h=function(e,t,n){var r=uc(e,n);if(t.ud)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==r.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=r.drmInfos),t.ud=!1;else if(0<r.drmInfos.length&&(t.drmInfos=t.drmInfos.filter((function(e){return r.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==t.drmInfos.length))throw new ye(be,4,4008);return r.rd||t.rd}(h=Xs(u,"ContentProtection"),n,e.i.dash.ignoreDrmInfo),h=new Set(h?[h]:[]),Xs(u,"SupplementalProperty").some((function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")}))&&(t.F.mimeType="audio/eac3-joc");var v={id:e.l++,originalId:t.F.id,createSegmentIndex:function(){var e;return A((function(t){if(1==t.a)return v.segmentIndex?t.u(0):(e=v,w(t,d.hb(),3));e.segmentIndex=t.b,E(t)}))},segmentIndex:null,mimeType:t.F.mimeType,codecs:t.F.codecs,frameRate:t.F.frameRate,pixelAspectRatio:t.F.pixelAspectRatio,bandwidth:t.bandwidth,width:t.F.width,height:t.F.height,kind:r,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:h,language:i,label:o,type:t.aa.contentType,primary:a,trickModeVideo:null,emsgSchemeIdUris:t.F.emsgSchemeIdUris,roles:s,channelsCount:t.F.Tc,audioSamplingRate:t.F.audioSamplingRate,closedCaptions:c};return v}(e,t,y,a,b,_,r,o,d,n)})).filter((function(e){return!!e}))).length){if(e.i.dash.ignoreEmptyAdaptationSet||s)return null;throw new ye(be,4,4003)}if(!t.aa.contentType||"application"==t.aa.contentType)for(t.aa.contentType=uu(n[0].mimeType,n[0].codecs),s=u(n),h=s.next();!h.done;h=s.next())h.value.type=t.aa.contentType;for(s=u(n),h=s.next();!h.done;h=s.next())for(h=h.value,f=u(y.drmInfos),p=f.next();!p.done;p=f.next())(p=p.value).keyIds=p.keyIds&&h.keyIds?new Set(l(p.keyIds).concat(l(h.keyIds))):p.keyIds||h.keyIds;return s=c.map((function(e){return e.getAttribute("id")})).filter(vt),{id:t.aa.id||"__fake__"+e.l++,contentType:t.aa.contentType,language:b,Hf:r,streams:n,drmInfos:y.drmInfos,kd:i,Oe:s}}(e,t,n)})).filter(vt),t.eb){r=[];for(var o=(i=u(n)).next();!o.done;o=i.next())for(var a=(o=u(o.value.Oe)).next();!a.done;a=o.next())r.push(a.value);if(r.length!=new Set(r).size)throw new ye(be,4,4018)}for(r=n.filter((function(e){return!e.kd})),i=(n=u(n=n.filter((function(e){return e.kd})))).next();!i.done;i=n.next()){i=(o=i.value).streams[0],o=o.kd;for(var s=(a=u(r)).next();!s.done;s=a.next())if((s=s.value).id==o)for(var c=(s=u(s.streams)).next();!c.done;c=s.next())c.value.trickModeVideo=i}if(i=e.i.disableAudio?[]:iu(r,"audio"),o=e.i.disableVideo?[]:iu(r,"video"),n=e.i.disableText?[]:iu(r,"text"),!o.length&&!i.length)throw new ye(be,4,4004);for(r=[],a=(i=u(i)).next();!a.done;a=i.next())r.push.apply(r,l(a.value.streams));for(i=[],a=(o=u(o)).next();!a.done;a=o.next())i.push.apply(i,l(a.value.streams));for(o=[],a=(n=u(n)).next();!a.done;a=n.next())o.push.apply(o,l(a.value.streams));return{id:t.ja.id,nd:r,Td:i,textStreams:o}}function iu(e,t){return e.filter((function(e){return e.contentType==t}))}function ou(e,t){0>e.h||e.g.R(Math.max(3,e.h-t,q(e.j)))}function au(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Tc:null,audioSamplingRate:null},n=n||t.ma;for(var r=Xs(e,"BaseURL").map(Qs),i=e.getAttribute("contentType")||t.contentType,o=e.getAttribute("mimeType")||t.mimeType,a=e.getAttribute("codecs")||t.codecs,s=Zs(e,"frameRate",ac)||t.frameRate,c=e.getAttribute("sar")||t.pixelAspectRatio,l=Xs(e,"InbandEventStream"),h=t.emsgSchemeIdUris.slice(),f=(l=u(l)).next();!f.done;f=l.next())f=f.value.getAttribute("schemeIdUri"),h.includes(f)||h.push(f);return l=function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(t=parseInt(n,10)))continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16)){for(e=0;t;)1&t&&++e,t>>=1;return e}}}return null}(l=Xs(e,"AudioChannelConfiguration"))||t.Tc,f=Zs(e,"audioSamplingRate",oc)||t.audioSamplingRate,i||(i=uu(o,a)),{ma:yt(n,r),Lb:Ks(e,"SegmentBase")||t.Lb,Ma:Ks(e,"SegmentList")||t.Ma,Mb:Ks(e,"SegmentTemplate")||t.Mb,width:Zs(e,"width",oc)||t.width,height:Zs(e,"height",oc)||t.height,contentType:i,mimeType:o,codecs:a,frameRate:s,pixelAspectRatio:c,emsgSchemeIdUris:h,id:e.getAttribute("id"),Tc:l,audioSamplingRate:f}}function su(e,t,n,r){var i,o,a,s,c,u;return A((function(l){if(1==l.a)return i=yt(t,[n]),(o=Ge(i,e.i.retryParameters)).method=r,a=e.s.networkingEngine.request(4,o),$e(e.c,a),w(l,a.promise,2);if(s=l.b,"HEAD"==r){if(!s.headers||!s.headers.date)return l.return(0);c=s.headers.date}else c=Dt(s.data);return u=Date.parse(c),isNaN(u)?l.return(0):l.return(u-Date.now())}))}function cu(e,t,n,r){for(var i=r.getAttribute("schemeIdUri")||"",o=r.getAttribute("value")||"",a=Zs(r,"timescale",oc)||1,s=(r=u(Xs(r,"Event"))).next();!s.done;s=r.next()){var c=Zs(s=s.value,"presentationTime",oc)||0,l=Zs(s,"duration",oc)||0;l=(c=c/a+t)+l/a,null!=n&&(c=Math.min(c,t+n),l=Math.min(l,t+n)),s={schemeIdUri:i,value:o,startTime:c,endTime:l,id:s.getAttribute("id")||"",eventElement:s},e.s.onTimelineRegionAdded(s)}}function uu(e,t){return Wn(kt(e,t))?"text":e.split("/")[0]}function lu(e,t,n,r){this.a=e,this.type=t,this.V=n,this.segments=r||null}function hu(e,t,n,r){this.id=e,this.name=t,this.a=n,this.value=void 0===r?null:r}function fu(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function du(e,t){var n=e.getAttribute(t);if(!n)throw new ye(be,4,4023,t);return n.value}function pu(e,t){this.V=t,this.a=e}function mu(e,t){this.name=e,this.value=t}function vu(e,t){return e.filter((function(e){return e.name==t}))}function gu(e,t){return e.filter((function(e){return du(e,"TYPE")==t}))}function yu(e,t){var n=vu(e,t);return n.length?n[0]:null}function bu(e,t,n){return n=void 0===n?0:n,(e=yu(e,t))?Number(e.value):n}function wu(e){this.b=e,this.a=0}function Eu(e){_u(e,/[ \t]+/gm)}function _u(e,t){t.lastIndex=e.a;var n=t.exec(e.b);return n=null==n?null:{position:n.index,length:n[0].length,results:n},e.a==e.b.length||null==n||n.position!=e.a?null:(e.a+=n.length,n.results)}function ku(e){return e.a==e.b.length?null:(e=_u(e,/[^ \t\n]*/gm))?e[0]:null}function Su(){this.a=0}function xu(e,t,n){var r=(t=(t=Dt(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(r[0]))throw new ye(be,4,4015);t=0;for(var i=!0,o=u(r),a=o.next();!a.done;a=o.next())if(a=a.value,/^#(?!EXT)/m.test(a)||i)i=!1;else{if(a=Tu(e.a++,a),--e.a,Pu.includes(a.name)){t=1;break}"EXT-X-STREAM-INF"==a.name&&(i=!0)}o=[],i=!0;for(var s=(a=u(Z(r))).next();!s.done;s=a.next()){var c=s.value;s=c.Y;var l=c.item;if(c=c.next,/^#(?!EXT)/m.test(l)||i)i=!1;else{if(l=Tu(e.a++,l),Ou.includes(l.name)){if(1!=t)throw new ye(be,4,4017);for(l=r.splice(s,r.length-s),r=n,i=[],a=[],s=null,c=(l=u(l)).next();!c.done;c=l.next())c=c.value,/^(#EXT)/.test(c)?(c=Tu(e.a++,c),Pu.includes(c.name)?o.push(c):"EXT-X-MAP"==c.name?s=c:a.push(c)):/^#(?!EXT)/m.test(c)||(c=yt([r],[c.trim()])[0],s&&a.push(s),i.push(new pu(c,a)),a=[]);return new lu(n,t,o,i)}o.push(l),"EXT-X-STREAM-INF"==l.name&&(l.a.push(new mu("URI",c)),i=!0)}}return new lu(n,t,o)}function Tu(e,t){var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new ye(be,4,4016,t);var r,i=n[1],o=n[2];if(n=[],o){var a;(a=_u(o=new wu(o),/^([^,=]+)(?:,|$)/g))&&(r=a[1]);for(var s=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;a=_u(o,s);)n.push(new mu(a[1],a[2]||a[3]))}return new hu(e,i,n,r)}(r=tu.prototype).configure=function(e){this.i=e},r.start=function(e,t){var n,r=this;return A((function(i){if(1==i.a)return r.b=[e],r.s=t,w(i,nu(r),2);if(n=i.b,r.s&&ou(r,n),!r.s)throw new ye(be,we,7001);return i.return(r.m)}))},r.stop=function(){for(var e=u(Object.values(this.f)),t=e.next();!t.done;t=e.next())t.value.release();return this.a&&this.a.release(),this.i=this.s=null,this.b=[],this.m=null,this.f={},this.a=null,null!=this.g&&(this.g.stop(),this.g=null),this.c.destroy()},r.update=function(){var e,t=this;return A((function(n){return 1==n.a?(_(n,2),w(n,nu(t),4)):2!=n.a?S(n,0):(e=x(n),t.s&&e?(t.s.onError(e),void E(n)):n.return())}))},r.onExpirationUpdated=function(){},r.Ib=function(){var e,t,n=this;return A((function(r){switch(r.a){case 1:return e=0,_(r,2),w(r,nu(n),4);case 4:e=r.b,S(r,3);break;case 2:t=x(r),n.s&&(t.severity=1,n.s.onError(t));case 3:if(!n.s)return r.return();ou(n,e),E(r)}}))},F("shaka.dash.DashParser",tu),Gr.mpd=function(){return new tu},Kr["application/dash+xml"]=function(){return new tu},Kr["video/vnd.mpeg.dash.mpd"]=function(){return new tu},hu.prototype.toString=function(){var e="#"+this.name,t=this.a?this.a.map((function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)})):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},hu.prototype.getAttribute=function(e){var t=this.a.filter((function(t){return t.name==e}));return t.length?t[0]:null};var Pu="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),Ou="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Cu(){}function Iu(e){try{var t=Ru(e);return Te({uri:e,Gd:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return Se(e)}}function Ru(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new ye(be,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw new ye(be,1,1004,t);var r=n[0];n=e.decodeURIComponent(n.slice(1).join(","));var i=null;if(1<(r=r.split(";")).length&&(i=r[1]),"base64"==i)t=$t(n);else{if(i)throw new ye(be,1,1005,t);t=Bt(n)}return{data:t,contentType:r[0]}}function Lu(){var e=this;this.i=this.s=null,this.Aa=1,this.j=new Map,this.g=new Map,this.pa=new Set,this.a=new Map,this.b=null,this.I="",this.G=new Su,this.ca=0,this.h=new me((function(){e.Ib()})),this.c=tl,this.m=null,this.M=0,this.T=1/0,this.l=new Ve,this.W=[],this.w=new Map,this.za=!1,this.f=new Map,this.C=null,this.H=new Map,this.v=new Map}function Au(e,t){var n,r,i,o,a,s,c,u,l;return A((function(h){if(1==h.a)return n=il,r=t.Xd,w(h,Ju(e,Ge([r],e.i.retryParameters),0),2);if(3!=h.a){if(i=h.b,1!=(o=xu(e.G,i.data,i.uri)).type)throw new ye(be,4,4017);return a=vu(o.V,"EXT-X-DEFINE"),s=Mu(e,a),c=t.stream,w(h,qu(e,t.nc,o,c.mimeType,t.Bd,s),3)}u=h.b,c.segmentIndex.kb(u),u.length&&c.segmentIndex.Na(u[0].startTime),l=u[u.length-1],yu(o.V,"EXT-X-ENDLIST")&&(Xu(e,n.Vd),e.b.wa(l.endTime)),E(h)}))}function Mu(e,t){for(var n=new Map,r=u(t),i=r.next();!i.done;i=r.next()){var o=i.value;i=fu(o,"NAME");var a=fu(o,"VALUE");o=fu(o,"IMPORT"),i&&a&&n.set(i,a),o&&(i=e.j.get(o))&&n.set(o,i)}return n}function Du(e){var t=fu(e,"CODECS","avc1.42E01E,mp4a.40.2").split(/\s*,\s*/);e=new Set;for(var n=[],r=(t=u(t)).next();!r.done;r=t.next()){var i=St(r=r.value)[0];e.has(i)||(n.push(r),e.add(i))}return n}function ju(e){return pr(e=fu(e,"LANGUAGE")||"und")}function Nu(e,t){var n,r,i,o,a,s,c,u,l,h,f,d;return A((function(p){if(1==p.a){n=du(t,"GROUP-ID"),r="";var m=du(t,"TYPE").toLowerCase();return"subtitles"==m&&(m="text"),"text"!=(i=m)&&n&&e.f.has(n)&&(r=e.f.get(n)),o=Ku(du(t,"URI"),e.j),e.a.has(o)?p.return(e.a.get(o)):(a=ju(t),s=fu(t,"NAME"),c=t.getAttribute("DEFAULT"),u=t.getAttribute("AUTOSELECT"),l=!!c||!!u,m="audio"==i&&(m=fu(t,"CHANNELS"))?parseInt(m.split("/")[0],10):null,h=m,f=fu(t,"CHARACTERISTICS"),w(p,Bu(e,o,r,i,a,l,s,h,null,f),2))}return d=p.b,e.g.has(n)?e.g.get(n).push(d):e.g.set(n,[d]),null==d?p.return(null):e.a.has(o)?p.return(e.a.get(o)):(e.a.set(o,d),p.return(d))}))}function Bu(e,t,n,r,i,o,a,s,c,h){var f,d,p,m,v,g,y,b,E,k,T,P,O,C,I,R,L,M,D,j,N,B,F,U,H,q,z,V,$,K,G,X,J;return A((function(Y){switch(Y.a){case 1:return f=yt([e.I],[t])[0],w(Y,Ju(e,Ge([f],e.i.retryParameters),0),2);case 2:if(d=Y.b,f=d.uri,1!=(p=xu(e.G,d.data,f)).type)throw new ye(be,4,4017);if(m=[],p.segments)for(v=u(p.segments),g=v.next();!g.done;g=v.next())y=g.value,b=vu(y.V,"EXT-X-KEY"),m.push.apply(m,l(b));for(E=!1,k=[],T=new Set,P=u(m),O=P.next();!O.done;O=P.next())if(C=O.value,"NONE"!=(I=du(C,"METHOD"))){if(E=!0,"AES-128"==I)return e.za=!0,Y.return(null);if(R=du(C,"KEYFORMAT"),M=(L=el[R])?L(C):null){if(M.keyIds)for(D=u(M.keyIds),j=D.next();!j.done;j=D.next())N=j.value,T.add(N);k.push(M)}}if(E&&!k.length)throw new ye(be,4,4026);return B=vu(p.V,"EXT-X-DEFINE"),F=Mu(e,B),function(e,t){var n=yu(t.V,"EXT-X-PLAYLIST-TYPE"),r=yu(t.V,"EXT-X-ENDLIST");r=n&&"VOD"==n.value||r,n=n&&"EVENT"==n.value&&!r,n=!r&&!n,r?Xu(e,tl):(Xu(e,n?rl:nl),r=Gu(t.V,"EXT-X-TARGETDURATION"),r=Number(r.value),e.M=Math.max(r,e.M),e.T=Math.min(r,e.T))}(e,p),w(Y,function(e,t,n,r,i){var o,a,s,c,u,l,h,f,d,p;return A((function(m){if(1==m.a)return o=wt,a=Ye,s=Ku(r.segments[0].a,i),c=new te(s),u=c.ia.split(".").pop(),l=Zu[t],(h=l[u])?m.return(h):t==o.$?n&&"vtt"!=n?m.return("application/mp4"):m.return("text/vtt"):((f=Ge([s],e.i.retryParameters)).method="HEAD",w(m,Ju(e,f,a),2));if(d=m.b,!(p=d.headers["content-type"]))throw new ye(be,4,4021,u);return m.return(p.split(";")[0])}))}(e,r,n,p,F),3);case 3:return U=Y.b,Qu.includes(U)&&(n=""),H=new Map,_(Y,4),w(Y,qu(e,t,p,U,H,F),6);case 6:q=Y.b,S(Y,5);break;case 4:if(4035==(z=x(Y)).code)return W("Skipping unsupported HLS stream",U,t),Y.return(null);throw z;case 5:return V=q[0].startTime,$=q[q.length-1].endTime,K=new Ti(q),G="text"==r?"subtitle":void 0,X=[],h&&X.push(h),J={id:e.Aa++,originalId:a,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:K,mimeType:U,codecs:n,kind:G,encrypted:E,drmInfos:k,keyIds:T,language:i,label:a,type:r,primary:o,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:X,channelsCount:s,audioSamplingRate:null,closedCaptions:c},Y.return({stream:J,nc:t,Xd:f,Cd:V,De:$,Bd:H})}}))}function Fu(e,t,n,r){return(n=yu(n,"EXT-X-MAP"))?(t=[r=Ku(yt([t],[du(n,"URI")])[0],r),fu(n,"BYTERANGE","")].join("-"),e.H.has(t)||(n=function(e,t){var n=0,r=null,i=fu(t,"BYTERANGE");return i&&(n=i.split("@"),r=Number(n[0]),n=Number(n[1]),r=n+r-1),new Yr((function(){return[e]}),n,r)}(r,n),e.H.set(t,n)),e.H.get(t)):null}function Uu(e,t,n,r,i,o){var a=n.V,s=Ku(n.a,o);n=Gu(a,"EXTINF").value.split(","),n=r+Number(n[0]),o=0;var c=null;return(a=yu(a,"EXT-X-BYTERANGE"))&&(o=a.value.split("@"),a=Number(o[0]),c=(o=o[1]?Number(o[1]):t.a+1)+a-1),new Qr(r,n,(function(){return[s]}),o,c,e,i,0,1/0)}function Hu(e){if(e.b){for(var t=u(e.W),n=t.next();!n.done;n=t.next())e.b.mb(n.value);e.W=[]}}function qu(e,t,n,r,i,o){var a,s,c,l,h,f,d,p,m,v,g,y,b,E,_,k,S;return A((function(x){switch(x.a){case 1:if(a=n.segments,c=bu(n.V,"EXT-X-MEDIA-SEQUENCE",0),e.c!=tl&&i.has(c)){l=i.get(c),x.u(2);break}if(null!=e.C){x.u(3);break}return s=Fu(e,n.a,a[0].V,o),h=e,w(x,Vu(e,t,s,r,c,!1,a[0],o),4);case 4:h.C=x.b;case 3:l=e.C;case 2:a[0].a.split("/").pop(),f=bu(n.V,"EXT-X-DISCONTINUITY-SEQUENCE"),d=e.v.get(f)||0,p=[],m=u(function(e){return Z(e)}(a)),v=m.next();case 5:if(v.done){x.u(7);break}if(g=v.value,y=g.Y,b=g.item,E=p[p.length-1],_=0==y?l:E.endTime,k=c+y,i.set(k,_),s=Fu(e,n.a,b.V,o),!yu(b.V,"EXT-X-DISCONTINUITY")){x.u(8);break}return f++,w(x,function(e,t,n,r,i,o,a,s,c){var u,l;return A((function(h){return 1==h.a?(u=0,e.v.has(t)?(u=e.v.get(t),h.u(2)):w(h,Vu(e,n,r,i,o,!0,a,s),3)):(2!=h.a&&(l=h.b,u=c-l,e.v.set(t,u)),h.return(u))}))}(e,f,t,s,r,c,b,o,_),9);case 9:d=x.b;case 8:S=Uu(s,E,b,_,d,o),p.push(S),v=m.next(),x.u(5);break;case 7:return e.W.push(p),Hu(e),x.return(p)}}))}function zu(e,t){var n,r,i,o,a,s;return A((function(c){switch(c.a){case 1:return n=Ye,r=Hi(t.c(),t.b,t.a,e.i.retryParameters),e.i.hls.useFullSegmentsForStartTime?c.return(Ju(e,r,n)):(i=Hi(t.c(),t.b,t.b+2048-1,e.i.retryParameters),_(c,2),w(c,Ju(e,i,n),4));case 4:return o=c.b,c.return(o);case 2:if(7001==(a=x(c)).code)throw a;return W("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",i.uris[0]),w(c,Ju(e,r,n),5);case 5:return s=c.b,c.return(s)}}))}function Vu(e,t,n,r,i,o,a,s){var c,u,l,h,f,d,p,m;return A((function(v){switch(v.a){case 1:if(c=Uu(n,null,a,0,0,s),e.m&&!o&&(u=e.a.get(t),null!=(l=u.Bd.get(i))))return v.return(l);if(r=r.toLowerCase(),Qu.includes(r))throw W("Raw formats are not yet supported.  Skipping "+r),new ye(1,4,4035);if("video/webm"==r)throw W("WebM in HLS is not yet supported.  Skipping."),new ye(1,4,4035);if("video/mp4"!=r&&"audio/mp4"!=r){v.u(2);break}return h=[zu(e,c)],n&&h.push(zu(e,n)),w(v,Promise.all(h),3);case 3:return f=v.b,d=f[0],p=f[1]||f[0],v.return(function(e,t,n,r){var i=0;if((new Ai).K("moov",Mi).K("trak",Mi).K("mdia",Mi).ea("mdhd",(function(e){e.reader.skip(0==e.version?8:16),i=e.reader.J(),e.parser.stop()})).parse(r,!0),!i)throw new ye(be,4,4030,e,t);var o=0,a=!1;if((new Ai).K("moof",Mi).K("traf",Mi).ea("tfdt",(function(e){o=(0==e.version?e.reader.J():e.reader.pb())/i,a=!0,e.parser.stop()})).parse(n,!0),!a)throw new ye(be,4,4030,e,t);return o}(t,d.uri,d.data,p.data));case 2:if("video/mp2t"!=r){v.u(4);break}return w(v,zu(e,c),5);case 5:return m=v.b,v.return(function(e,t,n){function r(){o.seek(a+188),71!=(s=o.na())&&(o.seek(a+192),s=o.na()),71!=s&&(o.seek(a+204),s=o.na()),71!=s&&i(),o.Jd(1)}function i(){throw new ye(be,4,4030,e,t)}for(var o=new Ii(n,0),a=0,s=0;;)if(a=o.B,71!=(s=o.na())&&i(),8191==(8191&(n=o.Kb())))r();else if(16384&n){if(0!=(n=(48&o.na())>>4)&&2!=n||i(),3==n&&(n=o.na(),o.skip(n)),1==o.J()>>8){o.skip(3),0!=(n=o.na()>>6)&&1!=n||i(),0==o.na()&&i(),n=o.na();var c=o.Kb(),u=o.Kb();return(1073741824*((14&n)>>1)+((65534&c)<<14|(65534&u)>>1))/9e4}r()}else r()}(t,m.uri,m.data));case 4:throw new ye(be,4,4030,t)}}))}function $u(e,t){if(1==t.length)return t[0];var n=Wu(e,t);if(null!=n)return n;throw new ye(be,4,4025,t)}function Wu(e,t){for(var n=u(Yu[e]),r=n.next();!r.done;r=n.next()){r=r.value;for(var i=u(t),o=i.next();!o.done;o=i.next())if(o=o.value,r.test(o.trim()))return o.trim()}return"text"==e?"":null}function Ku(e,t){var n=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}"),r=n.match(/{\$\w*}/g);if(r)for(var i=(r=u(r)).next();!i.done;i=r.next()){var o=(i=i.value).slice(2,i.length-1),a=t.get(o);if(!a)throw new ye(be,4,4039,o);n=n.replace(i,a)}return n}function Gu(e,t){var n=yu(e,t);if(!n)throw new ye(be,4,4024,t);return n}function Xu(e,t){e.c=t,e.b&&e.b.Nb(e.c==tl),e.c!=tl||e.h.stop()}function Ju(e,t,n){if(!e.l)throw new ye(be,we,7001);return t=e.s.networkingEngine.request(n,t),$e(e.l,t),t.promise}F("shaka.net.DataUriPlugin",Cu),Cu.parse=Iu,Ke("data",Iu),(r=Lu.prototype).configure=function(e){this.i=e},r.start=function(e,t){var n,r,i=this;return A((function(o){return 1==o.a?(i.s=t,w(o,Ju(i,Ge([e],i.i.retryParameters),0),2)):3!=o.a?(n=o.b,i.I=n.uri,w(o,function(e,t){var n,r,i,o,a,s,c,l,h,f,d,p,m,v;return A((function(g){switch(g.a){case 1:if(0!=(n=xu(e.G,t,e.I)).type)throw new ye(be,4,4022);for(var y=u(vu(n.V,"EXT-X-DEFINE")),b=y.next();!b.done;b=y.next()){var E=b.value;b=fu(E,"NAME"),E=fu(E,"VALUE"),b&&E&&(e.j.has(b)||e.j.set(b,E))}for(r=vu(n.V,"EXT-X-MEDIA"),b=(y=u(i=vu(n.V,"EXT-X-STREAM-INF"))).next();!b.done;b=y.next()){var k=b.value;E=fu(k,"AUDIO"),b=fu(k,"VIDEO");var S=fu(k,"SUBTITLES");if(k=Du(k),S){var T=Wu("text",k);e.f.set(S,T),qe(k,T)}E&&(S=$u("audio",k),e.f.set(E,S)),b&&(E=$u("video",k),e.f.set(b,E))}return w(g,function(e,t){var n;return A((function(r){return 1==r.a?(t=t.filter((function(e){var t=fu(e,"URI")||"";return"SUBTITLES"!=fu(e,"TYPE")&&""!=t}))).length?w(r,Nu(e,t[0]),2):r.u(2):(n=t.slice(1).map((function(t){return Nu(e,t)})),w(r,Promise.all(n),0))}))}(e,r),2);case 2:for(b=(y=u(y=gu(r,"CLOSED-CAPTIONS"))).next();!b.done;b=y.next())b=ju(S=b.value),E=du(S,"GROUP-ID"),S=du(S,"INSTREAM-ID"),e.w.get(E)||e.w.set(E,new Map),e.w.get(E).set(S,b);return w(g,function(e,t){var n,r,i;return A((function(o){return 1==o.a?(n=t.map((function(t){var n,r,i,o,a,s,c;return A((function(l){return 1==l.a?(n=fu(t,"FRAME-RATE"),r=Number(du(t,"BANDWIDTH")),i=fu(t,"RESOLUTION"),o=u(i?i.split("x"):[null,null]),a=o.next().value,s=o.next().value,w(l,function(e,t,n,r){var i,o,a,s,c,l,h,f,d,p,m,v,g,y;return A((function(b){if(1==b.a)return i=wt,o=Du(t),a=fu(t,"AUDIO"),s=fu(t,"VIDEO"),l=(c=a||s)&&e.g.has(c)?e.g.get(c):[],h={audio:a?l:[],video:s?l:[]},d=!1,p=du(t,"URI"),m=h.audio.find((function(e){return e&&e.nc==p})),v=Wu(i.Ba,o),g=n||r||v,1!=o.length||g?!l.length&&1<o.length?(f=i.Ba,o=[o.join(",")]):h.audio.length&&m?(f=i.cb,d=!0):f=h.video.length?i.cb:i.Ba:f=i.cb,d?b.u(2):w(b,function(e,t,n,r){var i,o,a,s;return A((function(c){if(1==c.a){if(i=Ku(du(t,"URI"),e.j),e.a.has(i))return c.return(e.a.get(i));var u=fu(t,"CLOSED-CAPTIONS");return o="video"==r&&u&&"NONE"!=u?e.w.get(u):null,a=$u(r,n),w(c,Bu(e,i,a,r,"und",!1,null,null,o,null),2)}return null==(s=c.b)?c.return(null):e.a.has(i)?c.return(e.a.get(i)):(e.a.set(i,s),c.return(s))}))}(e,t,o,f),3);if(2!=b.a&&(y=b.b),y)h[y.stream.type]=[y];else if(null===y)return b.return(null);return function(e){for(var t=(e=u(e.audio.concat(e.video))).next();!t.done;t=e.next())if(t=t.value){var n=t.stream.codecs.split(",");n=n.filter((function(e){return"mp4a.40.34"!=e})),t.stream.codecs=n.join(",")}}(h),b.return(h)}))}(e,t,i,n),2)):(c=l.b)?l.return(function(e,t,n,r,i,o,a){for(var s=u(n),c=s.next();!c.done;c=s.next()){c=c.value.stream;var l=o,h=a;c&&(c.width=Number(i)||void 0,c.height=Number(l)||void 0,c.frameRate=Number(h)||void 0)}i=e.i.disableAudio,(!t.length||i)&&(t=[null]);i=e.i.disableVideo,(!n.length||i)&&(n=[null]);for(i=[],t=u(t),o=t.next();!o.done;o=t.next())for(o=o.value,a=u(n),s=a.next();!s.done;s=a.next()){var f=s.value;s=o?o.stream:null,c=f?f.stream:null,l=o?o.stream.drmInfos:null,h=f?f.stream.drmInfos:null,f=(f?f.nc:"")+" - "+(o?o.nc:""),s&&c&&l.length&&h.length&&!(0<dn(l,h).length)||e.pa.has(f)||(s={id:e.Aa++,language:s?s.language:"und",primary:!!s&&s.primary||!!c&&c.primary,audio:s,video:c,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0},i.push(s),e.pa.add(f))}return i}(e,c.audio,c.video,r,a,s,n)):l.return([])}))})),w(o,Promise.all(n),2)):(r=o.b,i=(i=r.reduce(pt,[])).filter((function(e){return null!=e})),o.return(i))}))}(e,i),3);case 3:return o=g.b,w(g,function(e,t){var n,r,i,o,a,s,c,l,h,f,d;return A((function(p){if(1==p.a)return n=gu(t,"SUBTITLES"),r=n.map((function(t){var n,r;return A((function(i){if(1==i.a)return e.i.disableText?i.return(null):(_(i,2),w(i,Nu(e,t),4));if(2!=i.a)return n=i.b,i.return(n.stream);if(r=x(i),e.i.hls.ignoreTextStreamFailures)return i.return(null);throw r}))})),w(p,Promise.all(r),2);for(i=p.b,o=u(n),a=o.next();!a.done;a=o.next())if(s=a.value,c=du(s,"GROUP-ID"),(l=e.f.get(c))&&(h=e.g.get(c)))for(f=u(h),d=f.next();!d.done;d=f.next())d.value.stream.codecs=l;return p.return(i.filter((function(e){return e})))}))}(e,r),4);case 4:if(a=g.b,!e.s)throw new ye(be,we,7001);if(e.za&&0==o.length)throw new ye(be,4,4034);for(c=s=1/0,l=u(e.a.values()),h=l.next();!h.done;h=l.next())f=h.value,s=Math.min(s,f.Cd),"text"!=f.stream.type&&(c=Math.min(c,f.De-f.Cd));if(e.c!=tl?(e.b=new Zr(0,e.i.defaultPresentationDelay||3*e.M),e.b.Nb(!1)):(e.b=new Zr(null,0),e.b.Nb(!0)),Hu(e),e.c!=tl)e.ca=e.T,d=il,e.c==d.Ud&&(p=e.b.kc,isNaN(e.i.availabilityWindowOverride)||(p=e.i.availabilityWindowOverride),e.b.gd(p));else for(e.b.wa(c),e.b.offset(-s),m=u(e.a.values()),h=m.next();!h.done;h=m.next())(v=h.value).stream.segmentIndex.offset(-s),v.stream.segmentIndex.Ja(0,c);return e.m={presentationTimeline:e.b,variants:o,textStreams:a,offlineSessionIds:[],minBufferTime:0},w(g,e.s.filter(e.m),0)}}))}(i,n.data),3)):(0<(r=i.ca)&&i.h.R(r),o.return(i.m))}))},r.stop=function(){this.h&&(this.h.stop(),this.h=null);var e=[];return this.l&&(e.push(this.l.destroy()),this.l=null),this.i=this.s=null,this.pa.clear(),this.m=null,this.a.clear(),this.g.clear(),this.f.clear(),this.j.clear(),Promise.all(e)},r.update=function(){var e,t,n,r=this;return A((function(i){if(1==i.a)return r.c==tl?i.return():(e=[],r.C=null,(t=Array.from(r.a.values())).length?w(i,Au(r,t[0]),2):i.u(2));for(n=1;n<t.length;n++)e.push(Au(r,t[n]));return w(i,Promise.all(e),0)}))},r.onExpirationUpdated=function(){},r.Ib=function(){var e,t,n=this;return A((function(r){return 1==r.a?n.s?(_(r,2),w(r,n.update(),4)):r.return():2!=r.a?(e=n.ca,n.h.R(e),S(r,0)):(t=x(r),n.s?(t.severity=1,n.s.onError(t),n.h.R(.1),void E(r)):r.return())}))},F("shaka.hls.HlsParser",Lu);var Yu={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},Qu=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],Zu={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}},el={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=du(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(t=bt("com.widevine.alpha",[{initDataType:"cenc",initData:t=Ae((t=Ru(t=du(e,"URI"))).data)}]),(e=fu(e,"KEYID"))&&(t.keyIds=new Set([e.substr(2).toLowerCase()])),t):null}},tl="VOD",nl="EVENT",rl="LIVE",il={Vd:tl,lf:nl,Ud:rl};function ol(e,t,n,r,i,o){if(200<=n&&299>=n&&202!=n)return{uri:i||r,Gd:r,data:t,headers:e,fromCache:!!e["x-shaka-from-cache"]};i=null;try{i=Nt(t)}catch(e){}throw new ye(401==n||403==n?be:1,1,1001,r,n,i,e,o)}function al(){}function sl(e,t,n,r){var i=new fl;Et(t.headers).forEach((function(e,t){i.append(t,e)}));var o=new ll,a={pd:!1,Qd:!1};if(e=new ke(e=function(e,t,n,r,i){var o,a,s,c,u,l,h,f,d,p,m,v;return A((function(g){switch(g.a){case 1:return o=ul,a=hl,l=u=0,h=Date.now(),_(g,2),w(g,o(e,n),4);case 4:return s=g.b,f=s.clone().body.getReader(),p=(d=s.headers.get("Content-Length"))?parseInt(d,10):0,new a({start:function(e){!function t(){var n,r;return A((function(o){switch(o.a){case 1:return _(o,2),w(o,f.read(),4);case 4:n=o.b,S(o,3);break;case 2:return x(o),o.return();case 3:n.done||(u+=n.value.byteLength),(100<(r=Date.now())-h||n.done)&&(i(r-h,u-l,p-u),l=u,h=r),n.done?e.close():(e.enqueue(n.value),t()),E(o)}}))}()}}),w(g,s.arrayBuffer(),5);case 5:c=g.b,S(g,3);break;case 2:if(m=x(g),r.pd)throw new ye(1,1,7001,e,t);if(r.Qd)throw new ye(1,1,1003,e,t);throw new ye(1,1,1002,e,m,t);case 3:return v={},s.headers.forEach((function(e,t){v[t.trim()]=e})),g.return(ol(v,c,s.status,e,s.url,t))}}))}(e,n,{body:t.body||void 0,headers:i,method:t.method,signal:o.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},a,r),(function(){return a.pd=!0,o.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var s=new me((function(){a.Qd=!0,o.abort()}));s.R(t/1e3),e.finally((function(){s.stop()}))}return e}function cl(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!e.fetch||!e.AbortController)}Gr.m3u8=function(){return new Lu},Kr["application/x-mpegurl"]=function(){return new Lu},Kr["application/vnd.apple.mpegurl"]=function(){return new Lu},F("shaka.net.HttpFetchPlugin",al),al.isSupported=cl,al.parse=sl;var ul=e.fetch,ll=e.AbortController,hl=e.ReadableStream,fl=e.Headers;function dl(){}function pl(e,t,n,r){var i=new ml,o=Date.now(),a=0;return new ke(new Promise((function(s,c){for(var l in i.open(t.method,e,!0),i.responseType="arraybuffer",i.timeout=t.retryParameters.timeout,i.withCredentials=t.allowCrossSiteCredentials,i.onabort=function(){c(new ye(1,1,7001,e,n))},i.onload=function(t){for(var r=(t=t.target).getAllResponseHeaders().trim().split("\r\n"),i={},o=(r=u(r)).next();!o.done;o=r.next())i[(o=o.value.split(": "))[0].toLowerCase()]=o.slice(1).join(": ");try{var a=ol(i,t.response,t.status,e,t.responseURL,n);s(a)}catch(e){c(e)}},i.onerror=function(t){c(new ye(1,1,1002,e,t,n))},i.ontimeout=function(){c(new ye(1,1,1003,e,n))},i.onprogress=function(e){var t=Date.now();(100<t-o||e.lengthComputable&&e.loaded==e.total)&&(r(t-o,e.loaded-a,e.total-e.loaded),a=e.loaded,o=t)},t.headers)i.setRequestHeader(l.toLowerCase(),t.headers[l]);i.send(t.body)})),(function(){return i.abort(),Promise.resolve()}))}cl()&&(Ke("http",sl,2),Ke("https",sl,2)),F("shaka.net.HttpXHRPlugin",dl),dl.parse=pl;var ml=e.XMLHttpRequest;function vl(){this.a=this.f=this.b=0,this.c=new Map,this.g=0}function gl(e){var t=this;this.N=e,this.a=new Map,this.D=new et((function(){var e=Array.from(t.a.values());return Promise.all(e.map((function(e){return e.catch((function(){}))})))})),this.b=[],this.Fd=function(){},this.Ed=function(){},this.Bb=new vl}function yl(e){var t=e.b.map((function(e){return e()}));return e.b=[],Promise.all(t)}function bl(e,t,n,r,i,o){tt(e.D);var a=function(e,t){e.b+=t;var n=e.g;return e.g++,e.c.set(n,t),n}(e.Bb,r);return r=(e.a.get(t)||Promise.resolve()).then((function(){var t,r,s,c,u,l,h;return A((function(f){if(1==f.a)return w(f,function(e,t){var n,r,i,o;return A((function(a){return 1==a.a?(n=Ye,r=e.N.request(n,t),i=function(){return r.abort()},e.b.push(i),w(a,r.promise,2)):(o=a.b,qe(e.b,i),a.return(o.data))}))}(e,n),2);if(t=f.b,e.D.a)throw new ye(be,9,7001);if(i)for(c in r=Ae(t),(s=new Ws(r)).data)u=Number(c),l=s.data[u],h=s.a[u],e.Ed(l,h);e.Bb.close(a,t.byteLength);var d=e.Bb;return e.Fd(0==d.b?0:d.f/d.b,e.Bb.a),f.return(o(t))}))})),e.a.set(t,r),r}function wl(e,t){var n=this;this.c=e,this.b=e.objectStore(t),this.a=new _e,e.onabort=function(e){e.preventDefault(),n.a.reject()},e.onerror=function(e){e.preventDefault(),n.a.reject()},e.oncomplete=function(){n.a.resolve()}}function El(e,t){return new Promise((function(n,r){var i=e.b.openCursor();i.onerror=r,i.onsuccess=function(){var e;return A((function(r){if(1==r.a)return null==i.result?(n(),r.return()):(e=i.result,w(r,t(e.key,e.value,e),2));e.continue(),E(r)}))}}))}function _l(e){this.b=e,this.a=[]}function kl(e,t){return Sl(e,t,"readwrite")}function Sl(e,t,n){var r=new wl(n=e.b.transaction([t],n),t);return e.a.push(r),r.promise().then((function(){qe(e.a,r)}),(function(){qe(e.a,r)})),r}function xl(e,t,n){this.b=new _l(e),this.c=t,this.a=n}function Tl(e){return Promise.reject(new ye(be,9,9011,"Cannot add new value to "+e))}function Pl(e,t,n,r){t=(e=kl(e.b,t)).store();for(var i={},o=(n=u(n)).next();!o.done;i={Rb:i.Rb},o=n.next())i.Rb=o.value,t.delete(i.Rb).onsuccess=function(e){return function(){return r(e.Rb)}}(i);return e.promise()}function Ol(e,t,n){var r,i,o,a,s,c,l;return A((function(h){if(1==h.a){for(r=Sl(e.b,t,"readonly"),i=r.store(),o={},a=[],s={},c=u(n),l=c.next();!l.done;s={vb:s.vb,tb:s.tb},l=c.next())s.tb=l.value,s.vb=i.get(s.tb),s.vb.onsuccess=function(e){return function(){null==e.vb.result&&a.push(e.tb),o[e.tb]=e.vb.result}}(s);return w(h,r.promise(),2)}if(a.length)throw new ye(be,9,9012,"Could not find values for "+a);return h.return(n.map((function(e){return o[e]})))}))}function Cl(e){this.a=new _l(e)}function Il(){this.a=new Map}function Rl(e,t,n){if(!(e=e.a.get(t)))throw new ye(be,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new ye(be,9,9013,"Could not find cell with name "+n);return t}function Ll(e,t){Al.set(e,t)}Ke("http",pl,1),Ke("https",pl,1),vl.prototype.close=function(e,t){if(this.c.has(e)){var n=this.c.get(e);this.c.delete(e),this.f+=n,this.a+=t}},gl.prototype.destroy=function(){return this.D.destroy()},wl.prototype.abort=function(){var e=this;return A((function(t){if(1==t.a){try{e.c.abort()}catch(e){}return _(t,2),w(t,e.a,4)}if(2!=t.a)return S(t,0);x(t),E(t)}))},wl.prototype.store=function(){return this.b},wl.prototype.promise=function(){return this.a},_l.prototype.destroy=function(){return Promise.all(this.a.map((function(e){return e.abort()})))},(r=xl.prototype).destroy=function(){return this.b.destroy()},r.hasFixedKeySpace=function(){return!0},r.addSegments=function(){return Tl(this.c)},r.removeSegments=function(e,t){return Pl(this,this.c,e,t)},r.getSegments=function(e){var t,n=this;return A((function(r){return 1==r.a?w(r,Ol(n,n.c,e),2):(t=r.b,r.return(t.map((function(e){return n.qd(e)}))))}))},r.addManifests=function(){return Tl(this.a)},r.updateManifestExpiration=function(e,t){var n=kl(this.b,this.a),r=n.store();return r.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,r.put(n,e))},n.promise()},r.removeManifests=function(e,t){return Pl(this,this.a,e,t)},r.getManifests=function(e){var t,n=this;return A((function(r){return 1==r.a?w(r,Ol(n,n.a,e),2):(t=r.b,r.return(Promise.all(t.map((function(e){return n.Ab(e)})))))}))},r.getAllManifests=function(){var e,t,n=this;return A((function(r){return 1==r.a?(e=Sl(n.b,n.a,"readonly"),t=new Map,w(r,El(e,(function(e,r){var i;return A((function(o){if(1==o.a)return w(o,n.Ab(r),2);i=o.b,t.set(e,i),E(o)}))})),2)):3!=r.a?w(r,e.promise(),3):r.return(t)}))},r.qd=function(e){return e},r.Ab=function(e){return Promise.resolve(e)},r.add=function(e,t){var n,r,i,o,a,s,c,l=this;return A((function(h){if(1==h.a){for(n=kl(l.b,e),r=n.store(),i=[],o={},a=u(t),s=a.next();!s.done;o={Sb:o.Sb},s=a.next())c=s.value,o.Sb=r.add(c),o.Sb.onsuccess=function(e){return function(){i.push(e.Sb.result)}}(o);return w(h,n.promise(),2)}return h.return(i)}))},Cl.prototype.destroy=function(){return this.a.destroy()},Cl.prototype.getAll=function(){var e,t,n=this;return A((function(r){return 1==r.a?(e=Sl(n.a,"session-ids","readonly"),t=[],w(r,El(e,(function(e,n){t.push(n)})),2)):3!=r.a?w(r,e.promise(),3):r.return(t)}))},Cl.prototype.add=function(e){for(var t=kl(this.a,"session-ids"),n=t.store(),r=(e=u(e)).next();!r.done;r=e.next())n.add(r.value);return t.promise()},Cl.prototype.remove=function(e){var t,n=this;return A((function(r){return 1==r.a?w(r,El(t=kl(n.a,"session-ids"),(function(t,n,r){e.includes(n.sessionId)&&r.delete()})),2):w(r,t.promise(),0)}))},Il.prototype.destroy=function(){for(var e=[],t=u(this.a.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.a.clear(),Promise.all(e)},Il.prototype.init=function(){var e=this;Al.forEach((function(t,n){var r=t();r&&e.a.set(n,r)}));for(var t=[],n=u(this.a.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)},F("shaka.offline.StorageMuxer",Il),Il.unregister=function(e){Al.delete(e)},Il.register=Ll,Il.prototype.destroy=Il.prototype.destroy;var Al=new Map;function Ml(){xl.apply(this,arguments)}function Dl(e,t){!function(e){var t=e.streams.filter((function(e){return"audio"==e.contentType}));if(e=e.streams.filter((function(e){return"video"==e.contentType})),!t.every((function(e){return e.variantIds}))||!e.every((function(e){return e.variantIds}))){for(var n=u(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(n=u(e),r=n.next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){var i=n++,o=u(e);for(r=o.next();!r.done;r=o.next())r.value.variantIds.push(i)}if(!e.length&&t.length)for(i=n++,o=u(t),r=o.next();!r.done;r=o.next())r.value.variantIds.push(i);if(e.length&&t.length)for(t=u(t),r=t.next();!r.done;r=t.next())for(r=r.value,i=u(e),o=i.next();!o.done;o=i.next()){o=o.value;var a=n++;r.variantIds.push(a),o.variantIds.push(a)}}}(e);for(var n=u(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map((function(n){return function(e,t,n){var r=e.initSegmentUri?jl(e.initSegmentUri):null,i=t+e.presentationTimeOffset,o=t+n;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(e){var n=jl(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:o,timestampOffset:i}})),variantIds:e.variantIds,roles:[],audioSamplingRate:null,channelsCount:null,closedCaptions:null}}(n,e.startTime,t)}))}function jl(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new ye(be,9,9004,"Could not parse uri "+e)}function Nl(){xl.apply(this,arguments)}function Bl(e,t,n){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey}})),variantIds:e.variantIds,roles:[],audioSamplingRate:null,channelsCount:null,closedCaptions:null}}function Fl(){xl.apply(this,arguments)}function Ul(){this.h=this.f=this.c=this.b=this.a=this.g=null}function Hl(e,t,n,r){this.a=e,this.g=t,this.f=n,this.c=r,this.b=["offline:",e,"/",t,"/",n,"/",r].join("")}function ql(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var r=e[3];return r&&null!=t?new Hl(t,n,r,Number(e[4])):null}function zl(e,t){this.b=e,this.a=t}function Vl(e,t){var n=new Zr(null,0);n.wa(t.duration);var r=t.streams.filter((function(e){return"audio"==e.type})),i=t.streams.filter((function(e){return"video"==e.type}));r=function(e,t,n,r){for(var i=new Set,o=u(t),a=o.next();!a.done;a=o.next()){var s=u(a.value.variantIds);for(a=s.next();!a.done;a=s.next())i.add(a.value)}for(o=u(n),a=o.next();!a.done;a=o.next())for(s=u(a.value.variantIds),a=s.next();!a.done;a=s.next())i.add(a.value);for(o=new Map,i=u(i),a=i.next();!a.done;a=i.next())a=a.value,o.set(a,{id:a,language:"",primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0});for(t=u(t),i=t.next();!i.done;i=t.next())for(i=i.value,a=$l(e,i,r),s=u(i.variantIds),i=s.next();!i.done;i=s.next())(i=o.get(i.value)).language=a.language,i.primary=i.primary||a.primary,i.audio=a;for(n=u(n),t=n.next();!t.done;t=n.next())for(i=t.value,t=$l(e,i,r),a=u(i.variantIds),i=a.next();!i.done;i=a.next())(i=o.get(i.value)).primary=i.primary||t.primary,i.video=t;return o}(e,r,i,n),i=t.streams.filter((function(e){return"text"==e.type})).map((function(t){return $l(e,t,n)}));var o=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var a=u(r.values()),s=a.next();!s.done;s=a.next())(s=s.value).audio&&s.audio.encrypted&&(s.audio.drmInfos=o),s.video&&s.video.encrypted&&(s.video.drmInfos=o);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:i}}function $l(e,t,n){var r=t.segments.map((function(t){return function(e,t){var n=new Hl("segment",e.b,e.a,t.dataKey);return new Qr(t.startTime,t.endTime,(function(){return[n.toString()]}),0,null,null!=t.initSegmentKey?function(e,t){var n=new Hl("segment",e.b,e.a,t);return new Yr((function(){return[n.toString()]}),0,null)}(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd)}(e,t)}));return n.mb(r),{id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ti(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,closedCaptions:t.closedCaptions}}function Wl(){this.a=null}function Kl(){}function Gl(e){var t=ql(e);return t&&"manifest"==t.a?e=Te(e={uri:e,Gd:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):e=t&&"segment"==t.a?function(e,t){var n=new Il;return Te(void 0).U((function(){return n.init()})).U((function(){return Rl(n,t.ua(),t.ba())})).U((function(e){return e.getSegments([t.key()])})).U((function(e){return{uri:t,data:e[0].data,headers:{}}})).finally((function(){return n.destroy()}))}(t.key(),t):Se(new ye(be,1,9004,e)),e}function Xl(e,t,n){var r,i,o,a,s,c;return A((function(l){switch(l.a){case 1:r=[];for(var h=[],f=u(n),d=f.next();!d.done;d=f.next()){d=d.value;for(var p=!1,m=u(h),v=m.next();!v.done;v=m.next())if(Jl((v=v.value).info,d)){v.sessionIds.push(d.sessionId),p=!0;break}p||h.push({info:d,sessionIds:[d.sessionId]})}i=u(h),o=i.next();case 2:if(o.done){l.u(4);break}return a=o.value,s=function(e,t,n){var r,i;return A((function(o){switch(o.a){case 1:return r=new Xt({lb:t,onError:function(){},hc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),_(o,2),r.configure(e),w(o,function(e,t,n,r,i,o){var a=new Map;return(i={audioCapabilities:i,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t}).drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,initData:null,keyIds:null}],a.set(t,i),on(e,a)}(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:S(o,3);break;case 2:return x(o),w(o,r.destroy(),5);case 5:return o.return([]);case 3:return _(o,6),w(o,Qt(r),8);case 8:S(o,7);break;case 6:return x(o),w(o,r.destroy(),9);case 9:return o.return([]);case 7:return i=[],w(o,Promise.all(n.sessionIds.map((function(e){return A((function(t){return 1==t.a?(_(t,2),w(t,function(e,t){var n,r,i;return A((function(o){return 1==o.a?w(o,an(e,t),2):(n=o.b)?(r=[],(i=e.f.get(n))&&(i.ya=new _e,r.push(i.ya)),r.push(n.remove()),w(o,Promise.all(r),0)):o.return()}))}(r,e),4)):2!=t.a?(i.push(e),S(t,0)):(x(t),void E(t))}))}))),10);case 10:return w(o,r.destroy(),11);case 11:return o.return(i)}}))}(e,t,a),w(l,s,5);case 5:c=l.b,r=r.concat(c),o=i.next(),l.u(2);break;case 4:return l.return(r)}}))}function Jl(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&ze(e.audioCapabilities,t.audioCapabilities,n)&&ze(e.videoCapabilities,t.videoCapabilities,n)}function Yl(e,t){var n=Vl(new zl(e.ua(),e.ba()),t),r=t.appMetadata||{};return n=Ql(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r}}function Ql(e){for(var t=[],n=function(e){return e.filter((function(e){return Pr(e)}))}(e.variants),r=(n=u(n)).next();!r.done;r=n.next())t.push(_r(r.value));for(n=(e=u(e.textStreams)).next();!n.done;n=e.next())t.push(kr(n.value));return t}function Zl(){this.a={}}function eh(e,t){var n=e.a[t];return null==n&&(n=0),n}function th(e){var t=this;if(e&&e.constructor!=Ro)throw new ye(be,9,9008);this.N=this.i=null,e?(this.i=e.i,this.N=e.Db()):(this.i=_o(),this.N=new We),this.lc=[],this.Jb=[],this.Wc=[],this.a=new Map,this.a.set(null,Promise.resolve(null)),this.b=new Map;var n=!e;this.D=new et((function(){var e,r,i,o,a;return A((function(s){switch(s.a){case 1:return w(s,Promise.all(t.Wc.map((function(e){return yl(e)}))),2);case 2:for(e=function(){},r=[],i=u(t.Jb),o=i.next();!o.done;o=i.next())a=o.value,r.push(a.then(e,e));return w(s,Promise.all(r),3);case 3:if(!n){s.u(4);break}return w(s,t.N.destroy(),4);case 4:t.i=null,t.N=null,E(s)}}))}))}function nh(){if(Tt())e:{for(var e=u(Al.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function rh(e,t){for(var n=[],r=u(e.streams),i=r.next();!i.done;i=r.next())i=i.value,t&&"video"==i.type?n.push({contentType:kt(i.mimeType,i.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=i.type||n.push({contentType:kt(i.mimeType,i.codecs),robustness:e.drmInfo.audioRobustness});return n}function ih(e,t,n){return A((function(r){return w(r,function(e,t,n,r){var i,o,a;return A((function(s){return 1==s.a?r.drmInfo?(i=function(e){var t=Array.from(e.a.keys());if(!t.length)throw new ye(be,9,9e3,"No supported storage mechanisms found");return e.a.get(t[0]).getEmeSessionCell()}(n),o=r.sessionIds.map((function(e){return{sessionId:e,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:rh(r,!1),videoCapabilities:rh(r,!0)}})),w(s,Xl(t,e,o),2)):s.return():3!=s.a?(a=s.b,w(s,i.remove(a),3)):w(s,i.add(o.filter((function(e){return!a.includes(e.sessionId)}))),0)}))}(e.N,e.i.drm,n,t),0)}))}function oh(e,t,n){function r(){}var i=function(e){for(var t=[],n=(e=u(e.streams)).next();!n.done;n=e.next())for(var r=(n=u(n.value.segments)).next();!r.done;r=n.next())null!=(r=r.value).initSegmentKey&&t.push(r.initSegmentKey),t.push(r.dataKey);return t}(n);return Yl(t,n),Promise.all([e.removeSegments(i,r),e.removeManifests([t.key()],r)])}function ah(e,t,n,r,i,o,a){var s={id:o.id,originalId:o.originalId,primary:o.primary,type:o.type,mimeType:o.mimeType,codecs:o.codecs,frameRate:o.frameRate,pixelAspectRatio:o.pixelAspectRatio,kind:o.kind,language:o.language,label:o.label,width:o.width||null,height:o.height||null,encrypted:o.encrypted,keyIds:o.keyIds,segments:[],variantIds:[],roles:o.roles,channelsCount:o.channelsCount,audioSamplingRate:o.audioSamplingRate,closedCaptions:o.closedCaptions},c=o.id;return function(e,t,n){if(null!=(t=e.segmentIndex.find(t)))for(var r=e.segmentIndex.get(t);r;)n(r),r=e.segmentIndex.get(++t)}(o,i.presentationTimeline.Pa(),(function(i){var u=function(e,t,n,r,i,o,a,s){return e.a.has(a)?e.a.get(a):(s=Hi(a.c(),a.b,a.a,s.streaming.retryParameters),t=bl(t,n,s,.5*eh(o,r),!0,(function(t){var n;return A((function(r){return 1==r.a?w(r,i.addSegments([{data:t}]),2):(n=r.b,e.lc.push(n[0]),r.return(n[0]))}))})),e.a.set(a,t),t)}(e,t,c,o.id,n,r,i.f,a),l=function(e,t,n,r,i,o,a,s){var c=[a.c()[0],a.b,a.a].join("-");return e.b.has(c)?e.b.get(c):(s=Hi(a.c(),a.b,a.a,s.streaming.retryParameters),t=bl(t,n,s,function(e,t,n){return n=n.endTime-n.startTime,eh(e,t)*n}(o,r,a),!1,(function(t){var n;return A((function(r){return 1==r.a?w(r,i.addSegments([{data:t}]),2):(n=r.b,e.lc.push(n[0]),r.return(n[0]))}))})),e.b.set(c,t),t)}(e,t,c,o.id,n,r,i,a);!function(e,t,n){tt(e.D);var r=(e.a.get(t)||Promise.resolve()).then((function(){return A((function(e){return w(e,n(),0)}))}));e.a.set(t,r)}(t,c,(function(){var e,t;return A((function(n){return 1==n.a?w(n,u,2):3!=n.a?(e=n.b,w(n,l,3)):(t=n.b,s.segments.push({initSegmentKey:e,startTime:i.startTime,endTime:i.endTime,appendWindowStart:i.appendWindowStart,appendWindowEnd:i.appendWindowEnd,timestampOffset:i.timestampOffset,dataKey:t}),void E(n))}))}))})),s}function sh(e){if(e.D.a)throw new ye(be,9,7001)}function ch(){if(!nh())throw new ye(be,9,9e3)}function uh(e,t){return A((function(n){return 1==n.a?(e.Jb.push(t),k(n),w(n,t,4)):2!=n.a?n.return(n.b):(T(n),qe(e.Jb,t),P(n,0))}))}function lh(e){for(var t=new Set,n=u(e.textStreams),r=n.next();!r.done;r=n.next())t.add(r.value);for(n=(e=u(e.variants)).next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}v(Ml,xl),Ml.prototype.updateManifestExpiration=function(e,t){var n,r,i,o=this;return A((function(a){return n=kl(o.b,o.a),r=n.store(),i=new _e,r.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,r.put(n),i.resolve()):i.reject(new ye(be,9,9012,"Could not find values for "+e))},w(a,Promise.all([n.promise(),i]),0)}))},Ml.prototype.Ab=function(e){var t,n,r,i,o,a;return A((function(s){if(1==s.a){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime,o=Dl(e.periods[n],i),t.push(o);return w(s,Nc(t),2)}return a=s.b,s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:a,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata})}))},Ml.prototype.qd=function(e){return{data:e.data}},v(Nl,xl),Nl.prototype.Ab=function(e){var t,n,r,i,o,a;return A((function(s){if(1==s.a){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime;for(var c=e.periods[n],l=[],h=u(c.streams),f=h.next();!f.done;f=h.next())0!=(f=f.value).variantIds.length&&l.push(Bl(f,c.startTime,c.startTime+i));o=l,t.push(o)}return w(s,Nc(t),2)}return a=s.b,s.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:a})}))},v(Fl,xl),Fl.prototype.hasFixedKeySpace=function(){return!1},Fl.prototype.addSegments=function(e){return this.add(this.c,e)},Fl.prototype.addManifests=function(e){return this.add(this.a,e)},Fl.prototype.Ab=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(r=Ul.prototype).init=function(){var t=this,n=new _e,r=e.indexedDB.open("shaka_offline_db",5);return r.onsuccess=function(){var e=r.result;t.g=e;var i=e.objectStoreNames;i=i.contains("manifest")&&i.contains("segment")?new Ml(e,"segment","manifest"):null,t.a=i,i=(i=e.objectStoreNames).contains("manifest-v2")&&i.contains("segment-v2")?new Nl(e,"segment-v2","manifest-v2"):null,t.b=i,i=(i=e.objectStoreNames).contains("manifest-v3")&&i.contains("segment-v3")?new Nl(e,"segment-v3","manifest-v3"):null,t.c=i,i=(i=e.objectStoreNames).contains("manifest-v5")&&i.contains("segment-v5")?new Fl(e,"segment-v5","manifest-v5"):null,t.f=i,e=e.objectStoreNames.contains("session-ids")?new Cl(e):null,t.h=e,n.resolve()},r.onupgradeneeded=function(){for(var e=r.result,t=u(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},r.onerror=function(e){n.reject(new ye(be,9,9001,r.error)),e.preventDefault()},n},r.destroy=function(){var e=this;return A((function(t){switch(t.a){case 1:if(!e.a){t.u(2);break}return w(t,e.a.destroy(),2);case 2:if(!e.b){t.u(4);break}return w(t,e.b.destroy(),4);case 4:if(!e.c){t.u(6);break}return w(t,e.c.destroy(),6);case 6:if(!e.f){t.u(8);break}return w(t,e.f.destroy(),8);case 8:if(!e.h){t.u(10);break}return w(t,e.h.destroy(),10);case 10:e.g&&e.g.close(),E(t)}}))},r.getCells=function(){var e=new Map;return this.a&&e.set("v1",this.a),this.b&&e.set("v2",this.b),this.c&&e.set("v3",this.c),this.f&&e.set("v5",this.f),e},r.getEmeSessionCell=function(){return this.h},r.erase=function(){var t=this;return A((function(n){switch(n.a){case 1:if(!t.a){n.u(2);break}return w(n,t.a.destroy(),2);case 2:if(!t.b){n.u(4);break}return w(n,t.b.destroy(),4);case 4:if(!t.c){n.u(6);break}return w(n,t.c.destroy(),6);case 6:if(!t.f){n.u(8);break}return w(n,t.f.destroy(),8);case 8:return t.g&&t.g.close(),w(n,function(){var t=new _e,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new ye(be,9,9001,n.error)),e.preventDefault()},t}(),10);case 10:return t.g=null,t.a=null,t.b=null,t.c=null,t.f=null,w(n,t.init(),0)}}))},Ll("idb",(function(){return e.indexedDB?new Ul:null})),Hl.prototype.ua=function(){return this.g},Hl.prototype.ba=function(){return this.f},Hl.prototype.key=function(){return this.c},Hl.prototype.toString=function(){return this.b},(r=Wl.prototype).configure=function(){},r.start=function(e){var t,n,r,i,o,a=this;return A((function(s){switch(s.a){case 1:if(t=ql(e),a.a=t,null==t||"manifest"!=t.a)throw new ye(be,1,9004,e);return n=new Il,k(s),w(s,n.init(),4);case 4:return w(s,Rl(n,t.ua(),t.ba()),5);case 5:return w(s,s.b.getManifests([t.key()]),6);case 6:return r=s.b,i=r[0],o=new zl(t.ua(),t.ba()),s.return(Vl(o,i));case 2:return T(s),w(s,n.destroy(),7);case 7:P(s,0)}}))},r.stop=function(){return Promise.resolve()},r.update=function(){},r.onExpirationUpdated=function(e,t){var n,r,i,o,a,s,c,u=this;return A((function(l){switch(l.a){case 1:return n=u.a,r=new Il,_(l,2,3),w(l,r.init(),5);case 5:return w(l,Rl(r,n.ua(),n.ba()),6);case 6:return w(l,(i=l.b).getManifests([n.key()]),7);case 7:if(o=l.b,a=o[0],s=a.sessionIds.includes(e),c=null==a.expiration||a.expiration>t,!s||!c){l.u(3);break}return w(l,i.updateManifestExpiration(n.key(),t),3);case 3:return T(l),w(l,r.destroy(),10);case 10:P(l,0);break;case 2:x(l),l.u(3)}}))},Kr["application/x-offline-manifest"]=function(){return new Wl},F("shaka.offline.OfflineScheme",Kl),Kl.plugin=Gl,Ke("offline",Gl),(r=th.prototype).destroy=function(){return this.D.destroy()},r.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=wo(e,t)),e.manifest&&e.manifest.dash&&"defaultPresentationDelay"in e.manifest.dash&&(lt("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),e.manifest.defaultPresentationDelay=e.manifest.dash.defaultPresentationDelay,delete e.manifest.dash.defaultPresentationDelay),ko(this.i,e)},r.getConfiguration=function(){var e=_o();return ko(e,this.i,_o()),e},r.Db=function(){return this.N},r.store=function(e,t,n){var r=this,i=this.getConfiguration(),o=new gl(this.N);this.Wc.push(o);var a=new ke(t=function(e,t,n,r,i,o){var a,s,c,l,h,f,d,p,m,v;return A((function(g){switch(g.a){case 1:return ch(),s=a=null,c=new Il,h=l=null,_(g,2,3),w(g,r(),5);case 5:return a=g.b,w(g,function(e,t,n,r){var i,o,a,s,c;return A((function(u){if(1==u.a)return i=null,o=e.N,a={networkingEngine:o,filter:function(){return Promise.resolve()},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){i=e}},n.configure(r.manifest),sh(e),w(u,n.start(t,a),2);if(3!=u.a)return s=u.b,sh(e),c=lh(s),w(u,Promise.all(Y(c,(function(e){return e.createSegmentIndex()}))),3);if(sh(e),i)throw i;return u.return(s)}))}(e,t,a,i),6);case 6:if(f=g.b,sh(e),!(!f.presentationTimeline.S()&&!f.presentationTimeline.Sa()))throw new ye(be,9,9005,t);return w(g,function(e,t,n,r){var i;return A((function(o){switch(o.a){case 1:return(i=new Xt({lb:e.N,onError:n,hc:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(r.drm),w(o,function(e,t,n){return e.l=[],e.w=n,Yt(e,t)}(i,t.variants,r.offline.usePersistentLicense),2);case 2:return w(o,Qt(i),3);case 3:return w(o,Zt(i),4);case 4:return o.return(i)}}))}(e,f,(function(e){h=h||e}),i),7);case 7:if(s=g.b,sh(e),h)throw h;return w(g,e.fb(f,s,i),8);case 8:return w(g,c.init(),9);case 9:return sh(e),w(g,function(e){var t=null;if(e.a.forEach((function(e,n){e.getCells().forEach((function(e,r){e.hasFixedKeySpace()||t||(t={path:{ua:n,ba:r},ba:e})}))})),t)return t;throw new ye(be,9,9013,"Could not find a cell that supports add-operations")}(c),10);case 10:return l=g.b,sh(e),w(g,function(e,t,n,r,i,o,a,s){var c,l,h,f,d,p,m,v,g,y;return A((function(b){switch(b.a){case 1:return c=function(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=Ql(t),appMetadata:n}}(i,r,o),l=a.offline.progressCallback,function(e,t,n){e.Fd=t,e.Ed=n}(s,(function(e,t){c.size=t,l(c,e)}),(function(e,t){d&&a.offline.usePersistentLicense&&p==t&&en(n,"cenc",e)})),h=r.variants.some((function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t})),f=r.variants.some((function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some((function(e){return e.initData&&e.initData.length}))})),p=null,(d=h&&!f)&&(m=n.c,p=hh.get(m.keySystem)),k(b),g=v=function(e,t,n,r,i,o,a,s){for(var c=new Zl,l=u(i.variants),h=l.next();!h.done;h=l.next()){var f=c,d=(h=h.value).audio,p=h.video;if(d&&!p&&(f.a[d.id]=d.bandwidth||h.bandwidth),!d&&p&&(f.a[p.id]=p.bandwidth||h.bandwidth),d&&p){var m=d.bandwidth||393216,v=p.bandwidth||h.bandwidth-m;0>=v&&(v=h.bandwidth),f.a[d.id]=m,f.a[p.id]=v}}for(l=u(i.textStreams),f=l.next();!f.done;f=l.next())c.a[f.value.id]=52;for(f=lh(i),l=new Map,f=u(f),h=f.next();!h.done;h=f.next())h=h.value,d=ah(e,t,n,c,i,h,s),l.set(h.id,d);for(e=u(i.variants),h=e.next();!h.done;h=e.next())(t=h.value).audio&&l.get(t.audio.id).variantIds.push(t.id),t.video&&l.get(t.video.id).variantIds.push(t.id);return e=Array.from(l.values()),s=s.offline.usePersistentLicense,(t=r.c)&&s&&(t.initData=[]),{creationTime:Date.now(),originalManifestUri:o,duration:i.presentationTimeline.getDuration(),size:0,expiration:r.Cb(),streams:e,sessionIds:s?rn(r):[],drmInfo:t,appMetadata:a}}(e,s,t,n,r,i,o,a),w(b,function(e){return A((function(t){return 1==t.a?w(t,Promise.all(e.a.values()),2):t.return(e.Bb.a)}))}(s),4);case 4:if(g.size=b.b,v.expiration=n.Cb(),y=rn(n),v.sessionIds=a.offline.usePersistentLicense?y:[],h&&a.offline.usePersistentLicense&&!y.length)throw new ye(be,9,9007);return b.return(v);case 2:return T(b),w(b,s.destroy(),5);case 5:P(b,0)}}))}(e,l.ba,s,f,t,n,i,o),11);case 11:if(d=g.b,sh(e),h)throw h;return w(g,l.ba.addManifests([d]),12);case 12:return p=g.b,sh(e),m=new Hl("manifest",l.path.ua,l.path.ba,p[0]),g.return(Yl(m,d));case 3:return T(g),e.lc=[],w(g,c.destroy(),13);case 13:if(!a){g.u(14);break}return w(g,a.stop(),14);case 14:if(!s){g.u(16);break}return w(g,s.destroy(),16);case 16:P(g,0);break;case 2:if(v=x(g),!l){g.u(18);break}return w(g,l.ba.removeSegments(e.lc,(function(){})),18);case 18:throw h||v}}))}(this,e,t||{},(function(){var t;return A((function(o){return 1==o.a?w(o,$r(e,r.N,i.manifest.retryParameters,n||null),2):(t=o.b,o.return(gt(t)))}))}),i,o),(function(){return yl(o)}));return a.finally((function(){qe(r.Wc,o)})),a.then=function(e){return lt("shaka.offline.Storage.store.then","Storage operations now return a shaka.util.AbortableOperation, rather than a promise.  Please update to conform to this new API; you can use the |chain| method instead."),a.promise.then(e)},function(e,t){var n=t.promise;return e.Jb.push(n),t.finally((function(){qe(e.Jb,n)}))}(this,a)},r.we=function(){return lt("shaka.offline.Storage.getStoreInProgress","Multiple concurrent downloads are now supported."),!1},r.fb=function(e,t,n){var r,i,o,a,s,c,l,h,f,d,p,m,v,g,y;return A((function(b){if(1==b.a){for(r={width:1/0,height:1/0},function(e,t,n){e.variants=e.variants.filter((function(e){return wr(e,t,n)}))}(e,n.restrictions,r),function(e){e.variants=e.variants.filter((function(e){var t=!0;return e.audio&&(t=t&&Jn(e.audio)),e.video&&(t=t&&Jn(e.video)),t}))}(e),function(e,t){e.variants=e.variants.filter((function(e){return fn(t,e)}))}(e,t),i=[],o=n.preferredAudioChannelCount,br(e,o),a=u(e.variants),s=a.next();!s.done;s=a.next())c=s.value,i.push(_r(c));for(l=u(e.textStreams),h=l.next();!h.done;h=l.next())f=h.value,i.push(kr(f));return w(b,n.offline.trackSelectionCallback(i),2)}for(d=b.b,p=new Set,m=new Set,v=u(d),g=v.next();!g.done;g=v.next())"variant"==(y=g.value).type&&p.add(y.id),"text"==y.type&&m.add(y.id);e.variants=e.variants.filter((function(e){return p.has(e.id)})),e.textStreams=e.textStreams.filter((function(e){return m.has(e.id)})),function(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var n=u(t),r=n.next();!r.done;r=n.next())for(var i=(r=u(t)).next();!i.done;i=r.next());for(t=u(e),n=t.next();!n.done;n=t.next())for(n=u(e),r=n.next();!r.done;r=n.next());}(e),E(b)}))},r.remove=function(e){return uh(this,function(e,t){var n,r,i,o,a,s;return A((function(c){switch(c.a){case 1:if(ch(),null==(n=ql(t))||"manifest"!=n.a)throw new ye(be,9,9004,t);return r=n,i=new Il,k(c),w(c,i.init(),4);case 4:return w(c,Rl(i,r.ua(),r.ba()),5);case 5:return w(c,(o=c.b).getManifests([r.key()]),6);case 6:return a=c.b,s=a[0],w(c,Promise.all([ih(e,s,i),oh(o,r,s)]),2);case 2:return T(c),w(c,i.destroy(),8);case 8:P(c,0)}}))}(this,e))},r.Ne=function(){return uh(this,function(e){var t,n,r,i,o,a,s,c,l,h;return A((function(f){switch(f.a){case 1:return ch(),t=e.N,n=e.i.drm,r=new Il,i=!1,k(f),w(f,r.init(),4);case 4:o=[],function(e,t){e.a.forEach((function(e){t(e.getEmeSessionCell())}))}(r,(function(e){return o.push(e)})),a=u(o),s=a.next();case 5:if(s.done){f.u(2);break}return w(f,(c=s.value).getAll(),8);case 8:return l=f.b,w(f,Xl(n,t,l),9);case 9:return h=f.b,w(f,c.remove(h),10);case 10:h.length!=l.length&&(i=!0),s=a.next(),f.u(5);break;case 2:return T(f),w(f,r.destroy(),11);case 11:P(f,3);break;case 3:return f.return(!i)}}))}(this))},r.list=function(){return uh(this,A((function(r){switch(r.a){case 1:return ch(),e=[],t=new Il,k(r),w(r,t.init(),4);case 4:return n=Promise.resolve(),function(e,t){e.a.forEach((function(e,n){e.getCells().forEach((function(e,r){t({ua:n,ba:r},e)}))}))}(t,(function(t,r){n=n.then((function(){return A((function(n){if(1==n.a)return w(n,r.getAllManifests(),2);n.b.forEach((function(n,r){var i=Yl(new Hl("manifest",t.ua,t.ba,r),n);e.push(i)})),E(n)}))}))})),w(r,n,2);case 2:return T(r),w(r,t.destroy(),6);case 6:P(r,3);break;case 3:return r.return(e)}})));var e,t,n},F("shaka.offline.Storage",th),th.deleteAll=function(){var e;return A((function(t){return 1==t.a?(e=new Il,k(t),w(t,function(e){var t,n;return A((function(r){return 1==r.a?(t=Array.from(e.a.values()),(n=0<t.length)||Al.forEach((function(e){(e=e())&&t.push(e)})),w(r,Promise.all(t.map((function(e){return e.erase()}))),2)):n?r.u(0):w(r,Promise.all(t.map((function(e){return e.destroy()}))),0)}))}(e),2)):5!=t.a?(T(t),w(t,e.destroy(),5)):P(t,0)}))},th.prototype.list=th.prototype.list,th.prototype.removeEmeSessions=th.prototype.Ne,th.prototype.remove=th.prototype.remove,th.prototype.getStoreInProgress=th.prototype.we,th.prototype.store=th.prototype.store,th.prototype.getNetworkingEngine=th.prototype.Db,th.prototype.getConfiguration=th.prototype.getConfiguration,th.prototype.configure=th.prototype.configure,th.prototype.destroy=th.prototype.destroy,th.support=nh;var hh=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function fh(){}function dh(e,t){for(var n={priority:t||0,Yd:e},r=u(Z(ph)),i=r.next();!i.done;i=r.next()){var o=(i=i.value).Y;if(i.item.priority<n.priority)return void ph.splice(o,0,n)}ph.push(n)}Ua.offline=nh,F("shaka.polyfill",fh),fh.register=dh,fh.installAll=function(){for(var e=u(ph),t=e.next();!t.done;t=e.next()){t=t.value;try{t.Yd()}catch(e){W("Error installing polyfill!",e)}}};var ph=[];function mh(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"==typeof Event)var n=new Event(t,e);else(n=document.createEvent("Event")).initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(n)}function vh(e,t,n){if("input"==e)switch(this.type){case"range":e="change"}HTMLInputElement.prototype.originalAddEventListener.call(this,e,t,n)}function gh(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(t){for(var n=[],r=0;r<arguments.length;++r)n[r]=arguments[r];return(n=e.apply(this,n)).abort=function(){},n}}function yh(e,t){try{var n=new Eh(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function bh(e){var t=this.mediaKeys;return t&&t!=e&&kh(t,null),delete this.mediaKeys,(this.mediaKeys=e)?kh(e,this):Promise.resolve()}function wh(e){if(Me(e=Ae(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Bt(e=jt(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=Le(e),this.dispatchEvent(t)}function Eh(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(var n=u(t),r=n.next();!r.done;r=n.next()){var i=r.value;if("required"==i.persistentState)r=null;else{r={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:i.initDataTypes,sessionTypes:["temporary"],label:i.label};var o=!1,a=!1;if(i.audioCapabilities)for(var s=u(i.audioCapabilities),c=s.next();!c.done;c=s.next())(c=c.value).contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(r.audioCapabilities.push(c),a=!0));if(i.videoCapabilities)for(c=(i=u(i.videoCapabilities)).next();!c.done;c=i.next())(s=c.value).contentType&&(o=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(r.videoCapabilities.push(s),a=!0));o||(a=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),r=a?r:null}if(r)return void(this.a=r)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function _h(e){this.a=new WebKitMediaKeys(e),this.b=new nt}function kh(e,t){if(e.b.Wa(),!t)return Promise.resolve();e.b.o(t,"webkitneedkey",wh);try{return oi(t,HTMLMediaElement.HAVE_METADATA,e.b,(function(){t.webkitSetMediaKeys(e.a)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function Sh(e){Be.call(this),this.f=null,this.g=e,this.c=this.a=null,this.b=new nt,this.sessionId="",this.expiration=NaN,this.closed=new _e,this.keyStatuses=new Th}function xh(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,n=new je("keystatuseschange"),e.dispatchEvent(n)}function Th(){this.size=0,this.a=void 0}function Ph(e,t){try{var n=new Ch(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Oh(e){if(e.initData){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",t.initData=Le(function(e){if(!e)return e;var t=new Ws(e);if(1>=t.data.length)return e;e=[];for(var n={},r=(t=u(t.data)).next();!r.done;n={Pb:n.Pb},r=t.next())n.Pb=r.value,e.some(function(e){return function(t){return Ie(t,e.Pb)}}(n))||e.push(n.Pb);return Gt.apply(qt,l(e))}(e.initData)),this.dispatchEvent(t)}}function Ch(e,t){this.keySystem=e;for(var n=!1,r=u(t),i=r.next();!i.done;i=r.next()){var o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(i=i.value).initDataTypes,sessionTypes:["temporary"],label:i.label},a=!1;if(i.audioCapabilities)for(var s=u(i.audioCapabilities),c=s.next();!c.done;c=s.next())(c=c.value).contentType&&(a=!0,MSMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(o.audioCapabilities.push(c),n=!0));if(i.videoCapabilities)for(c=(s=u(i.videoCapabilities)).next();!c.done;c=s.next())(c=c.value).contentType&&(a=!0,MSMediaKeys.isTypeSupported(this.keySystem,c.contentType.split(";")[0])&&(o.videoCapabilities.push(c),n=!0));if(a||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==i.persistentState&&(n=!1),n)return void(this.a=o)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Ih(e){var t=this.mediaKeys;return t&&t!=e&&Lh(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Lh(e,this):Promise.resolve()}function Rh(e){this.a=new MSMediaKeys(e),this.b=new nt}function Lh(e,t){if(e.b.Wa(),!t)return Promise.resolve();e.b.o(t,"msneedkey",Oh);try{return oi(t,HTMLMediaElement.HAVE_METADATA,e.b,(function(){t.msSetMediaKeys(e.a)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function Ah(e){Be.call(this),this.f=null,this.g=e,this.c=this.a=null,this.b=new nt,this.sessionId="",this.expiration=NaN,this.closed=new _e,this.keyStatuses=new Dh}function Mh(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,n=new je("keystatuseschange"),e.dispatchEvent(n)}function Dh(){this.size=0,this.a=void 0}function jh(){return Promise.reject(Error("The key system specified is not supported."))}function Nh(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Bh(){throw new TypeError("Illegal constructor.")}function Fh(){throw this.keySystem="",new TypeError("Illegal constructor.")}function Uh(e){return Yh?Yh+e.charAt(0).toUpperCase()+e.slice(1):e}function Hh(e,t){try{var n=new zh(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function qh(e){var t=this.mediaKeys;return t&&t!=e&&$h(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&$h(e,this),Promise.resolve()}function zh(e,t){this.a=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.a="webkit-org.w3.clearkey",n=!1);var r=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video");for(var o=u(t),a=o.next();!a.done;a=o.next()){var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(a=a.value).initDataTypes,sessionTypes:["temporary"],label:a.label},c=!1;if(a.audioCapabilities)for(var l=u(a.audioCapabilities),h=l.next();!h.done;h=l.next())(h=h.value).contentType&&(c=!0,i.canPlayType(h.contentType.split(";")[0],this.a)&&(s.audioCapabilities.push(h),r=!0));if(a.videoCapabilities)for(h=(l=u(a.videoCapabilities)).next();!h.done;h=l.next())(h=h.value).contentType&&(c=!0,i.canPlayType(h.contentType,this.a)&&(s.videoCapabilities.push(h),r=!0));if(c||(r=i.canPlayType("video/mp4",this.a)||i.canPlayType("video/webm",this.a)),"required"==a.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):r=!1),r)return void(this.b=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Vh(e){this.g=e,this.a=null,this.b=new nt,this.c=[],this.f=new Map}function $h(e,t){e.a=t,e.b.Wa();var n=Yh;t&&(e.b.o(t,n+"needkey",(function(t){var n=document.createEvent("CustomEvent");n.initCustomEvent("encrypted",!1,!1,null),n.initDataType="cenc",n.initData=Le(t.initData),e.a.dispatchEvent(n)})),e.b.o(t,n+"keymessage",(function(t){var n=Wh(e,t.sessionId);n&&(t=new je("message",{messageType:null==n.keyStatuses.a?"licenserequest":"licenserenewal",message:t.message}),n.b&&(n.b.resolve(),n.b=null),n.dispatchEvent(t))})),e.b.o(t,n+"keyadded",(function(t){(t=Wh(e,t.sessionId))&&(Xh(t,"usable"),t.a&&t.a.resolve(),t.a=null)})),e.b.o(t,n+"keyerror",(function(t){var n=Wh(e,t.sessionId);n&&n.handleError(t)})))}function Wh(e,t){var n=e.f.get(t);return n||((n=e.c.shift())?(n.sessionId=t,e.f.set(t,n),n):null)}function Kh(e,t,n){Be.call(this),this.f=e,this.h=!1,this.a=this.b=null,this.c=t,this.g=n,this.sessionId="",this.expiration=NaN,this.closed=new _e,this.keyStatuses=new Jh}function Gh(e,t,n){if(e.h)return Promise.reject(Error("The session is already initialized."));e.h=!0;try{if("persistent-license"==e.g)if(n)var r=Ae(Bt("LOAD_SESSION|"+n));else{var i=Bt("PERSISTENT|");r=Gt(i,t)}else r=Ae(t)}catch(e){return Promise.reject(e)}e.b=new _e;var o=Uh("generateKeyRequest");try{e.f[o](e.c,r)}catch(t){if("InvalidStateError"!=t.name)return e.b=null,Promise.reject(t);new me((function(){try{e.f[o](e.c,r)}catch(t){e.b.reject(t),e.b=null}})).R(.01)}return e.b}function Xh(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,n=new je("keystatuseschange"),e.dispatchEvent(n)}function Jh(){this.size=0,this.a=void 0}dh((function(){Yf()}),-1),dh((function(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",mh),document.addEventListener("webkitfullscreenerror",mh),document.addEventListener("mozfullscreenchange",mh),document.addEventListener("mozfullscreenerror",mh),document.addEventListener("MSFullscreenChange",mh),document.addEventListener("MSFullscreenError",mh)}})),dh((function(){var t=!1;if(It("CrKey"))t=!0;else try{e.indexedDB&&(t=!1)}catch(e){t=!0}t&&delete e.indexedDB})),dh((function(){It("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=vh)})),dh((function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})})),dh((function(){})),dh((function(){var t=Ct();e.MediaSource&&(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?function(){var e=MediaSource.isTypeSupported,t=/^dv(?:h[e1]|a[v1])\./;MediaSource.isTypeSupported=function(n){for(var r=n.split(/ *; */),i=r.shift(),o={},a=(r=u(r)).next();!a.done;a=r.next())o[(a=a.value.split("="))[0]]=a[1].replace(/"(.*)"/,"$1");if(!(r=o.codecs))return e(n);var s=!1,c=!1;for(var l in n=r.split(",").filter((function(e){return t.test(e)&&(c=!0),/^(hev|hvc)1\.2/.test(e)&&(s=!0),!0})),c&&(s=!1),o.codecs=n.join(","),s&&(o.eotf="smpte2084"),o)i+="; "+l+'="'+o[l]+'"';return cast.__platform__.canDisplayType(i)}}():t?(function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1].toLowerCase()&&e(t)}}(),12>=t?(gh(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):gh()):(It("Tizen 2")||It("Tizen 3")||It("Tizen 4"))&&function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=St(t)[0]&&e(t)}}())})),Eh.prototype.createMediaKeys=function(){var e=new _h(this.keySystem);return Promise.resolve(e)},Eh.prototype.getConfiguration=function(){return this.a},_h.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Sh(this.a,e)},_h.prototype.setServerCertificate=function(){return Promise.resolve(!1)},v(Sh,Be),(r=Sh.prototype).generateRequest=function(e,t){var n=this;this.a=new _e;try{var r=this.g.createSession("video/mp4",Ae(t));this.f=r,this.sessionId=r.sessionId||"",this.b.o(this.f,"webkitkeymessage",(function(e){n.a&&(n.a.resolve(),n.a=null),e=new je("message",{messageType:null==n.keyStatuses.a?"license-request":"license-renewal",message:Le(e.message)}),n.dispatchEvent(e)})),this.b.o(r,"webkitkeyadded",(function(){n.c&&(xh(n,"usable"),n.c.resolve(),n.c=null)})),this.b.o(r,"webkitkeyerror",(function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.f.error,null!=n.a)n.a.reject(e),n.a=null;else if(null!=n.c)n.c.reject(e),n.c=null;else switch(n.f.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:xh(n,"output-not-allowed");break;default:xh(n,"internal-error")}})),xh(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},r.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},r.update=function(e){this.c=new _e;try{this.f.update(Ae(e))}catch(e){this.c.reject(e)}return this.c},r.close=function(){try{this.f.close(),this.closed.resolve(),this.b.Wa()}catch(e){this.closed.reject(e)}return this.closed},r.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(r=Th.prototype).forEach=function(e){this.a&&e(this.a,yn.value())},r.get=function(e){if(this.has(e))return this.a},r.has=function(e){var t=yn.value();return!(!this.a||!Ie(e,t))},r.entries=function(){},r.keys=function(){},r.values=function(){},dh((function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=bh,e.MediaKeys=_h,e.MediaKeySystemAccess=Eh,navigator.requestMediaKeySystemAccess=yh)})),Ch.prototype.createMediaKeys=function(){var e=new Rh(this.keySystem);return Promise.resolve(e)},Ch.prototype.getConfiguration=function(){return this.a},Rh.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Ah(this.a,e)},Rh.prototype.setServerCertificate=function(){return Promise.resolve(!1)},v(Ah,Be),(r=Ah.prototype).generateRequest=function(e,t){var n=this;this.a=new _e;try{this.f=this.g.createSession("video/mp4",Ae(t),null),this.b.o(this.f,"mskeymessage",(function(e){n.a&&(n.a.resolve(),n.a=null),e=new je("message",{messageType:null==n.keyStatuses.a?"license-request":"license-renewal",message:Le(e.message)}),n.dispatchEvent(e)})),this.b.o(this.f,"mskeyadded",(function(){n.a?(Mh(n,"usable"),n.a.resolve(),n.a=null):n.c&&(Mh(n,"usable"),n.c.resolve(),n.c=null)})),this.b.o(this.f,"mskeyerror",(function(){var e=Error("EME PatchedMediaKeysMs key error");if(e.errorCode=n.f.error,null!=n.a)n.a.reject(e),n.a=null;else if(null!=n.c)n.c.reject(e),n.c=null;else switch(n.f.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:Mh(n,"output-not-allowed");break;default:Mh(n,"internal-error")}})),Mh(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},r.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},r.update=function(e){this.c=new _e;try{this.f.update(Ae(e))}catch(e){this.c.reject(e)}return this.c},r.close=function(){try{this.f.close(),this.closed.resolve(),this.b.Wa()}catch(e){this.closed.reject(e)}return this.closed},r.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(r=Dh.prototype).forEach=function(e){this.a&&e(this.a,yn.value())},r.get=function(e){if(this.has(e))return this.a},r.has=function(e){var t=yn.value();return!(!this.a||!Ie(e,t))},r.entries=function(){},r.keys=function(){},r.values=function(){},dh((function(){!e.HTMLVideoElement||!e.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,e.MediaKeys=Rh,e.MediaKeySystemAccess=Ch,navigator.requestMediaKeySystemAccess=Ph,HTMLMediaElement.prototype.setMediaKeys=Ih)})),Bh.prototype.createSession=function(){},Bh.prototype.setServerCertificate=function(){},Fh.prototype.getConfiguration=function(){},Fh.prototype.createMediaKeys=function(){},dh((function(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=jh,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Nh,e.MediaKeys=Bh,e.MediaKeySystemAccess=Fh)}),-10),zh.prototype.createMediaKeys=function(){var e=new Vh(this.a);return Promise.resolve(e)},zh.prototype.getConfiguration=function(){return this.b},Vh.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.a||document.createElement("video");return t.src||(t.src="about:blank"),e=new Kh(t,this.g,e),this.c.push(e),e},Vh.prototype.setServerCertificate=function(){return Promise.resolve(!1)},v(Kh,Be),(r=Kh.prototype).handleError=function(e){var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.b?(45==e.systemCode&&(t.message="Unsupported session type."),this.b.reject(t),this.b=null):e.sessionId&&this.a?(this.a.reject(t),this.a=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Xh(this,"output-restricted"):Xh(this,1==t?"expired":"internal-error"))},r.generateRequest=function(e,t){return Gh(this,t,null)},r.load=function(e){return"persistent-license"==this.g?Gh(this,null,e):Promise.reject(Error("Not a persistent session."))},r.update=function(e){var t=new _e;return function e(t,n,r){if(t.a)t.a.then((function(){return e(t,n,r)})).catch((function(){return e(t,n,r)}));else{if(t.a=n,"webkit-org.w3.clearkey"==t.c){var i=Dt(r),o=JSON.parse(i);"oct"!=o.keys[0].kty&&(t.a.reject(Error("Response is not a valid JSON Web Key Set.")),t.a=null),i=$t(o.keys[0].k),o=$t(o.keys[0].kid)}else i=Ae(r),o=null;var a=Uh("addKey");try{t.f[a](t.c,i,o,t.sessionId)}catch(e){t.a.reject(e),t.a=null}}}(this,t,e),t},r.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Uh("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},r.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},(r=Jh.prototype).forEach=function(e){this.a&&e(this.a,yn.value())},r.get=function(e){if(this.has(e))return this.a},r.has=function(e){var t=yn.value();return!(!this.a||!Ie(e,t))},r.entries=function(){},r.keys=function(){},r.values=function(){};var Yh="";function Qh(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function Zh(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function ef(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function tf(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function nf(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function rf(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function of(t,n,r){return new e.TextTrackCue(t,n,r)}function af(t,n,r){return new e.TextTrackCue(t+"-"+n+"-"+r,t,n,r)}function sf(){}function cf(e){var t=[];if(!e)return t;for(var n=u(e.childNodes),r=n.next();!r.done;r=n.next())(r=r.value).nodeType==Node.ELEMENT_NODE&&"br"!==r.nodeName&&(r=cf(r),t=t.concat(r));return t.length||t.push(e),t}function uf(e,t,n,r,i,o,a,s,c,l){if(c&&"br"==e.nodeName)return(e=new On(0,0,"")).spacer=!0,e;var h=/^[\s\n]*$/.test(e.textContent),f=e.nodeType==Node.ELEMENT_NODE&&!e.hasAttribute("begin")&&!e.hasAttribute("end");if(e.nodeType!=Node.ELEMENT_NODE||f&&h||f&&!c)return null;h=mf(e.getAttribute("begin"),n),f=mf(e.getAttribute("end"),n);var d=mf(e.getAttribute("dur"),n);if(null==f&&null!=d&&(f=h+d),!c&&(null==h||null==f))throw new ye(be,2,2001);if(h=c&&null==h?0:h+t,f=c&&null==f?0:f+t,d="",c=[],Array.from(e.childNodes).some((function(e){return e.nodeType==Node.TEXT_NODE&&/\S+/.test(e.textContent)})))d=function e(t,n){for(var r="",i=u(t.childNodes),o=i.next();!o.done;o=i.next())"br"==(o=o.value).nodeName&&t.childNodes[0]!==o?r+="\n":o.childNodes&&0<o.childNodes.length?r+=e(o,n):n?r+=o=(o=o.textContent.trim()).replace(/\s+/g," "):r+=o.textContent;return r}(e,s);else for(var p=u(e.childNodes),m=p.next();!m.done;m=p.next())(m=uf(m.value,t,n,r,i,o,a,s,!0,l))&&(m.startTime=m.startTime||h,m.endTime=m.endTime||f,c.push(m));if((t=new On(h,f,d)).nestedCues=c,l&&(t.cellResolution=l),(o=pf(e,"region",o,"")[0])&&o.getAttribute("xml:id")){var v=o.getAttribute("xml:id");t.region=a.filter((function(e){return e.id==v}))[0]}return function(e,t,n,r,i){"rtl"==hf(t,n,i,"direction")&&(e.direction="rtl");var o=hf(t,n,i,"writingMode");"tb"==o||"tblr"==o?e.writingMode="vertical-lr":"tbrl"==o?e.writingMode="vertical-rl":"rltb"==o||"rl"==o?e.direction="rtl":o&&(e.direction=Mn),(o=hf(t,n,i,"textAlign"))?(e.positionAlign=Rf[o],e.lineAlign=If[o],e.textAlign=Rn[o.toUpperCase()]):e.textAlign="start",(o=hf(t,n,i,"displayAlign"))&&(e.displayAlign=An[o.toUpperCase()]);(o=hf(t,n,i,"color"))&&(e.color=o);(o=hf(t,n,i,"backgroundColor"))&&(e.backgroundColor=o);(o=hf(t,n,i,"border"))&&(e.border=o);(o=hf(t,n,i,"fontFamily"))&&(e.fontFamily=o);(o=hf(t,n,i,"fontWeight"))&&"bold"==o&&(e.fontWeight=700),(o=hf(t,n,i,"wrapOption"))&&"noWrap"==o&&(e.wrapLine=!1),(o=hf(t,n,i,"lineHeight"))&&o.match(_f)&&(e.lineHeight=o),(o=hf(t,n,i,"fontSize"))&&(o.match(_f)||o.match(Ef))&&(e.fontSize=o),(o=hf(t,n,i,"fontStyle"))&&(e.fontStyle=Hn[o.toUpperCase()]);if(r){o=r.getAttribute("imagetype");var a=r.getAttribute("encoding");r=r.textContent.trim(),"PNG"==o&&"Base64"==a&&r&&(e.backgroundImage="data:image/png;base64,"+r)}(r=hf(t,n,i,"letterSpacing"))&&r.match(_f)&&(e.letterSpacing=r),(r=hf(t,n,i,"linePadding"))&&r.match(_f)&&(e.linePadding=r),(r=hf(t,n,i,"opacity"))&&(e.opacity=parseFloat(r));(n=ff(n,i,"textDecoration"))&&lf(e,n),(t=df(t,i,"textDecoration"))&&lf(e,t)}(t,e,o,r=pf(e,"smpte:backgroundImage",r,"#")[0],i),t}function lf(e,t){for(var n=u(t.split(" ")),r=n.next();!r.done;r=n.next())switch(r.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&qe(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&qe(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&qe(e.textDecoration,"overline")}}function hf(e,t,n,r){return(e=df(e,n,r))?e:ff(t,n,r)}function ff(e,t,n){for(var r=cf(e),i=(r=u(r)).next();!i.done;i=r.next())if(i=Ys(i.value,"http://www.w3.org/ns/ttml#styling",n))return i;return(e=pf(e,"style",t,"")[0])?Ys(e,"http://www.w3.org/ns/ttml#styling",n):null}function df(e,t,n){var r=Ys(e,"http://www.w3.org/ns/ttml#styling",n);if(r)return r;for(e=pf(e,"style",t,""),t=null,r=0;r<e.length;r++){var i=Ys(e[r],"http://www.w3.org/ns/ttml#styling",n);i&&(t=i),(i=Ys(e[r],"urn:ebu:tt:style",n))&&(t=i)}return t}function pf(e,t,n,r){var i=[];if(!e||1>n.length)return i;var o=e;for(e=null;o&&!(e=o.getAttribute(t))&&(o=o.parentNode)instanceof Element;);if(t=e)for(e=(t=u(t.split(" "))).next();!e.done;e=t.next()){e=e.value;for(var a=(o=u(n)).next();!a.done;a=o.next())if(r+(a=a.value).getAttribute("xml:id")==e){i.push(a);break}}return i}function mf(e,t){var n=null;if(Sf.test(e)){n=Sf.exec(e);var r=Number(n[1]),i=Number(n[2]),o=Number(n[3]),a=Number(n[4]);n=(o+=(a+=(Number(n[5])||0)/t.b)/t.frameRate)+60*i+3600*r}else xf.test(e)?n=vf(xf,e):Tf.test(e)?n=vf(Tf,e):Pf.test(e)?(n=Pf.exec(e),n=Number(n[1])/t.frameRate):Of.test(e)?(n=Of.exec(e),n=Number(n[1])/t.a):Cf.test(e)&&(n=vf(Cf,e));return n}function vf(e,t){var n=e.exec(t);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function gf(e,t,n,r){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(r),0==this.a&&(this.a=e?this.frameRate*this.b:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}dh((function(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Yh="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=Hh,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=qh,e.MediaKeys=Vh,e.MediaKeySystemAccess=zh}})),dh((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=Zh,Object.defineProperty(t,"disablePictureInPicture",{get:tf,set:nf,enumerable:!0,configurable:!0}),document.exitPictureInPicture=ef,document.addEventListener("webkitpresentationmodechanged",Qh,!0))}})),dh((function(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch((function(){})),e}}})),dh((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=rf)}})),dh((function(){if(!e.VTTCue&&e.TextTrackCue){var t=TextTrackCue.length;if(3==t)e.VTTCue=of;else if(6==t)e.VTTCue=af;else{try{var n=!!of(1,2,"")}catch(e){n=!1}n&&(e.VTTCue=of)}}})),sf.prototype.parseInit=function(){},sf.prototype.parseMedia=function(e,t){var n=Dt(e),r=[],i=new DOMParser,o=null;if(""==n)return r;try{o=i.parseFromString(n,"text/xml")}catch(e){throw new ye(be,2,2005,"Failed to parse TTML.")}if(o){if(n=o.getElementsByTagName("parsererror")[0])throw new ye(be,2,2005,n.textContent);if(!(i=o.getElementsByTagName("tt")[0]))throw new ye(be,2,2005,"TTML does not contain <tt> tag.");var a=Ys(i,"http://www.w3.org/ns/ttml#parameter","frameRate"),s=Ys(i,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),c=Ys(i,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),l=Ys(i,"http://www.w3.org/ns/ttml#parameter","tickRate"),h=Ys(i,"http://www.w3.org/ns/ttml#parameter","cellResolution");if(o=i.getAttribute("xml:space")||"default",n=i.getAttribute("tts:extent"),"default"!=o&&"preserve"!=o)throw new ye(be,2,2005,"Invalid xml:space value: "+o);o="default"==o,a=new gf(a,s,c,l),h=h&&(h=/^(\d+) (\d+)$/.exec(h))?{columns:parseInt(h[1],10),rows:parseInt(h[2],10)}:null,s=cf(i.getElementsByTagName("metadata")[0]),c=cf(i.getElementsByTagName("styling")[0]);for(var f=[],d=u(l=cf(i.getElementsByTagName("layout")[0])),p=d.next();!p.done;p=d.next()){var m=p.value,v=n;p=new qn;var g,y,b=m.getAttribute("xml:id");if(b)p.id=b,b=null,v&&(b=wf.exec(v)||kf.exec(v)),v=b?Number(b[1]):null,b=b?Number(b[2]):null,(g=ff(m,c,"extent"))&&(null!=(g=(y=wf.exec(g))||kf.exec(g))&&(p.width=null!=v?100*Number(g[1])/v:Number(g[1]),p.height=null!=b?100*Number(g[2])/b:Number(g[2]),p.widthUnits=y||null!=v?zn:0,p.heightUnits=y||null!=b?zn:0)),(m=ff(m,c,"origin"))&&(null!=(g=(y=wf.exec(m))||kf.exec(m))&&(p.viewportAnchorX=null!=b?100*Number(g[1])/b:Number(g[1]),p.viewportAnchorY=null!=v?100*Number(g[2])/v:Number(g[2]),p.viewportAnchorUnits=y||null!=v?zn:0));else p=null;p&&f.push(p)}for(n=function e(t){if(!t)return[];for(var n=[],r=(t=u(t.childNodes)).next();!r.done;r=t.next())(r=r.value)instanceof Element&&(r.hasAttribute("begin")?n.push(r):n=n.concat(e(r)));return n}(i.getElementsByTagName("body")[0]),i=(n=u(n)).next();!i.done;i=n.next())(i=uf(i.value,t.periodStart,a,s,c,l,f,o,!1,h))&&r.push(i)}return r},F("shaka.text.TtmlTextParser",sf),sf.prototype.parseMedia=sf.prototype.parseMedia,sf.prototype.parseInit=sf.prototype.parseInit;var yf,bf,wf=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Ef=/^(\d{1,2}(?:\.\d+)?|100)%$/,_f=/^(\d+px|\d+em|\d*\.?\d+c)$/,kf=/^(\d+)px (\d+)px$/,Sf=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,xf=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Tf=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Pf=/^(\d*(?:\.\d*)?)f$/,Of=/^(\d*(?:\.\d*)?)t$/,Cf=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,If={left:Nn,center:"center",right:"end",start:Nn,end:"end"},Rf={left:"line-left",center:"center",right:"line-right"};function Lf(){this.l=new sf}function Af(){}function Mf(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],e.textAlign="middle"==t?In:Rn[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==r[1]?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(r=/^region:(.*)$/.exec(t))?(t=function(e,t){var n=e.filter((function(e){return e.id==t}));return n.length?n[0]:null}(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Bn[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=jn,e.line=Number(n[1]),n[2]&&(e.lineAlign=Bn[n[2].toUpperCase()]))}function Df(e){if(null==(e=_u(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function jf(){this.a=null}function Nf(e,t,n){var r,i,o;return(new Ai).K("payl",ji((function(e){r=Dt(e)}))).K("iden",ji((function(e){i=Dt(e)}))).K("sttg",ji((function(e){o=Dt(e)}))).parse(e),r?function(e,t,n,r,i){if(e=new On(r,i,e),t&&(e.id=t),n)for(t=new wu(n),n=ku(t);n;)Mf(e,n,[]),Eu(t),n=ku(t);return e}(r,i,o,t,n):null}
/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function Bf(){}function Ff(){yf?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(yf=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=Uf):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function Uf(e,t){var n,r=this;return A((function(i){return 1==i.a?(console.assert(r==navigator,'bad "this" for requestMediaKeySystemAccess'),w(i,yf.call(r,e,t),2)):Xf(n=i.b)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=yf,i.return(n)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Hf,i.return(Hf.call(r,e,t)))}))}function Hf(e,t){var n,r,i,o,a,s,c,l,h,f,d=this;return A((function(p){if(1==p.a){for(console.assert(d==navigator,'bad "this" for requestMediaKeySystemAccess'),n=Gf(e),r=[],i=u(t),o=i.next();!o.done;o=i.next())a=o.value,s=qf(a.videoCapabilities,n),c=qf(a.audioCapabilities,n),a.videoCapabilities&&a.videoCapabilities.length&&!s.length||a.audioCapabilities&&a.audioCapabilities.length&&!c.length||((l=Object.assign({},a)).videoCapabilities=s,l.audioCapabilities=c,r.push(l));if(!r.length)throw(h=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",h.code=DOMException.NOT_SUPPORTED_ERR,h;return w(p,yf.call(d,e,r),2)}return f=p.b,p.return(new Kf(f,n))}))}function qf(e,t){return e?e.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==t})):e}function zf(){}function Vf(){navigator.mediaCapabilities?(bf=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=$f):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function $f(e){var t,n=this;return A((function(r){return 1==r.a?(console.assert(n==navigator.mediaCapabilities,'bad "this" for decodingInfo'),w(r,bf.call(n,e),2)):(t=r.b,e.keySystemConfiguration?Xf(t.keySystemAccess)?(console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=bf,r.return(t)):(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Wf,r.return(Wf.call(n,e))):r.return(t))}))}function Wf(e){var t,n,r,i,o,a,s,c=this;return A((function(u){return 1==u.a?(console.assert(c==navigator.mediaCapabilities,'bad "this" for decodingInfo'),t=null,e.keySystemConfiguration&&(n=e.keySystemConfiguration,r=n.keySystem,i=n.audio&&n.audio.encryptionScheme,o=n.video&&n.video.encryptionScheme,t=Gf(r),a={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},i&&i!=t||o&&o!=t)?u.return(a):w(u,bf.call(c,e),2)):((s=u.b).keySystemAccess&&(s.keySystemAccess=new Kf(s.keySystemAccess,t)),u.return(s))}))}function Kf(e,t){this.b=e,this.a=t,this.keySystem=e.keySystem}function Gf(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function Xf(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function Jf(){}function Yf(){Ff(),Vf()}Gn["application/ttml+xml"]=function(){return new sf},Lf.prototype.parseInit=function(e){var t=!1;if((new Ai).K("moov",Mi).K("trak",Mi).K("mdia",Mi).K("minf",Mi).K("stbl",Mi).ea("stsd",Di).K("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new ye(be,2,2007)},Lf.prototype.parseMedia=function(e,t){var n=this,r=!1,i=[];if((new Ai).K("mdat",ji((function(e){r=!0,i=i.concat(n.l.parseMedia(e,t))}))).parse(e,!1),!r)throw new ye(be,2,2007);return i},F("shaka.text.Mp4TtmlParser",Lf),Lf.prototype.parseMedia=Lf.prototype.parseMedia,Lf.prototype.parseInit=Lf.prototype.parseInit,Gn['application/mp4; codecs="stpp"']=function(){return new Lf},Gn['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Lf},Gn['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Lf},Af.prototype.parseInit=function(){},Af.prototype.parseMedia=function(e,t){var n=Dt(e),r=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(r[0]))throw new ye(be,2,2e3);if(n=t.segmentStart,r[0].includes("X-TIMESTAMP-MAP")){var i=r[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),o=r[0].match(/MPEGTS:(\d+)/m);if(i&&o){if(null==(n=Df(new wu(i[1]))))throw new ye(be,2,2e3);for(o=Number(o[1]),i=t.segmentStart;95443.7176888889<=i;)i-=95443.7176888889,o+=8589934592;n=t.periodStart+o/9e4-n}}o=[];for(var a=(i=u(r[0].split("\n"))).next();!a.done;a=i.next())if(a=a.value,/^Region:/.test(a)){a=new wu(a);var s=new qn;ku(a),Eu(a);for(var c=ku(a);c;){var l=s,h=c;(c=/^id=(.*)$/.exec(h))?l.id=c[1]:(c=/^width=(\d{1,2}|100)%$/.exec(h))?l.width=Number(c[1]):(c=/^lines=(\d+)$/.exec(h))?(l.height=Number(c[1]),l.heightUnits=2):(c=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(h))?(l.regionAnchorX=Number(c[1]),l.regionAnchorY=Number(c[2])):(c=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(h))?(l.viewportAnchorX=Number(c[1]),l.viewportAnchorY=Number(c[2])):/^scroll=up$/.exec(h)&&(l.scroll="up"),Eu(a),c=ku(a)}o.push(s)}for(i=[],a=(r=u(r.slice(1))).next();!a.done;a=r.next()){if(c=n,1==(l=a.value.split("\n")).length&&!l[0]||/^NOTE($|[ \t])/.test(l[0])||"STYLE"==l[0])a=null;else{a=null,l[0].includes("--\x3e")||(a=l[0],l.splice(0,1)),h=Df(s=new wu(l[0]));var f=_u(s,/[ \t]+--\x3e[ \t]+/g),d=Df(s);if(null==h||null==f||null==d)throw new ye(be,2,2001);for(l=new On(h+c,d+c,l.slice(1).join("\n").trim()),Eu(s),c=ku(s);c;)Mf(l,c,o),Eu(s),c=ku(s);null!=a&&(l.id=a),a=l}a&&i.push(a)}return i},F("shaka.text.VttTextParser",Af),Af.prototype.parseMedia=Af.prototype.parseMedia,Af.prototype.parseInit=Af.prototype.parseInit,Gn["text/vtt"]=function(){return new Af},Gn['text/vtt; codecs="vtt"']=function(){return new Af},jf.prototype.parseInit=function(e){var t=this,n=!1;if((new Ai).K("moov",Mi).K("trak",Mi).K("mdia",Mi).ea("mdhd",(function(e){0==e.version?(e.reader.skip(4),e.reader.skip(4),t.a=e.reader.J(),e.reader.skip(4)):(e.reader.skip(8),e.reader.skip(8),t.a=e.reader.J(),e.reader.skip(8)),e.reader.skip(4)})).K("minf",Mi).K("stbl",Mi).ea("stsd",Di).K("wvtt",(function(){n=!0})).parse(e),!this.a)throw new ye(be,2,2008);if(!n)throw new ye(be,2,2008)},jf.prototype.parseMedia=function(e,t){if(!this.a)throw new ye(be,2,2008);var n,r=0,i=[],o=[],a=!1,s=!1,c=!1,l=null;if((new Ai).K("moof",Mi).K("traf",Mi).ea("tfdt",(function(e){a=!0,r=0==e.version?e.reader.J():e.reader.pb()})).ea("tfhd",(function(e){var t=e.flags;(e=e.reader).skip(4),1&t&&e.skip(8),2&t&&e.skip(4),l=8&t?e.J():null})).ea("trun",(function(e){s=!0;var t=e.version,n=e.flags,r=(e=e.reader).J();1&n&&e.skip(4),4&n&&e.skip(4);for(var o=[],a=(r=u(Q(r))).next();!a.done;a=r.next())a={duration:null,sampleSize:null,jd:null},256&n&&(a.duration=e.J()),512&n&&(a.sampleSize=e.J()),1024&n&&e.skip(4),2048&n&&(a.jd=0==t?e.J():e.Hd()),o.push(a);i=o})).K("mdat",ji((function(e){c=!0,n=e}))).parse(e,!1),!c&&!a&&!s)throw new ye(be,2,2008);for(var h=r,f=new Ii(n,0),d=u(i),p=d.next();!p.done;p=d.next()){var m=(p=p.value).duration||l,v=p.jd?r+p.jd:h;h=v+(m||0);var g=0;do{var y=f.J();g+=y;var b=null;"vttc"==Bi(f.J())?8<y&&(b=f.Va(y-8)):f.skip(y-8),m&&b&&(y=Nf(b,t.periodStart+v/this.a,t.periodStart+h/this.a),o.push(y))}while(p.sampleSize&&g<p.sampleSize)}return o.filter(vt)},F("shaka.text.Mp4VttParser",jf),jf.prototype.parseMedia=jf.prototype.parseMedia,jf.prototype.parseInit=jf.prototype.parseInit,Gn['application/mp4; codecs="wvtt"']=function(){return new jf},F("EmeEncryptionSchemePolyfill",Bf),Bf.install=Ff,F("McEncryptionSchemePolyfill",zf),zf.install=Vf,Kf.prototype.getConfiguration=function(){var e=this.b.getConfiguration();if(e.videoCapabilities)for(var t=u(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.a;if(e.audioCapabilities)for(n=(t=u(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.a;return e},Kf.prototype.createMediaKeys=function(){return this.b.createMediaKeys()},F("EncryptionSchemePolyfills",Jf),Jf.install=Yf,void 0!==n&&n.exports&&(n.exports=Jf)}.call(r,n,n,void 0),r.shaka)t[i]=r.shaka[i]}()}).call(this,n(48))},function(e,t,n){"use strict";var r=n(1),i=n(11),o=n(201),a=n(12),s=n(107),c=n(2),u=n(97),l=n(34),h=n(16),f=n(202),d=n(239),p=n(67),m=n(102),v=n(49).f,g=n(10).f,y=n(177),b=n(30),w=n(27),E=w.get,_=w.set,k=r.ArrayBuffer,S=k,x=r.DataView,T=x&&x.prototype,P=Object.prototype,O=r.RangeError,C=d.pack,I=d.unpack,R=function(e){return[255&e]},L=function(e){return[255&e,e>>8&255]},A=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},M=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},D=function(e){return C(e,23,4)},j=function(e){return C(e,52,8)},N=function(e,t){g(e.prototype,t,{get:function(){return E(this)[t]}})},B=function(e,t,n,r){var i=f(n),o=E(e);if(i+t>o.byteLength)throw O("Wrong index");var a=E(o.buffer).bytes,s=i+o.byteOffset,c=a.slice(s,s+t);return r?c:c.reverse()},F=function(e,t,n,r,i,o){var a=f(n),s=E(e);if(a+t>s.byteLength)throw O("Wrong index");for(var c=E(s.buffer).bytes,u=a+s.byteOffset,l=r(+i),h=0;h<t;h++)c[u+h]=l[o?h:t-h-1]};if(o){if(!c((function(){k(1)}))||!c((function(){new k(-1)}))||c((function(){return new k,new k(1.5),new k(NaN),"ArrayBuffer"!=k.name}))){for(var U,H=(S=function(e){return u(this,S),new k(f(e))}).prototype=k.prototype,q=v(k),z=0;q.length>z;)(U=q[z++])in S||a(S,U,k[U]);H.constructor=S}m&&p(T)!==P&&m(T,P);var V=new x(new S(2)),$=T.setInt8;V.setInt8(0,2147483648),V.setInt8(1,2147483649),!V.getInt8(0)&&V.getInt8(1)||s(T,{setInt8:function(e,t){$.call(this,e,t<<24>>24)},setUint8:function(e,t){$.call(this,e,t<<24>>24)}},{unsafe:!0})}else S=function(e){u(this,S,"ArrayBuffer");var t=f(e);_(this,{bytes:y.call(new Array(t),0),byteLength:t}),i||(this.byteLength=t)},x=function(e,t,n){u(this,x,"DataView"),u(e,S,"DataView");var r=E(e).byteLength,o=l(t);if(o<0||o>r)throw O("Wrong offset");if(o+(n=void 0===n?r-o:h(n))>r)throw O("Wrong length");_(this,{buffer:e,byteLength:n,byteOffset:o}),i||(this.buffer=e,this.byteLength=n,this.byteOffset=o)},i&&(N(S,"byteLength"),N(x,"buffer"),N(x,"byteLength"),N(x,"byteOffset")),s(x.prototype,{getInt8:function(e){return B(this,1,e)[0]<<24>>24},getUint8:function(e){return B(this,1,e)[0]},getInt16:function(e){var t=B(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=B(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return M(B(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return M(B(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return I(B(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return I(B(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){F(this,1,e,R,t)},setUint8:function(e,t){F(this,1,e,R,t)},setInt16:function(e,t){F(this,2,e,L,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){F(this,2,e,L,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){F(this,4,e,A,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){F(this,4,e,A,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){F(this,4,e,D,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){F(this,8,e,j,t,arguments.length>2?arguments[2]:void 0)}});b(S,"ArrayBuffer"),b(x,"DataView"),e.exports={ArrayBuffer:S,DataView:x}},function(e,t){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(e,t,n){var r=n(34),i=n(16);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length or index");return n}},function(e,t,n){"use strict";var r=n(8),i=n(1),o=n(71),a=n(15),s=n(204),c=n(113),u=n(97),l=n(6),h=n(2),f=n(77),d=n(30),p=n(162);e.exports=function(e,t,n){var m=-1!==e.indexOf("Map"),v=-1!==e.indexOf("Weak"),g=m?"set":"add",y=i[e],b=y&&y.prototype,w=y,E={},_=function(e){var t=b[e];a(b,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(v&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!l(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!l(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(o(e,"function"!=typeof y||!(v||b.forEach&&!h((function(){(new y).entries().next()})))))w=n.getConstructor(t,e,m,g),s.REQUIRED=!0;else if(o(e,!0)){var k=new w,S=k[g](v?{}:-0,1)!=k,x=h((function(){k.has(1)})),T=f((function(e){new y(e)})),P=!v&&h((function(){for(var e=new y,t=5;t--;)e[g](t,t);return!e.has(-0)}));T||((w=t((function(t,n){u(t,w,e);var r=p(new y,t,w);return null!=n&&c(n,r[g],r,m),r}))).prototype=b,b.constructor=w),(x||P)&&(_("delete"),_("has"),m&&_("get")),(P||S)&&_(g),v&&b.clear&&delete b.clear}return E[e]=w,r({global:!0,forced:w!=y},E),d(w,e),v||n.setStrong(w,e,m),w}},function(e,t,n){var r=n(39),i=n(6),o=n(7),a=n(10).f,s=n(50),c=n(270),u=s("meta"),l=0,h=Object.isExtensible||function(){return!0},f=function(e){a(e,u,{value:{objectID:"O"+ ++l,weakData:{}}})},d=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,u)){if(!h(e))return"F";if(!t)return"E";f(e)}return e[u].objectID},getWeakData:function(e,t){if(!o(e,u)){if(!h(e))return!0;if(!t)return!1;f(e)}return e[u].weakData},onFreeze:function(e){return c&&d.REQUIRED&&h(e)&&!o(e,u)&&f(e),e}};r[u]=!0},function(e,t,n){"use strict";var r=n(10).f,i=n(47),o=n(107),a=n(32),s=n(97),c=n(113),u=n(111),l=n(108),h=n(11),f=n(204).fastKey,d=n(27),p=d.set,m=d.getterFor;e.exports={getConstructor:function(e,t,n,u){var l=e((function(e,r){s(e,l,t),p(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),h||(e.size=0),null!=r&&c(r,e[u],e,n)})),d=m(t),v=function(e,t,n){var r,i,o=d(e),a=g(e,t);return a?a.value=n:(o.last=a={index:i=f(t,!0),key:t,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=a),r&&(r.next=a),h?o.size++:e.size++,"F"!==i&&(o.index[i]=a)),e},g=function(e,t){var n,r=d(e),i=f(t);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==t)return n};return o(l.prototype,{clear:function(){for(var e=d(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,h?e.size=0:this.size=0},delete:function(e){var t=d(this),n=g(this,e);if(n){var r=n.next,i=n.previous;delete t.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),t.first==n&&(t.first=r),t.last==n&&(t.last=i),h?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=d(this),r=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!g(this,e)}}),o(l.prototype,n?{get:function(e){var t=g(this,e);return t&&t.value},set:function(e,t){return v(this,0===e?0:e,t)}}:{add:function(e){return v(this,e=0===e?0:e,e)}}),h&&r(l.prototype,"size",{get:function(){return d(this).size}}),l},setStrong:function(e,t,n){var r=t+" Iterator",i=m(t),o=m(r);u(e,t,(function(e,t){p(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(t)}}},function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(36),n(37),n(9),n(139),n(44),n(23),n(43),n(170),n(3),n(46),n(5),n(140),n(33),n(100);var s=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handlers=new Map,this}var t,n,i,s,c;return t=e,(n=[{key:"cleanup",value:function(){this.handlers.forEach((function(e){e.clear()})),this.handlers.clear()}},{key:"unsubscribe",value:function(e,t){this.handlers.has(e)&&this.handlers.get(e).delete(t)}},{key:"subscribe",value:function(e,t){this.handlers.has(e)||this.handlers.set(e,new Map),this.handlers.get(e).set(t,t)}},{key:"handleEvent",value:(s=regeneratorRuntime.mark((function e(t,n){var i,o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.handlers.has(t)){e.next=2;break}return e.abrupt("return");case 2:i=this.handlers.get(t),o=r(i.keys()),e.prev=4,o.s();case 6:if((a=o.n()).done){e.next=18;break}return s=a.value,e.prev=8,e.next=11,s(n);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),console.error("Error occurred in handler event:".concat(t," state:").concat(n," ").concat(e.t0));case 16:e.next=6;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(4),o.e(e.t1);case 23:return e.prev=23,o.f(),e.finish(23);case 26:case"end":return e.stop()}}),e,this,[[4,20,23,26],[8,13]])})),c=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=s.apply(e,t);function a(e){o(i,n,r,a,c,"next",e)}function c(e){o(i,n,r,a,c,"throw",e)}a(void 0)}))},function(e,t){return c.apply(this,arguments)})}])&&a(t.prototype,n),i&&a(t,i),e}();e.exports=s},function(e,t,n){function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(36),n(37),n(44),n(23),n(43),n(3),n(5),n(33);var a=function(){"use strict";function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.href=t,this.ws=null,this.closing=!1,this.opening=!1,this.onOpen=this.onOpen.bind(this),this.onMessage=this.onMessage.bind(this),this.reopen=this.reopen.bind(this),this.closePermanently=this.closePermanently.bind(this),this.listeners={open:[],message:[]},this.open()}var t,n,i;return t=e,(n=[{key:"open",value:function(){this.closing||(this.opening=!0,this.ws=new WebSocket(this.href),window.addEventListener("beforeunload",this.closePermanently),this.ws.addEventListener("open",this.onOpen),this.ws.addEventListener("message",this.onMessage),this.ws.addEventListener("close",this.reopen),this.ws.addEventListener("error",this.reopen))}},{key:"addEventListener",value:function(e,t){if("open"!==e&&"message"!=e)throw new Error("Event ".concat(e," not supported"));"open"!==e||this.opening||t(),this.listeners[e].push(t)}},{key:"onOpen",value:function(){this.backoff=1e3,this.opening=!1;var e,t=r(this.listeners.open);try{for(t.s();!(e=t.n()).done;)(0,e.value)()}catch(e){t.e(e)}finally{t.f()}}},{key:"onMessage",value:function(e){var t,n=r(this.listeners.message);try{for(n.s();!(t=n.n()).done;)(0,t.value)(e)}catch(e){n.e(e)}finally{n.f()}}},{key:"reopen",value:function(){var e=this;this.ws.removeEventListener("open",this.onOpen),this.ws.removeEventListener("message",this.onMessage),this.ws.removeEventListener("close",this.reopen),this.ws.removeEventListener("error",this.reopen),this.ws.close(),this.ws=null,window.removeEventListener("beforeunload",this.closePermanently),setTimeout((function(){e.backoff*=2,e.backoff>3e4&&(e.backoff=3e4),e.open()}),this.backoff)}},{key:"send",value:function(e){return this.ws.send(e)}},{key:"closePermanently",value:function(){this.closing=!0,this.listeners={},this.ws&&(this.ws.removeEventListener("open",this.onOpen),this.ws.removeEventListener("message",this.onMessage),this.ws.removeEventListener("close",this.reopen),this.ws.removeEventListener("error",this.reopen),this.ws.readyState!==WebSocket.OPEN&&this.ws.readyState!==WebSocket.CONNECTING||this.ws.close(),this.ws=null)}}])&&o(t.prototype,n),i&&o(t,i),e}();e.exports=a},function(e,t,n){var r=n(8),i=n(197).values;r({target:"Object",stat:!0},{values:function(e){return i(e)}})},function(e,t,n){"use strict";n(9),n(23),n(3),n(180),n(33);var r=n(35),i=n(141),o=n(19),a=n(275),s=n(322),c=n(212),u={actionUrl:null,init:function(){this.element=document.getElementById("add-thing-screen"),this.backButton=document.getElementById("add-thing-back-button"),this.cancelButton=document.getElementById("add-thing-cancel-button"),this.newThingsElement=document.getElementById("new-things"),this.scanStatus=document.getElementById("add-thing-status"),this.addonsHint=document.getElementById("add-adapters-hint"),this.addonsHintAnchor=document.getElementById("add-adapters-hint-anchor"),this.addByUrlAnchor=document.getElementById("add-by-url-anchor"),this.pairingTimeout=null,this.visibleThings=new Set,this.backButton.addEventListener("click",this.hide.bind(this)),this.cancelButton.addEventListener("click",this.hide.bind(this)),this.addonsHintAnchor.addEventListener("click",this.hide.bind(this)),this.addByUrlAnchor.addEventListener("click",this.showNewWebThing.bind(this)),this.closing=!1},requestPairing:function(){var e=this;if(!this.closing){this.scanStatus.classList.remove("hidden"),this.addonsHint.classList.add("hidden");var t="ws:";"https:"===window.location.protocol&&(t="wss:");var n="".concat(t,"//").concat(i.HOST,"/new_things?jwt=").concat(r.jwt);this.socket=new WebSocket(n);window.addEventListener("beforeunload",(function(){e.closing=!0,e.socket&&(e.socket.readyState!==WebSocket.OPEN&&e.socket.readyState!==WebSocket.CONNECTING||e.socket.close())})),this.socket.onmessage=function(t){e.showNewThing(JSON.parse(t.data))};r.startPairing(60).then((function(t){e.actionUrl=t.pair.href,e.pairingTimeout=setTimeout((function(){e.scanStatus.classList.add("hidden"),0===e.visibleThings.size&&e.addonsHint.classList.remove("hidden"),e.pairingTimeout=null,e.requestCancelPairing()}),6e4)})).catch((function(e){console.error("Pairing request failed: ".concat(e))}))}},requestCancelPairing:function(){var e=this;null!==this.pairingTimeout&&(clearTimeout(this.pairingTimeout),this.pairingTimeout=null),void 0!==this.socket&&(this.socket.close(),delete this.socket);var t=this.actionUrl;t&&r.cancelPairing(t).then((function(){e.actionUrl=null})).catch((function(e){console.error("Error cancelling pairing request ".concat(e))}))},show:function(){var e=this;this.addByUrlAnchor.classList.add("hidden"),c.fetchInstalledAddonList(!0).then((function(){c.installedAddons.has("thing-url-adapter")&&(c.installedAddons.get("thing-url-adapter").enabled&&e.addByUrlAnchor.classList.remove("hidden"))})),this.cancelButton.textContent=o.getMessage("add-thing-cancel"),this.element.classList.remove("hidden"),this.newThingsElement.innerHTML="",this.visibleThings.clear(),this.requestPairing()},hide:function(){this.element.classList.add("hidden"),this.requestCancelPairing(),i.gatewayModel.refreshThings()},showNewThing:function(e){this.visibleThings.has(e.id)||(this.visibleThings.add(e.id),new a(e.id,e))},showNewWebThing:function(e){e.preventDefault(),new s}};e.exports=u},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9),n(78),n(110),n(45);var i=n(120),o=n(22),a=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.thing=t,this.name=n,this.readOnly=!!r.readOnly,this.label=r.title||n,this.type=r.type,this.unit=r.unit?i.nameToAbbreviation(r.unit):null,"integer"===r.type?this.precision=0:r.hasOwnProperty("multipleOf")&&"".concat(r.multipleOf).includes(".")?this.precision="".concat(r.multipleOf).split(".")[1].length:this.precision=3,r.hasOwnProperty("minimum")?this.min=r.minimum:this.min=null,r.hasOwnProperty("maximum")?this.max=r.maximum:this.max=null,r.hasOwnProperty("multipleOf")?this.step=r.multipleOf:"number"===r.type?this.step="any":this.step=1,this.id="number-".concat(o.escapeHtmlForIdClass(this.name))}var t,n,a;return t=e,(n=[{key:"attach",value:function(){this.input=this.thing.element.querySelector("#".concat(this.id));var e=o.debounce(500,this.set.bind(this));this.input.addEventListener("change",e)}},{key:"view",value:function(){var e=this.unit||"";if(this.readOnly)return'\n        <webthing-numeric-label-property\n          data-name="'.concat(o.escapeHtml(this.label),'" data-unit="').concat(e,'"\n          data-precision="').concat(this.precision,'" id="').concat(this.id,'">\n        </webthing-numeric-label-property>');var t=null===this.min?"":'min="'.concat(this.min,'"'),n=null===this.max?"":'max="'.concat(this.max,'"');return'\n        <webthing-number-property data-name="'.concat(o.escapeHtml(this.label),'"\n          data-unit="').concat(e,'" ').concat(t," ").concat(n,' value="0" step="').concat(this.step,'"\n          id="').concat(this.id,'">\n        </webthing-number-property>')}},{key:"update",value:function(e){this.input&&(this.input.value=e)}},{key:"set",value:function(){this.thing.setProperty(this.name,this.input.value)}}])&&r(t.prototype,n),a&&r(t,a),e}();e.exports=a},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(60),n(13),n(3),n(14),n(61),n(5);var u=n(138),l=n(22),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(h,e);var t,n,s,u=a(h);function h(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),u.call(this,e,t,n,{baseIcon:"/images/thing-icons/color_control.svg"})}return t=h,(n=[{key:"findProperties",value:function(){for(var e in this.colorProperty=null,this.colorTemperatureProperty=null,this.displayedProperties){var t=this.displayedProperties[e].property["@type"];null===this.colorProperty&&"ColorProperty"===t?this.colorProperty=e:null===this.colorTemperatureProperty&&"ColorTemperatureProperty"===t&&(this.colorTemperatureProperty=e)}null===this.colorProperty&&this.displayedProperties.hasOwnProperty("color")&&(this.colorProperty="color"),null===this.colorTemperatureProperty&&this.displayedProperties.hasOwnProperty("colorTemperature")&&(this.colorTemperatureProperty="colorTemperature")}},{key:"updateProperty",value:function(e,t){t=i(c(h.prototype),"updateProperty",this).call(this,e,t),this.displayedProperties.hasOwnProperty(e)&&(e===this.colorProperty?this.icon.color=t:e===this.colorTemperatureProperty&&(t=parseInt(t,10),this.icon.color=l.colorTemperatureToRGB(t)))}},{key:"iconView",value:function(){return"\n      <webthing-color-control-capability>\n      </webthing-color-control-capability>"}},{key:"icon",get:function(){return this.element.querySelector("webthing-color-control-capability")}}])&&r(t.prototype,n),s&&r(t,s),h}(u);e.exports=h},function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(36),n(37),n(9),n(151),n(139),n(44),n(143),n(23),n(145),n(43),n(148),n(170),n(3),n(46),n(5),n(45),n(140),n(33),n(146);var o=n(323),a=n(35),s=n(141),c=n(324),u=n(371),l=n(19),h=n(372),f=n(373)({exact:!0}),d=n(193),p=n(142),m=n(374),v=n(376),g=n(22),y=n(377),b={init:function(){var e=this;this.elements={},this.view=document.getElementById("settings-view"),this.menu=document.getElementById("settings-menu"),this.domainSettings=document.getElementById("domain-settings"),this.userSettings=document.getElementById("user-settings"),this.userSettingsMain=document.getElementById("user-settings-main"),this.userSettingsEdit=document.getElementById("user-settings-edit"),this.userSettingsAdd=document.getElementById("user-settings-add"),this.addUserButton=document.getElementById("add-user-button"),this.adapterSettings=document.getElementById("adapter-settings"),this.addonSettings=document.getElementById("addon-settings"),this.addonMainSettings=document.getElementById("addon-main-settings"),this.addonConfigSettings=document.getElementById("addon-config-settings"),this.addonDiscoverySettings=document.getElementById("addon-discovery-settings"),this.addonConfigSettings=document.getElementById("addon-config-settings"),this.discoverAddonsButton=document.getElementById("discover-addons-button"),this.discoveredAddonsSearch=document.getElementById("discovered-addons-search"),this.experimentSettings=document.getElementById("experiment-settings"),this.localizationSettings=document.getElementById("localization-settings"),this.updateSettings=document.getElementById("update-settings"),this.authorizationSettings=document.getElementById("authorization-settings"),this.developerSettings=document.getElementById("developer-settings"),this.backButton=document.getElementById("settings-back-button"),this.availableAddons=new Map,this.installedAddons=new Map,this.fetchInstalledAddonsDeferred=null,this.fetchAvailableAddonsDeferred=null,this.availableAddonsLastFetched=null,this.insertTitleElement(this.menu,l.getMessage("settings"),"/images/settings-icon.png"),this.insertTitleElement(this.domainSettings,l.getMessage("domain"),"/images/domain-icon.png"),this.insertTitleElement(this.userSettingsMain,l.getMessage("users"),"/images/users-icon.png"),this.insertTitleElement(this.userSettingsEdit,l.getMessage("edit-user"),"/images/user.svg"),this.insertTitleElement(this.userSettingsAdd,l.getMessage("add-user"),"/images/user.svg"),this.insertTitleElement(this.adapterSettings,l.getMessage("adapters"),"/images/adapters-icon.png"),this.insertTitleElement(this.addonMainSettings,l.getMessage("addons"),"/images/add-on.svg");var t=this.insertTitleElement(this.addonConfigSettings,l.getMessage("addon-config"),"/images/add-on.svg");this.addonConfigTitleName=t.querySelector(".section-title-name"),this.insertTitleElement(this.addonDiscoverySettings,l.getMessage("addon-discovery"),"/images/add-on.svg"),this.insertTitleElement(this.experimentSettings,l.getMessage("experiments"),"/images/experiments-icon.png"),this.insertTitleElement(this.localizationSettings,l.getMessage("localization"),"/images/localization-icon.svg"),this.insertTitleElement(this.updateSettings,l.getMessage("updates"),"/images/update-icon.svg"),this.insertTitleElement(this.authorizationSettings,l.getMessage("authorizations"),"/images/authorization.svg"),this.insertTitleElement(this.developerSettings,l.getMessage("developer"),"/images/developer-icon.svg"),this.discoverAddonsButton.addEventListener("click",(function(){p("/settings/addons/discovered")})),this.backButton.addEventListener("click",(function(){e.discoveredAddonsSearch.value=""})),this.discoveredAddonsSearch.addEventListener("input",(function(){e.updateDiscoveredAddonsList()})),this.addUserButton.addEventListener("click",(function(){p("/settings/users/add")})),this.setupDomainElements(),this.setupNetworkElements(),this.setupUserElements(),this.setupLocalizationElements(),this.setupUpdateElements(),this.setupExperimentElements(),this.setupDeveloperElements()},setupDomainElements:function(){this.elements.domain={update:document.getElementById("domain-settings-local-update"),localName:document.getElementById("domain-settings-local-name"),localCheckbox:document.getElementById("domain-settings-local-checkbox"),tunnelName:document.getElementById("domain-settings-tunnel-name")},this.elements.domain.update.addEventListener("click",this.onLocalDomainClick.bind(this)),this.elements.domain.localCheckbox.addEventListener("change",this.onLocalDomainCheckboxChange.bind(this))},setupNetworkElements:function(){var e=this;this.elements.network={main:document.getElementById("network-settings"),unsupported:{main:document.getElementById("network-settings-unsupported")},client:{main:document.getElementById("network-settings-client"),ethernet:{main:document.getElementById("network-settings-ethernet"),mainIp:document.getElementById("network-settings-list-item-ethernet-ip"),configure:document.getElementById("network-settings-list-item-ethernet-configure"),mode:document.getElementById("network-settings-ethernet-mode"),ipLabel:document.getElementById("network-settings-ethernet-ip-label"),ip:document.getElementById("network-settings-ethernet-ip"),netmaskLabel:document.getElementById("network-settings-ethernet-netmask-label"),netmask:document.getElementById("network-settings-ethernet-netmask"),gatewayLabel:document.getElementById("network-settings-ethernet-gateway-label"),gateway:document.getElementById("network-settings-ethernet-gateway"),done:document.getElementById("network-settings-ethernet-done")},wifi:{main:document.getElementById("network-settings-wifi"),mainSsid:document.getElementById("network-settings-list-item-wifi-ssid"),mainIp:document.getElementById("network-settings-list-item-wifi-ip"),configure:document.getElementById("network-settings-list-item-wifi-configure"),list:document.getElementById("network-settings-wifi-network-list"),wrap:document.getElementById("network-settings-wifi-wrap"),ssid:document.getElementById("network-settings-wifi-ssid"),password:document.getElementById("network-settings-wifi-password"),showPassword:document.getElementById("network-settings-wifi-show-password"),connect:document.getElementById("network-settings-wifi-connect")}},router:{main:document.getElementById("network-settings-router"),wan:{main:document.getElementById("network-settings-wan"),mainIp:document.getElementById("network-settings-list-item-wan-ip"),configure:document.getElementById("network-settings-list-item-wan-configure"),mode:document.getElementById("network-settings-wan-mode"),ipLabel:document.getElementById("network-settings-wan-ip-label"),ip:document.getElementById("network-settings-wan-ip"),netmaskLabel:document.getElementById("network-settings-wan-netmask-label"),netmask:document.getElementById("network-settings-wan-netmask"),gatewayLabel:document.getElementById("network-settings-wan-gateway-label"),gateway:document.getElementById("network-settings-wan-gateway"),usernameLabel:document.getElementById("network-settings-wan-username-label"),username:document.getElementById("network-settings-wan-username"),passwordLabel:document.getElementById("network-settings-wan-password-label"),password:document.getElementById("network-settings-wan-password"),done:document.getElementById("network-settings-wan-done")},lan:{main:document.getElementById("network-settings-lan"),mainIp:document.getElementById("network-settings-list-item-lan-ip"),configure:document.getElementById("network-settings-list-item-lan-configure"),ip:document.getElementById("network-settings-lan-ip"),netmask:document.getElementById("network-settings-lan-netmask"),dhcp:document.getElementById("network-settings-lan-dhcp"),done:document.getElementById("network-settings-lan-done")},wlan:{main:document.getElementById("network-settings-wlan"),mainSsid:document.getElementById("network-settings-list-item-wlan-ssid"),configure:document.getElementById("network-settings-list-item-wlan-configure"),enable:document.getElementById("network-settings-wlan-enable"),ssid:document.getElementById("network-settings-wlan-ssid"),password:document.getElementById("network-settings-wlan-password"),showPassword:document.getElementById("network-settings-wlan-show-password"),done:document.getElementById("network-settings-wlan-done")}}},this.insertTitleElement(this.elements.network.unsupported.main,l.getMessage("network"),"/images/network.svg"),this.insertTitleElement(this.elements.network.client.main,l.getMessage("network"),"/images/network.svg"),this.insertTitleElement(this.elements.network.client.ethernet.main,l.getMessage("network-settings-ethernet"),"/images/ethernet.svg"),this.elements.network.client.wifi.title=this.insertTitleElement(this.elements.network.client.wifi.main,l.getMessage("network-settings-wifi"),"/images/wifi.svg").querySelector(".section-title-name"),this.insertTitleElement(this.elements.network.router.main,l.getMessage("network"),"/images/network.svg"),this.insertTitleElement(this.elements.network.router.wan.main,l.getMessage("network-settings-internet-wan"),"/images/internet.svg"),this.insertTitleElement(this.elements.network.router.lan.main,l.getMessage("network-settings-home-network-lan"),"/images/network.svg"),this.insertTitleElement(this.elements.network.router.wlan.main,l.getMessage("network-settings-wifi-wlan"),"/images/wifi.svg"),this.elements.network.client.ethernet.configure.addEventListener("click",(function(){return p("/settings/network/ethernet")})),this.elements.network.client.wifi.configure.addEventListener("click",(function(){return p("/settings/network/wifi")})),this.elements.network.router.wan.configure.addEventListener("click",(function(){return p("/settings/network/wan")})),this.elements.network.router.lan.configure.addEventListener("click",(function(){return p("/settings/network/lan")})),this.elements.network.router.wlan.configure.addEventListener("click",(function(){return p("/settings/network/wlan")}));var t=[this.elements.network.client.ethernet.ipLabel,this.elements.network.client.ethernet.ip,this.elements.network.client.ethernet.netmaskLabel,this.elements.network.client.ethernet.netmask,this.elements.network.client.ethernet.gatewayLabel,this.elements.network.client.ethernet.gateway];this.elements.network.client.ethernet.ip.addEventListener("input",this.validateEthernet.bind(this)),this.elements.network.client.ethernet.netmask.addEventListener("input",this.validateEthernet.bind(this)),this.elements.network.client.ethernet.gateway.addEventListener("input",this.validateEthernet.bind(this)),this.elements.network.client.ethernet.mode.addEventListener("change",(function(n){e.validateEthernet(),"static"===n.target.value?t.forEach((function(e){return e.classList.remove("hidden")})):t.forEach((function(e){return e.classList.add("hidden")}))})),this.elements.network.client.ethernet.mode.value="dhcp",t.forEach((function(e){return e.classList.add("hidden")})),this.elements.network.client.ethernet.done.addEventListener("click",(function(t){t.target.disabled=!0,s.showMessage(l.getMessage("network-settings-changing"),3e3);var n={mode:e.elements.network.client.ethernet.mode.value};"static"===n.mode&&(n.options={ipaddr:e.elements.network.client.ethernet.ip.value,netmask:e.elements.network.client.ethernet.netmask.value,gateway:e.elements.network.client.ethernet.gateway.value}),a.setLanSettings(n).then((function(){p("/settings/network"),t.target.disabled=!1})).catch((function(e){s.showMessage(l.getMessage("failed-ethernet-configure"),3e3),console.error("Failed to set ethernet config: ".concat(e)),t.target.disabled=!1}))})),this.elements.network.client.wifi.showPassword.addEventListener("change",(function(t){t.target.checked?e.elements.network.client.wifi.password.setAttribute("type","text"):e.elements.network.client.wifi.password.setAttribute("type","password")})),this.elements.network.client.wifi.password.addEventListener("input",this.validateWifi.bind(this)),this.elements.network.client.wifi.connect.addEventListener("click",(function(t){t.target.disabled=!0,s.showMessage(l.getMessage("network-settings-changing"),3e3);var n={enabled:!0,mode:"sta",options:{ssid:e.elements.network.client.wifi.ssid.value,key:e.elements.network.client.wifi.password.value}};a.setWlanSettings(n).then((function(){p("/settings/network"),t.target.disabled=!1})).catch((function(e){s.showMessage(l.getMessage("failed-wifi-configure"),3e3),console.error("Failed to set Wi-Fi config: ".concat(e)),t.target.disabled=!1}))})),this.validateWifi(),this.elements.network.router.wan.ip.addEventListener("input",this.validateWan.bind(this)),this.elements.network.router.wan.netmask.addEventListener("input",this.validateWan.bind(this)),this.elements.network.router.wan.gateway.addEventListener("input",this.validateWan.bind(this)),this.elements.network.router.wan.username.addEventListener("input",this.validateWan.bind(this)),this.elements.network.router.wan.password.addEventListener("input",this.validateWan.bind(this));var n=[this.elements.network.router.wan.ipLabel,this.elements.network.router.wan.ip,this.elements.network.router.wan.netmaskLabel,this.elements.network.router.wan.netmask,this.elements.network.router.wan.gatewayLabel,this.elements.network.router.wan.gateway],r=[this.elements.network.router.wan.usernameLabel,this.elements.network.router.wan.username,this.elements.network.router.wan.passwordLabel,this.elements.network.router.wan.password];this.elements.network.router.wan.mode.addEventListener("change",(function(t){switch(e.validateWan(),t.target.value){case"dhcp":n.forEach((function(e){return e.classList.add("hidden")})),r.forEach((function(e){return e.classList.add("hidden")}));break;case"static":n.forEach((function(e){return e.classList.remove("hidden")})),r.forEach((function(e){return e.classList.add("hidden")}));break;case"pppoe":n.forEach((function(e){return e.classList.add("hidden")})),r.forEach((function(e){return e.classList.remove("hidden")}))}})),this.elements.network.router.wan.mode.value="dhcp",n.forEach((function(e){return e.classList.add("hidden")})),r.forEach((function(e){return e.classList.add("hidden")})),this.elements.network.router.wan.done.addEventListener("click",(function(t){t.target.disabled=!0,s.showMessage(l.getMessage("network-settings-changing"),3e3);var n={mode:e.elements.network.router.wan.mode.value};"static"===n.mode?n.options={ipaddr:e.elements.network.router.wan.ip.value,netmask:e.elements.network.router.wan.netmask.value,gateway:e.elements.network.router.wan.gateway.value}:"pppoe"===n.mode&&(n.options={username:e.elements.network.router.wan.username.value,password:e.elements.network.router.wan.password.value}),a.setWanSettings(n).then((function(){p("/settings/network"),t.target.disabled=!1})).catch((function(e){s.showMessage(l.getMessage("failed-wan-configure"),3e3),console.error("Failed to set WAN config: ".concat(e)),t.target.disabled=!1}))})),this.elements.network.router.lan.ip.addEventListener("input",this.validateLan.bind(this)),this.elements.network.router.lan.netmask.addEventListener("input",this.validateLan.bind(this)),this.elements.network.router.lan.done.addEventListener("click",(function(t){t.target.disabled=!0,s.showMessage(l.getMessage("network-settings-changing"),3e3);var n={mode:"static",options:{ipaddr:e.elements.network.router.lan.ip.value,netmask:e.elements.network.router.lan.netmask.value}},r={enabled:e.elements.network.router.lan.dhcp.checked};a.setLanSettings(n).then((function(){return a.setDhcpSettings(r)})).then((function(){p("/settings/network"),t.target.disabled=!1})).catch((function(e){s.showMessage(l.getMessage("failed-lan-configure"),3e3),console.error("Failed to set LAN config: ".concat(e)),t.target.disabled=!1}))})),this.validateLan(),this.elements.network.router.wlan.ssid.addEventListener("input",this.validateWlan.bind(this)),this.elements.network.router.wlan.password.addEventListener("input",this.validateWlan.bind(this)),this.elements.network.router.wlan.showPassword.addEventListener("change",(function(t){t.target.checked?e.elements.network.router.wlan.password.setAttribute("type","text"):e.elements.network.router.wlan.password.setAttribute("type","password")})),this.elements.network.router.wlan.done.addEventListener("click",(function(t){t.target.disabled=!0,s.showMessage(l.getMessage("network-settings-changing"),3e3);var n={enabled:e.elements.network.router.wlan.enable.checked,mode:"ap"};n.enabled&&(n.options={ssid:e.elements.network.router.wlan.ssid.value,key:e.elements.network.router.wlan.password.value}),a.setWlanSettings(n).then((function(){p("/settings/network"),t.target.disabled=!1})).catch((function(e){s.showMessage(l.getMessage("failed-configure-wlan"),3e3),console.error("Failed to set WLAN config: ".concat(e)),t.target.disabled=!1}))})),this.validateWlan()},setupUserElements:function(){var e=this;this.elements.user={edit:{save:document.getElementById("user-settings-edit-save"),form:document.getElementById("edit-user-form"),id:document.getElementById("user-settings-edit-id"),email:document.getElementById("user-settings-edit-email"),name:document.getElementById("user-settings-edit-name"),password:document.getElementById("user-settings-edit-password"),newPassword:document.getElementById("user-settings-edit-new-password"),confirmPassword:document.getElementById("user-settings-edit-confirm-password"),passwordMismatch:document.getElementById("user-settings-edit-password-mismatch"),mfaEnabled:document.getElementById("user-settings-edit-mfa-enabled"),mfaForm:document.getElementById("user-settings-edit-mfa-form"),mfaQrCode:document.getElementById("user-settings-mfa-qr-code"),mfaSecret:document.getElementById("user-settings-mfa-secret"),mfaTotp:document.getElementById("user-settings-mfa-totp"),mfaVerify:document.getElementById("user-settings-mfa-verify"),mfaError:document.getElementById("user-settings-mfa-error"),mfaRegenerateCodes:document.getElementById("user-settings-mfa-regenerate-codes"),mfaBackupCodesMessage:document.getElementById("user-settings-mfa-backup-codes-message"),mfaBackupCodes:document.getElementById("user-settings-mfa-backup-codes"),error:document.getElementById("user-settings-edit-error")},add:{save:document.getElementById("user-settings-add-save"),form:document.getElementById("add-user-form"),email:document.getElementById("user-settings-add-email"),name:document.getElementById("user-settings-add-name"),password:document.getElementById("user-settings-add-password"),confirmPassword:document.getElementById("user-settings-add-confirm-password"),passwordMismatch:document.getElementById("user-settings-add-password-mismatch"),error:document.getElementById("user-settings-add-error")}},this.elements.user.edit.mfaEnabled.addEventListener("change",(function(t){var n=parseInt(e.elements.user.edit.id.value,10);t.target.checked?a.userEnableMfa(n).then((function(t){e.elements.user.edit.mfaForm.classList.remove("hidden");var n=new m({content:t.url,container:"svg-viewbox",join:!0});e.elements.user.edit.mfaQrCode.innerHTML=n.svg(),e.elements.user.edit.mfaSecret.innerText=t.secret,e.elements.user.edit.mfaVerify.disabled=!0})).catch(console.error):a.userDisableMfa(n).then((function(){e.elements.user.edit.mfaError.classList.add("hidden"),e.elements.user.edit.mfaForm.classList.add("hidden"),e.elements.user.edit.mfaRegenerateCodes.classList.add("hidden")})).catch(console.error)})),this.elements.user.edit.mfaTotp.addEventListener("input",(function(t){e.elements.user.edit.mfaVerify.disabled=6!==t.target.value.length})),this.elements.user.edit.mfaVerify.addEventListener("click",(function(t){t.target.disabled=!0;var n=parseInt(e.elements.user.edit.id.value,10);a.userEnableMfa(n,e.elements.user.edit.mfaTotp.value).then((function(n){t.target.disabled=!1,e.elements.user.edit.mfaError.classList.add("hidden"),e.elements.user.edit.mfaForm.classList.add("hidden"),e.elements.user.edit.mfaBackupCodesMessage.classList.remove("hidden"),e.elements.user.edit.mfaBackupCodes.classList.remove("hidden"),n.backupCodes.forEach((function(t){var n=document.createElement("p");n.innerText=t,e.elements.user.edit.mfaBackupCodes.appendChild(n)}))})).catch((function(){t.target.disabled=!1,e.elements.user.edit.mfaError.classList.remove("hidden")}))})),this.elements.user.edit.mfaRegenerateCodes.addEventListener("click",(function(t){t.target.disabled=!0;var n=parseInt(e.elements.user.edit.id.value,10);a.userRegenerateMfaBackupCodes(n).then((function(n){t.target.disabled=!1,e.elements.user.edit.mfaBackupCodesMessage.classList.remove("hidden"),e.elements.user.edit.mfaBackupCodes.classList.remove("hidden"),e.elements.user.edit.mfaBackupCodes.innerHTML="",n.backupCodes.forEach((function(t){var n=document.createElement("p");n.innerText=t,e.elements.user.edit.mfaBackupCodes.appendChild(n)}))})).catch((function(e){t.target.disabled=!1,console.error(e)}))})),this.elements.user.edit.form.addEventListener("submit",(function(t){if(t.preventDefault(),e.elements.user.edit.save.disabled=!0,e.elements.user.edit.error.classList.add("hidden"),""===e.elements.user.edit.newPassword.value||e.elements.user.edit.newPassword.value===e.elements.user.edit.confirmPassword.value){e.elements.user.edit.passwordMismatch.classList.add("hidden");var n=parseInt(e.elements.user.edit.id.value,10),r=e.elements.user.edit.email.value,i=e.elements.user.edit.name.value,o=e.elements.user.edit.password.value,s=""!==e.elements.user.edit.newPassword.value?e.elements.user.edit.newPassword.value:null;a.editUser(n,i,r,o,s).then((function(){e.elements.user.edit.save.disabled=!1,p("/settings/users")})).catch((function(t){e.elements.user.edit.save.disabled=!1,e.elements.user.edit.error.classList.remove("hidden"),e.elements.user.edit.error.textContent=t.message,console.error(t)}))}else e.elements.user.edit.passwordMismatch.classList.remove("hidden")})),this.elements.user.add.form.addEventListener("submit",(function(t){if(t.preventDefault(),e.elements.user.add.save.disabled=!0,e.elements.user.add.error.classList.add("hidden"),e.elements.user.add.password.value===e.elements.user.add.confirmPassword.value){e.elements.user.add.passwordMismatch.classList.add("hidden");var n=e.elements.user.add.email.value,r=e.elements.user.add.name.value,i=e.elements.user.add.password.value;a.addUser(r,n,i).then((function(){e.elements.user.add.save.disabled=!1,p("/settings/users")})).catch((function(t){e.elements.user.add.save.disabled=!1,e.elements.user.add.error.classList.remove("hidden"),e.elements.user.add.error.textContent=t.message,console.error(t)}))}else e.elements.user.add.passwordMismatch.classList.remove("hidden")}))},setupLocalizationElements:function(){this.elements.localization={country:document.getElementById("localization-settings-country"),timezone:document.getElementById("localization-settings-timezone"),language:document.getElementById("localization-settings-language"),units:{temperature:document.getElementById("localization-settings-units-temperature")}},this.elements.localization.country.addEventListener("change",(function(e){a.setCountry(e.target.value).catch(console.error)})),this.elements.localization.timezone.addEventListener("change",(function(e){a.setTimezone(e.target.value).then((function(){return window.location.reload()})).catch(console.error)})),this.elements.localization.language.addEventListener("change",(function(e){a.setLanguage(e.target.value).then((function(){return window.location.reload()})).catch(console.error)})),this.elements.localization.units.temperature.addEventListener("change",(function(e){a.setUnits({temperature:e.target.value}).then((function(){return window.location.reload()})).catch(console.error)}))},setupUpdateElements:function(){this.elements.update={updateNow:document.getElementById("update-now"),enableSelfUpdatesCheckbox:document.getElementById("enable-self-updates-checkbox")},this.elements.update.updateNow.addEventListener("click",this.onUpdateClick),this.elements.update.enableSelfUpdatesCheckbox.addEventListener("change",this.onEnableSelfUpdatesCheckboxChange)},setupExperimentElements:function(){},setupDeveloperElements:function(){this.elements.developer={sshCheckbox:document.getElementById("enable-ssh-checkbox"),logsLink:document.getElementById("view-internal-logs")},this.elements.developer.sshCheckbox.addEventListener("change",(function(e){var t=e.target.checked;a.setSshStatus(t).catch((function(e){console.error("Failed to toggle SSH: ".concat(e))}))}))},validateEthernet:function(){var e="dhcp"===this.elements.network.client.ethernet.mode.value||f.test(this.elements.network.client.ethernet.ip.value)&&f.test(this.elements.network.client.ethernet.netmask.value)&&f.test(this.elements.network.client.ethernet.gateway.value);this.elements.network.client.ethernet.done.disabled=!e},validateWifi:function(){var e=this.elements.network.client.wifi.password.value.length>=8;this.elements.network.client.wifi.connect.disabled=!e},validateWan:function(){var e="dhcp"===this.elements.network.router.wan.mode.value||"static"===this.elements.network.router.wan.mode.value&&f.test(this.elements.network.router.wan.ip.value)&&f.test(this.elements.network.router.wan.netmask.value)&&f.test(this.elements.network.router.wan.gateway.value)||"pppoe"===this.elements.network.router.wan.mode.value&&this.elements.network.router.wan.username.value.length>0&&this.elements.network.router.wan.password.value.length>0;this.elements.network.router.wan.done.disabled=!e},validateLan:function(){var e=f.test(this.elements.network.router.lan.ip.value)&&f.test(this.elements.network.router.lan.netmask.value);this.elements.network.router.lan.done.disabled=!e},validateWlan:function(){var e=this.elements.network.router.wlan.ssid.value.length>0&&this.elements.network.router.wlan.ssid.value.length<=32&&this.elements.network.router.wlan.password.value.length>=8;this.elements.network.router.wlan.done.disabled=!e},hideNetworkElements:function(){this.elements.network.main.classList.add("hidden"),this.elements.network.unsupported.main.classList.add("hidden"),this.elements.network.client.main.classList.add("hidden"),this.elements.network.client.ethernet.main.classList.add("hidden"),this.elements.network.client.wifi.main.classList.add("hidden"),this.elements.network.router.main.classList.add("hidden"),this.elements.network.router.wan.main.classList.add("hidden"),this.elements.network.router.lan.main.classList.add("hidden"),this.elements.network.router.wlan.main.classList.add("hidden")},insertTitleElement:function(e,t,n){var r=document.createElement("div");return r.classList.add("section-title"),r.innerHTML='\n      <div class="section-title-back-flex"></div>\n      <div class="section-title-container">\n        <img class="section-title-icon" alt="'.concat(t," ").concat(l.getMessage("icon"),'" src="').concat(n,'" />\n        <span class="section-title-name">').concat(t,'</span>\n      </div>\n      <div class="section-title-right-flex"></div>\n    '),e.insertBefore(r,e.firstChild),r},show:function(e,t,n){this.backButton.href="/settings",this.view.classList.remove("dark"),this.discoverAddonsButton.classList.add("hidden"),this.addUserButton.classList.add("hidden"),e?this.showSection(e,t,n):this.showMenu()},showMenu:function(){s.showMenuButton(),this.hideBackButton(),this.menu.classList.remove("hidden"),this.domainSettings.classList.add("hidden"),this.userSettings.classList.add("hidden"),this.userSettingsMain.classList.add("hidden"),this.userSettingsEdit.classList.add("hidden"),this.userSettingsAdd.classList.add("hidden"),this.adapterSettings.classList.add("hidden"),this.addonSettings.classList.add("hidden"),this.addonMainSettings.classList.add("hidden"),this.addonConfigSettings.classList.add("hidden"),this.addonDiscoverySettings.classList.add("hidden"),this.experimentSettings.classList.add("hidden"),this.localizationSettings.classList.add("hidden"),this.updateSettings.classList.add("hidden"),this.authorizationSettings.classList.add("hidden"),this.developerSettings.classList.add("hidden"),this.discoverAddonsButton.classList.add("hidden"),this.addUserButton.classList.add("hidden"),this.hideNetworkElements()},hideMenu:function(){this.menu.classList.add("hidden")},showBackButton:function(){this.backButton.classList.remove("hidden")},hideBackButton:function(){this.backButton.classList.add("hidden")},showSection:function(e,t,n){switch(e){case"domain":this.showDomainSettings();break;case"network":if(t)switch(t){case"ethernet":this.showEthernetSettings();break;case"wifi":n&&"configure"===n?this.showWifiConfigure():this.showWifiSettings();break;case"wan":this.showWanSettings();break;case"lan":this.showLanSettings();break;case"wlan":this.showWlanSettings();break;default:return void console.error("Tried to display undefined subsection")}else this.showNetworkSettings();break;case"users":if(t)switch(t){case"edit":this.showEditUserScreen(n);break;case"add":this.showAddUserScreen(n);break;default:return void console.error("Tried to display undefined subsection")}else this.showUserSettings();break;case"adapters":this.showAdapterSettings();break;case"addons":if(t)switch(t){case"discovered":this.showDiscoveredAddonsScreen();break;case"config":this.showAddonConfigScreen(n);break;default:return void console.error("Tried to display undefined subsection")}else this.showAddonSettings();break;case"experiments":this.showExperimentSettings();break;case"localization":this.showLocalizationSettings();break;case"updates":this.showUpdateSettings();break;case"authorizations":this.showAuthorizationSettings();break;case"developer":this.showDeveloperSettings();break;default:return void console.error("Tried to display undefined section")}this.hideMenu(),s.hideMenuButton(),this.showBackButton()},showDomainSettings:function(){var e=this;this.domainSettings.classList.remove("hidden"),a.getTunnelInfo().then((function(t){t?(e.elements.domain.localCheckbox.checked=t.mDNSstate,e.elements.domain.localName.value=t.localDomain,e.elements.domain.tunnelName.innerText=t.tunnelDomain):(e.elements.domain.localName.value=l.getMessage("unknown-state"),e.elements.domain.tunnelName.innerText=l.getMessage("unknown-state")),e.elements.domain.localCheckbox.checked||(e.elements.domain.localName.disabled=!0,e.elements.domain.update.disabled=!0)}))},onLocalDomainCheckboxChange:function(e){var t=document.getElementById("domain-settings-error"),n=!!e.target.checked;a.setDomainSettings({local:{multicastDNSstate:n}}).then((function(){document.getElementById("domain-settings-local-update").disabled=!n,document.getElementById("domain-settings-local-name").disabled=!n,t.classList.add("hidden")})).catch((function(r){var i="".concat(l.getMessage("error"),": ").concat(r);console.error(i),t.classList.remove("hidden"),t.textContent=r,e.target.checked=!n,document.getElementById("domain-settings-local-update").disabled=n,document.getElementById("domain-settings-local-name").disabled=n}))},onLocalDomainClick:function(){var e=document.getElementById("domain-settings-local-name"),t=document.getElementById("domain-settings-error");a.setDomainSettings({local:{localDNSname:e.value}}).then((function(e){e.update&&e.localDomain.length>0?e.mDNSstate&&s.showMessage("Update succeeded.",3e3):(t.classList.remove("hidden"),t.textContent=e.error,document.getElementById("domain-settings-local-name").value=e.localDomain)})).catch((function(e){var n="".concat(l.getMessage("error"),": ").concat(e);console.error(n),t.classList.remove("hidden"),t.textContent=e}))},showNetworkSettings:function(){var e=this;this.hideNetworkElements(),this.elements.network.main.classList.remove("hidden"),a.getPlatform().then((function(t){switch(t.os){case"linux-debian":case"linux-raspbian":e.elements.network.client.main.classList.remove("hidden");break;case"linux-openwrt":e.elements.network.router.main.classList.remove("hidden");break;default:return e.elements.network.unsupported.main.classList.remove("hidden"),Promise.resolve(null)}return a.getNetworkAddresses()})).then((function(t){t&&(e.elements.network.client.ethernet.mainIp.innerText=t.lan,e.elements.network.router.lan.mainIp.innerText=t.lan,e.elements.network.client.wifi.mainIp.innerText=t.wlan.ip,e.elements.network.client.wifi.mainSsid.innerText=t.wlan.ssid,e.elements.network.router.wlan.mainSsid.innerText=t.wlan.ssid,e.elements.network.router.wan.mainIp.innerText=t.wan)})).catch((function(e){console.error("Error getting platform setting: ".concat(e))}))},showEthernetSettings:function(){var e=this;this.backButton.href="/settings/network",this.view.classList.add("dark"),this.hideNetworkElements(),this.elements.network.main.classList.remove("hidden"),this.elements.network.client.ethernet.netmask.value="255.255.255.0",this.elements.network.client.ethernet.main.classList.remove("hidden"),a.getLanSettings().then((function(t){e.elements.network.client.ethernet.mode.value=t.mode||"dhcp",e.elements.network.client.ethernet.ip.value=t.ipdaddr||"",e.elements.network.client.ethernet.netmask.value=t.netmask||"255.255.255.0",e.elements.network.client.ethernet.gateway.value=t.gateway||""})).catch((function(e){console.error("Failed to get ethernet config: ".concat(e))})).then((function(){e.validateEthernet()}))},showWifiSettings:function(){var e=this;this.backButton.href="/settings/network",this.view.classList.add("dark"),this.hideNetworkElements(),this.elements.network.client.wifi.wrap.classList.add("hidden"),this.elements.network.client.wifi.list.classList.remove("hidden"),this.elements.network.main.classList.remove("hidden"),this.elements.network.client.wifi.main.classList.remove("hidden"),a.getWirelessNetworks().then((function(t){e.elements.network.client.wifi.list.innerHTML="",t.forEach((function(e){return new y(e)}))})).catch((function(e){console.error("Failed to scan for wireless networks: ".concat(e))})).then((function(){e.validateWlan()}))},showWifiConfigure:function(){this.backButton.href="/settings/network/wifi",this.view.classList.add("dark"),this.hideNetworkElements(),this.elements.network.client.wifi.password.value="",this.elements.network.client.wifi.list.classList.add("hidden"),this.elements.network.client.wifi.wrap.classList.remove("hidden"),this.elements.network.main.classList.remove("hidden"),this.elements.network.client.wifi.main.classList.remove("hidden")},showWanSettings:function(){var e=this;this.backButton.href="/settings/network",this.view.classList.add("dark"),this.hideNetworkElements(),this.elements.network.main.classList.remove("hidden"),this.elements.network.router.wan.netmask.value="255.255.255.0",this.elements.network.router.wan.main.classList.remove("hidden"),a.getWanSettings().then((function(t){e.elements.network.router.wan.mode.value=t.mode||"dhcp",e.elements.network.router.wan.ip.value=t.ipdaddr||"",e.elements.network.router.wan.netmask.value=t.netmask||"",e.elements.network.router.wan.gateway.value=t.gateway||"",e.elements.network.router.wan.username.value=t.username||"",e.elements.network.router.wan.password.value=t.password||""})).catch((function(e){console.error("Failed to get WAN config: ".concat(e))})).then((function(){e.validateWan()}))},showLanSettings:function(){var e=this;this.backButton.href="/settings/network",this.view.classList.add("dark"),this.hideNetworkElements(),this.elements.network.main.classList.remove("hidden"),this.elements.network.router.lan.netmask.value="255.255.255.0",this.elements.network.router.lan.dhcp.checked=!0,this.elements.network.router.lan.ip.value="192.168.2.1",this.elements.network.router.lan.main.classList.remove("hidden"),a.getLanSettings().then((function(t){return e.elements.network.router.lan.ip.value=t.ipdaddr||"192.168.2.1",e.elements.network.router.lan.netmask.value=t.netmask||"255.255.255.0",a.getDhcpSettings()})).then((function(t){e.elements.network.router.lan.dhcp.checked=t.enabled})).catch((function(e){console.error("Failed to get LAN config: ".concat(e))})).then((function(){e.validateLan()}))},showWlanSettings:function(){var e=this;this.backButton.href="/settings/network",this.view.classList.add("dark"),this.hideNetworkElements(),this.elements.network.main.classList.remove("hidden"),this.elements.network.router.wlan.main.classList.remove("hidden"),a.getWlanSettings().then((function(t){e.elements.network.router.wlan.enable.checked=t.enabled,e.elements.network.router.wlan.ssid.value=t.options.ssid||"",e.elements.network.router.wlan.password.value=t.options.key||""})).catch((function(e){console.error("Failed to get WLAN config: ".concat(e))})).then((function(){e.validateWlan()}))},showUserSettings:function(){this.userSettings.classList.remove("hidden"),this.userSettingsEdit.classList.add("hidden"),this.userSettingsAdd.classList.add("hidden"),this.userSettingsMain.classList.remove("hidden"),this.addUserButton.classList.remove("hidden"),a.getAllUserInfo().then((function(e){document.getElementById("users-list").innerHTML="";var t,n=r(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;new v(i)}}catch(e){n.e(e)}finally{n.f()}}))},showEditUserScreen:function(e){var t=this;this.backButton.href="/settings/users",this.userSettings.classList.remove("hidden"),this.userSettingsMain.classList.add("hidden"),this.userSettingsAdd.classList.add("hidden"),this.userSettingsEdit.classList.remove("hidden"),this.elements.user.edit.mfaForm.classList.add("hidden"),this.elements.user.edit.mfaError.classList.add("hidden"),this.elements.user.edit.mfaBackupCodes.innerHTML="",this.elements.user.edit.mfaBackupCodes.classList.add("hidden"),this.elements.user.edit.mfaBackupCodesMessage.classList.add("hidden"),this.elements.user.edit.mfaRegenerateCodes.classList.add("hidden"),this.view.classList.add("dark"),this.elements.user.edit.id.value=e,a.getUser(e).then((function(e){t.elements.user.edit.email.value=e.email,t.elements.user.edit.name.value=e.name,t.elements.user.edit.password.value="",t.elements.user.edit.newPassword.value="",t.elements.user.edit.confirmPassword.value="",t.elements.user.edit.mfaEnabled.checked=e.mfaEnrolled,e.mfaEnrolled&&t.elements.user.edit.mfaRegenerateCodes.classList.remove("hidden"),t.elements.user.edit.name.focus()}))},showAddUserScreen:function(){this.backButton.href="/settings/users",this.userSettings.classList.remove("hidden"),this.userSettingsMain.classList.add("hidden"),this.userSettingsEdit.classList.add("hidden"),this.userSettingsAdd.classList.remove("hidden"),this.view.classList.add("dark"),this.elements.user.add.email.value="",this.elements.user.add.name.value="",this.elements.user.add.password.value="",this.elements.user.add.confirmPassword.value="",this.elements.user.add.name.focus()},showAdapterSettings:function(){this.adapterSettings.classList.remove("hidden"),a.getAdapters().then((function(e){var t=document.getElementById("no-adapters"),n=document.getElementById("adapters-list");n.innerHTML="",0==e.length?(t.classList.remove("hidden"),n.classList.add("hidden")):(t.classList.add("hidden"),n.classList.remove("hidden"),e.sort((function(e,t){return e.name.localeCompare(t.name)})).forEach((function(e){return new o(e)})))}))},fetchInstalledAddonList:function(e){var t=this;return e&&(this.fetchInstalledAddonsDeferred=null),this.fetchInstalledAddonsDeferred?this.fetchInstalledAddonsDeferred.catch((function(){return t.fetchInstalledAddonsDeferred=null,t.fetchInstalledAddonList()})):(this.fetchInstalledAddonsDeferred=a.getInstalledAddons().then((function(e){if(e){t.installedAddons.clear();var n,i=r(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;try{t.installedAddons.set(o.id,o)}catch(e){console.error("Failed to parse add-on settings: ".concat(e))}}}catch(e){i.e(e)}finally{i.f()}}})),this.fetchInstalledAddonsDeferred)},fetchAvailableAddonList:function(e){var t=this;return(!this.availableAddonsLastFetched||new Date-this.availableAddonsLastFetched>3e5)&&(e=!0),e&&(this.fetchAvailableAddonsDeferred=null),this.fetchAvailableAddonsDeferred?this.fetchAvailableAddonsDeferred.catch((function(){return t.fetchAvailableAddonsDeferred=null,t.fetchAvailableAddonList()})):(this.fetchAvailableAddonsDeferred=a.getAddonsInfo().then((function(e){if(e&&e.urls&&e.architecture&&e.version&&e.nodeVersion){var t=new URLSearchParams;t.set("arch",e.architecture),t.set("version",e.version),t.set("node",e.nodeVersion),e.pythonVersions&&e.pythonVersions.length>0&&t.set("python",e.pythonVersions.join(",")),e.testAddons&&t.set("test","1");var n,i=[],o=r(e.urls);try{for(o.s();!(n=o.n()).done;){var a=n.value;i.push(fetch("".concat(a,"?").concat(t.toString()),{method:"GET",cache:"reload",headers:{Accept:"application/json"}}))}}catch(e){o.e(e)}finally{o.f()}return Promise.all(i)}})).then((function(e){var t,n=[],i=r(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;n.push(o.json())}}catch(e){i.e(e)}finally{i.f()}return Promise.all(n)})).then((function(e){t.availableAddons.clear();var n,i=r(e);try{for(i.s();!(n=i.n()).done;){var o,a=r(n.value);try{for(a.s();!(o=a.n()).done;){var s=o.value,c={id:s.id,name:s.name,description:s.description,author:s.author,homepage_url:s.homepage_url,license_url:s.license_url,version:s.version,url:s.url,checksum:s.checksum,primary_type:s.primary_type,installed:t.installedAddons.has(s.id)};t.availableAddons.has(s.id)&&t.compareSemver(t.availableAddons.get(s.id).version,c.version)>=0||t.availableAddons.set(s.id,c)}}catch(e){a.e(e)}finally{a.f()}}}catch(e){i.e(e)}finally{i.f()}})),this.fetchAvailableAddonsDeferred)},showAddonSettings:function(){var e=this;this.addonSettings.classList.remove("hidden"),this.addonConfigSettings.classList.add("hidden"),this.addonDiscoverySettings.classList.add("hidden"),this.addonConfigSettings.classList.add("hidden"),this.addonMainSettings.classList.remove("hidden"),this.discoverAddonsButton.classList.remove("hidden");var t=new Map;this.fetchInstalledAddonList(!0).then((function(){return document.getElementById("installed-addons-list").innerHTML="",Array.from(e.installedAddons.entries()).sort((function(e,t){var n=e[1].name||e[1].id||"",r=t[1].name||t[1].id||"";return n.localeCompare(r)})).forEach((function(n){t.set(n[0],new h(n[1],e.installedAddons,e.availableAddons))})),e.fetchAvailableAddonList(!0)})).then((function(){var n,i=r(Array.from(e.installedAddons.keys()).sort());try{for(i.s();!(n=i.n()).done;){var o=n.value,a=e.installedAddons.get(o);if(e.availableAddons.has(o)){var s=e.availableAddons.get(o);if(e.compareSemver(a.version,s.version)<0){var c=t.get(o);c&&c.setUpdateAvailable(s.url,s.version,s.checksum)}}}}catch(e){i.e(e)}finally{i.f()}})).catch(console.error)},showAddonConfigScreen:function(e){var t=this;this.backButton.href="/settings/addons",this.addonSettings.classList.remove("hidden"),this.addonMainSettings.classList.add("hidden"),this.addonConfigSettings.classList.remove("hidden"),this.addonDiscoverySettings.classList.add("hidden"),this.addonConfigTitleName.textContent="Configure ".concat(e),this.view.classList.add("dark"),this.fetchInstalledAddonList(!0).then((function(){var n=t.addonConfigSettings.querySelector(".json-schema-form");n&&n.parentNode.removeChild(n);var r=t.installedAddons.get(e);new c(e,r)})).catch(console.error)},showDiscoveredAddonsScreen:function(){var e=this;this.backButton.href="/settings/addons",this.addonSettings.classList.remove("hidden"),this.addonMainSettings.classList.add("hidden"),this.addonConfigSettings.classList.add("hidden"),this.addonDiscoverySettings.classList.remove("hidden"),this.view.classList.add("dark"),this.fetchInstalledAddonList(!1).then((function(){return e.fetchAvailableAddonList(!1)})).then((function(){e.updateDiscoveredAddonsList()})).catch(console.error)},updateDiscoveredAddonsList:function(){var e=this;document.getElementById("discovered-addons-list").innerHTML="";var t=this.discoveredAddonsSearch.value.toLowerCase(),n=function(e,t){return e.toLowerCase().indexOf(t.toLowerCase())>-1};Array.from(this.availableAddons.entries()).filter((function(e){return function(e){return n(e.id,t)||n(e.name,t)||n(e.description,t)||n(e.primary_type,t)}(e[1])})).sort((function(e,t){return e[1].name.localeCompare(t[1].name)})).forEach((function(t){return new u(t[1],e.installedAddons,e.availableAddons)}))},showExperimentCheckbox:function(e,t){var n=document.getElementById(t);a.getExperimentSetting(e).then((function(e){n.checked=e})).catch((function(t){console.error("Error getting ".concat(e," experiment setting ").concat(t))})),n.addEventListener("change",(function(t){var n=!!t.target.checked;a.setExperimentSetting(e,n).then((function(){n?d.showItem(e):d.hideItem(e)})).catch((function(t){console.error("Failed to enable ".concat(e," experiment: ").concat(t))}))}))},showExperimentSettings:function(){this.experimentSettings.classList.remove("hidden")},compareSemver:function(e,t){if(e===t)return 0;function n(e){return parseInt(e,10)}for(var r=e.split(".").map(n),i=t.split(".").map(n),o=0;o<r.length;o++){var a=r[o],s=i[o];if(a!==s)return a<s?-1:1}return 0},showLocalizationSettings:function(){this.localizationSettings.classList.remove("hidden");var e=this.elements.localization.country;e.innerHTML="",e.disabled=!0,a.getCountry().then((function(t){var n,i=r(t.valid);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=document.createElement("option");a.value=o,a.innerText=o,o===t.current&&(a.selected="selected"),e.appendChild(a)}}catch(e){i.e(e)}finally{i.f()}e.disabled=!t.setImplemented||0===t.valid.length})).catch(console.error);var t=this.elements.localization.timezone;t.innerHTML="",t.disabled=!0,a.getTimezone().then((function(e){var n,i=r(e.valid);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=document.createElement("option");a.value=o,a.innerText=o,o===e.current&&(a.selected="selected"),t.appendChild(a)}}catch(e){i.e(e)}finally{i.f()}t.disabled=!e.setImplemented||0===e.valid.length})).catch(console.error);var n=this.elements.localization.language;n.innerHTML="",a.getLanguage().then((function(e){"en"===e.current&&(e.current="en-US");var t,i=r(e.valid);try{for(i.s();!(t=i.n()).done;){var o=t.value,a=document.createElement("option");a.value=o.code,a.innerText=o.name,o.code===e.current&&(a.selected="selected"),n.appendChild(a)}}catch(e){i.e(e)}finally{i.f()}})).catch(console.error);var i=this.elements.localization.units.temperature;a.getUnits().then((function(e){i.value=e.temperature})).catch(console.error)},showUpdateSettings:function(){this.updateSettings.classList.remove("hidden"),this.fetchUpdateInfo()},onEnableSelfUpdatesCheckboxChange:function(e){var t=!!e.target.checked;a.setSelfUpdateStatus(t).catch((function(e){console.error("Failed to toggle auto-updates: ".concat(e))}))},fetchUpdateInfo:function(){var e,t,n=this,r=document.getElementById("update-settings-up-to-date"),i=document.getElementById("update-now"),o=document.getElementById("update-settings-version"),s=document.getElementById("update-settings-status");Promise.all([a.getUpdateStatus(),a.getSelfUpdateStatus()]).then((function(c){e=c[0],(t=c[1]).available||(r.textContent=l.getMessage("updates-not-supported")),o.textContent="".concat(l.getMessage("current-version"),": ").concat(g.escapeHtml(e.version));var u="".concat(l.getMessage("last-update"),": ");e.timestamp?(u+=new Date(e.timestamp).toString(),e.success||(u+=" (".concat(l.getMessage("failed"),")"))):u+=l.getMessage("never"),n.elements.update.enableSelfUpdatesCheckbox.checked=t.enabled,n.elements.update.enableSelfUpdatesCheckbox.disabled=!t.available,t.available?s.textContent=u:s.classList.add("hidden"),t.available&&(r.textContent=l.getMessage("checking-for-updates"),i.classList.add("hidden"),a.getUpdateLatest().then((function(t){t.version&&(n.compareSemver(e.version,t.version)<0?(r.textContent=l.getMessage("update-available"),i.classList.remove("hidden"),i.classList.remove("disabled")):(r.textContent=l.getMessage("update-up-to-date"),i.classList.add("hidden")))})).catch((function(){r.textContent=l.getMessage("failed-to-check-for-updates")})))}))},onUpdateClick:function(){var e=document.getElementById("update-now");e.removeEventListener("click",this.onUpdateClick),e.classList.add("disabled"),a.startUpdate().then((function(){e.textContent=l.getMessage("in-progress");var t=!1;!function n(){a.getUpdateStatus().then((function(){t?window.location.reload(!0):setTimeout(n,5e3)})).catch((function(){t||(e.textContent=l.getMessage("restarting"),t=!0),setTimeout(n,5e3)}))}()})).catch((function(){e.textContent=l.getMessage("error")}))},showAuthorizationSettings:function(){var e=this;this.authorizationSettings.classList.remove("hidden"),a.getAuthorizations().then((function(t){var n,i=document.getElementById("authorizations"),o=document.getElementById("no-authorizations"),a=r(i.children);try{for(a.s();!(n=a.n()).done;){var s=n.value;"no-authorizations"!==s.id&&"new-local-authorization"!==s.id&&s.parentNode.removeChild(s)}}catch(e){a.e(e)}finally{a.f()}if(0!==t.length){o.classList.add("hidden");var c,u=r(t);try{for(u.s();!(c=u.n()).done;){var l=c.value,h=document.createElement("li");h.classList.add("authorization-item");var f=document.createElement("p");f.textContent=l.name;var d=document.createElement("p");d.classList.add("origin"),d.textContent=new URL(l.redirect_uri).host;var p=document.createElement("input");p.classList.add("revoke-button","text-button"),p.type="button",p.value="Revoke",p.dataset.clientId=l.id,p.addEventListener("click",e.revokeAuthorization),h.appendChild(f),h.appendChild(d),h.appendChild(p),i.insertBefore(h,o)}}catch(e){u.e(e)}finally{u.f()}}else o.classList.remove("hidden")}))},revokeAuthorization:function(e){var t=e.target;if(t.dataset.clientId){var n=t.dataset.clientId;a.revokeAuthorization(n).then((function(){var e=t.parentNode,n=e.parentNode;(n.removeChild(e),0===n.children.length)&&document.getElementById("no-authorizations").classList.remove("hidden")})).catch((function(e){console.warn("Unable to revoke",e)}))}else console.warn("Missing clientId on revoke",t)},showDeveloperSettings:function(){var e=this;this.developerSettings.classList.remove("hidden"),this.elements.developer.logsLink.href="/internal-logs?jwt=".concat(a.jwt),a.getSshStatus().then((function(t){e.elements.developer.sshCheckbox.checked=t.enabled,t.toggleImplemented||(e.elements.developer.sshCheckbox.disabled=!0)})).catch((function(e){console.error("Error getting SSH setting: ".concat(e))}))}};e.exports=b},function(e,t,n){var r=n(8),i=n(177),o=n(109);r({target:"Array",proto:!0},{fill:i}),o("fill")},function(e,t,n){"use strict";var r=n(8),i=n(178).left,o=n(144),a=n(66),s=o("reduce"),c=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!s||!c},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(36),n(37),n(9),n(44),n(23),n(214),n(43),n(3),n(172),n(5),n(105),n(150),n(33);var o={_ajv:new(n(331))({errorDataPath:"property",allErrors:!0}),_reEscapeChar:/\\(\\)?/g};o._rePropName=RegExp("[^.[\\]]+|\\[(?:([^\"'].*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g"),o._toPath=function(e){var t=[];return e.replace(o._rePropName,(function(e,n,r,i){var a=e;r?a=i.replace(o._reEscapeChar,"$1"):n&&(a=n.trim()),t.push(a)})),t},o._toErrorSchema=function(e){return null!==e&&e.length?e.reduce((function(e,t){var n,i=t.dataPath,a=t.message,s=e,c=r(o._toPath(i).slice(0));try{for(c.s();!(n=c.n()).done;){var u=n.value;u in s||(s[u]={}),s=s[u]}}catch(e){c.e(e)}finally{c.f()}return Array.isArray(s.__errors)?s.__errors=s.__errors.concat(a):s.__errors=[a],e}),{}):{}},o.validateFormData=function(e,t){if(o.hasOwnProperty("_ajv")){o._ajv.validate(t,e);var n=o._ajv.errors;return{errors:n=null===n?[]:n,errorSchema:o._toErrorSchema(n)}}return{errors:[{message:"validator still not available"}]}},e.exports=o},function(e,t,n){"use strict";var r=n(161);e.exports=function(e){r.copy(e,this)}},function(e,t,n){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n,r="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(n=t.cmp,function(e){return function(t,r){var i={key:t,value:e[t]},o={key:r,value:e[r]};return n(i,o)}}),o=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var n,a;if(Array.isArray(t)){for(a="[",n=0;n<t.length;n++)n&&(a+=","),a+=e(t[n])||"null";return a+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(t)-1,c=Object.keys(t).sort(i&&i(t));for(a="",n=0;n<c.length;n++){var u=c[n],l=e(t[u]);l&&(a&&(a+=","),a+=JSON.stringify(u)+":"+l)}return o.splice(s,1),"{"+a+"}"}}(e)}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r="",i=!0===e.schema.$async,o=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),a=e.self._getId(e.schema);if(e.opts.strictKeywords){var s=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(s){var c="unknown keyword: "+s;if("log"!==e.opts.strictKeywords)throw new Error(c);e.logger.warn(c)}}if(e.isTop&&(r+=" var validate = ",i&&(e.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",a&&(e.opts.sourceCode||e.opts.processCode)&&(r+=" /*# sourceURL="+a+" */ ")),"boolean"==typeof e.schema||!o&&!e.schema.$ref){var u=e.level,l=e.dataLevel,h=e.schema["false schema"],f=e.schemaPath+e.util.getProperty("false schema"),d=e.errSchemaPath+"/false schema",p=!e.opts.allErrors,m="data"+(l||""),v="valid"+u;if(!1===e.schema){e.isTop?p=!0:r+=" var "+v+" = false; ",(Y=Y||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'boolean schema is false' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var g=r;r=Y.pop(),!e.compositeRule&&p?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?r+=i?" return data; ":" validate.errors = null; return true; ":r+=" var "+v+" = true; ";return e.isTop&&(r+=" }; return validate; "),r}if(e.isTop){var y=e.isTop;u=e.level=0,l=e.dataLevel=0,m="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var b="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{u=e.level,m="data"+((l=e.dataLevel)||"");if(a&&(e.baseId=e.resolve.url(e.baseId,a)),i&&!e.async)throw new Error("async schema in sync schema");r+=" var errs_"+u+" = errors;"}v="valid"+u,p=!e.opts.allErrors;var w="",E="",_=e.schema.type,k=Array.isArray(_);if(_&&e.opts.nullable&&!0===e.schema.nullable&&(k?-1==_.indexOf("null")&&(_=_.concat("null")):"null"!=_&&(_=[_,"null"],k=!0)),k&&1==_.length&&(_=_[0],k=!1),e.schema.$ref&&o){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(o=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(r+=" "+e.RULES.all.$comment.code(e,"$comment")),_){if(e.opts.coerceTypes)var S=e.util.coerceToTypes(e.opts.coerceTypes,_);var x=e.RULES.types[_];if(S||k||!0===x||x&&!Q(x)){f=e.schemaPath+".type",d=e.errSchemaPath+"/type",f=e.schemaPath+".type",d=e.errSchemaPath+"/type";var T=k?"checkDataTypes":"checkDataType";if(r+=" if ("+e.util[T](_,m,e.opts.strictNumbers,!0)+") { ",S){var P="dataType"+u,O="coerced"+u;r+=" var "+P+" = typeof "+m+"; ","array"==e.opts.coerceTypes&&(r+=" if ("+P+" == 'object' && Array.isArray("+m+")) "+P+" = 'array'; "),r+=" var "+O+" = undefined; ";var C="",I=S;if(I)for(var R,L=-1,A=I.length-1;L<A;)R=I[L+=1],L&&(r+=" if ("+O+" === undefined) { ",C+="}"),"array"==e.opts.coerceTypes&&"array"!=R&&(r+=" if ("+P+" == 'array' && "+m+".length == 1) { "+O+" = "+m+" = "+m+"[0]; "+P+" = typeof "+m+";  } "),"string"==R?r+=" if ("+P+" == 'number' || "+P+" == 'boolean') "+O+" = '' + "+m+"; else if ("+m+" === null) "+O+" = ''; ":"number"==R||"integer"==R?(r+=" if ("+P+" == 'boolean' || "+m+" === null || ("+P+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==R&&(r+=" && !("+m+" % 1)"),r+=")) "+O+" = +"+m+"; "):"boolean"==R?r+=" if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+O+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+O+" = true; ":"null"==R?r+=" if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+O+" = null; ":"array"==e.opts.coerceTypes&&"array"==R&&(r+=" if ("+P+" == 'string' || "+P+" == 'number' || "+P+" == 'boolean' || "+m+" == null) "+O+" = ["+m+"]; ");r+=" "+C+" if ("+O+" === undefined) {   ",(Y=Y||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",r+=k?""+_.join(","):""+_,r+="' } ",!1!==e.opts.messages&&(r+=" , message: 'should be ",r+=k?""+_.join(","):""+_,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";g=r;r=Y.pop(),!e.compositeRule&&p?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  ";var M=l?"data"+(l-1||""):"parentData";r+=" "+m+" = "+O+"; ",l||(r+="if ("+M+" !== undefined)"),r+=" "+M+"["+(l?e.dataPathArr[l]:"parentDataProperty")+"] = "+O+"; } "}else{(Y=Y||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",r+=k?""+_.join(","):""+_,r+="' } ",!1!==e.opts.messages&&(r+=" , message: 'should be ",r+=k?""+_.join(","):""+_,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";g=r;r=Y.pop(),!e.compositeRule&&p?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(e.schema.$ref&&!o)r+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",p&&(r+=" } if (errors === ",r+=y?"0":"errs_"+u,r+=") { ",E+="}");else{var D=e.RULES;if(D)for(var j=-1,N=D.length-1;j<N;)if(Q(x=D[j+=1])){if(x.type&&(r+=" if ("+e.util.checkDataType(x.type,m,e.opts.strictNumbers)+") { "),e.opts.useDefaults)if("object"==x.type&&e.schema.properties){h=e.schema.properties;var B=Object.keys(h);if(B)for(var F,U=-1,H=B.length-1;U<H;){if(void 0!==(V=h[F=B[U+=1]]).default){var q=m+e.util.getProperty(F);if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+q;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else r+=" if ("+q+" === undefined ","empty"==e.opts.useDefaults&&(r+=" || "+q+" === null || "+q+" === '' "),r+=" ) "+q+" = ","shared"==e.opts.useDefaults?r+=" "+e.useDefault(V.default)+" ":r+=" "+JSON.stringify(V.default)+" ",r+="; "}}}else if("array"==x.type&&Array.isArray(e.schema.items)){var z=e.schema.items;if(z){L=-1;for(var V,$=z.length-1;L<$;)if(void 0!==(V=z[L+=1]).default){q=m+"["+L+"]";if(e.compositeRule){if(e.opts.strictDefaults){b="default is ignored for: "+q;if("log"!==e.opts.strictDefaults)throw new Error(b);e.logger.warn(b)}}else r+=" if ("+q+" === undefined ","empty"==e.opts.useDefaults&&(r+=" || "+q+" === null || "+q+" === '' "),r+=" ) "+q+" = ","shared"==e.opts.useDefaults?r+=" "+e.useDefault(V.default)+" ":r+=" "+JSON.stringify(V.default)+" ",r+="; "}}}var W=x.rules;if(W)for(var K,G=-1,X=W.length-1;G<X;)if(Z(K=W[G+=1])){var J=K.code(e,K.keyword,x.type);J&&(r+=" "+J+" ",p&&(w+="}"))}if(p&&(r+=" "+w+" ",w=""),x.type&&(r+=" } ",_&&_===x.type&&!S)){r+=" else { ";var Y;f=e.schemaPath+".type",d=e.errSchemaPath+"/type";(Y=Y||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(d)+" , params: { type: '",r+=k?""+_.join(","):""+_,r+="' } ",!1!==e.opts.messages&&(r+=" , message: 'should be ",r+=k?""+_.join(","):""+_,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";g=r;r=Y.pop(),!e.compositeRule&&p?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}p&&(r+=" if (errors === ",r+=y?"0":"errs_"+u,r+=") { ",E+="}")}}function Q(e){for(var t=e.rules,n=0;n<t.length;n++)if(Z(t[n]))return!0}function Z(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var n=t.implements,r=0;r<n.length;r++)if(void 0!==e.schema[n[r]])return!0}(t)}return p&&(r+=" "+E+" "),y?(i?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+v+" = errors === errs_"+u+";",r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(a||""),f=e.opts.$data&&s&&s.$data;f?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s;var d="maximum"==t,p=d?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[p],v=e.opts.$data&&m&&m.$data,g=d?"<":">",y=d?">":"<",b=void 0;if(!f&&"number"!=typeof s&&void 0!==s)throw new Error(t+" must be number");if(!v&&void 0!==m&&"number"!=typeof m&&"boolean"!=typeof m)throw new Error(p+" must be number or boolean");if(v){var w=e.util.getData(m.$data,a,e.dataPathArr),E="exclusive"+o,_="exclType"+o,k="exclIsNumber"+o,S="' + "+(P="op"+o)+" + '";i+=" var schemaExcl"+o+" = "+w+"; ",i+=" var "+E+"; var "+_+" = typeof "+(w="schemaExcl"+o)+"; if ("+_+" != 'boolean' && "+_+" != 'undefined' && "+_+" != 'number') { ";var x;b=p;(x=x||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: {} ",!1!==e.opts.messages&&(i+=" , message: '"+p+" should be boolean' "),e.opts.verbose&&(i+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var T=i;i=x.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+T+"]); ":i+=" validate.errors = ["+T+"]; return false; ":i+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",f&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" "+_+" == 'number' ? ( ("+E+" = "+r+" === undefined || "+w+" "+g+"= "+r+") ? "+h+" "+y+"= "+w+" : "+h+" "+y+" "+r+" ) : ( ("+E+" = "+w+" === true) ? "+h+" "+y+"= "+r+" : "+h+" "+y+" "+r+" ) || "+h+" !== "+h+") { var op"+o+" = "+E+" ? '"+g+"' : '"+g+"='; ",void 0===s&&(b=p,u=e.errSchemaPath+"/"+p,r=w,f=v)}else{S=g;if((k="number"==typeof m)&&f){var P="'"+S+"'";i+=" if ( ",f&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" ( "+r+" === undefined || "+m+" "+g+"= "+r+" ? "+h+" "+y+"= "+m+" : "+h+" "+y+" "+r+" ) || "+h+" !== "+h+") { "}else{k&&void 0===s?(E=!0,b=p,u=e.errSchemaPath+"/"+p,r=m,y+="="):(k&&(r=Math[d?"min":"max"](m,s)),m===(!k||r)?(E=!0,b=p,u=e.errSchemaPath+"/"+p,y+="="):(E=!1,S+="="));P="'"+S+"'";i+=" if ( ",f&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" "+h+" "+y+" "+r+" || "+h+" !== "+h+") { "}}b=b||t,(x=x||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { comparison: "+P+", limit: "+r+", exclusive: "+E+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be "+S+" ",i+=f?"' + "+r:r+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+c:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";T=i;return i=x.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+T+"]); ":i+=" validate.errors = ["+T+"]; return false; ":i+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { "),i}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(a||""),f=e.opts.$data&&s&&s.$data;if(f?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,!f&&"number"!=typeof s)throw new Error(t+" must be number");i+="if ( ",f&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" "+h+".length "+("maxItems"==t?">":"<")+" "+r+") { ";var d=t,p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(d||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+r+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxItems"==t?"more":"fewer",i+=" than ",i+=f?"' + "+r+" + '":""+s,i+=" items' "),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+c:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var m=i;return i=p.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(a||""),f=e.opts.$data&&s&&s.$data;if(f?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,!f&&"number"!=typeof s)throw new Error(t+" must be number");var d="maxLength"==t?">":"<";i+="if ( ",f&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),!1===e.opts.unicode?i+=" "+h+".length ":i+=" ucs2length("+h+") ",i+=" "+d+" "+r+") { ";var p=t,m=m||[];m.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(p||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+r+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT be ",i+="maxLength"==t?"longer":"shorter",i+=" than ",i+=f?"' + "+r+" + '":""+s,i+=" characters' "),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+c:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var v=i;return i=m.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+v+"]); ":i+=" validate.errors = ["+v+"]; return false; ":i+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(a||""),f=e.opts.$data&&s&&s.$data;if(f?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,!f&&"number"!=typeof s)throw new Error(t+" must be number");i+="if ( ",f&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" Object.keys("+h+").length "+("maxProperties"==t?">":"<")+" "+r+") { ";var d=t,p=p||[];p.push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(d||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { limit: "+r+" } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxProperties"==t?"more":"fewer",i+=" than ",i+=f?"' + "+r+" + '":""+s,i+=" properties' "),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+c:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var m=i;return i=p.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(22),o=n(19),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schema=t}var t,n,a;return t=e,(n=[{key:"render",value:function(){var e=i.escapeHtml(JSON.stringify(this.schema,null,2)),t=document.createElement("div");t.className="unsupported-field";var n=document.createElement("span");n.innerText=o.getMessage("unsupported-field");var r=document.createElement("span");return r.innerHTML=e,t.appendChild(n),t.appendChild(r),t}}])&&r(t.prototype,n),a&&r(t,a),e}();e.exports=a},function(e,t,n){function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(148),n(3),n(46),n(100);var o=n(35),a=function(){"use strict";function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.things=null,this.notifiers=null}var t,n,a,s,c;return t=e,(n=[{key:"readThings",value:function(){var e=this;return o.getThings().then((function(t){return e.things=t.sort((function(e,t){return e.layoutIndex-t.layoutIndex})),t}))}},{key:"readNotifiers",value:(s=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.getNotifiers();case 2:return this.notifiers=e.sent,e.abrupt("return",this.notifiers);case 4:case"end":return e.stop()}}),e,this)})),c=function(){var e=this,t=arguments;return new Promise((function(n,i){var o=s.apply(e,t);function a(e){r(o,n,i,a,c,"next",e)}function c(e){r(o,n,i,a,c,"throw",e)}a(void 0)}))},function(){return c.apply(this,arguments)})}])&&i(t.prototype,n),a&&i(t,a),e}();e.exports=a},function(e,t,n){function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(36),n(37),n(9),n(151),n(44),n(23),n(43),n(3),n(46),n(5),n(45),n(33);var a=n(35),s=n(141),c=n(167),u=n(120),l=function(){"use strict";function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gateway=t,this.onUpdate=r,n?(this.id=n.id,this.enabled=n.enabled,n.name?this.name=n.name:this.name="Rule Name",this.trigger=n.trigger,this.effect=n.effect):this.enabled=!0}var t,n,i;return t=e,(n=[{key:"update",value:function(){var e=this;this.onUpdate&&this.onUpdate();var t=this.toDescription();return t?void 0!==this.id?a.updateRule(this.id,t):a.addRule(t).then((function(t){e.id=t.id})):Promise.reject("invalid description")}},{key:"delete",value:function(){if(void 0!==this.id)return a.deleteRule(this.id)}},{key:"toDescription",value:function(){return this.trigger&&this.effect?{enabled:this.enabled,name:this.name,trigger:this.trigger,effect:this.effect}:null}},{key:"singleTriggerToHumanRepresentation",value:function(e,t){if(!e)return null;if("MultiTrigger"===e.type){for(var n="",r=0;r<e.triggers.length;r++){if(r>0&&(e.triggers.length>2&&(n+=","),n+=" ",r===e.triggers.length-1))if(t){var i="AND"===e.op?"selected":"",o="OR"===e.op?"selected":"";n+='\n                <span class="triangle-select-container">\n                  <select class="triangle-select rule-trigger-select">\n                    <option '.concat(i,">and</option>\n                    <option ").concat(o,">or</option>\n                  </select>\n                </span>\n              ")}else n+="AND"===e.op?"and ":"or ";var a=this.singleTriggerToHumanRepresentation(e.triggers[r],t);if(!a)return null;n+=a}return n}if("TimeTrigger"===e.type){var l=new Date,h=e.time.split(":");l.setHours(parseInt(h[0],10),parseInt(h[1],10),0,0);var f=l.toLocaleTimeString(s.LANGUAGE,{hour:"2-digit",minute:"2-digit"});return"the time of day is ".concat(f)}if("EventTrigger"===e.type){var d=this.gateway.things.filter(c.byThing(e.thing))[0];return d?"".concat(d.title,' event "').concat(e.label,'" occurs'):null}var p=this.gateway.things.filter(c.byProperty(e.property))[0];if(!p)return null;var m,v=p.properties[e.property.id];if(!v)return null;e.hasOwnProperty("value")&&(m=u.convert(e.value,v.unit).value);var g="".concat(p.title," ");if("BooleanTrigger"===e.type)g+="is ",e.onValue||(g+="not "),"on"===e.property.id||"on"===v.name?g+="on":g+=e.label;else if("LevelTrigger"===e.type)g+="".concat(e.label," is "),"LESS"===e.levelType?g+="less than ":"EQUAL"===e.levelType?g+="equal to ":g+="greater than ",g+="".concat(m);else{if("EqualityTrigger"!==e.type)return console.error("Unknown trigger type",e),null;g+="".concat(e.label," is ").concat(m)}return g}},{key:"singleEffectToHumanRepresentation",value:function(e){if(!e)return null;if("MultiEffect"===e.type){for(var t="",n=0;n<e.effects.length;n++){n>0&&(e.effects.length>2&&(t+=","),t+=" ",n===e.effects.length-1&&(t+="and "));var r=this.singleEffectToHumanRepresentation(e.effects[n]);if(!r)return null;t+=r}return t}if("NotificationEffect"===e.type)return"send a browser notification";if("NotifierOutletEffect"===e.type){var i=this.gateway.notifiers.filter((function(t){return t.id===e.notifier}))[0];if(!i)return null;var o=i.outlets.filter((function(t){return t.id===e.outlet}))[0];return o?"send a notification through ".concat(o.name):null}if("ActionEffect"===e.type){var a=this.gateway.things.filter(c.byThing(e.thing))[0];return a?"do ".concat(a.title,' action "').concat(e.label,'"'):null}var s=this.gateway.things.filter(c.byProperty(e.property))[0];if(!s)return null;var l=s.properties[e.property.id];if(!l)return null;var h="";return"on"===l.name||"on"===e.property.id?(h="turn ".concat(s.title," "),e.value?h+="on":h+="off"):(h+="set ".concat(s.title," ").concat(e.label," to "),h+="".concat(u.convert(e.value,l.unit).value)),h}},{key:"toHumanDescription",value:function(){return this.toHumanRepresentation(!1)}},{key:"toHumanInterface",value:function(){return this.toHumanRepresentation(!0)}},{key:"toHumanRepresentation",value:function(e){var t="???",n="???";this.trigger&&(t=this.singleTriggerToHumanRepresentation(this.trigger,e)||t),this.effect&&(n=this.singleEffectToHumanRepresentation(this.effect)||n);var i=!0;if(this.effect&&this.effect.effects&&this.effect.effects.length>0){var o,a=r(this.effect.effects);try{for(a.s();!(o=a.n()).done;){var s=o.value;if("SetEffect"===s.type){i=!0;break}if("PulseEffect"===s.type){i=!1;break}}}catch(e){a.e(e)}finally{a.f()}}var c=i?"If":"While";if(e){var u=i?"":"selected";c='<span class="triangle-select-container">\n        <select class="triangle-select rule-effect-select">\n          <option '.concat(i?"selected":"",">If</option>\n          <option ").concat(u,">While</option>\n        </select>\n      </span>")}return"".concat(c," ").concat(t,", ").concat(n)}},{key:"setTrigger",value:function(e){return this.trigger=e,this.update()}},{key:"setEffect",value:function(e){return this.effect=e,this.update()}},{key:"valid",value:function(){return!(!this.singleTriggerToHumanRepresentation(this.trigger,!1)||!this.singleEffectToHumanRepresentation(this.effect,!1))}}])&&o(t.prototype,n),i&&o(t,i),e}();e.exports=l},function(e,t,n){"use strict";var r=n(8),i=n(393).start;r({target:"String",proto:!0,forced:n(394)},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=n(74),u=document.createElement("template");u.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-color-control-capability-container {\n      box-sizing: border-box;\n      width: 12.8rem;\n      height: 12.8rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      transform: translate(0);\n      background-color: #89b6d6;\n    }\n\n    .webthing-color-control-capability-info {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      height: 5rem;\n      width: 5rem;\n      border-radius: 0.5rem;\n      border: 0.2rem solid white;\n    }\n  </style>\n  <div id="container" class="webthing-color-control-capability-container">\n    <div id="info" class="webthing-color-control-capability-info"></div>\n  </div>\n';var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=s.call(this,u))._info=e.shadowRoot.querySelector("#info"),e._color="#ffffff",e}return t=c,(n=[{key:"connectedCallback",value:function(){this.color=this.dataset.color||"#ffffff"}},{key:"color",get:function(){return this._color},set:function(e){this._color=e,this._info.style.backgroundColor=e}}])&&r(t.prototype,n),a&&r(t,a),c}(c);window.customElements.define("webthing-color-control-capability",l),e.exports=l},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(13),n(3),n(14),n(5);var u=n(74),l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,n,a,c=o(l);function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=document.createElement("template");return t.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-slider-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-slider-property-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-slider-property-form {\n      width: 8rem;\n      height: 8rem;\n    }\n\n    .webthing-slider-property-slider {\n      width: 8rem;\n      margin: 0;\n      transform: rotate(-90deg) translate(-3rem, 0);\n    }\n\n    .webthing-slider-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(u.count,'" class="webthing-slider-property-container">\n    <div id="contents-').concat(u.count,'" class="webthing-slider-property-contents">\n      <form id="form-').concat(u.count,'" class="webthing-slider-property-form">\n        <input type="range" id="slider-').concat(u.count,'" class="webthing-slider-property-slider">\n      </form>\n    </div>\n  </div>\n  <div id="name-').concat(u.count,'" class="webthing-slider-property-name"></div>\n'),(e=c.call(this,t))._input=e.shadowRoot.querySelector(".webthing-slider-property-slider"),e._name=e.shadowRoot.querySelector(".webthing-slider-property-name"),e._onChange=e.__onChange.bind(s(e)),e}return t=l,(n=[{key:"connectedCallback",value:function(){this.name||(this.name=this.dataset.name),this.readOnly=void 0!==this.dataset.readOnly&&"true"===this.dataset.readOnly,this._upgradeProperty("min"),this._upgradeProperty("max"),this._upgradeProperty("step"),this._upgradeProperty("value"),this._input.addEventListener("change",this._onChange)}},{key:"disconnectedCallback",value:function(){this._input.removeEventListener("change",this._onChange)}},{key:"__onChange",value:function(e){e.preventDefault(),this.value=e.target.value,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}},{key:"min",get:function(){return this._input.min},set:function(e){this._input.min=e}},{key:"max",get:function(){return this._input.max},set:function(e){this._input.max=e}},{key:"step",get:function(){return this._input.step},set:function(e){this._input.step=e}},{key:"value",get:function(){return this._input.value},set:function(e){this._input.value=e}},{key:"readOnly",get:function(){return this._input.hasAttribute("disabled")},set:function(e){var t=Boolean(e);t?this._input.setAttribute("disabled",""):this._input.removeAttribute("disabled"),this._input.disabled=t}},{key:"name",get:function(){return this._name.innerText},set:function(e){this._name.innerText=e}}])&&r(t.prototype,n),a&&r(t,a),l}(u);window.customElements.define("webthing-slider-property",l),e.exports=l},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(147),n(13),n(3),n(14),n(5);var u=n(74),l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,n,a,c=o(l);function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=document.createElement("template");return t.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-level-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-level-property-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-level-property-bar-container {\n      width: 8rem;\n      height: 1rem;\n      border-radius: 0.6rem;\n      border: 0.2rem solid white;\n      margin: 0 auto;\n    }\n\n    .webthing-level-property-text,\n    .webthing-level-property-unit {\n      max-width: 8rem;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    .webthing-level-property-bar {\n      height: 1rem;\n      background-color: white;\n      position: absolute;\n      left: 0.2rem;\n      max-width: calc(100% - 0.4rem);\n    }\n\n    .webthing-level-property-form {\n      width: 8rem;\n    }\n\n    .webthing-level-property-number {\n      height: 1.75rem;\n      width: 5.6rem;\n      text-align: center;\n      background-color: #d2d9de;\n      color: #333;\n      border: none;\n      border-radius: 0.5rem;\n      margin: 0.5rem 0;\n      font-size: 1.6rem;\n    }\n\n    .webthing-level-property-slider {\n      width: 8rem;\n      margin: 0;\n    }\n\n    .webthing-level-property-text.hidden,\n    .webthing-level-property-bar-container.hidden,\n    .webthing-level-property-form.hidden {\n      display: none;\n    }\n\n    .webthing-level-property-unit.hidden {\n      visibility: hidden;\n    }\n\n    .webthing-level-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(u.count,'" class="webthing-level-property-container">\n    <div id="contents-').concat(u.count,'" class="webthing-level-property-contents">\n      <div id="text-').concat(u.count,'" class="webthing-level-property-text hidden"></div>\n      <div id="bar-container-').concat(u.count,'"\n        class="webthing-level-property-bar-container hidden">\n        <span id="bar-').concat(u.count,'" class="webthing-level-property-bar"></span>\n      </div>\n      <form id="form-').concat(u.count,'" class="webthing-level-property-form">\n        <input type="number" id="number-').concat(u.count,'" class="webthing-level-property-number">\n        <input type="range" id="slider-level-').concat(u.count,'" class="webthing-level-property-slider">\n      </form>\n      <div id="unit-').concat(u.count,'" class="webthing-level-property-unit"></div>\n    </div>\n  </div>\n  <div id="name-').concat(u.count,'" class="webthing-level-property-name"></div>\n'),(e=c.call(this,t))._text=e.shadowRoot.querySelector(".webthing-level-property-text"),e._barContainer=e.shadowRoot.querySelector(".webthing-level-property-bar-container"),e._bar=e.shadowRoot.querySelector(".webthing-level-property-bar"),e._form=e.shadowRoot.querySelector(".webthing-level-property-form"),e._number=e.shadowRoot.querySelector(".webthing-level-property-number"),e._slider=e.shadowRoot.querySelector(".webthing-level-property-slider"),e._unit=e.shadowRoot.querySelector(".webthing-level-property-unit"),e._name=e.shadowRoot.querySelector(".webthing-level-property-name"),e._onChange=e.__onChange.bind(s(e)),e._onClick=e.__onClick.bind(s(e)),e._onBlur=e.__onBlur.bind(s(e)),e._onSubmit=e.__onSubmit.bind(s(e)),e}return t=l,(n=[{key:"connectedCallback",value:function(){this.name||(this.name=this.dataset.name),this.unit||(this.unit=void 0!==this.dataset.unit?this.dataset.unit:""),this._precision=null,this.precision||void 0===this.dataset.precision||(this.precision=this.dataset.precision),this.readOnly=void 0!==this.dataset.readOnly&&"true"===this.dataset.readOnly,this._upgradeProperty("min"),this._upgradeProperty("max"),this._upgradeProperty("step"),this._upgradeProperty("value"),this._number.value=this.value,this._slider.addEventListener("change",this._onChange),this._form.addEventListener("submit",this._onSubmit),this._number.addEventListener("blur",this._onBlur),this._number.addEventListener("click",this._onClick)}},{key:"disconnectedCallback",value:function(){this._slider.removeEventListener("change",this._onChange),this._form.removeEventListener("submit",this._onSubmit),this._number.removeEventListener("blur",this._onBlur),this._number.removeEventListener("click",this._onClick)}},{key:"_setUnitClass",value:function(){this.unit?this._unit.classList.remove("hidden"):this._unit.classList.add("hidden")}},{key:"__onChange",value:function(e){e.preventDefault();var t=e.target.value,n=this.step;""!==n&&"any"!==n&&(n=parseFloat(n),t=Math.round(t/n)*n);var r=this.min;""!==r&&(r=parseFloat(r),t=Math.max(r,t));var i=this.max;""!==i&&(i=parseFloat(i),t=Math.min(i,t)),this.value=t,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}},{key:"__onBlur",value:function(e){this.__onChange(e)}},{key:"__onClick",value:function(e){this.__onChange(e)}},{key:"__onSubmit",value:function(e){return e.preventDefault(),this._form.blur(),!1}},{key:"min",get:function(){return this._slider.min},set:function(e){this._slider.min=e,this._number.min=e}},{key:"max",get:function(){return this._slider.max},set:function(e){this._slider.max=e,this._number.max=e}},{key:"step",get:function(){return this._slider.step},set:function(e){this._slider.step=e,this._number.step=e}},{key:"value",get:function(){return this._slider.value},set:function(e){e=Number(e);var t=parseInt(this.min,10),n=parseInt(this.max,10)-t,r=Math.max(0,e-t)/n*100;null!==this.precision&&(e=e.toFixed(this.precision)),this._bar.style.width="calc(".concat(r,"% - 0.2rem)"),this._text.innerText=e,this._text.title=e,this._slider.value=e,this._number.value=e}},{key:"readOnly",get:function(){return this._slider.hasAttribute("disabled")},set:function(e){var t=Boolean(e);t?(this._form.classList.add("hidden"),this._barContainer.classList.remove("hidden"),this._text.classList.remove("hidden"),this._slider.setAttribute("disabled",""),this._number.setAttribute("disabled","")):(this._slider.removeAttribute("disabled"),this._number.removeAttribute("disabled"),this._form.classList.remove("hidden"),this._barContainer.classList.add("hidden"),this._text.classList.add("hidden")),this._slider.disabled=t,this._number.disabled=t}},{key:"name",get:function(){return this._name.innerText},set:function(e){this._name.innerText=e}},{key:"unit",get:function(){return this._unit.dataset.actual},set:function(e){this._unit.dataset.actual=e,e?(this._unit.innerText=e,this._unit.title=e):this._unit.innerHTML="&nbsp;",this._setUnitClass()}},{key:"precision",get:function(){return this._precision},set:function(e){this._precision=parseInt(e,10)}}])&&r(t.prototype,n),a&&r(t,a),l}(u);window.customElements.define("webthing-level-property",l),e.exports=l},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(78),n(147),n(13),n(3),n(14),n(5),n(110),n(45);var u=n(74),l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,n,a,c=o(l);function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=document.createElement("template");return t.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-number-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-number-property-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-number-property-contents.one-line {\n      left: 5rem;\n      width: 100%;\n    }\n\n    .webthing-number-property-input {\n      height: 1.75rem;\n      width: 6rem;\n      text-align: center;\n      background-color: #d2d9de;\n      color: #333;\n      border: none;\n      border-radius: 0.5rem;\n      padding: 0.5rem;\n      margin: 0.5rem 0;\n      font-size: 1.6rem;\n    }\n\n    .webthing-number-property-contents.one-line > form,\n    .webthing-number-property-contents.one-line > div {\n      display: inline-block;\n    }\n\n    .webthing-number-property-contents.one-line > form > input {\n      width: 5rem;\n      margin: 0;\n    }\n\n    .webthing-number-property-input.hide-spinner::-webkit-inner-spin-button,\n    .webthing-number-property-input.hide-spinner::-webkit-outer-spin-button {\n      -webkit-appearance: textfield;\n    }\n\n    .webthing-number-property-input.hide-spinner {\n      -moz-appearance: textfield;\n    }\n\n    .webthing-number-property-unit.one-line.hidden,\n    .webthing-number-property-unit.hidden {\n      display: none;\n    }\n\n    .webthing-number-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(u.count,'" class="webthing-number-property-container">\n    <div id="contents-').concat(u.count,'" class="webthing-number-property-contents">\n      <form id="form-').concat(u.count,'" class="webthing-number-property-form">\n        <input type="number" id="input-').concat(u.count,'"\n          class="webthing-number-property-input hide-spinner">\n      </form>\n      <div id="unit-').concat(u.count,'" class="webthing-number-property-unit"></div>\n    </div>\n  </div>\n  <div id="name-').concat(u.count,'" class="webthing-number-property-name"></div>\n'),(e=c.call(this,t))._contents=e.shadowRoot.querySelector(".webthing-number-property-contents"),e._form=e.shadowRoot.querySelector(".webthing-number-property-form"),e._input=e.shadowRoot.querySelector(".webthing-number-property-input"),e._unit=e.shadowRoot.querySelector(".webthing-number-property-unit"),e._name=e.shadowRoot.querySelector(".webthing-number-property-name"),e._onClick=e.__onClick.bind(s(e)),e._onSubmit=e.__onSubmit.bind(s(e)),e._onBlur=e.__onBlur.bind(s(e)),e._haveClickListener=!1,e._oneLine=!1,e}return t=l,(n=[{key:"connectedCallback",value:function(){this.name=this.dataset.name,this.value=void 0!==this.dataset.value?this.dataset.value:"",this.unit=void 0!==this.dataset.unit?this.dataset.unit:"",this.readOnly=void 0!==this.dataset.readOnly&&"true"===this.dataset.readOnly,this._upgradeProperty("min"),this._upgradeProperty("max"),this._upgradeProperty("step"),this._upgradeProperty("value"),this._form.addEventListener("submit",this._onSubmit),this._input.addEventListener("blur",this._onBlur),this._oneLine&&this._contents.classList.add("one-line")}},{key:"disconnectedCallback",value:function(){this._haveClickListener&&this._input.removeEventListener("click",this._onClick),this._form.removeEventListener("submit",this._onSubmit),this._input.removeEventListener("blur",this._onBlur)}},{key:"_setInputClass",value:function(){var e=parseInt(this.min,10),t=parseInt(this.max,10);isNaN(e)||null===e||isNaN(t)||null===t||""===this.step||"any"===this.step?(this._input.classList.add("hide-spinner"),this._haveClickListener&&(this._input.removeEventListener("click",this._onClick),this._haveClickListener=!1)):(this._input.classList.remove("hide-spinner"),this._haveClickListener||(this._input.addEventListener("click",this._onClick),this._haveClickListener=!0))}},{key:"_setUnitClass",value:function(){this.unit?this._unit.classList.remove("hidden"):this._unit.classList.add("hidden")}},{key:"__onClick",value:function(e){this.__onBlur(e)}},{key:"__onSubmit",value:function(e){return e.preventDefault(),this._input.blur(),!1}},{key:"__onBlur",value:function(e){e.preventDefault();var t=e.target.value,n=this.step;""!==n&&"any"!==n&&(n=parseFloat(n),t=Math.round(t/n)*n);var r=this.min;""!==r&&(r=parseFloat(r),t=Math.max(r,t));var i=this.max;""!==i&&(i=parseFloat(i),t=Math.min(i,t)),this.value=t,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}},{key:"min",get:function(){return this._input.min},set:function(e){this._input.min=e,this._setInputClass()}},{key:"max",get:function(){return this._input.max},set:function(e){this._input.max=e,this._setInputClass()}},{key:"step",get:function(){return this._input.step},set:function(e){this._input.step=e,this._setInputClass()}},{key:"value",get:function(){return this._input.value},set:function(e){var t=this.step;if(""!==t&&"any"!==t){t=parseFloat(t),e=Math.round(e/t)*t;var n=0;"".concat(t).includes(".")&&(n="".concat(t).split(".")[1].length),e=e.toFixed(n)}this._input.value=e}},{key:"readOnly",get:function(){return this._input.hasAttribute("disabled")},set:function(e){var t=Boolean(e);t?this._input.setAttribute("disabled",""):this._input.removeAttribute("disabled"),this._input.disabled=t}},{key:"name",get:function(){return this._name.innerText},set:function(e){this._name.innerText=e}},{key:"unit",get:function(){return this._unit.innerText},set:function(e){this._unit.innerText=e,this._setUnitClass()}}])&&r(t.prototype,n),a&&r(t,a),l}(u);window.customElements.define("webthing-number-property",l),e.exports=l},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(13),n(3),n(14),n(5);var u=n(74),l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,n,a,c=o(l);function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=document.createElement("template");return t.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-switch-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-switch-property-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-switch-property-switch {\n      display: none;\n    }\n\n    .webthing-switch-property-slider {\n      display: block;\n      width: 5.5rem;\n      height: 2.2rem;\n      border-radius: 1.1rem;\n      background-color: #5d9bc7;\n      transition: 0.1s;\n    }\n\n    .webthing-switch-property-slider::after {\n      content: "";\n      display: block;\n      width: 1.5rem;\n      height: 1.5rem;\n      border-radius: 50%;\n      background-color: white;\n      transform: translate(0.35rem, 0.35rem);\n      transition: 0.1s;\n    }\n\n    .webthing-switch-property-switch:checked + .webthing-switch-property-slider::after {\n      transform: translate(3.65rem, 0.35rem);\n    }\n\n    .webthing-switch-property-switch:disabled + .webthing-switch-property-slider {\n      opacity: 0.5;\n    }\n\n    .webthing-switch-property-label {\n      padding-top: 0.5rem;\n      text-transform: uppercase;\n      font-weight: bold;\n    }\n\n    .webthing-switch-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(u.count,'" class="webthing-switch-property-container">\n    <div id="contents-').concat(u.count,'" class="webthing-switch-property-contents">\n      <form>\n        <input type="checkbox" id="switch-').concat(u.count,'"\n          class="webthing-switch-property-switch">\n        <label id="slider-').concat(u.count,'" for="switch-').concat(u.count,'" class="webthing-switch-property-slider">\n        </label>\n      </form>\n      <div id="label-').concat(u.count,'" class="webthing-switch-property-label"></div>\n    </div>\n  </div>\n  <div id="name-').concat(u.count,'" class="webthing-switch-property-name"></div>\n'),(e=c.call(this,t))._input=e.shadowRoot.querySelector(".webthing-switch-property-switch"),e._name=e.shadowRoot.querySelector(".webthing-switch-property-name"),e._label=e.shadowRoot.querySelector(".webthing-switch-property-label"),e._onClick=e.__onClick.bind(s(e)),e._onKeyUp=e.__onKeyUp.bind(s(e)),e}return t=l,(n=[{key:"connectedCallback",value:function(){this.name||(this.name=this.dataset.name),this.label||(this.label=this.dataset.offLabel),this.readOnly=void 0!==this.dataset.readOnly&&"true"===this.dataset.readOnly,this._upgradeProperty("checked"),this._input.addEventListener("click",this._onClick),this._input.addEventListener("keyup",this._onKeyUp)}},{key:"disconnectedCallback",value:function(){this._input.removeEventListener("click",this._onClick),this._input.removeEventListener("keyup",this._onKeyUp)}},{key:"__onKeyUp",value:function(e){e.altKey||32===e.keyCode&&(e.preventDefault(),this._toggleChecked())}},{key:"__onClick",value:function(){this._toggleChecked()}},{key:"_toggleChecked",value:function(){this.readOnly||(this.checked=!this.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked},bubbles:!0})))}},{key:"checked",get:function(){return this._input.hasAttribute("checked")},set:function(e){var t=Boolean(e);t?this._input.setAttribute("checked",""):this._input.removeAttribute("checked"),this._input.checked=t,this._label.innerText=t?this.onLabel:this.offLabel}},{key:"readOnly",get:function(){return this._input.hasAttribute("disabled")},set:function(e){var t=Boolean(e);t?this._input.setAttribute("disabled",""):this._input.removeAttribute("disabled"),this._input.disabled=t}},{key:"value",get:function(){return this.checked},set:function(e){this.checked=e}},{key:"name",get:function(){return this._name.innerText},set:function(e){this._name.innerText=e}},{key:"label",get:function(){return this._label.innerText},set:function(e){this._label.innerText=e}},{key:"onLabel",get:function(){return this.dataset.onLabel},set:function(e){this.dataset.onLabel=e}},{key:"offLabel",get:function(){return this.dataset.offLabel},set:function(e){this.dataset.offLabel=e}}])&&r(t.prototype,n),a&&r(t,a),l}(u);window.customElements.define("webthing-switch-property",l),e.exports=l},function(e,t,n){n(153),e.exports=n(141)},function(e,t,n){var r=n(8),i=n(197).entries;r({target:"Object",stat:!0},{entries:function(e){return i(e)}})},function(e,t,n){
/*! mobile-drag-drop 2.3.0-rc.1 | Copyright (c) 2019 Tim Ruffles | MIT License */
!function(e){"use strict";var t="dnd-poly-",n=["none","copy","copyLink","copyMove","link","linkMove","move","all"],r=["none","copy","move","link"],i=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}();function o(e){return e&&e.tagName}function a(e,t,n){void 0===n&&(n=!0),document.addEventListener(e,t,!!i&&{passive:n})}function s(e,t){document.removeEventListener(e,t)}function c(e,t,n,r){void 0===r&&(r=!1);var o=i?{passive:!0,capture:r}:r;return e.addEventListener(t,n,o),{off:function(){e.removeEventListener(t,n,o)}}}function u(e){return 0===e.length?0:e.reduce((function(e,t){return t+e}),0)/e.length}function l(e,t){for(var n=0;n<e.changedTouches.length;n++)if(e.changedTouches[n].identifier===t)return!0;return!1}function h(e,t,n){for(var r=[],i=[],o=0;o<t.touches.length;o++){var a=t.touches[o];r.push(a[e+"X"]),i.push(a[e+"Y"])}n.x=u(r),n.y=u(i)}var f=["","-webkit-"];function d(e,t,n,r,i){void 0===i&&(i=!0);var o=t.x,a=t.y;r&&(o+=r.x,a+=r.y),i&&(o-=parseInt(e.offsetWidth,10)/2,a-=parseInt(e.offsetHeight,10)/2);for(var s="translate3d("+o+"px,"+a+"px, 0)",c=0;c<f.length;c++){var u=f[c]+"transform";e.style[u]=s+" "+n[c]}}var p=function(){function e(e,t){this.t=e,this.i=t,this.s=r[0]}return Object.defineProperty(e.prototype,"dropEffect",{get:function(){return this.s},set:function(e){0!==this.t.mode&&n.indexOf(e)>-1&&(this.s=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"types",{get:function(){if(0!==this.t.mode)return Object.freeze(this.t.types)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effectAllowed",{get:function(){return this.t.effectAllowed},set:function(e){2===this.t.mode&&n.indexOf(e)>-1&&(this.t.effectAllowed=e)},enumerable:!0,configurable:!0}),e.prototype.setData=function(e,t){if(2===this.t.mode){if(e.indexOf(" ")>-1)throw new Error("illegal arg: type contains space");this.t.data[e]=t,-1===this.t.types.indexOf(e)&&this.t.types.push(e)}},e.prototype.getData=function(e){if(1===this.t.mode||2===this.t.mode)return this.t.data[e]||""},e.prototype.clearData=function(e){if(2===this.t.mode){if(e&&this.t.data[e]){delete this.t.data[e];var t=this.t.types.indexOf(e);return void(t>-1&&this.t.types.splice(t,1))}this.t.data={},this.t.types=[]}},e.prototype.setDragImage=function(e,t,n){2===this.t.mode&&this.i(e,t,n)},e}();function m(e,t){return e?e===n[0]?r[0]:0===e.indexOf(n[1])||e===n[7]?r[1]:0===e.indexOf(n[4])?r[3]:e===n[6]?r[2]:r[1]:3===t.nodeType&&"A"===t.tagName?r[3]:r[1]}function v(e,t,n,r,i,o,a){void 0===o&&(o=!0),void 0===a&&(a=null);var s=function(e,t,n,r,i,o,a){void 0===a&&(a=null);var s=t.changedTouches[0],c=new Event(n,{bubbles:!0,cancelable:r});c.dataTransfer=o,c.relatedTarget=a,c.screenX=s.screenX,c.screenY=s.screenY,c.clientX=s.clientX,c.clientY=s.clientY,c.pageX=s.pageX,c.pageY=s.pageY;var u=e.getBoundingClientRect();return c.offsetX=c.clientX-u.left,c.offsetY=c.clientY-u.top,c}(t,n,e,o,document.defaultView,i,a),c=!t.dispatchEvent(s);return r.mode=0,c}function g(e,t){if(!e||e===n[7])return t;if(t===r[1]){if(0===e.indexOf(r[1]))return r[1]}else if(t===r[3]){if(0===e.indexOf(r[3])||e.indexOf("Link")>-1)return r[3]}else if(t===r[2]&&(0===e.indexOf(r[2])||e.indexOf("Move")>-1))return r[2];return r[0]}var y,b=function(){function e(e,t,n,r){this.h=e,this.o=t,this.u=n,this.l=r,this.v=0,this.p=null,this.g=null,this.m=e,this.I=e.changedTouches[0],this.j=this.C.bind(this),this.S=this.k.bind(this),a("touchmove",this.j,!1),a("touchend",this.S,!1),a("touchcancel",this.S,!1)}return e.prototype.A=function(){var e=this;this.v=1,this.O=r[0],this.D={data:{},effectAllowed:void 0,mode:3,types:[]},this.M={x:null,y:null},this.F={x:null,y:null};var t=this.u;if(this.N=new p(this.D,(function(n,r,i){t=n,"number"!=typeof r&&"number"!=typeof i||(e.P={x:r||0,y:i||0})})),this.D.mode=2,this.N.dropEffect=r[0],v("dragstart",this.u,this.m,this.D,this.N))return this.v=3,this.T(),!1;h("page",this.m,this.F);var n,i=this.o.dragImageSetup(t);if(this.L=(n=i,f.map((function(e){var t=n.style[e+"transform"];return t&&"none"!==t?t.replace(/translate\(\D*\d+[^,]*,\D*\d+[^,]*\)\s*/g,""):""}))),i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.zIndex="999999",i.classList.add("dnd-poly-drag-image"),i.classList.add("dnd-poly-icon"),this._=i,!this.P)if(this.o.dragImageOffset)this.P={x:this.o.dragImageOffset.x,y:this.o.dragImageOffset.y};else if(this.o.dragImageCenterOnTouch){var o=getComputedStyle(t);this.P={x:0-parseInt(o.marginLeft,10),y:0-parseInt(o.marginTop,10)}}else{var a=t.getBoundingClientRect();o=getComputedStyle(t),this.P={x:a.left-this.I.clientX-parseInt(o.marginLeft,10)+a.width/2,y:a.top-this.I.clientY-parseInt(o.marginTop,10)+a.height/2}}return d(this._,this.F,this.L,this.P,this.o.dragImageCenterOnTouch),document.body.appendChild(this._),this.V=window.setInterval((function(){e.X||(e.X=!0,e.Y(),e.X=!1)}),this.o.iterationInterval),!0},e.prototype.T=function(){this.V&&(clearInterval(this.V),this.V=null),s("touchmove",this.j),s("touchend",this.S),s("touchcancel",this.S),this._&&(this._.parentNode.removeChild(this._),this._=null),this.l(this.o,this.m,this.v)},e.prototype.C=function(e){var t=this;if(!1!==l(e,this.I.identifier)){if(this.m=e,0===this.v){var n=void 0;if(this.o.dragStartConditionOverride)try{n=this.o.dragStartConditionOverride(e)}catch(e){n=!1}else n=1===e.touches.length;return n?void(!0===this.A()&&(this.h.preventDefault(),e.preventDefault())):void this.T()}if(e.preventDefault(),h("client",e,this.M),h("page",e,this.F),this.o.dragImageTranslateOverride)try{var r=!1;if(this.o.dragImageTranslateOverride(e,{x:this.M.x,y:this.M.y},this.p,(function(e,n){t._&&(r=!0,t.M.x+=e,t.M.y+=n,t.F.x+=e,t.F.y+=n,d(t._,t.F,t.L,t.P,t.o.dragImageCenterOnTouch))})),r)return}catch(e){}d(this._,this.F,this.L,this.P,this.o.dragImageCenterOnTouch)}},e.prototype.k=function(e){if(!1!==l(e,this.I.identifier)){if(this.o.dragImageTranslateOverride)try{this.o.dragImageTranslateOverride(void 0,void 0,void 0,(function(){}))}catch(e){}0!==this.v?(e.preventDefault(),this.v="touchcancel"===e.type?3:2):this.T()}},e.prototype.Y=function(){var e=this,n=this.O;this.D.mode=3,this.N.dropEffect=r[0];var i=v("drag",this.u,this.m,this.D,this.N);if(i&&(this.O=r[0]),i||2===this.v||3===this.v)return this.q(this.v)?void function(e,t,n,r){var i=getComputedStyle(e);if("hidden"!==i.visibility&&"none"!==i.display){t.classList.add("dnd-poly-snapback");var o=getComputedStyle(t),a=parseFloat(o.transitionDuration);if(isNaN(a)||0===a)r();else{var s=e.getBoundingClientRect(),c={x:s.left,y:s.top};c.x+=document.body.scrollLeft||document.documentElement.scrollLeft,c.y+=document.body.scrollTop||document.documentElement.scrollTop,c.x-=parseInt(i.marginLeft,10),c.y-=parseInt(i.marginTop,10);var u=parseFloat(o.transitionDelay),l=Math.round(1e3*(a+u));d(t,c,n,void 0,!1),setTimeout(r,l)}}else r()}(this.u,this._,this.L,(function(){e.B()})):void this.B();var a=this.o.elementFromPoint(this.M.x,this.M.y),s=this.g;a!==this.p&&a!==this.g&&(this.p=a,null!==this.g&&(this.D.mode=3,this.N.dropEffect=r[0],v("dragexit",this.g,this.m,this.D,this.N,!1)),null===this.p?this.g=this.p:(this.D.mode=3,this.N.dropEffect=m(this.D.effectAllowed,this.u),v("dragenter",this.p,this.m,this.D,this.N)?(this.g=this.p,this.O=g(this.N.effectAllowed,this.N.dropEffect)):this.p!==document.body&&(this.g=document.body))),s!==this.g&&o(s)&&(this.D.mode=3,this.N.dropEffect=r[0],v("dragleave",s,this.m,this.D,this.N,!1,this.g)),o(this.g)&&(this.D.mode=3,this.N.dropEffect=m(this.D.effectAllowed,this.u),!1===v("dragover",this.g,this.m,this.D,this.N)?this.O=r[0]:this.O=g(this.N.effectAllowed,this.N.dropEffect)),n!==this.O&&this._.classList.remove(t+n);var c=t+this.O;this._.classList.add(c)},e.prototype.q=function(e){var t=this.O===r[0]||null===this.g||3===e;return t?o(this.g)&&(this.D.mode=3,this.N.dropEffect=r[0],v("dragleave",this.g,this.m,this.D,this.N,!1)):o(this.g)&&(this.D.mode=1,this.N.dropEffect=this.O,!0===v("drop",this.g,this.m,this.D,this.N)?this.O=this.N.dropEffect:this.O=r[0]),t},e.prototype.B=function(){this.D.mode=3,this.N.dropEffect=this.O,v("dragend",this.u,this.m,this.D,this.N,!1),this.v=2,this.T()},e}(),w={iterationInterval:150,tryFindDraggableTarget:function(e){var t=e.target;do{if(!1!==t.draggable){if(!0===t.draggable)return t;if(t.getAttribute&&"true"===t.getAttribute("draggable"))return t}}while((t=t.parentNode)&&t!==document.body)},dragImageSetup:function(e){var t=e.cloneNode(!0);return function e(t,n){if(1===t.nodeType){for(var r=getComputedStyle(t),i=0;i<r.length;i++){var o=r[i];n.style.setProperty(o,r.getPropertyValue(o),r.getPropertyPriority(o))}if(n.style.pointerEvents="none",n.removeAttribute("id"),n.removeAttribute("class"),n.removeAttribute("draggable"),"CANVAS"===n.nodeName){var a=t,s=n,c=a.getContext("2d").getImageData(0,0,a.width,a.height);s.getContext("2d").putImageData(c,0,0)}}if(t.hasChildNodes())for(i=0;i<t.childNodes.length;i++)e(t.childNodes[i],n.childNodes[i])}(e,t),t},elementFromPoint:function(e,t){return document.elementFromPoint(e,t)}};function E(e){if(!y){var t=w.tryFindDraggableTarget(e);if(t)try{y=new b(e,w,t,k)}catch(t){throw k(w,e,3),t}}}function _(e){var t=e.target,n=function(e){i.off(),o.off(),a.off(),s.off(),t&&t.dispatchEvent(new CustomEvent("dnd-poly-dragstart-cancel",{bubbles:!0,cancelable:!0})),clearTimeout(r)};t&&t.dispatchEvent(new CustomEvent("dnd-poly-dragstart-pending",{bubbles:!0,cancelable:!0}));var r=window.setTimeout((function(){i.off(),o.off(),a.off(),s.off(),E(e)}),w.holdToDrag),i=c(t,"touchend",n),o=c(t,"touchcancel",n),a=c(t,"touchmove",n),s=c(window,"scroll",n,!0)}function k(e,t,n){if(0===n&&e.defaultActionOverride)try{e.defaultActionOverride(t),t.defaultPrevented}catch(e){}y=null}e.polyfill=function(e){if(e&&Object.keys(e).forEach((function(t){w[t]=e[t]})),!w.forceApply){var t=(n={dragEvents:"ondragstart"in document.documentElement,draggable:"draggable"in document.documentElement,userAgentSupportingNativeDnD:void 0},r=!!window.chrome||/chrome/i.test(navigator.userAgent),n.userAgentSupportingNativeDnD=!(/iPad|iPhone|iPod|Android/.test(navigator.userAgent)||r&&"ontouchstart"in document.documentElement),n);if(t.userAgentSupportingNativeDnD&&t.draggable&&t.dragEvents)return!1}var n,r;return w.holdToDrag?a("touchstart",_,!1):a("touchstart",E,!1),!0},Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){!function(e){"use strict";function t(e){return e===document.body||e===document.documentElement}function n(e,n){var r;if(t(e))r=0===n?e.clientLeft:e.clientTop;else{var i=e.getBoundingClientRect();r=0===n?i.left:i.top}return r}function r(e,n){return t(e)?0===n?window.innerWidth:window.innerHeight:0===n?e.clientWidth:e.clientHeight}function i(e,n,r){var i=0===n?"scrollLeft":"scrollTop",o=t(e);if(2===arguments.length)return o?document.body[i]||document.documentElement[i]:e[i];o?(document.documentElement[i]+=r,document.body[i]+=r):e[i]+=r}function o(e,t,n){return e<n?-1:t-e<n?1:0}function a(e,t,n,r){return-1===e?Math.abs(t-r):1===e?Math.abs(n-t-r):0}function s(e,t,n){var r=0===e?n.scrollX:n.scrollY;return 1===t?r>=(0===e?n.scrollWidth-n.width:n.scrollHeight-n.height):-1!==t||r<=0}var c,u,l,h,f,d=75,p=function(e,t){var n=e/t;return n*n*n*t},m={horizontal:0,vertical:0},v={x:0,y:0};function g(){c||(c=window.requestAnimationFrame(y))}function y(){var e=0,n=0,r=t(h);0!==m.horizontal&&(e=Math.round(p(v.x,d)*m.horizontal),i(h,0,e)),0!==m.vertical&&(n=Math.round(p(v.y,d)*m.vertical),i(h,1,n)),r?f(e,n):f(0,0),c=null,b(u,h,d,m,v)&&g()}function b(e,t,c,u,l){if(!e||!t)return!1;var h={x:n(t,0),y:n(t,1),width:r(t,0),height:r(t,1),scrollX:i(t,0),scrollY:i(t,1),scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight},f={x:e.x-h.x,y:e.y-h.y};return u.horizontal=o(f.x,h.width,c),u.vertical=o(f.y,h.height,c),u.horizontal&&s(0,u.horizontal,h)?u.horizontal=0:u.horizontal&&(l.x=a(u.horizontal,f.x,h.width,c)),u.vertical&&s(1,u.vertical,h)?u.vertical=0:u.vertical&&(l.y=a(u.vertical,f.y,h.height,c)),!(!u.horizontal&&!u.vertical)}e.scrollBehaviourDragImageTranslateOverride=function(e,t,n,r){u=t,f=r,l!==n&&(h=function(e){do{if(!e)return;if(t=e,n=getComputedStyle(t),t.scrollHeight>t.clientHeight&&("scroll"===n.overflowY||"auto"===n.overflowY)||t.scrollWidth>t.clientWidth&&("scroll"===n.overflowX||"auto"===n.overflowX))return e;if(e===document.documentElement)return null}while(e=e.parentNode);var t,n;return null}(l=n)),b(u,h,d,m,v)?g():c&&(window.cancelAnimationFrame(c),c=null)},Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}n(23),n(238),n(3),n(46),n(105),n(240),n(246),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(100);var i,o,a=n(35),s={onReady:(i=regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.pushManager){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.pushManager.getSubscription();case 4:if(n=e.sent){e.next=16;break}return e.next=8,a.getPushKey();case 8:if(!(r=e.sent).error){e.next=12;break}return console.error("Error getting vapid key:",r.error),e.abrupt("return");case 12:return i=c(r.publicKey),e.next=15,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i});case 15:n=e.sent;case 16:return e.next=18,a.pushSubscribe({subscription:n});case 18:case"end":return e.stop()}}),e)})),o=function(){var e=this,t=arguments;return new Promise((function(n,o){var a=i.apply(e,t);function s(e){r(a,n,o,s,c,"next",e)}function c(e){r(a,n,o,s,c,"throw",e)}s(void 0)}))},function(e){return o.apply(this,arguments)})};function c(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}e.exports=s},function(e,t,n){"use strict";var r=n(8),i=n(2),o=n(200),a=n(4),s=n(70),c=n(16),u=n(64),l=o.ArrayBuffer,h=o.DataView,f=l.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new l(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==f&&void 0===t)return f.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(u(this,l))(c(i-r)),d=new h(this),p=new h(o),m=0;r<i;)p.setUint8(m++,d.getUint8(r++));return o}})},function(e,t){var n=Math.abs,r=Math.pow,i=Math.floor,o=Math.log,a=Math.LN2;e.exports={pack:function(e,t,s){var c,u,l,h=new Array(s),f=8*s-t-1,d=(1<<f)-1,p=d>>1,m=23===t?r(2,-24)-r(2,-77):0,v=e<0||0===e&&1/e<0?1:0,g=0;for((e=n(e))!=e||e===1/0?(u=e!=e?1:0,c=d):(c=i(o(e)/a),e*(l=r(2,-c))<1&&(c--,l*=2),(e+=c+p>=1?m/l:m*r(2,1-p))*l>=2&&(c++,l/=2),c+p>=d?(u=0,c=d):c+p>=1?(u=(e*l-1)*r(2,t),c+=p):(u=e*r(2,p-1)*r(2,t),c=0));t>=8;h[g++]=255&u,u/=256,t-=8);for(c=c<<t|u,f+=t;f>0;h[g++]=255&c,c/=256,f-=8);return h[--g]|=128*v,h},unpack:function(e,t){var n,i=e.length,o=8*i-t-1,a=(1<<o)-1,s=a>>1,c=o-7,u=i-1,l=e[u--],h=127&l;for(l>>=7;c>0;h=256*h+e[u],u--,c-=8);for(n=h&(1<<-c)-1,h>>=-c,c+=t;c>0;n=256*n+e[u],u--,c-=8);if(0===h)h=1-s;else{if(h===a)return n?NaN:l?-1/0:1/0;n+=r(2,t),h-=s}return(l?-1:1)*n*r(2,h-t)}}},function(e,t,n){n(241)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){"use strict";var r=n(8),i=n(1),o=n(11),a=n(242),s=n(104),c=n(200),u=n(97),l=n(26),h=n(12),f=n(16),d=n(202),p=n(243),m=n(38),v=n(7),g=n(63),y=n(6),b=n(47),w=n(102),E=n(49).f,_=n(245),k=n(65).forEach,S=n(108),x=n(10),T=n(29),P=n(27),O=n(162),C=P.get,I=P.set,R=x.f,L=T.f,A=Math.round,M=i.RangeError,D=c.ArrayBuffer,j=c.DataView,N=s.NATIVE_ARRAY_BUFFER_VIEWS,B=s.TYPED_ARRAY_TAG,F=s.TypedArray,U=s.TypedArrayPrototype,H=s.aTypedArrayConstructor,q=s.isTypedArray,z=function(e,t){for(var n=0,r=t.length,i=new(H(e))(r);r>n;)i[n]=t[n++];return i},V=function(e,t){R(e,t,{get:function(){return C(this)[t]}})},$=function(e){var t;return e instanceof D||"ArrayBuffer"==(t=g(e))||"SharedArrayBuffer"==t},W=function(e,t){return q(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},K=function(e,t){return W(e,t=m(t,!0))?l(2,e[t]):L(e,t)},G=function(e,t,n){return!(W(e,t=m(t,!0))&&y(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?R(e,t,n):(e[t]=n.value,e)};o?(N||(T.f=K,x.f=G,V(U,"buffer"),V(U,"byteOffset"),V(U,"byteLength"),V(U,"length")),r({target:"Object",stat:!0,forced:!N},{getOwnPropertyDescriptor:K,defineProperty:G}),e.exports=function(e,t,n){var o=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",c="get"+e,l="set"+e,m=i[s],v=m,g=v&&v.prototype,x={},T=function(e,t){R(e,t,{get:function(){return function(e,t){var n=C(e);return n.view[c](t*o+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var i=C(e);n&&(r=(r=A(r))<0?0:r>255?255:255&r),i.view[l](t*o+i.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};N?a&&(v=t((function(e,t,n,r){return u(e,v,s),O(y(t)?$(t)?void 0!==r?new m(t,p(n,o),r):void 0!==n?new m(t,p(n,o)):new m(t):q(t)?z(v,t):_.call(v,t):new m(d(t)),e,v)})),w&&w(v,F),k(E(m),(function(e){e in v||h(v,e,m[e])})),v.prototype=g):(v=t((function(e,t,n,r){u(e,v,s);var i,a,c,l=0,h=0;if(y(t)){if(!$(t))return q(t)?z(v,t):_.call(v,t);i=t,h=p(n,o);var m=t.byteLength;if(void 0===r){if(m%o)throw M("Wrong length");if((a=m-h)<0)throw M("Wrong length")}else if((a=f(r)*o)+h>m)throw M("Wrong length");c=a/o}else c=d(t),i=new D(a=c*o);for(I(e,{buffer:i,byteOffset:h,byteLength:a,length:c,view:new j(i)});l<c;)T(e,l++)})),w&&w(v,F),g=v.prototype=b(U)),g.constructor!==v&&h(g,"constructor",v),B&&h(g,B,s),x[s]=v,r({global:!0,forced:v!=m,sham:!N},x),"BYTES_PER_ELEMENT"in v||h(v,"BYTES_PER_ELEMENT",o),"BYTES_PER_ELEMENT"in g||h(g,"BYTES_PER_ELEMENT",o),S(s)}):e.exports=function(){}},function(e,t,n){var r=n(1),i=n(2),o=n(77),a=n(104).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,c=r.Int8Array;e.exports=!a||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!o((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||i((function(){return 1!==new c(new s(2),1,void 0).length}))},function(e,t,n){var r=n(244);e.exports=function(e,t){var n=r(e);if(n%t)throw RangeError("Wrong offset");return n}},function(e,t,n){var r=n(34);e.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},function(e,t,n){var r=n(20),i=n(16),o=n(62),a=n(80),s=n(32),c=n(104).aTypedArrayConstructor;e.exports=function(e){var t,n,u,l,h,f,d=r(e),p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m,g=o(d);if(null!=g&&!a(g))for(f=(h=g.call(d)).next,d=[];!(l=f.call(h)).done;)d.push(l.value);for(v&&p>2&&(m=s(m,arguments[2],2)),n=i(d.length),u=new(c(this))(n),t=0;n>t;t++)u[t]=v?m(d[t],t):d[t];return u}},function(e,t,n){"use strict";var r=n(104),i=n(247),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(e,t){return i.call(o(this),e,t,arguments.length>2?arguments[2]:void 0)}))},function(e,t,n){"use strict";var r=n(20),i=n(70),o=n(16),a=Math.min;e.exports=[].copyWithin||function(e,t){var n=r(this),s=o(n.length),c=i(e,s),u=i(t,s),l=arguments.length>2?arguments[2]:void 0,h=a((void 0===l?s:i(l,s))-u,s-c),f=1;for(u<c&&c<u+h&&(f=-1,u+=h-1,c+=h-1);h-- >0;)u in n?n[c]=n[u]:delete n[c],c+=f,u+=f;return n}},function(e,t,n){"use strict";var r=n(104),i=n(65).every,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(104),i=n(177),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(e){return i.apply(o(this),arguments)}))},function(e,t,n){"use strict";var r=n(104),i=n(65).filter,o=n(64),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("filter",(function(e){for(var t=i(a(this),e,arguments.length>1?arguments[1]:void 0),n=o(this,this.constructor),r=0,c=t.length,u=new(s(n))(c);c>r;)u[r]=t[r++];return u}))},function(e,t,n){"use strict";var r=n(104),i=n(65).find,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(104),i=n(65).findIndex,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(104),i=n(65).forEach,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(e){i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(104),i=n(96).includes,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(104),i=n(96).indexOf,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(1),i=n(104),o=n(23),a=n(0)("iterator"),s=r.Uint8Array,c=o.values,u=o.keys,l=o.entries,h=i.aTypedArray,f=i.exportTypedArrayMethod,d=s&&s.prototype[a],p=!!d&&("values"==d.name||null==d.name),m=function(){return c.call(h(this))};f("entries",(function(){return l.call(h(this))})),f("keys",(function(){return u.call(h(this))})),f("values",m,!p),f(a,m,!p)},function(e,t,n){"use strict";var r=n(104),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=[].join;o("join",(function(e){return a.apply(i(this),arguments)}))},function(e,t,n){"use strict";var r=n(104),i=n(259),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(e){return i.apply(o(this),arguments)}))},function(e,t,n){"use strict";var r=n(18),i=n(34),o=n(16),a=n(144),s=n(66),c=Math.min,u=[].lastIndexOf,l=!!u&&1/[1].lastIndexOf(1,-0)<0,h=a("lastIndexOf"),f=s("indexOf",{ACCESSORS:!0,1:0}),d=l||!h||!f;e.exports=d?function(e){if(l)return u.apply(this,arguments)||0;var t=r(this),n=o(t.length),a=n-1;for(arguments.length>1&&(a=c(a,i(arguments[1]))),a<0&&(a=n+a);a>=0;a--)if(a in t&&t[a]===e)return a||0;return-1}:u},function(e,t,n){"use strict";var r=n(104),i=n(65).map,o=n(64),a=r.aTypedArray,s=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",(function(e){return i(a(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(s(o(e,e.constructor)))(t)}))}))},function(e,t,n){"use strict";var r=n(104),i=n(178).left,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(e){return i(o(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(104),i=n(178).right,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(e){return i(o(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(104),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=Math.floor;o("reverse",(function(){for(var e,t=i(this).length,n=a(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this}))},function(e,t,n){"use strict";var r=n(104),i=n(64),o=n(2),a=r.aTypedArray,s=r.aTypedArrayConstructor,c=r.exportTypedArrayMethod,u=[].slice;c("slice",(function(e,t){for(var n=u.call(a(this),e,t),r=i(this,this.constructor),o=0,c=n.length,l=new(s(r))(c);c>o;)l[o]=n[o++];return l}),o((function(){new Int8Array(1).slice()})))},function(e,t,n){"use strict";var r=n(104),i=n(65).some,o=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(e){return i(o(this),e,arguments.length>1?arguments[1]:void 0)}))},function(e,t,n){"use strict";var r=n(104),i=r.aTypedArray,o=r.exportTypedArrayMethod,a=[].sort;o("sort",(function(e){return a.call(i(this),e)}))},function(e,t,n){"use strict";var r=n(1),i=n(104),o=n(2),a=r.Int8Array,s=i.aTypedArray,c=i.exportTypedArrayMethod,u=[].toLocaleString,l=[].slice,h=!!a&&o((function(){u.call(new a(1))}));c("toLocaleString",(function(){return u.apply(h?l.call(s(this)):s(this),arguments)}),o((function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()}))||!o((function(){a.prototype.toLocaleString.call([1,2])})))},function(e,t,n){"use strict";var r=n(104).exportTypedArrayMethod,i=n(2),o=n(1).Uint8Array,a=o&&o.prototype||{},s=[].toString,c=[].join;i((function(){s.call({})}))&&(s=function(){return c.call(this)});var u=a.toString!=s;r("toString",s,u)},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(151),n(139),n(44),n(23),n(170),n(60),n(13),n(3),n(46),n(14),n(61),n(5),n(180),n(105),n(45),n(140),n(33);var l=n(35),h=n(149),f=n(206),d=n(207),p=n(272),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(v,e);var t,n,f,m=a(v);function v(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(e=m.call(this)).thingModels=new Map,e.things=new Map,e.connectedThings=new Map,e.onMessage=e.onMessage.bind(c(e)),e.queue=Promise.resolve(!0),e.connectWebSocket(),s(e,c(e))}return t=v,(n=[{key:"addQueue",value:function(e){return this.queue=this.queue.then(e).catch((function(e){console.error(e)})),this.queue}},{key:"subscribe",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(i(u(v.prototype),"subscribe",this).call(this,e,t),e){case h.REFRESH_THINGS:n&&t(this.things);break;case h.DELETE_THINGS:break;default:console.warn("GatewayModel does not support event:".concat(e))}}},{key:"setThing",value:function(e,t){if(this.thingModels.has(e))this.thingModels.get(e).updateFromDescription(t);else{var n=new p(t,this.ws);n.subscribe(h.DELETE_THING,this.handleRemove.bind(this)),this.connectedThings.has(e)&&n.onConnected(this.connectedThings.get(e)),this.thingModels.set(e,n)}this.things.set(e,t)}},{key:"getThing",value:function(e){var t=this;return this.thingModels.has(e)&&this.things.has(e)?Promise.resolve(this.things.get(e)):this.refreshThing(e).then((function(){return t.things.get(e)}))}},{key:"getThingModel",value:function(e){var t=this;return this.thingModels.has(e)?Promise.resolve(this.thingModels.get(e)):this.refreshThing(e).then((function(){return t.thingModels.get(e)}))}},{key:"removeThing",value:function(e){var t=this;return this.thingModels.has(e)?this.addQueue((function(){if(!t.thingModels.has(e))throw new Error("Thing id:".concat(e," already removed"));return t.thingModels.get(e).removeThing()})):Promise.reject("No Thing id:".concat(e))}},{key:"updateThing",value:function(e,t){var n=this;return this.thingModels.has(e)?this.addQueue((function(){if(!n.thingModels.has(e))throw new Error("Thing id:".concat(e," already removed"));return n.thingModels.get(e).updateThing(t).then((function(){n.refreshThing(e)}))})):Promise.reject("No Thing id:".concat(e))}},{key:"handleRemove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.thingModels.has(e)&&(this.thingModels.get(e).cleanup(),this.thingModels.delete(e)),this.things.has(e)&&this.things.delete(e),!t)return this.handleEvent(h.DELETE_THINGS,this.things)}},{key:"connectWebSocket",value:function(){var e="".concat(window.location.origin,"/things?jwt=").concat(l.jwt).replace(/^http/,"ws");this.ws=new d(e),this.ws.addEventListener("open",this.refreshThings.bind(this)),this.ws.addEventListener("message",this.onMessage)}},{key:"onMessage",value:function(e){var t=JSON.parse(e.data);switch(t.messageType){case"connected":this.connectedThings.set(t.id,t.data);break;case"thingAdded":this.refreshThings();break;case"thingModified":this.refreshThing(t.id)}}},{key:"refreshThings",value:function(){var e=this;return this.addQueue((function(){return l.getThings().then((function(t){var n=new Set;return t.forEach((function(t){var r=decodeURIComponent(t.href.split("/").pop());n.add(r),e.setThing(r,t)})),Array.from(e.thingModels.keys()).filter((function(e){return!n.has(e)})).forEach((function(t){return e.handleRemove(t,!0)})),e.handleEvent(h.REFRESH_THINGS,e.things)})).catch((function(e){console.error("Get things failed ".concat(e))}))}))}},{key:"refreshThing",value:function(e){var t=this;return this.addQueue((function(){return l.getThing(e).then((function(n){if(!n)throw new Error("Unavailable Thing Description: ".concat(n));return t.setThing(e,n),t.handleEvent(h.REFRESH_THINGS,t.things)})).catch((function(t){console.error("Get thing id:".concat(e," failed ").concat(t))}))}))}}])&&r(t.prototype,n),f&&r(t,f),v}(f);e.exports=m},function(e,t,n){var r=n(2);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(e,t,n){"use strict";var r=n(31),i=n(6),o=[].slice,a={},s=function(e,t,n){if(!(t in a)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";a[t]=Function("C,a","return new C("+r.join(",")+")")}return a[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=o.call(arguments,1),a=function(){var r=n.concat(o.call(arguments));return this instanceof a?s(t,r.length,r):t.apply(e,r)};return i(t.prototype)&&(a.prototype=t.prototype),a}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(36),n(37),n(9),n(139),n(44),n(23),n(145),n(43),n(160),n(60),n(13),n(3),n(208),n(46),n(14),n(61),n(5),n(45),n(140),n(33),n(146);var d=n(35),p=n(141),m=n(206),v=n(149),g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(g,e);var t,n,o,m=u(g);function g(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),(n=m.call(this)).properties={},n.events=[],n.connected=!1,n.updateFromDescription(e),n.initWebSocket(t),n.updateEvents(),l(n,h(n))}return t=g,(n=[{key:"updateFromDescription",value:function(e){this.title=e.title,e.href&&(this.href=new URL(e.href,p.ORIGIN),this.id=decodeURIComponent(this.href.pathname.split("/").pop()));var t,n=i(e.links);try{for(n.s();!(t=n.n()).done;){var r=t.value;switch(r.rel){case"events":this.eventsHref=new URL(r.href,p.ORIGIN);break;case"properties":this.propertiesHref=new URL(r.href,p.ORIGIN)}}}catch(e){n.e(e)}finally{n.f()}if(this.propertyDescriptions={},e.hasOwnProperty("properties"))for(var o in e.properties){var a=e.properties[o];this.propertyDescriptions[o]=a}if(this.eventDescriptions={},e.hasOwnProperty("events"))for(var s in e.events){var c=e.events[s];this.eventDescriptions[s]=c}}},{key:"removeThing",value:function(){var e=this;return d.removeThing(this.id).then((function(){e.handleEvent(v.DELETE_THING,e.id),e.cleanup()}))}},{key:"updateThing",value:function(e){return d.updateThing(this.id,e)}},{key:"initWebSocket",value:function(e){var t=this;this.hasOwnProperty("href")&&(this.ws=e,this.ws.addEventListener("open",(function(){if(0!=Object.keys(t.eventDescriptions).length){var e={id:t.id,messageType:"addEventSubscription",data:{}};for(var n in t.eventDescriptions)e.data[n]={};t.ws.send(JSON.stringify(e))}})),this.ws.addEventListener("message",(function(e){var n=JSON.parse(e.data);if(!n.hasOwnProperty("id")||n.id===t.id)switch(n.messageType){case"propertyStatus":t.onPropertyStatus(n.data);break;case"event":t.onEvent(n.data);break;case"connected":t.onConnected(n.data);break;case"error":"404 Not Found"===n.data.status&&(console.log("Successfully removed Thing."),t.handleEvent(v.DELETE_THING,t.id),t.cleanup());break;case"thingRemoved":t.handleEvent(v.DELETE_THING,t.id),t.cleanup()}})))}},{key:"subscribe",value:function(e,t){switch(s(f(g.prototype),"subscribe",this).call(this,e,t),e){case v.EVENT_OCCURRED:break;case v.PROPERTY_STATUS:t(this.properties);break;case v.DELETE_THING:break;case v.CONNECTED:t(this.connected);break;default:console.warn("ThingModel does not support event:".concat(e))}}},{key:"setProperty",value:function(e,t){var n=this;if(!this.propertyDescriptions.hasOwnProperty(e))return Promise.reject("Unavailable property name ".concat(e));switch(this.propertyDescriptions[e].type){case"number":t=parseFloat(t);break;case"integer":t=parseInt(t);break;case"boolean":t=Boolean(t)}var o,a,s=this.propertyDescriptions[e],c=r({},e,t),u=i(s.links);try{for(u.s();!(a=u.n()).done;){var l=a.value;if(!l.rel||"property"===l.rel){o=l.href;break}}}catch(e){u.e(e)}finally{u.f()}return d.putJson(o,c).then((function(e){n.onPropertyStatus(e)})).catch((function(t){throw console.error(t),new Error("Error trying to set ".concat(e))}))}},{key:"updateProperties",value:function(){var e,t=this;if(void 0===this.propertiesHref){var n=Object.values(this.propertyDescriptions).map((function(e){var t,n=i(e.links);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!r.rel||"property"===r.rel)return r.href}}catch(e){n.e(e)}finally{n.f()}})).map((function(e){return d.getJson(e)}));e=Promise.all(n).then((function(e){var t={};return e.forEach((function(e){t=Object.assign(t,e)})),t}))}else e=d.getJson(this.propertiesHref);e.then((function(e){t.onPropertyStatus(e)})).catch((function(e){console.error("Error fetching ".concat(t.title," status: ").concat(e))}))}},{key:"onPropertyStatus",value:function(e){var t={};for(var n in e)if(this.propertyDescriptions.hasOwnProperty(n)){var r=e[n];null!=r&&(this.properties[n]=r,t[n]=r)}return this.handleEvent(v.PROPERTY_STATUS,t)}},{key:"updateEvents",value:function(){var e=this;if(void 0!==this.eventsHref)return d.getJson(this.eventsHref).then((function(t){e.events=t})).catch((function(e){console.error("Error fetching events: ".concat(e))}))}},{key:"onEvent",value:function(e){var t={};for(var n in e)this.eventDescriptions.hasOwnProperty(n)&&(t[n]=e[n],this.events.push(r({},n,e[n])));return this.handleEvent(v.EVENT_OCCURRED,t)}},{key:"onConnected",value:function(e){return this.connected=e,e&&this.updateProperties(),this.handleEvent(v.CONNECTED,e)}}])&&a(t.prototype,n),o&&a(t,o),g}(m);e.exports=g},function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,c,"next",e)}function c(e){o(a,r,i,s,c,"throw",e)}s(void 0)}))}}n(36),n(37),n(9),n(139),n(44),n(23),n(43),n(3),n(46),n(5),n(140),n(33),n(146),n(100);var s=n(142),c=n(274),u=n(209),l=n(141),h=n(149),f=n(378),d=n(19),p=n(175),m=n(173).createThingFromCapability,v={init:function(){var e=this;this.thingsElement=document.getElementById("things"),this.thingTitleElement=document.getElementById("thing-title"),this.addButton=document.getElementById("add-button"),this.menuButton=document.getElementById("menu-button"),this.backButton=document.getElementById("back-button"),this.backRef="/things",this.backButton.addEventListener("click",(function(){return s(e.backRef)})),this.addButton.addEventListener("click",u.show.bind(u)),this.refreshThings=this.refreshThings.bind(this),this.things=[]},renderThing:function(e,t,n){var r=m(t.selectedCapability,e,t,n);return this.things.push(r),r},show:function(e,t,n,r){var i=new URLSearchParams("?".concat(r||""));if(i.has("referrer")?this.backRef=i.get("referrer"):this.backRef="/things",l.hideOverflowButton(),e)this.addButton.classList.add("hidden"),this.backButton.classList.remove("hidden"),this.menuButton.classList.add("hidden"),this.thingTitleElement.classList.remove("hidden"),this.thingsElement.classList.add("single-thing"),t?this.showActionInputForm(e,t):n?this.showEvents(e):this.showThing(e);else{this.addButton.classList.remove("hidden"),this.menuButton.classList.remove("hidden"),this.backButton.classList.add("hidden"),this.thingTitleElement.classList.add("hidden"),this.thingsElement.classList.remove("single-thing"),this.showThings();var o=document.getElementById("message-area");l.blockMessages&&o.innerText===d.getMessage("disconnected")&&l.hidePersistentMessage()}},refreshThings:function(e){for(var t,n=this;void 0!==(t=this.things.pop());)t.cleanup();0===e.size?this.thingsElement.innerHTML=d.getMessage("no-things"):(this.thingsElement.innerHTML="",e.forEach((function(e,t){l.gatewayModel.getThingModel(t).then((function(t){n.renderThing(t,e)}))})))},showThings:function(){l.gatewayModel.unsubscribe(h.REFRESH_THINGS,this.refreshThing),l.gatewayModel.unsubscribe(h.DELETE_THINGS,this.refreshThing),l.gatewayModel.subscribe(h.DELETE_THINGS,this.refreshThings),l.gatewayModel.subscribe(h.REFRESH_THINGS,this.refreshThings,!0)},showThing:function(e){var t=this;l.gatewayModel.unsubscribe(h.REFRESH_THINGS,this.refreshThing),l.gatewayModel.unsubscribe(h.DELETE_THINGS,this.refreshThing),l.gatewayModel.unsubscribe(h.REFRESH_THINGS,this.refreshThings),l.gatewayModel.unsubscribe(h.DELETE_THINGS,this.refreshThings),this.refreshThing=function(){return l.gatewayModel.getThing(e).then(function(){var n=a(regeneratorRuntime.mark((function n(r){var i,o,a,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r){n.next=3;break}return t.thingsElement.innerHTML=d.getMessage("thing-not-found"),n.abrupt("return");case 3:return t.thingsElement.innerHTML="",n.next=6,l.gatewayModel.getThingModel(e);case 6:i=n.sent,o=t.renderThing(i,r,h.ThingFormat.EXPANDED),a=document.getElementById("thing-title-icon"),s=document.getElementById("thing-title-custom-icon"),o.iconHref&&"Custom"===o.selectedCapability?(s.iconHref=o.iconHref,s.classList.remove("hidden"),a.style.backgroundImage="",a.classList.add("custom-thing")):(a.style.backgroundImage='url("'.concat(o.baseIcon,'")'),a.classList.remove("custom-thing"),s.classList.add("hidden")),document.getElementById("thing-title-title").innerText=o.title,t.thingTitleElement.classList.remove("hidden");case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(n){console.error("Thing id ".concat(e," not found ").concat(n)),t.thingsElement.innerHTML=d.getMessage("thing-not-found")}))},l.gatewayModel.subscribe(h.REFRESH_THINGS,this.refreshThing,!0),l.gatewayModel.subscribe(h.DELETE_THINGS,this.refreshThing)},showActionInputForm:function(e,t){var n=this;l.gatewayModel.getThing(e).then((function(e){if(n.thingsElement.innerHTML="",e.hasOwnProperty("actions")&&e.actions.hasOwnProperty(t)&&e.actions[t].hasOwnProperty("input")){var i,o,a=r(e.links);try{for(a.s();!(o=a.n()).done;){var s=o.value;if("actions"===s.rel){i=s.href;break}}}catch(e){a.e(e)}finally{a.f()}var u=p.capabilityToIcon(e.selectedCapability),l=document.getElementById("thing-title-icon"),h=document.getElementById("thing-title-custom-icon");e.iconHref&&"Custom"===e.selectedCapability?(h.iconHref=e.iconHref,h.classList.remove("hidden"),l.style.backgroundImage="",l.classList.add("custom-thing")):(l.style.backgroundImage='url("'.concat(u,'")'),l.classList.remove("custom-thing"),h.classList.add("hidden")),document.getElementById("thing-title-title").innerText=e.title,n.thingsElement.innerHTML="",new c(i,t,e.actions[t].title||e.actions[t].label,e.actions[t].input)}else n.thingsElement.innerHTML=d.getMessage("action-not-found")})).catch((function(t){console.error("Thing id ".concat(e," not found ").concat(t)),n.thingsElement.innerHTML=d.getMessage("thing-not-found")}))},showEvents:function(e){var t=this;void 0!==this.eventList&&this.eventList.cleanup(),l.gatewayModel.getThing(e).then(function(){var n=a(regeneratorRuntime.mark((function n(r){var i,o,a,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.thingsElement.innerHTML="",r.hasOwnProperty("events")){n.next=4;break}return t.thingsElement.innerHTML=d.getMessage("events-not-found"),n.abrupt("return");case 4:return n.next=6,l.gatewayModel.getThingModel(e);case 6:i=n.sent,o=p.capabilityToIcon(r.selectedCapability),a=document.getElementById("thing-title-icon"),s=document.getElementById("thing-title-custom-icon"),r.iconHref&&"Custom"===r.selectedCapability?(s.iconHref=r.iconHref,s.classList.remove("hidden"),a.style.backgroundImage="",a.classList.add("custom-thing")):(a.style.backgroundImage='url("'.concat(o,'")'),a.classList.remove("custom-thing"),s.classList.add("hidden")),document.getElementById("thing-title-title").innerText=r.title,t.thingsElement.innerHTML="",t.eventList=new f(i,r);case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(n){console.error("Thing id ".concat(e," not found ").concat(n)),t.thingsElement.innerHTML=d.getMessage("thing-not-found")}))}};e.exports=v},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(36),n(37),n(9),n(44),n(78),n(23),n(145),n(43),n(148),n(160),n(3),n(5),n(110),n(33);var s=n(35),c=n(120),u=n(22),l=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=document.getElementById("things"),this.href=t,this.name=n,this.label=r||n,this.schema=i,this.inputs={},this.element=this.render(),this.form=this.element.querySelector(".action-input-form"),this.form.addEventListener("submit",this.handleSubmit.bind(this))}var t,n,o;return t=e,(n=[{key:"render",value:function(){var e=this,t=document.createElement("div"),n='<div class="action-input">\n      <div class="action-input-title">'.concat(u.escapeHtml(this.label),'</div>\n      <form class="action-input-form">'),r=[],o=[];if("object"===this.schema.type){this.schema.hasOwnProperty("required")&&Array.isArray(this.schema.required)&&(o=this.schema.required);var a,s=i(Array.from(Object.keys(this.schema.properties)).sort());try{for(s.s();!(a=s.n()).done;){var l=a.value;r.push(Object.assign({},this.schema.properties[l],{name:l}))}}catch(e){s.e(e)}finally{s.f()}}else r.push(Object.assign({},this.schema,{name:"__default__"})),o.push("__default__");for(var h=function(){var t=d[f],r=u.escapeHtmlForIdClass(t.name);e.inputs[r]=t.name,n+='<span class="action-input-name">',"__default__"!==t.name&&(n+=u.escapeHtml(t.name)),n+="</span>";var i="";o.includes(t.name)&&(i="required");var a='<span class="action-input-unit">';if(t.hasOwnProperty("unit")&&(a+=u.escapeHtml(c.nameToAbbreviation(c.convert(0,t.unit).unit))),a+="</span>",Array.isArray(t.enum)&&("number"===t.type||"integer"===t.type||"string"===t.type)){var s=t.enum.map((function(e){return e=c.convert(e,t.unit).value,'<option value="'.concat(u.escapeHtml(e),'">\n                    ').concat(u.escapeHtml(e),"\n                  </option>")}));return""===i&&s.unshift('<option value=""></option>'),n+='<select name="'.concat(r,'" class="action-input-enum" ').concat(i,">\n                   ").concat(s.join(" "),"\n                 </select>").concat(a),"continue"}switch(t.type){case"number":case"integer":var l,h=c.convert(0,t.unit).unit!==t.unit;l=t.hasOwnProperty("multipleOf")&&!h?"".concat(t.multipleOf):"number"===t.type?"any":"1";var p="";t.hasOwnProperty("minimum")&&(p='min="'.concat(c.convert(t.minimum,t.unit),'"'));var m="";t.hasOwnProperty("maximum")&&(m='max="'.concat(c.convert(t.maximum,t.unit),'"'));var v="";t.hasOwnProperty("default")&&(v='value="'.concat(t.default,'"'));var g=p&&m?"":"hide-number-spinner";n+='<input type="number" name="'.concat(r,'" ').concat(v,' step="').concat(l,'" ').concat(p,"\n                          ").concat(m,' class="action-input-number ').concat(g,'"\n                          ').concat(i,">").concat(a);break;case"boolean":n+='<span>\n            <input type="checkbox" name="'.concat(r,'" class="action-input-checkbox"\n                   id="checkbox-').concat(r,'">\n            <label for="checkbox-').concat(r,'"></label>\n            </span>\n            ').concat(a);break;case"object":case"array":case"string":default:n+='<input type="text" name="'.concat(r,'"\n                          class="action-input-string" ').concat(i,">").concat(a)}},f=0,d=r;f<d.length;f++)h();return n+='\n      <input id="action-submit-button" type="submit"\n        class="action-button" data-l10n-id="submit">\n      </form></div>',t.innerHTML=n,this.container.appendChild(t.firstChild)}},{key:"handleSubmit",value:function(e){var t,n=this;e.preventDefault(),t="object"===this.schema.type?{}:null;var o,a=i(this.element.getElementsByTagName("select"));try{for(a.s();!(o=a.n()).done;){var l=o.value;if(0!=l.value.length){var h=void 0;h="__default__"===l.name?this.schema:this.schema.properties[l.name];var f=void 0;if(f="number"===h.type?Number(l.value):l.value,f=c.convert(f,c.convert(0,h.unit).unit,h.unit).value,f=u.adjustInputValue(f,h),"__default__"===l.name){t=f;break}t[this.inputs[l.name]]=f}}}catch(e){a.e(e)}finally{a.f()}var d,p,m=i(this.element.getElementsByTagName("input"));try{for(m.s();!(d=m.n()).done;){var v=d.value,g=void 0;if("submit"!==v.type){if("checkbox"===v.type)g=v.checked;else{if(!(v.value.length>0))continue;g="number"===v.type?Number(v.value):v.value}var y=void 0;if(y="__default__"===v.name?this.schema:this.schema.properties[this.inputs[v.name]],g=c.convert(g,c.convert(0,y.unit).unit,y.unit).value,g=u.adjustInputValue(g,y),"__default__"===v.name){t=g;break}t[this.inputs[v.name]]=g}}}catch(e){m.e(e)}finally{m.f()}p=r({},this.name,t?{input:t}:{input:{}}),s.postJson(this.href,p).then((function(){window.history.back()})).catch((function(e){console.error('Error performing action "'.concat(n.name,'": ').concat(e))}))}}])&&a(t.prototype,n),o&&a(t,o),e}();e.exports=l},function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(36),n(37),n(9),n(44),n(78),n(23),n(43),n(3),n(172),n(5),n(150),n(33),n(146);var a=n(35),s=n(22),c=n(19),u=n(173).getClassFromCapability,l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.description=n,this.pinSet=!1,this.credentialsSet=!1,this.iconData=null,this.re=null,n.hasOwnProperty("pin")&&null!==n.pin.pattern&&(this.re=RegExp(n.pin.pattern)),this.container=document.getElementById("new-things"),this.element=document.createElement("div"),this.element.classList.add("new-thing"),this.element.id="new-thing-".concat(s.escapeHtmlForIdClass(this.id)),this.render(),this.container.appendChild(this.element)}var t,n,i;return t=e,(n=[{key:"requiresPin",value:function(){return this.description.hasOwnProperty("pin")&&this.description.pin.required&&!this.pinSet}},{key:"requiresCredentials",value:function(){return this.description.credentialsRequired&&!this.credentialsSet}},{key:"buildStandardView",value:function(){this.element.classList.remove("pin-required"),this.element.classList.remove("credentials-required");var e=[];Array.isArray(this.description["@type"])&&this.description["@type"].length>0&&(e=this.description["@type"]),(e=s.sortCapabilities(e)).push("Custom");var t,n="",i="",o="hidden",a=[],l=r(e);try{for(l.s();!(t=l.n()).done;){var h=t.value;i=c.getMessageStrict(h)||h,n||(n=u(h))||1!=e.length||(n="custom-thing"),h=s.escapeHtml(h),i=s.escapeHtml(i);var f="";0===a.length&&(f="selected","Custom"===h&&(o="")),a.push('<option value="'.concat(h,'" ').concat(f,">").concat(i,"</option>"))}}catch(e){l.e(e)}finally{l.f()}(n=n.trim())&&this.element.classList.add(n),i||(i=c.getMessage("unknown-device-type"));var d=s.escapeHtmlForIdClass("new-thing-custom-icon-".concat(this.id));this.element.innerHTML='\n      <div class="new-thing-icon">\n        <webthing-custom-icon class="new-thing-custom-icon '.concat(o,'">\n        </webthing-custom-icon>\n      </div>\n      <div class="new-thing-metadata">\n        <input type="text" class="new-thing-title"\n               value="').concat(s.escapeHtml(this.description.title),'"/>\n        <select class="new-thing-type">').concat(a.join(""),'</select>\n        <span class="new-thing-spacer"></span>\n        <input type="file" class="new-thing-custom-icon-input hidden"\n          id="').concat(d,'" accept="image/jpeg,image/png,image/svg+xml">\n        <label for="').concat(d,'"\n          class="new-thing-custom-icon-label text-button ').concat(o,'"\n          data-l10n-id="new-thing-choose-icon">\n        </label>\n        <span class="new-thing-label"></span>\n      </div>\n      <button class="new-thing-save-button text-button"\n              data-l10n-id="new-thing-save">\n      </button>')}},{key:"buildPinView",value:function(){this.element.classList.add("pin-required"),this.element.innerHTML='\n      <div class="new-thing-icon"></div>\n      <div class="new-thing-metadata">\n        <span class="new-thing-initial-title">\n          '.concat(s.escapeHtml(this.description.title),'\n        </span>\n        <input type="text" class="new-thing-pin" required autofocus\n               data-l10n-id="new-thing-pin"/>\n        <span class="new-thing-pin-error hidden"\n              data-l10n-id="new-thing-pin-error"></span>\n      </div>\n      <div class="new-thing-controls">\n        <button class="new-thing-cancel-button text-button"\n                data-l10n-id="new-thing-cancel">\n        </button>\n        <button class="new-thing-submit-button text-button"\n                data-l10n-id="new-thing-submit" disabled>\n        </button>\n      </div>')}},{key:"buildCredentialsView",value:function(){this.element.classList.add("credentials-required"),this.element.innerHTML='\n      <div class="new-thing-icon"></div>\n      <div class="new-thing-metadata">\n        <span class="new-thing-initial-title">\n          '.concat(s.escapeHtml(this.description.title),'\n        </span>\n        <input type="text" class="new-thing-username" required autofocus\n               data-l10n-id="new-thing-username"/>\n        <input type="password" class="new-thing-password" required\n               data-l10n-id="new-thing-password"/>\n        <span class="new-thing-credentials-error hidden"\n              data-l10n-id="new-thing-credentials-error">\n        </span>\n      </div>\n      <div class="new-thing-controls">\n        <button class="new-thing-cancel-button text-button"\n                data-l10n-id="new-thing-cancel">\n        </button>\n        <button class="new-thing-submit-button text-button" disabled\n                data-l10n-id="new-thing-submit">\n        </button>\n      </div>')}},{key:"buildView",value:function(){this.requiresPin()?this.buildPinView():this.requiresCredentials()?this.buildCredentialsView():this.buildStandardView()}},{key:"render",value:function(){this.buildView(),this.requiresPin()?(this.pinInput=this.element.querySelector(".new-thing-pin"),this.pinError=this.element.querySelector(".new-thing-pin-error"),this.cancelButton=this.element.querySelector(".new-thing-cancel-button"),this.submitButton=this.element.querySelector(".new-thing-submit-button"),this.pinInput.addEventListener("input",this.handlePinInput.bind(this)),this.cancelButton.addEventListener("click",this.handleCancel.bind(this)),this.submitButton.addEventListener("click",this.handleSubmit.bind(this))):this.requiresCredentials()?(this.usernameInput=this.element.querySelector(".new-thing-username"),this.passwordInput=this.element.querySelector(".new-thing-password"),this.credentialsError=this.element.querySelector(".new-thing-credentials-error"),this.cancelButton=this.element.querySelector(".new-thing-cancel-button"),this.submitButton=this.element.querySelector(".new-thing-submit-button"),this.usernameInput.addEventListener("input",this.handleCredentialsInput.bind(this)),this.passwordInput.addEventListener("input",this.handleCredentialsInput.bind(this)),this.cancelButton.addEventListener("click",this.handleCancel.bind(this)),this.submitButton.addEventListener("click",this.handleSubmit.bind(this))):(this.titleInput=this.element.querySelector(".new-thing-title"),this.saveButton=this.element.querySelector(".new-thing-save-button"),this.thingType=this.element.querySelector(".new-thing-type"),this.customIcon=this.element.querySelector(".new-thing-custom-icon"),this.customIconInput=this.element.querySelector(".new-thing-custom-icon-input"),this.customIconLabel=this.element.querySelector(".new-thing-custom-icon-label"),this.label=this.element.querySelector(".new-thing-label"),this.saveButton.addEventListener("click",this.handleSave.bind(this)),this.thingType.addEventListener("change",this.handleTypeChange.bind(this)),this.customIconInput.addEventListener("change",this.handleIconUpload.bind(this)))}},{key:"handlePinInput",value:function(){var e=this.pinInput.value.trim(),t=!1;t=null!==this.re?this.re.test(e):e.length>0,this.submitButton.disabled=!t,t?this.pinInput.setCustomValidity(""):this.pinInput.setCustomValidity(c.getMessage("new-thing-pin-invalid"))}},{key:"handleCredentialsInput",value:function(){var e=this.usernameInput.value,t=this.passwordInput.value;this.submitButton.disabled=0===e.length||0===t.length}},{key:"handleCancel",value:function(){this.container.removeChild(this.element)}},{key:"handleSubmit",value:function(){var e=this;this.submitButton.disabled=!0;var t={};this.requiresPin()?t.pin=this.pinInput.value.trim():this.requiresCredentials()&&(t.username=this.usernameInput.value,t.password=this.passwordInput.value),a.setThingCredentials(this.id,t).then((function(t){e.description=t,e.requiresPin()?(e.pinError.classList.add("hidden"),e.pinSet=!0):e.requiresCredentials()&&(e.credentialsError.classList.add("hidden"),e.credentialsSet=!0),e.render()})).catch((function(t){console.error("Failed to set PIN/credentials: ".concat(t)),e.submitButton.disabled=!1,e.pinError?e.pinError.classList.remove("hidden"):e.credentialsError&&e.credentialsError.classList.remove("hidden")}))}},{key:"handleTypeChange",value:function(){var e=this.thingType.options[this.thingType.selectedIndex].value;this.customIconLabel.classList.add("hidden"),this.customIcon.classList.add("hidden");var t=u(e);"Custom"==e&&(this.customIconLabel.classList.remove("hidden"),this.customIcon.classList.remove("hidden")),this.element.classList.remove("on-off-switch","multi-level-switch","color-control","energy-monitor","binary-sensor","multi-level-sensor","smart-plug","light","door-sensor","motion-sensor","leak-sensor","push-button","video-camera","camera","temperature-sensor","alarm","thermostat","lock"),t&&this.element.classList.add(t)}},{key:"handleIconUpload",value:function(){var e=this;if(this.label.classList.add("hidden"),0!==this.customIconInput.files.length){var t=this.customIconInput.files[0];if(!["image/jpeg","image/png","image/svg+xml"].includes(t.type))return this.label.innerText=c.getMessage("invalid-file"),this.label.classList.add("error"),void this.label.classList.remove("hidden");var n=new FileReader;n.onloadend=function(n){if(n.target.error)return console.error(n.target.error),e.label.innerText=c.getMessage("failed-read-file"),e.label.classList.add("error"),e.label.classList.remove("hidden"),void(e.saveButton.disabled=!1);e.iconData={mime:t.type,data:btoa(n.target.result)},e.saveButton.disabled=!1,e.customIcon.iconHref=URL.createObjectURL(t),e.customIcon.classList.remove("hidden")},this.saveButton.disabled=!0,n.readAsBinaryString(t)}}},{key:"handleSave",value:function(){var e=this;this.thingType.disabled=!0,this.titleInput.disabled=!0,this.saveButton.disabled=!0,this.customIconInput.disabled=!0;var t=this.description;t.id=this.id,t.title=this.titleInput.value,this.thingType.options.length>0&&(t.selectedCapability=this.thingType.options[this.thingType.selectedIndex].value),"Custom"===t.selectedCapability&&this.iconData&&(t.iconData=this.iconData),a.addThing(t).then((function(){e.saveButton.textContent=c.getMessage("new-thing-saved");var t=document.getElementById("add-thing-cancel-button");t&&(t.textContent=c.getMessage("new-thing-done"))})).catch((function(t){console.error("Failed to save thing ".concat(t)),e.label.innerText=c.getMessage("failed-save"),e.label.classList.add("error"),e.label.classList.remove("hidden"),e.thingType.disabled=!1,e.titleInput.disabled=!1,e.saveButton.disabled=!1,e.customIconInput.disabled=!1}))}}])&&o(t.prototype,n),i&&o(t,i),e}();e.exports=l},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(60),n(13),n(3),n(14),n(61),n(5);var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(l,e);var t,n,s,u=a(l);function l(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,e,t,n,{baseIcon:"/images/thing-icons/alarm.svg"})}return t=l,(n=[{key:"findProperties",value:function(){for(var e in this.alarmProperty=null,this.displayedProperties)if("AlarmProperty"===this.displayedProperties[e].property["@type"]){this.alarmProperty=e;break}null===this.alarmProperty&&this.displayedProperties.alarm&&(this.alarmProperty="alarm")}},{key:"updateProperty",value:function(e,t){t=i(c(l.prototype),"updateProperty",this).call(this,e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.alarmProperty&&(this.icon.alarm=!!t)}},{key:"iconView",value:function(){return"\n      <webthing-alarm-capability>\n      </webthing-alarm-capability>"}},{key:"icon",get:function(){return this.element.querySelector("webthing-alarm-capability")}}])&&r(t.prototype,n),s&&r(t,s),l}(n(138));e.exports=u},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(60),n(13),n(3),n(14),n(61),n(5);var u=n(154),l=n(22),h=n(19),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(f,e);var t,n,s,u=a(f);function f(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(r=u.call(this,e,t,!!n.readOnly,n.title||h.getMessage("alarm"))).readOnly=!!n.readOnly,r.id="alarm-".concat(l.escapeHtmlForIdClass(r.name)),r}return t=f,(n=[{key:"attach",value:function(){if(i(c(f.prototype),"attach",this).call(this),!this.readOnly){this.input=this.labelElement;var e=l.debounce(500,this.set.bind(this));this.input.addEventListener("change",e)}}},{key:"view",value:function(){return this.readOnly?'\n        <webthing-alarm-property data-value="OK"\n          data-name="'.concat(l.escapeHtml(this.label),'" id="').concat(this.id,'">\n        </webthing-alarm-property>'):'\n        <webthing-boolean-property\n          data-name="'.concat(l.escapeHtml(this.label),'" id="').concat(this.id,'">\n        </webthing-boolean-property>')}},{key:"update",value:function(e){if(this.labelElement)if(this.readOnly)this.labelElement.value=e?"ALARM":"OK",this.labelElement.inverted=e;else{if(e==this.input.checked)return;this.input.checked=e}}},{key:"set",value:function(){this.thing.setProperty(this.name,this.input.checked)}}])&&r(t.prototype,n),s&&r(t,s),f}(u);e.exports=f},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9);var i=n(22),o=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.thing=t,this.name=n,this.readOnly=!!r.readOnly,this.label=r.title||n,this.id="boolean-".concat(i.escapeHtmlForIdClass(this.name))}var t,n,o;return t=e,(n=[{key:"attach",value:function(){this.input=this.thing.element.querySelector("#".concat(this.id));var e=i.debounce(500,this.set.bind(this));this.input.addEventListener("change",e)}},{key:"view",value:function(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-boolean-property data-name="'.concat(i.escapeHtml(this.label),'"\n        id="').concat(this.id,'" ').concat(e,">\n      </webthing-boolean-property>")}},{key:"update",value:function(e){this.input&&e!=this.input.checked&&(this.input.checked=e)}},{key:"set",value:function(){this.thing.setProperty(this.name,this.input.checked)}}])&&r(t.prototype,n),o&&r(t,o),e}();e.exports=o},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9);var i=n(22),o=n(19),a=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.thing=t,this.name=n,this.readOnly=!!r.readOnly,this.label=r.title||o.getMessage("brightness"),r.hasOwnProperty("minimum")?this.min=r.minimum:this.min=0,r.hasOwnProperty("maximum")?this.max=r.maximum:this.max=100,r.hasOwnProperty("multipleOf")?this.step=r.multipleOf:"number"===r.type?this.step="any":this.step=1,this.id="brightness-".concat(i.escapeHtmlForIdClass(this.name))}var t,n,a;return t=e,(n=[{key:"attach",value:function(){this.brightness=this.thing.element.querySelector("#".concat(this.id));var e=i.debounce(500,this.set.bind(this));this.brightness.addEventListener("change",e)}},{key:"view",value:function(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-brightness-property data-name="'.concat(i.escapeHtml(this.label),'"\n        value="0" min="').concat(this.min,'" max="').concat(this.max,'" step="').concat(this.step,'"\n        id="').concat(this.id,'" ').concat(e,">\n      </webthing-brightness-property>")}},{key:"update",value:function(e){this.brightness&&(this.brightness.value=e)}},{key:"set",value:function(){this.thing.setProperty(this.name,this.brightness.value)}}])&&r(t.prototype,n),a&&r(t,a),e}();e.exports=a},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9);var i=n(22),o=n(19),a=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.thing=t,this.name=n,this.readOnly=!!r.readOnly,this.label=r.title||o.getMessage("color"),this.id="color-".concat(i.escapeHtmlForIdClass(this.name))}var t,n,a;return t=e,(n=[{key:"attach",value:function(){this.color=this.thing.element.querySelector("#".concat(this.id)),this.color.addEventListener("change",this.set.bind(this))}},{key:"view",value:function(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-color-property data-name="'.concat(i.escapeHtml(this.label),'"\n        id="').concat(this.id,'" ').concat(e,">\n      </webthing-color-property>")}},{key:"update",value:function(e){this.color&&(this.color.value=e)}},{key:"set",value:function(){this.thing.setProperty(this.name,this.color.value)}}])&&r(t.prototype,n),a&&r(t,a),e}();e.exports=a},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(60),n(13),n(3),n(14),n(61),n(5);var u=n(188),l=n(22),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(h,e);var t,n,s,u=a(h);function h(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(r=u.call(this,e,t,n)).id="color-mode-".concat(l.escapeHtmlForIdClass(r.name)),r}return t=h,(n=[{key:"attach",value:function(){this.readOnly?this.labelElement=this.thing.element.querySelector("#".concat(this.id)):i(c(h.prototype),"attach",this).call(this)}},{key:"view",value:function(){return this.readOnly?'\n        <webthing-string-label-property\n          data-read-only="true" data-name="'.concat(l.escapeHtml(this.label),'"\n          id="').concat(this.id,'">\n        </webthing-string-label-property>'):'\n        <webthing-color-mode-property\n          data-choices="'.concat(btoa(JSON.stringify(this.choices)),'"\n          data-name="').concat(l.escapeHtml(this.label),'" id="').concat(this.id,'">\n        </webthing-color-mode-property>')}},{key:"update",value:function(e){if(this.readOnly){if(!this.labelElement)return;this.labelElement.value="".concat(e).toUpperCase()}else i(c(h.prototype),"update",this).call(this,e)}}])&&r(t.prototype,n),s&&r(t,s),h}(u);e.exports=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9);var i=n(22),o=n(19),a=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.thing=t,this.name=n,this.readOnly=!!r.readOnly,this.label=r.title||o.getMessage("color-temperature"),this.min=r.minimum,this.max=r.maximum,r.hasOwnProperty("multipleOf")?this.step=r.multipleOf:"number"===r.type?this.step="any":this.step=1,this.id="color-temperature-".concat(i.escapeHtmlForIdClass(this.name))}var t,n,a;return t=e,(n=[{key:"attach",value:function(){this.temperature=this.thing.element.querySelector("#".concat(this.id)),this.temperature.addEventListener("change",this.set.bind(this))}},{key:"view",value:function(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-color-temperature-property min="'.concat(this.min,'" max="').concat(this.max,'"\n        data-name="').concat(i.escapeHtml(this.label),'" step="').concat(this.step,'"\n        id="').concat(this.id,'" ').concat(e,">\n      </webthing-color-temperature-property>")}},{key:"update",value:function(e){this.temperature&&(this.temperature.value=e)}},{key:"set",value:function(){this.thing.setProperty(this.name,this.temperature.value)}}])&&r(t.prototype,n),a&&r(t,a),e}();e.exports=a},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(78),n(13),n(3),n(14),n(5),n(110),n(45);var c=n(166),u=n(22),l=n(19),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=s.call(this,e,t,!!n.readOnly,n.title||l.getMessage("current"),"A",1)).id="current-".concat(u.escapeHtmlForIdClass(r.name)),n.hasOwnProperty("multipleOf")&&"".concat(n.multipleOf).includes(".")?r.precision="".concat(n.multipleOf).split(".")[1].length:r.precision=1,r}return t=c,(n=[{key:"view",value:function(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-current-property data-value="0" '.concat(e,'\n        data-name="').concat(u.escapeHtml(this.label),'" data-unit="').concat(this.unit,'"\n        data-precision="').concat(this.precision,'" id="').concat(this.id,'">\n      </webthing-current-property>')}}])&&r(t.prototype,n),a&&r(t,a),c}(c);e.exports=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(78),n(13),n(3),n(14),n(5),n(110),n(45);var c=n(166),u=n(22),l=n(19),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=s.call(this,e,t,!!n.readOnly,n.title||l.getMessage("frequency"),"Hz",0)).id="frequency-".concat(u.escapeHtmlForIdClass(r.name)),n.hasOwnProperty("multipleOf")&&"".concat(n.multipleOf).includes(".")?r.precision="".concat(n.multipleOf).split(".")[1].length:r.precision=0,r}return t=c,(n=[{key:"view",value:function(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-frequency-property data-value="0" '.concat(e,'\n        data-name="').concat(u.escapeHtml(this.label),'" data-unit="').concat(this.unit,'"\n        data-precision="').concat(this.precision,'" id="').concat(this.id,'">\n      </webthing-frequency-property>')}}])&&r(t.prototype,n),a&&r(t,a),c}(c);e.exports=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(13),n(3),n(14),n(5);var c=n(154),u=n(22),l=n(19),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=s.call(this,e,t,!!n.readOnly,n.title||l.getMessage("off"))).id="heating-cooling-".concat(u.escapeHtmlForIdClass(r.name)),r}return t=c,(n=[{key:"view",value:function(){return'\n      <webthing-heating-cooling-property\n        data-read-only="true" data-value="'.concat(l.getMessage("off"),'"\n        data-name="').concat(u.escapeHtml(this.label),'" id="').concat(this.id,'">\n      </webthing-heating-cooling-property>')}},{key:"update",value:function(e){this.label&&(this.labelElement.value="".concat(e).toUpperCase())}}])&&r(t.prototype,n),a&&r(t,a),c}(c);e.exports=h},function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(36),n(37),n(9),n(44),n(23),n(43),n(3),n(5),n(157),n(33),n(146);var a=n(35),s=n(22),c=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.thing=t,this.name=n,this.label=i.title||n,this.id="image-".concat(s.escapeHtmlForIdClass(this.name)),this.imageHref=null;var o,a=r(i.links);try{for(a.s();!(o=a.n()).done;){var c=o.value;if("alternate"===c.rel&&c.mediaType&&c.mediaType.startsWith("image/")){this.imageHref=c.href;break}}}catch(e){a.e(e)}finally{a.f()}this.expandImage=this._expandImage.bind(this),this.reloadImage=this._reloadImage.bind(this),this.positionButtons=this._positionButtons.bind(this)}var t,n,i;return t=e,(n=[{key:"attach",value:function(){this.thing.element.querySelector("#".concat(this.id)).addEventListener("click",this.expandImage)}},{key:"view",value:function(){return'\n      <webthing-image-property data-name="'.concat(s.escapeHtml(this.label),'"\n        id="').concat(this.id,'">\n      </webthing-image-property>')}},{key:"_expandImage",value:function(){var e=this,t=document.createElement("div");t.classList.add("media-modal-backdrop"),t.innerHTML='\n      <div class="media-modal">\n        <div class="media-modal-frame">\n          <div class="media-modal-close"></div>\n          <img class="media-modal-image"></img>\n          <div class="media-modal-refresh"></div>\n        </div>\n      </div>\n      ',t.querySelector(".media-modal-close").addEventListener("click",(function(){document.body.removeChild(t),document.querySelector("#things").style.display="block",window.removeEventListener("resize",e.positionButtons)})),t.querySelector(".media-modal-refresh").addEventListener("click",this.reloadImage),t.querySelector(".media-modal-image").addEventListener("load",this.positionButtons),window.addEventListener("resize",this.positionButtons),document.body.appendChild(t),document.querySelector("#things").style.display="none",this.reloadImage()}},{key:"_reloadImage",value:function(){if(null!==this.imageHref){var e=document.querySelector(".media-modal-image");e&&a.loadImage(this.imageHref).then((function(t){e.src=URL.createObjectURL(t)})).catch((function(e){console.error("Failed to load image: ".concat(e))}))}}},{key:"_positionButtons",value:function(){var e=document.querySelector(".media-modal-image"),t=document.querySelector(".media-modal-close"),n=document.querySelector(".media-modal-refresh"),r=e.parentNode.offsetWidth,i=e.parentNode.offsetHeight,o=(r-e.offsetWidth)/2,a=(i-e.offsetHeight)/2;t.style.right="".concat(o,"px"),t.style.top="".concat(a,"px"),n.style.left="".concat(o,"px"),n.style.bottom="".concat(a,"px")}}])&&o(t.prototype,n),i&&o(t,i),e}();e.exports=c},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(78),n(13),n(3),n(14),n(5),n(110),n(45);var c=n(166),u=n(22),l=n(19),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=s.call(this,e,t,!!n.readOnly,n.title||l.getMessage("power"),"W",0)).id="instantaneous-power-".concat(u.escapeHtmlForIdClass(r.name)),n.hasOwnProperty("multipleOf")&&"".concat(n.multipleOf).includes(".")?r.precision="".concat(n.multipleOf).split(".")[1].length:r.precision=0,r}return t=c,(n=[{key:"view",value:function(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-instantaneous-power-property data-value="0" '.concat(e,'\n        data-name="').concat(u.escapeHtml(this.label),'" data-unit="').concat(this.unit,'"\n        data-precision="').concat(this.precision,'" id="').concat(this.id,'">\n      </webthing-instantaneous-power-property>')}}])&&r(t.prototype,n),a&&r(t,a),c}(c);e.exports=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(13),n(3),n(14),n(5);var c=n(154),u=n(22),l=n(19),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=s.call(this,e,t,!!n.readOnly,n.title||l.getMessage("leak"))).id="leak-".concat(u.escapeHtmlForIdClass(r.name)),r}return t=c,(n=[{key:"view",value:function(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-leak-property\n        data-value="'.concat(l.getMessage("dry"),'" ').concat(e,'\n        data-name="').concat(u.escapeHtml(this.label),'" id="').concat(this.id,'">\n      </webthing-leak-property>')}},{key:"update",value:function(e){this.label&&(this.labelElement.value=e?l.getMessage("leak"):l.getMessage("dry"),this.labelElement.inverted=e)}}])&&r(t.prototype,n),a&&r(t,a),c}(c);e.exports=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9),n(78),n(110),n(45);var i=n(120),o=n(22),a=n(19),s=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.thing=t,this.name=n,this.readOnly=!!r.readOnly,this.label=r.title||a.getMessage("level"),this.unit=r.unit?i.nameToAbbreviation(r.unit):null,r.hasOwnProperty("minimum")?this.min=r.minimum:this.min=0,r.hasOwnProperty("maximum")?this.max=r.maximum:this.max=100,this.precision=0,r.hasOwnProperty("multipleOf")?(this.step=r.multipleOf,"".concat(r.multipleOf).includes(".")&&(this.precision="".concat(r.multipleOf).split(".")[1].length)):"number"===r.type?this.step="any":this.step=1,this.id="level-".concat(o.escapeHtmlForIdClass(this.name))}var t,n,s;return t=e,(n=[{key:"attach",value:function(){this.level=this.thing.element.querySelector("#".concat(this.id));var e=o.debounce(500,this.set.bind(this));this.level.addEventListener("change",e)}},{key:"view",value:function(){var e=this.unit||"",t=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-level-property data-name="'.concat(o.escapeHtml(this.label),'"\n        data-unit="').concat(e,'" min="').concat(this.min,'" max="').concat(this.max,'"\n        step="').concat(this.step,'" id="').concat(this.id,'" ').concat(t,'\n        data-precision="').concat(this.precision,'">\n      </webthing-level-property>')}},{key:"update",value:function(e){this.level&&(this.level.value=e)}},{key:"set",value:function(){this.thing.setProperty(this.name,this.level.value)}}])&&r(t.prototype,n),s&&r(t,s),e}();e.exports=s},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(13),n(3),n(14),n(5);var c=n(187),u=n(22),l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(i=s.call(this,e,t,n,r)).id="lock-action-button-".concat(u.escapeHtmlForIdClass(i.name)),i}return t=c,(n=[{key:"view",value:function(){return'\n      <webthing-lock-action id="'.concat(this.id,'"\n        data-name="').concat(u.escapeHtml(this.label),'"\n      </webthing-lock-action>')}}])&&r(t.prototype,n),a&&r(t,a),c}(c);e.exports=l},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(78),n(13),n(3),n(14),n(5);var c=n(154),u=n(22),l=n(19),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=s.call(this,e,t,!!n.readOnly,n.title||l.getMessage("locked"))).id="locked-".concat(u.escapeHtmlForIdClass(r.name)),r}return t=c,(n=[{key:"view",value:function(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-locked-property\n        data-value="'.concat(l.getMessage("unknown"),'" ').concat(e,'\n        data-name="').concat(u.escapeHtml(this.label),'" id="').concat(this.id,'">\n      </webthing-locked-property>')}},{key:"update",value:function(e){this.label&&(["locked","unlocked","unknown","jammed"].includes(e)||(e="unknown"),this.labelElement.value=l.getMessage(e),this.labelElement.inverted="locked"!==e)}}])&&r(t.prototype,n),a&&r(t,a),c}(c);e.exports=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(13),n(3),n(14),n(5);var c=n(154),u=n(22),l=n(19),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=s.call(this,e,t,!!n.readOnly,n.title||l.getMessage("motion"))).id="motion-".concat(u.escapeHtmlForIdClass(r.name)),r}return t=c,(n=[{key:"view",value:function(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-motion-property\n        data-value="'.concat(l.getMessage("no-motion"),'" ').concat(e,'\n        data-name="').concat(u.escapeHtml(this.label),'" id="').concat(this.id,'">\n      </webthing-motion-property>')}},{key:"update",value:function(e){this.label&&(this.labelElement.value=e?l.getMessage("motion"):l.getMessage("no-motion"),this.labelElement.inverted=e)}}])&&r(t.prototype,n),a&&r(t,a),c}(c);e.exports=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9);var i=n(22),o=n(19),a=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.thing=t,this.name=n,this.readOnly=!!r.readOnly,this.label=r.title||o.getMessage("on-off"),this.id="on-off-".concat(i.escapeHtmlForIdClass(this.name))}var t,n,a;return t=e,(n=[{key:"attach",value:function(){this.input=this.thing.element.querySelector("#".concat(this.id));var e=i.debounce(500,this.set.bind(this));this.input.addEventListener("change",e)}},{key:"view",value:function(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-on-off-property data-name="'.concat(i.escapeHtml(this.label),'"\n        id="').concat(this.id,'" ').concat(e,">\n      </webthing-on-off-property>")}},{key:"update",value:function(e){this.input.checked=e}},{key:"set",value:function(){this.thing.setProperty(this.name,this.input.checked)}}])&&r(t.prototype,n),a&&r(t,a),e}();e.exports=a},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(13),n(3),n(14),n(5);var c=n(154),u=n(22),l=n(19),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=s.call(this,e,t,!!n.readOnly,n.title||l.getMessage("open"))).id="open-".concat(u.escapeHtmlForIdClass(r.name)),r}return t=c,(n=[{key:"view",value:function(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-open-property\n        data-value="'.concat(l.getMessage("closed"),'" ').concat(e,'\n        data-name="').concat(u.escapeHtml(this.label),'" id="').concat(this.id,'">\n      </webthing-open-property>')}},{key:"update",value:function(e){this.label&&(this.labelElement.value=e?l.getMessage("open"):l.getMessage("closed"),this.labelElement.inverted=e)}}])&&r(t.prototype,n),a&&r(t,a),c}(c);e.exports=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(13),n(3),n(14),n(5);var c=n(154),u=n(22),l=n(19),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=s.call(this,e,t,!!n.readOnly,n.title||l.getMessage("pushed"))).id="pushed-".concat(u.escapeHtmlForIdClass(r.name)),r}return t=c,(n=[{key:"view",value:function(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-pushed-property\n        data-value="'.concat(l.getMessage("not-pushed"),'" ').concat(e,'\n        data-name="').concat(u.escapeHtml(this.label),'" id="').concat(this.id,'">\n      </webthing-pushed-property>')}},{key:"update",value:function(e){this.label&&(this.labelElement.value=e?l.getMessage("pushed"):l.getMessage("not-pushed"),this.labelElement.inverted=e)}}])&&r(t.prototype,n),a&&r(t,a),c}(c);e.exports=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9);var i=n(22),o=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.thing=t,this.name=n,this.readOnly=!!r.readOnly,this.label=r.title||n,this.id="string-".concat(i.escapeHtmlForIdClass(this.name))}var t,n,o;return t=e,(n=[{key:"attach",value:function(){var e=this;this.input=this.thing.element.querySelector("#".concat(this.id)),this.input.addEventListener("change",(function(){e.thing.setProperty(e.name,e.input.value)}))}},{key:"view",value:function(){return this.readOnly?'\n        <webthing-string-label-property\n          data-name="'.concat(i.escapeHtml(this.label),'" id="').concat(this.id,'">\n        </webthing-string-label-property>'):'\n        <webthing-string-property data-name="'.concat(i.escapeHtml(this.label),'"\n          id="').concat(this.id,'">\n        </webthing-string-property>')}},{key:"update",value:function(e){this.input&&(this.input.value=e)}}])&&r(t.prototype,n),o&&r(t,o),e}();e.exports=o},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(13),n(3),n(14),n(5);var c=n(210),u=n(22),l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=s.call(this,e,t,n)).id="target-temperature-".concat(u.escapeHtmlForIdClass(r.name)),r}return t=c,(n=[{key:"view",value:function(){var e=null===this.min?"":'min="'.concat(this.min,'"'),t=null===this.max?"":'max="'.concat(this.max,'"');return'\n      <webthing-target-temperature-property data-value="0"\n        data-name="'.concat(u.escapeHtml(this.label),'" data-unit="').concat(this.unit,'"\n        ').concat(e," ").concat(t,' value="0" step="').concat(this.step,'" id="').concat(this.id,'">\n      </webthing-target-temperature-property>')}}])&&r(t.prototype,n),a&&r(t,a),c}(c);e.exports=l},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(78),n(13),n(3),n(14),n(5),n(110),n(45);var c=n(166),u=n(22),l=n(19),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=s.call(this,e,t,!!n.readOnly,n.title||l.getMessage("temperature"),n.unit||"degree celsius",0)).id="temperature-".concat(u.escapeHtmlForIdClass(r.name)),n.hasOwnProperty("multipleOf")&&"".concat(n.multipleOf).includes(".")?r.precision="".concat(n.multipleOf).split(".")[1].length:r.precision=0,r}return t=c,(n=[{key:"view",value:function(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-temperature-property data-value="0" '.concat(e,'\n        data-name="').concat(u.escapeHtml(this.label),'" data-unit="').concat(this.unit,'"\n        data-precision="').concat(this.precision,'" id="').concat(this.id,'">\n      </webthing-temperature-property>')}}])&&r(t.prototype,n),a&&r(t,a),c}(c);e.exports=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(13),n(3),n(14),n(5);var c=n(188),u=n(22),l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=s.call(this,e,t,n)).id="thermostat-mode-".concat(u.escapeHtmlForIdClass(r.name)),r}return t=c,(n=[{key:"view",value:function(){var e=this.unit||"";return'\n      <webthing-thermostat-mode-property data-name="'.concat(u.escapeHtml(this.label),'"\n        data-unit="').concat(e,'" data-type="').concat(this.type,'" id="').concat(this.id,'"\n        data-choices="').concat(btoa(JSON.stringify(this.choices)),'">\n      </webthing-thermostat-mode-property>')}}])&&r(t.prototype,n),a&&r(t,a),c}(c);e.exports=l},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9);var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elements=n,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.classList.add("thing-detail-layout-links");var r=document.getElementById("things");r.insertBefore(this.svg,r.firstChild),this.doLayout=this.doLayout.bind(this),this.doLayout(),t.registerEventListener(window,"resize",this.doLayout)}var t,n,i;return t=e,(n=[{key:"adjustXY",value:function(e,t){var n=0,r=0;if(e<Math.PI/2)n=Math.cos(e)*t,r=Math.sin(e)*t;else if(e<Math.PI){var i=Math.PI-e;n=-Math.cos(i)*t,r=Math.sin(i)*t}else if(e<3*Math.PI/2){var o=3*Math.PI/2-e;n=-Math.sin(o)*t,r=-Math.cos(o)*t}else{var a=2*Math.PI-e;n=Math.cos(a)*t,r=-Math.sin(a)*t}return{x:n,y:r}}},{key:"doLayout",value:function(){var e=300,t=300,n=window.innerWidth/2-70;n<e&&(e=Math.max(120,n));var r=(window.innerHeight-96)/2-70;r<t&&(t=Math.max(135,r)),this.svg.setAttribute("width",2*e),this.svg.setAttribute("height",2*t),this.svg.innerHTML="";for(var i=0;i<this.elements.length;i++){var o=i/this.elements.length*2*Math.PI+0,a=e*Math.cos(o),s=t*Math.sin(o),c=Math.atan2(s,a);c<0&&(c+=2*Math.PI);var u=this.adjustXY(c,64),l=this.adjustXY((c+Math.PI)%(2*Math.PI),51);this.elements[i].style.transform="translate(".concat(a,"px, ").concat(s,"px)");var h=document.createElementNS("http://www.w3.org/2000/svg","line");h.classList.add("thing-detail-layout-link"),h.setAttribute("x1",e+u.x),h.setAttribute("y1",t+u.y),h.setAttribute("x2",a+e+l.x),h.setAttribute("y2",s+t+l.y),this.svg.appendChild(h)}}}])&&r(t.prototype,n),i&&r(t,i),e}();e.exports=i},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(13),n(3),n(14),n(5);var c=n(187),u=n(22),l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(e,t,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(i=s.call(this,e,t,n,r)).id="unlock-action-button-".concat(u.escapeHtmlForIdClass(i.name)),i}return t=c,(n=[{key:"view",value:function(){return'\n      <webthing-unlock-action id="'.concat(this.id,'"\n        data-name="').concat(u.escapeHtml(this.label),'"\n      </webthing-unlock-action>')}}])&&r(t.prototype,n),a&&r(t,a),c}(c);e.exports=l},function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(36),n(37),n(9),n(44),n(23),n(43),n(3),n(5),n(33);var a=n(35),s=n(22),c=n(199),u=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.thing=t,this.name=n,this.label=i.title||n,this.id="video-".concat(s.escapeHtmlForIdClass(this.name)),this.dashHref=null,this.hlsHref=null,this.player=null;var o,a=r(i.links);try{for(a.s();!(o=a.n()).done;){var c=o.value;"alternate"===c.rel&&(null===this.dashHref&&"application/dash+xml"===c.mediaType?this.dashHref=c.href:null===this.hlsHref&&"application/vnd.apple.mpegurl"===c.mediaType&&(this.hlsHref=c.href))}}catch(e){a.e(e)}finally{a.f()}this.expandVideo=this._expandVideo.bind(this),this.positionButtons=this._positionButtons.bind(this)}var t,n,i;return t=e,(n=[{key:"attach",value:function(){this.thing.element.querySelector("#".concat(this.id)).addEventListener("click",this.expandVideo)}},{key:"view",value:function(){return'\n      <webthing-video-property data-name="'.concat(s.escapeHtml(this.label),'"\n        id="').concat(this.id,'">\n      </webthing-video-property>')}},{key:"_expandVideo",value:function(){var e=this,t=document.createElement("div");if(t.classList.add("media-modal-backdrop"),c.Player.isBrowserSupported()?t.innerHTML='\n        <div class="media-modal">\n          <div class="media-modal-frame">\n            <div class="media-modal-close"></div>\n            <video class="media-modal-video" controls autoplay></video>\n          </div>\n        </div>\n        ':t.innerHTML='\n        <div class="media-modal">\n          <div class="media-modal-frame">\n            <div class="media-modal-close"></div>\n            <div class="media-modal-error" data-l10n-id="video-unsupported">\n            </div>\n          </div>\n        </div>\n        ',document.body.appendChild(t),document.querySelector("#things").style.display="none",c.Player.isBrowserSupported()||this.positionButtons(),t.querySelector(".media-modal-close").addEventListener("click",(function(){e.player&&(e.player.destroy(),e.player=null),document.body.removeChild(t),document.querySelector("#things").style.display="block",window.removeEventListener("resize",e.positionButtons)})),window.addEventListener("resize",this.positionButtons),c.Player.isBrowserSupported()&&(this.dashHref||this.hlsHref)){t.querySelector(".media-modal-video").addEventListener("loadeddata",this.positionButtons);var n=document.querySelector(".media-modal-video");this.player=new c.Player(n),this.player.getNetworkingEngine().registerRequestFilter((function(e,t){t.headers={Authorization:"Bearer ".concat(a.jwt)}})),this.player.addEventListener("error",(function(e){console.error("Error playing video:",e)})),this.player.load(this.dashHref||this.hlsHref).then((function(){n.play()})).catch((function(e){console.error("Error loading video:",e)}))}}},{key:"_positionButtons",value:function(){var e=document.querySelector(".media-modal-video");e||(e=document.querySelector(".media-modal-error"));var t=document.querySelector(".media-modal-close"),n=e.parentNode.offsetWidth,r=e.parentNode.offsetHeight,i=(n-e.offsetWidth)/2,o=(r-e.offsetHeight)/2;t.style.right="".concat(i,"px"),t.style.top="".concat(o,"px")}}])&&o(t.prototype,n),i&&o(t,i),e}();e.exports=u},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(78),n(13),n(3),n(14),n(5),n(110),n(45);var c=n(166),u=n(22),l=n(19),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(r=s.call(this,e,t,!!n.readOnly,n.title||l.getMessage("voltage"),"V",0)).id="voltage-".concat(u.escapeHtmlForIdClass(r.name)),n.hasOwnProperty("multipleOf")&&"".concat(n.multipleOf).includes(".")?r.precision="".concat(n.multipleOf).split(".")[1].length:r.precision=0,r}return t=c,(n=[{key:"view",value:function(){var e=this.readOnly?'data-read-only="true"':"";return'\n      <webthing-voltage-property data-value="0" '.concat(e,'\n        data-name="').concat(u.escapeHtml(this.label),'" data-unit="').concat(this.unit,'"\n        data-precision=').concat(this.precision,'" id="').concat(this.id,'">\n      </webthing-voltage-property>')}}])&&r(t.prototype,n),a&&r(t,a),c}(c);e.exports=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(78),n(60),n(13),n(3),n(14),n(61),n(5),n(110),n(45);var u=n(138),l=n(120),h=n(22),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(f,e);var t,n,s,u=a(f);function f(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),u.call(this,e,t,n,{baseIcon:"/images/thing-icons/multi_level_sensor.svg"})}return t=f,(n=[{key:"findProperties",value:function(){for(var e in this.barometricPressureProperty=null,this.displayedProperties)if("BarometricPressureProperty"===this.displayedProperties[e].property["@type"]){this.barometricPressureProperty=e;break}if(this.precision=0,this.unit="",this.barometricPressureProperty){var t=this.displayedProperties[this.barometricPressureProperty].convertedProperty;t.hasOwnProperty("multipleOf")&&"".concat(t.multipleOf).includes(".")&&(this.precision="".concat(t.multipleOf).split(".")[1].length),t.hasOwnProperty("unit")&&(this.unit=t.unit)}}},{key:"updateProperty",value:function(e,t){t=i(c(f.prototype),"updateProperty",this).call(this,e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.barometricPressureProperty&&(t=parseFloat(t),this.icon.level=t)}},{key:"iconView",value:function(){var e=h.escapeHtml(l.nameToAbbreviation(this.unit));return'\n      <webthing-barometric-pressure-sensor-capability data-unit="'.concat(e,'"\n        data-precision="').concat(this.precision,'">\n      </webthing-barometric-pressure-sensor-capability>')}},{key:"icon",get:function(){return this.element.querySelector("webthing-barometric-pressure-sensor-capability")}}])&&r(t.prototype,n),s&&r(t,s),f}(u);e.exports=f},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(60),n(13),n(3),n(14),n(61),n(5);var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(l,e);var t,n,s,u=a(l);function l(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,e,t,n,{baseIcon:"/images/thing-icons/binary_sensor.svg"})}return t=l,(n=[{key:"findProperties",value:function(){for(var e in this.onProperty=null,this.displayedProperties)if("BooleanProperty"===this.displayedProperties[e].property["@type"]){this.onProperty=e;break}null===this.onProperty&&this.displayedProperties.hasOwnProperty("on")&&(this.onProperty="on")}},{key:"updateProperty",value:function(e,t){t=i(c(l.prototype),"updateProperty",this).call(this,e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.onProperty&&(this.icon.on=!!t)}},{key:"iconView",value:function(){return"\n      <webthing-binary-sensor-capability>\n      </webthing-binary-sensor-capability>"}},{key:"icon",get:function(){return this.element.querySelector("webthing-binary-sensor-capability")}}])&&r(t.prototype,n),s&&r(t,s),l}(n(138));e.exports=u},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),s.call(this,e,t,n,{baseIcon:"/images/thing-icons/camera.svg"})}return t=c,(n=[{key:"findProperties",value:function(){for(var e in this.imageProperty=null,this.displayedProperties)if("ImageProperty"===this.displayedProperties[e].property["@type"]){this.imageProperty=e;break}}},{key:"iconView",value:function(){return"\n      <webthing-camera-capability>\n      </webthing-camera-capability>"}},{key:"icon",get:function(){return this.element.querySelector("webthing-camera-capability")}}])&&r(t.prototype,n),a&&r(t,a),c}(n(138));e.exports=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(u,e);var t,n,s,c=a(u);function u(){return r(this,u),c.apply(this,arguments)}return t=u,(n=[{key:"iconView",value:function(){return"\n      <webthing-color-sensor-capability>\n      </webthing-color-sensor-capability>"}},{key:"icon",get:function(){return this.element.querySelector("webthing-color-sensor-capability")}}])&&i(t.prototype,n),s&&i(t,s),u}(n(211));e.exports=u},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(60),n(13),n(3),n(14),n(61),n(5);var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(l,e);var t,n,s,u=a(l);function l(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,e,t,n,{baseIcon:"/images/thing-icons/door_sensor.svg"})}return t=l,(n=[{key:"findProperties",value:function(){for(var e in this.openProperty=null,this.displayedProperties)if("OpenProperty"===this.displayedProperties[e].property["@type"]){this.openProperty=e;break}null===this.openProperty&&this.displayedProperties.open&&(this.openProperty="open")}},{key:"updateProperty",value:function(e,t){t=i(c(l.prototype),"updateProperty",this).call(this,e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.openProperty&&(this.icon.open=!!t)}},{key:"iconView",value:function(){return"\n      <webthing-door-sensor-capability>\n      </webthing-door-sensor-capability>"}},{key:"icon",get:function(){return this.element.querySelector("webthing-door-sensor-capability")}}])&&r(t.prototype,n),s&&r(t,s),l}(n(138));e.exports=u},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(78),n(60),n(13),n(3),n(14),n(61),n(5),n(110),n(45);var u=n(138),l=n(120),h=n(22),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(f,e);var t,n,s,u=a(f);function f(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),u.call(this,e,t,n,{baseIcon:"/images/thing-icons/energy_monitor.svg"})}return t=f,(n=[{key:"findProperties",value:function(){for(var e in this.powerProperty=null,this.displayedProperties)if("InstantaneousPowerProperty"===this.displayedProperties[e].property["@type"]){this.powerProperty=e;break}if(null===this.powerProperty&&this.displayedProperties.hasOwnProperty("instantaneousPower")&&(this.powerProperty="instantaneousPower"),this.precision=0,this.unit="watt",this.powerProperty){var t=this.displayedProperties[this.powerProperty].convertedProperty;t.hasOwnProperty("multipleOf")&&"".concat(t.multipleOf).includes(".")&&(this.precision="".concat(t.multipleOf).split(".")[1].length),t.hasOwnProperty("unit")&&(this.unit=t.unit)}}},{key:"updateProperty",value:function(e,t){t=i(c(f.prototype),"updateProperty",this).call(this,e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.powerProperty&&(t=parseFloat(t),this.icon.power=t)}},{key:"iconView",value:function(){var e=h.escapeHtml(l.nameToAbbreviation(this.unit));return'\n      <webthing-energy-monitor-capability data-unit="'.concat(e,'"\n        data-precision="').concat(this.precision,'">\n      </webthing-energy-monitor-capability>')}},{key:"icon",get:function(){return this.element.querySelector("webthing-energy-monitor-capability")}}])&&r(t.prototype,n),s&&r(t,s),f}(u);e.exports=f},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(78),n(60),n(13),n(3),n(14),n(61),n(5),n(110),n(45);var u=n(138),l=n(120),h=n(22),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(f,e);var t,n,s,u=a(f);function f(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),u.call(this,e,t,n,{baseIcon:"/images/thing-icons/multi_level_sensor.svg"})}return t=f,(n=[{key:"findProperties",value:function(){for(var e in this.humidityProperty=null,this.displayedProperties)if("HumidityProperty"===this.displayedProperties[e].property["@type"]){this.humidityProperty=e;break}if(this.precision=0,this.unit="",this.humidityProperty){var t=this.displayedProperties[this.humidityProperty].convertedProperty;t.hasOwnProperty("multipleOf")&&"".concat(t.multipleOf).includes(".")&&(this.precision="".concat(t.multipleOf).split(".")[1].length),t.hasOwnProperty("unit")&&(this.unit=t.unit)}}},{key:"updateProperty",value:function(e,t){t=i(c(f.prototype),"updateProperty",this).call(this,e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.humidityProperty&&(t=parseFloat(t),this.icon.level=t)}},{key:"iconView",value:function(){var e=h.escapeHtml(l.nameToAbbreviation(this.unit));return'\n      <webthing-humidity-sensor-capability data-unit="'.concat(e,'"\n        data-precision="').concat(this.precision,'">\n      </webthing-humidity-sensor-capability>')}},{key:"icon",get:function(){return this.element.querySelector("webthing-humidity-sensor-capability")}}])&&r(t.prototype,n),s&&r(t,s),f}(u);e.exports=f},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(60),n(13),n(3),n(14),n(61),n(5);var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(l,e);var t,n,s,u=a(l);function l(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,e,t,n,{baseIcon:"/images/thing-icons/leak_sensor.svg"})}return t=l,(n=[{key:"findProperties",value:function(){for(var e in this.leakProperty=null,this.displayedProperties)if("LeakProperty"===this.displayedProperties[e].property["@type"]){this.leakProperty=e;break}}},{key:"updateProperty",value:function(e,t){t=i(c(l.prototype),"updateProperty",this).call(this,e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.leakProperty&&(this.icon.leak=!!t)}},{key:"iconView",value:function(){return"\n      <webthing-leak-sensor-capability>\n      </webthing-leak-sensor-capability>"}},{key:"icon",get:function(){return this.element.querySelector("webthing-leak-sensor-capability")}}])&&r(t.prototype,n),s&&r(t,s),l}(n(138));e.exports=u},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(60),n(13),n(3),n(14),n(61),n(5);var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(l,e);var t,n,s,u=a(l);function l(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,e,t,n,{baseIcon:"/images/thing-icons/light.svg"})}return t=l,(n=[{key:"findProperties",value:function(){for(var e in i(c(l.prototype),"findProperties",this).call(this),this.brightnessProperty=null,this.colorProperty=null,this.colorTemperatureProperty=null,this.colorModeProperty=null,this.displayedProperties){var t=this.displayedProperties[e].property["@type"];null===this.brightnessProperty&&"BrightnessProperty"===t?this.brightnessProperty=e:null===this.colorProperty&&"ColorProperty"===t?this.colorProperty=e:null===this.colorTemperatureProperty&&"ColorTemperatureProperty"===t?this.colorTemperatureProperty=e:null===this.colorModeProperty&&"ColorModeProperty"===t&&(this.colorModeProperty=e)}null===this.brightnessProperty&&this.displayedProperties.hasOwnProperty("level")&&(this.brightnessProperty="level"),null===this.colorProperty&&this.displayedProperties.hasOwnProperty("color")&&(this.colorProperty="color"),null===this.colorTemperatureProperty&&this.displayedProperties.hasOwnProperty("colorTemperature")&&(this.colorTemperatureProperty="colorTemperature"),null===this.colorModeProperty&&this.displayedProperties.hasOwnProperty("colorMode")&&(this.colorModeProperty="colorMode")}},{key:"updateProperty",value:function(e,t){t=i(c(l.prototype),"updateProperty",this).call(this,e,t),this.displayedProperties.hasOwnProperty(e)&&(e===this.brightnessProperty?(t=parseInt(t,10),this.icon.brightness=t):e===this.colorProperty?this.icon.color=t:e===this.colorTemperatureProperty?(t=parseInt(t,10),this.icon.colorTemperature=t):e===this.colorModeProperty&&(this.icon.colorMode=t))}},{key:"iconView",value:function(){var e="";null!==this.colorProperty&&(e+=' data-have-color="true"'),null!==this.colorTemperatureProperty&&(e+=' data-have-color-temperature="true"'),null!==this.colorModeProperty&&(e+=' data-have-color-mode="true"');var t="";return null!==this.brightnessProperty&&(t='data-have-brightness="true"'),"\n      <webthing-light-capability ".concat(e," ").concat(t,">\n      </webthing-light-capability>")}},{key:"icon",get:function(){return this.element.querySelector("webthing-light-capability")}}])&&r(t.prototype,n),s&&r(t,s),l}(n(174));e.exports=u},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(60),n(13),n(3),n(14),n(61),n(5);var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(l,e);var t,n,s,u=a(l);function l(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,e,t,n,{baseIcon:"/images/thing-icons/lock.svg"})}return t=l,(n=[{key:"findProperties",value:function(){for(var e in this.onProperty=null,this.displayedProperties)if("LockedProperty"===this.displayedProperties[e].property["@type"]){this.lockedProperty=e;break}null===this.lockedProperty&&this.displayedProperties.hasOwnProperty("locked")&&(this.lockedProperty="locked")}},{key:"updateProperty",value:function(e,t){t=i(c(l.prototype),"updateProperty",this).call(this,e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.lockedProperty&&(this.icon.state=t)}},{key:"iconView",value:function(){return"\n      <webthing-lock-capability>\n      </webthing-lock-capability>"}},{key:"icon",get:function(){return this.element.querySelector("webthing-lock-capability")}}])&&r(t.prototype,n),s&&r(t,s),l}(n(138));e.exports=u},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(60),n(13),n(3),n(14),n(61),n(5);var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(l,e);var t,n,s,u=a(l);function l(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),u.call(this,e,t,n,{baseIcon:"/images/thing-icons/motion_sensor.svg"})}return t=l,(n=[{key:"findProperties",value:function(){for(var e in this.motionProperty=null,this.displayedProperties)if("MotionProperty"===this.displayedProperties[e].property["@type"]){this.motionProperty=e;break}null===this.motionProperty&&this.displayedProperties.motion&&(this.motionProperty="motion")}},{key:"updateProperty",value:function(e,t){t=i(c(l.prototype),"updateProperty",this).call(this,e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.motionProperty&&(this.icon.motion=!!t)}},{key:"iconView",value:function(){return"\n      <webthing-motion-sensor-capability>\n      </webthing-motion-sensor-capability>"}},{key:"icon",get:function(){return this.element.querySelector("webthing-motion-sensor-capability")}}])&&r(t.prototype,n),s&&r(t,s),l}(n(138));e.exports=u},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(78),n(60),n(13),n(3),n(14),n(61),n(5),n(110),n(45);var u=n(138),l=n(120),h=n(22),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(f,e);var t,n,s,u=a(f);function f(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),u.call(this,e,t,n,{baseIcon:"/images/thing-icons/multi_level_sensor.svg"})}return t=f,(n=[{key:"findProperties",value:function(){for(var e in this.levelProperty=null,this.displayedProperties)if("LevelProperty"===this.displayedProperties[e].property["@type"]){this.levelProperty=e;break}if(null===this.levelProperty&&this.displayedProperties.hasOwnProperty("level")&&(this.levelProperty="level"),this.precision=0,this.unit="",this.levelProperty){var t=this.displayedProperties[this.levelProperty].convertedProperty;t.hasOwnProperty("multipleOf")&&"".concat(t.multipleOf).includes(".")&&(this.precision="".concat(t.multipleOf).split(".")[1].length),t.hasOwnProperty("unit")&&(this.unit=t.unit)}}},{key:"updateProperty",value:function(e,t){t=i(c(f.prototype),"updateProperty",this).call(this,e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.levelProperty&&(t=parseFloat(t),this.icon.level=t)}},{key:"iconView",value:function(){var e=h.escapeHtml(l.nameToAbbreviation(this.unit));return'\n      <webthing-multi-level-sensor-capability data-unit="'.concat(e,'"\n        data-precision="').concat(this.precision,'">\n      </webthing-multi-level-sensor-capability>')}},{key:"icon",get:function(){return this.element.querySelector("webthing-multi-level-sensor-capability")}}])&&r(t.prototype,n),s&&r(t,s),f}(u);e.exports=f},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(78),n(60),n(13),n(3),n(14),n(61),n(5),n(110),n(45);var u=n(174),l=n(120),h=n(22),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(f,e);var t,n,s,u=a(f);function f(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),u.call(this,e,t,n,{baseIcon:"/images/thing-icons/multi_level_switch.svg"})}return t=f,(n=[{key:"findProperties",value:function(){for(var e in i(c(f.prototype),"findProperties",this).call(this),this.levelProperty=null,this.displayedProperties)if("LevelProperty"===this.displayedProperties[e].property["@type"]){this.levelProperty=e;break}if(null===this.levelProperty&&this.displayedProperties.hasOwnProperty("level")&&(this.levelProperty="level"),this.precision=0,this.unit="",this.minimum=0,this.maximum=100,this.levelProperty){var t=this.displayedProperties[this.levelProperty].convertedProperty;t.hasOwnProperty("multipleOf")&&"".concat(t.multipleOf).includes(".")&&(this.precision="".concat(t.multipleOf).split(".")[1].length),t.hasOwnProperty("unit")&&(this.unit=t.unit),t.hasOwnProperty("minimum")&&(this.minimum=t.minimum),t.hasOwnProperty("maximum")&&(this.maximum=t.maximum)}}},{key:"updateProperty",value:function(e,t){t=i(c(f.prototype),"updateProperty",this).call(this,e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.levelProperty&&(t=parseFloat(t),this.icon.level=t)}},{key:"handleClick",value:function(){this.onProperty&&i(c(f.prototype),"handleClick",this).call(this)}},{key:"iconView",value:function(){var e=h.escapeHtml(l.nameToAbbreviation(this.unit));return'\n      <webthing-multi-level-switch-capability data-unit="'.concat(e,'"\n        data-precision="').concat(this.precision,'" min="').concat(this.minimum,'"\n        max="').concat(this.maximum,'">\n      </webthing-multi-level-switch-capability>')}},{key:"icon",get:function(){return this.element.querySelector("webthing-multi-level-switch-capability")}}])&&r(t.prototype,n),s&&r(t,s),f}(u);e.exports=f},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(60),n(13),n(3),n(14),n(61),n(5);var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(l,e);var t,n,s,u=a(l);function l(e,t,n){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(r=u.call(this,e,t,n,{baseIcon:"/images/thing-icons/push_button.svg"})).pressedEventName=null,r.doublePressedEventName=null,r.longPressedEventName=null,t.events)for(var i in t.events)switch(t.events[i]["@type"]){case"PressedEvent":null===r.pressedEventName&&(r.pressedEventName=i);break;case"DoublePressedEvent":null===r.doublePressedEventName&&(r.doublePressedEventName=i);break;case"LongPressedEvent":null===r.longPressedEventName&&(r.longPressedEventName=i)}return r.pushedProperty||(r.icon.pushed=!1),r}return t=l,(n=[{key:"findProperties",value:function(){for(var e in this.pushedProperty=null,this.displayedProperties)if("PushedProperty"===this.displayedProperties[e].property["@type"]){this.pushedProperty=e;break}}},{key:"updateProperty",value:function(e,t){t=i(c(l.prototype),"updateProperty",this).call(this,e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.pushedProperty&&(this.icon.pushed=!!t)}},{key:"onEvent",value:function(e){if(i(c(l.prototype),"onEvent",this).call(this,e),!this.pushedProperty)for(var t in e)t===this.pressedEventName?this.icon.dispatchEvent(new CustomEvent("press",{detail:"single"})):t===this.doublePressedEventName?this.icon.dispatchEvent(new CustomEvent("press",{detail:"double"})):t===this.longPressedEventName&&this.icon.dispatchEvent(new CustomEvent("press",{detail:"long"}))}},{key:"iconView",value:function(){return"\n      <webthing-push-button-capability>\n      </webthing-push-button-capability>"}},{key:"icon",get:function(){return this.element.querySelector("webthing-push-button-capability")}}])&&r(t.prototype,n),s&&r(t,s),l}(n(138));e.exports=u},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(78),n(60),n(13),n(3),n(14),n(61),n(5),n(110),n(45);var u=n(174),l=n(120),h=n(22),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(f,e);var t,n,s,u=a(f);function f(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),u.call(this,e,t,n,{baseIcon:"/images/thing-icons/smart_plug.svg"})}return t=f,(n=[{key:"findProperties",value:function(){for(var e in i(c(f.prototype),"findProperties",this).call(this),this.powerProperty=null,this.displayedProperties)if("InstantaneousPowerProperty"===this.displayedProperties[e].property["@type"]){this.powerProperty=e;break}if(null===this.powerProperty&&this.displayedProperties.hasOwnProperty("instantaneousPower")&&(this.powerProperty="instantaneousPower"),this.precision=0,this.unit="watt",this.powerProperty){var t=this.displayedProperties[this.powerProperty].convertedProperty;t.hasOwnProperty("multipleOf")&&"".concat(t.multipleOf).includes(".")&&(this.precision="".concat(t.multipleOf).split(".")[1].length),t.hasOwnProperty("unit")&&(this.unit=t.unit)}}},{key:"updateProperty",value:function(e,t){t=i(c(f.prototype),"updateProperty",this).call(this,e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.powerProperty&&(t=parseFloat(t),this.icon.power=t)}},{key:"iconView",value:function(){var e=h.escapeHtml(l.nameToAbbreviation(this.unit)),t="";return null!==this.powerProperty&&(t='data-have-power="true"',t+=' data-precision="'.concat(this.precision,'"'),t+=' data-unit="'.concat(e,'"')),"\n      <webthing-smart-plug-capability ".concat(t,">\n      </webthing-smart-plug-capability>")}},{key:"icon",get:function(){return this.element.querySelector("webthing-smart-plug-capability")}}])&&r(t.prototype,n),s&&r(t,s),f}(u);e.exports=f},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(78),n(60),n(13),n(3),n(14),n(61),n(5),n(110),n(45);var u=n(138),l=n(120),h=n(22),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(f,e);var t,n,s,u=a(f);function f(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),u.call(this,e,t,n,{baseIcon:"/images/thing-icons/temperature_sensor.svg"})}return t=f,(n=[{key:"findProperties",value:function(){for(var e in this.temperatureProperty=null,this.displayedProperties)if("TemperatureProperty"===this.displayedProperties[e].property["@type"]){this.temperatureProperty=e;break}if(null===this.temperatureProperty&&this.displayedProperties.hasOwnProperty("temperature")&&(this.temperatureProperty="temperature"),this.precision=0,this.unit="degree celsius",this.temperatureProperty){var t=this.displayedProperties[this.temperatureProperty].convertedProperty;t.hasOwnProperty("multipleOf")&&"".concat(t.multipleOf).includes(".")&&(this.precision="".concat(t.multipleOf).split(".")[1].length),t.hasOwnProperty("unit")&&(this.unit=t.unit)}else this.precision=0}},{key:"updateProperty",value:function(e,t){t=i(c(f.prototype),"updateProperty",this).call(this,e,t),this.displayedProperties.hasOwnProperty(e)&&e===this.temperatureProperty&&(t=parseFloat(t),this.icon.temperature=t)}},{key:"iconView",value:function(){var e=h.escapeHtml(l.nameToAbbreviation(this.unit));return'\n      <webthing-temperature-sensor-capability data-unit="'.concat(e,'"\n        data-precision="').concat(this.precision,'">\n      </webthing-temperature-sensor-capability>')}},{key:"icon",get:function(){return this.element.querySelector("webthing-temperature-sensor-capability")}}])&&r(t.prototype,n),s&&r(t,s),f}(u);e.exports=f},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(78),n(60),n(13),n(3),n(14),n(61),n(5),n(110),n(45);var u=n(138),l=n(120),h=n(22),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(f,e);var t,n,s,u=a(f);function f(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),u.call(this,e,t,n,{baseIcon:"/images/thing-icons/thermostat.svg"})}return t=f,(n=[{key:"findProperties",value:function(){for(var e in this.temperatureProperty=null,this.heatingCoolingProperty=null,this.displayedProperties){var t=this.displayedProperties[e].property["@type"];"TemperatureProperty"===t?this.temperatureProperty=e:"HeatingCoolingProperty"===t&&(this.heatingCoolingProperty=e)}if(null===this.temperatureProperty&&this.displayedProperties.hasOwnProperty("temperature")&&(this.temperatureProperty="temperature"),null===this.heatingCoolingProperty&&this.displayedProperties.hasOwnProperty("heatingCooling")&&(this.heatingCoolingProperty="heatingCooling"),this.precision=0,this.unit="degree celsius",this.temperatureProperty){var n=this.displayedProperties[this.temperatureProperty].convertedProperty;n.hasOwnProperty("multipleOf")&&"".concat(n.multipleOf).includes(".")&&(this.precision="".concat(n.multipleOf).split(".")[1].length),n.hasOwnProperty("unit")&&(this.unit=n.unit)}else this.precision=0}},{key:"updateProperty",value:function(e,t){t=i(c(f.prototype),"updateProperty",this).call(this,e,t),this.displayedProperties.hasOwnProperty(e)&&(e===this.temperatureProperty?(t=parseFloat(t),this.icon.temperature=t):e===this.heatingCoolingProperty&&(this.icon.state=t))}},{key:"iconView",value:function(){var e=h.escapeHtml(l.nameToAbbreviation(this.unit));return'\n      <webthing-thermostat-capability data-unit="'.concat(e,'"\n        data-precision="').concat(this.precision,'">\n      </webthing-thermostat-capability>')}},{key:"icon",get:function(){return this.element.querySelector("webthing-thermostat-capability")}}])&&r(t.prototype,n),s&&r(t,s),f}(u);e.exports=f},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(e,t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),s.call(this,e,t,n,{baseIcon:"/images/thing-icons/video_camera.svg"})}return t=c,(n=[{key:"findProperties",value:function(){for(var e in this.imageProperty=null,this.videoProperty=null,this.displayedProperties){var t=this.displayedProperties[e].property["@type"];null===this.imageProperty&&"ImageProperty"===t?this.imageProperty=e:null===this.videoProperty&&"VideoProperty"===t&&(this.videoProperty=e)}}},{key:"iconView",value:function(){return"\n      <webthing-video-camera-capability>\n      </webthing-video-camera-capability>"}},{key:"icon",get:function(){return this.element.querySelector("webthing-video-camera-capability")}}])&&r(t.prototype,n),a&&r(t,a),c}(n(138));e.exports=c},function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(36),n(37),n(9),n(44),n(78),n(23),n(43),n(3),n(5),n(105),n(157),n(150),n(33),n(146);var a=n(35),s=n(19),c=n(22),u=n(173).getClassFromCapability,l=-1,h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id="web-thing-".concat(l+=1),this.originalId=this.id,this.url=null,this.iconData=null,this.description=null,this.container=document.getElementById("new-things"),this.render(),this.element=document.getElementById("new-web-thing-".concat(c.escapeHtmlForIdClass(this.originalId))),this.thingType=this.element.querySelector(".new-thing-type"),this.customIcon=this.element.querySelector(".new-thing-custom-icon"),this.customIconInput=this.element.querySelector(".new-thing-custom-icon-input"),this.customIconLabel=this.element.querySelector(".new-thing-custom-icon-label"),this.label=this.element.querySelector(".new-web-thing-label"),this.originLabel=this.element.querySelector(".new-web-thing-origin"),this.urlInput=this.element.querySelector(".new-web-thing-url"),this.titleInput=this.element.querySelector(".new-web-thing-title"),this.cancelButton=this.element.querySelector(".new-web-thing-cancel-button"),this.submitButton=this.element.querySelector(".new-web-thing-submit-button"),this.saveButton=this.element.querySelector(".new-web-thing-save-button"),this.element.addEventListener("click",this.handleClick.bind(this)),this.thingType.addEventListener("change",this.handleTypeChange.bind(this)),this.customIconInput.addEventListener("change",this.handleIconUpload.bind(this))}var t,n,i;return t=e,(n=[{key:"view",value:function(){var e=c.escapeHtmlForIdClass("new-thing-custom-icon-".concat(this.id));return'\n      <div id="new-web-thing-'.concat(c.escapeHtmlForIdClass(this.originalId),'"\n           class="new-thing web-thing">\n        <div class="new-thing-icon">\n          <webthing-custom-icon class="new-thing-custom-icon hidden">\n          </webthing-custom-icon>\n        </div>\n        <div class="new-thing-metadata">\n          <input type="text" class="new-web-thing-url"\n            data-l10n-id="new-web-thing-url"></input>\n          <input type="text" class="new-web-thing-title hidden"></input>\n          <span class="new-web-thing-origin hidden"></span>\n          <select class="new-thing-type hidden"></select>\n          <span class="new-thing-spacer"></span>\n          <input type="file" class="new-thing-custom-icon-input hidden"\n            id="').concat(e,'" accept="image/jpeg,image/png,image/svg+xml">\n          <label for="').concat(e,'"\n            class="new-thing-custom-icon-label text-button hidden"\n            data-l10n-id="new-thing-choose-icon">\n          </label>\n          <span class="new-web-thing-label"\n                data-l10n-id="new-web-thing-label"></span>\n          <div class="new-web-thing-controls">\n            <button class="new-web-thing-cancel-button text-button"\n              data-l10n-id="new-thing-cancel">\n            </button>\n            <button class="new-web-thing-submit-button text-button"\n              data-l10n-id="new-thing-submit">\n            </button>\n            <button class="new-web-thing-save-button text-button hidden"\n              data-l10n-id="new-thing-save">\n            </button>\n          </div>\n        </div>\n      </div>')}},{key:"render",value:function(){this.container.insertAdjacentHTML("beforeend",this.view())}},{key:"handleTypeChange",value:function(){var e=this.thingType.options[this.thingType.selectedIndex].value;this.customIconLabel.classList.add("hidden"),this.customIcon.classList.add("hidden");var t=u(e);"Custom"==e&&(this.customIconLabel.classList.remove("hidden"),this.customIcon.classList.remove("hidden")),this.element.classList.remove("on-off-switch","multi-level-switch","color-control","color-sensor","energy-monitor","binary-sensor","multi-level-sensor","smart-plug","light","door-sensor","motion-sensor","leak-sensor","push-button","video-camera","camera","temperature-sensor","alarm","thermostat","lock"),t&&this.element.classList.add(t)}},{key:"handleIconUpload",value:function(){var e=this;if(this.label.classList.add("hidden"),0!==this.customIconInput.files.length){var t=this.customIconInput.files[0];if(!["image/jpeg","image/png","image/svg+xml"].includes(t.type))return this.label.innerText=s.getMessage("invalid-file"),this.label.classList.add("error"),void this.label.clsssList.remove("hidden");var n=new FileReader;n.onloadend=function(n){if(n.target.error)return console.error(n.target.error),e.label.innerText=s.getMessage("failed-read-file"),e.label.classList.add("error"),e.label.clsssList.remove("hidden"),void(e.saveButton.disabled=!1);e.iconData={mime:t.type,data:btoa(n.target.result)},e.saveButton.disabled=!1,e.customIcon.iconHref=URL.createObjectURL(t),e.customIcon.classList.remove("hidden")},this.saveButton.disabled=!0,n.readAsBinaryString(t)}}},{key:"handleClick",value:function(e){e.target.classList.contains("new-web-thing-save-button")?this.save():e.target.classList.contains("new-web-thing-submit-button")?this.submit():e.target.classList.contains("new-web-thing-cancel-button")&&this.cancel()}},{key:"cancel",value:function(){this.container.removeChild(this.element)}},{key:"submit",value:function(){var e=this;this.label.innerText=s.getMessage("loading"),this.label.classList.remove("error");var t,n=this.urlInput.value.replace(/\/$/,"");n.startsWith("http://")||n.startsWith("https://")||(n="http://".concat(n)),this.urlInput.value=n,this.url=n;try{t=new URL(n)}catch(e){return}a.addWebThing(n).then((function(n){if(Array.isArray(n))return e.label.innerText=s.getMessage("new-web-thing-multiple"),void e.label.classList.add("error");var i=[];Array.isArray(n["@type"])&&n["@type"].length>0&&(i=n["@type"]),(i=c.sortCapabilities(i)).push("Custom"),e.customIconLabel.classList.add("hidden");var o,a="",l=r(i);try{for(l.s();!(o=l.n()).done;){var h=o.value,f=document.createElement("option");f.value=h,f.innerText=s.getMessageStrict(h)||h,a||(a=u(h))||1!=i.length||(a="custom-thing"),0===e.thingType.options.length&&(f.selected=!0,"Custom"===h&&e.customIconLabel.classList.remove("hidden")),e.thingType.appendChild(f)}}catch(e){l.e(e)}finally{l.f()}e.description=n,e.description.hasOwnProperty("href")&&(e.url=t.origin+n.href),e.id=e.url.replace(/[:/]/g,"-"),e.element.classList.remove("web-thing"),e.label.classList.remove("error"),e.label.classList.add("hidden"),e.thingType.classList.remove("hidden"),e.titleInput.value=n.title,e.originLabel.innerText="".concat(s.getMessage("new-web-thing-from")," ").concat(t.host),e.urlInput.classList.add("hidden"),e.titleInput.classList.remove("hidden"),e.submitButton.classList.add("hidden"),e.saveButton.classList.remove("hidden"),e.originLabel.classList.remove("hidden"),(a=a.trim())&&e.element.classList.add(a)})).catch((function(t){e.label.innerText=t.message,e.label.classList.add("error"),console.error("Failed to check web thing:",t.message)}))}},{key:"save",value:function(){var e=this;this.thingType.disabled=!0,this.titleInput.disabled=!0,this.saveButton.disabled=!0,this.customIconInput.disabled=!0,this.cancelButton.classList.add("hidden");var t=this.description;t.id=this.id,t.title=this.titleInput.value,t.webthingUrl=this.url,this.thingType.options.length>0&&(t.selectedCapability=this.thingType.options[this.thingType.selectedIndex].value),"Custom"===t.selectedCapability&&this.iconData&&(t.iconData=this.iconData),a.addThing(t).then((function(){e.saveButton.innerHTML=s.getMessage("new-thing-saved");var t=document.getElementById("add-thing-cancel-button");t&&(t.textContent=s.getMessage("new-thing-done"))})).catch((function(t){console.error("Failed to save web thing:",t.message),e.label.innerText=s.getMessage("failed-save"),e.label.classList.add("error"),e.label.classList.remove("hidden"),e.thingType.disabled=!1,e.titleInput.disabled=!1,e.saveButton.disabled=!1,e.customIconInput.disabled=!1,e.cancelButton.classList.remove("hidden"),e.reset()}))}},{key:"reset",value:function(){this.description=null,this.url=null,this.id=this.originalId,this.urlInput.value="",this.titleInput.value="",this.originLabel.innerText="",this.element.classList.remove("binary-sensor","multi-level-sensor","light","on-off-switch","multi-level-switch","color-control","color-sensor","energy-monitor","smart-plug","door-sensor","motion-sensor","leak-sensor","push-button","video-camera","camera","temperature-sensor","alarm","thermostat","lock"),this.element.classList.add("web-thing"),this.urlInput.classList.remove("hidden"),this.titleInput.classList.add("hidden"),this.submitButton.classList.remove("hidden"),this.saveButton.classList.add("hidden"),this.originLabel.classList.add("hidden")}}])&&o(t.prototype,n),i&&o(t,i),e}();e.exports=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9);var i=n(22),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t.name,this.id=t.id,this.ready=t.ready,this.container=document.getElementById("adapters-list"),this.render()}var t,n,o;return t=e,(n=[{key:"view",value:function(){var e,t;return this.ready?(e="Disable",t="adapter-settings-disable"):(e="Enable",t="adapter-settings-enable"),'\n      <li class="adapter-item">\n        <div class="adapter-settings-header">\n          <span class="adapter-settings-name">'.concat(i.escapeHtml(this.name),'\n          </span>\n          <span class="adapter-settings-description">').concat(i.escapeHtml(this.id),'\n          </span>\n        </div>\n        <div class="adapter-settings-controls">\n          \x3c!-- add fluent if this is uncommented\n            button id="adapter-toggle-').concat(i.escapeHtml(this.id),'"\n            class="text-button ').concat(t,'"\n            adapterEnabled="').concat(i.escapeHtml(this.ready),'">\n            ').concat(e,"\n          </button--\x3e\n        </div>\n      </li>")}},{key:"render",value:function(){this.container.insertAdjacentHTML("beforeend",this.view())}},{key:"handleToggle",value:function(){}}])&&r(t.prototype,n),o&&r(t,o),e}();e.exports=o},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9);var i=n(325),o=n(142),a=n(35),s=n(19),c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schema=n.schema,this.id=t,this.name=n.name,this.primaryType=n.primary_type,this.container=document.getElementById("addon-config-settings"),this.render()}var t,n,c;return t=e,(n=[{key:"scrollToTop",value:function(){this.container.scrollTop=0}},{key:"handleApply",value:function(e,t){var n=this;t.length>0?this.scrollToTop():(this.configForm.submitButton.innerText=s.getMessage("addon-config-applying"),a.setAddonConfig(this.id,e).then((function(){o("/settings/addons")})).catch((function(e){console.error("Failed to set config for add-on: ".concat(n.name,"\n").concat(e)),n.configForm.errorField.render([e]),n.configForm.submitButton.innerText=s.getMessage("addon-config-apply")})))}},{key:"render",value:function(){var e=this,t=this.container.querySelector(".section-title-icon");switch(this.primaryType){case"adapter":t.src="/images/adapters-icon.png";break;case"notifier":t.src="/images/thing-icons/notification.svg";break;case"extension":default:t.src="/images/add-on.svg"}a.getAddonConfig(this.id).then((function(t){e.configForm=new i(e.schema,"addon-config-".concat(e.id),e.name,t,e.handleApply.bind(e),{submitText:s.getMessage("addon-config-apply")}),e.container.appendChild(e.configForm.render())})).catch((function(t){console.error("Failed to get config for add-on: ".concat(e.name,"\n").concat(t))}))}}])&&r(t.prototype,n),c&&r(t,c),e}();e.exports=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(155),a=n(215),s=n(192),c=n(370),u=n(22),l=n(19),h=function(){function e(t,n,i,a,s){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};r(this,e),this.definitions=t.definitions,this.schema=t,this.id=n,this.name=i,this.onSubmit=s,this.idSchema=o.toIdSchema(t,null,this.definitions,a),this.formData=o.getDefaultFormState(t,a,this.definitions),this.submitText=c.hasOwnProperty("submitText")?c.submitText:"",this.noValidate=!!c.hasOwnProperty("validate")&&!c.validate,this.liveValidate=!c.hasOwnProperty("liveValidate")||c.liveValidate}var t,n,h;return t=e,(n=[{key:"onChange",value:function(e){var t=null;this.formData=e,this.submitButton.disabled=!1,!this.noValidate&&this.liveValidate&&(t=this.validate(e).errors),!this.noValidate&&t?this.errorField.render(t):this.noValidate||this.errorField.render([])}},{key:"validate",value:function(e){return a.validateFormData(e,this.schema)}},{key:"handleSubmit",value:function(e){var t=this.validate(this.formData).errors;e.target.disabled=!0,this.onSubmit&&this.onSubmit(this.formData,t)}},{key:"renderSubmitButton",value:function(){var e=document.createElement("button");return e.id="submit-".concat(u.escapeHtml(this.id)),e.type="button",e.className="button-submit",this.submitText?e.innerText=this.submitText:e.innerText=l.getMessage("submit"),e.addEventListener("click",this.handleSubmit.bind(this)),e.disabled=!0,this.submitButton=e,e}},{key:"render",value:function(){var e=document.createElement("form");e.className="json-schema-form",e.id=this.id,e.innerHTML="<p></p>";var t=e.querySelector("p"),n=this.renderSubmitButton();t.appendChild(n);var r=this.onChange.bind(this),i=new s(this.schema,this.formData,this.idSchema,this.name,this.definitions,r).render();return this.errorField=new c,t.insertBefore(i,t.firstChild),t.insertBefore(this.errorField.render([]),t.firstChild),e}}])&&i(t.prototype,n),h&&i(t,h),e}();e.exports=h},function(e,t,n){n(81)("toPrimitive")},function(e,t,n){"use strict";var r=n(8),i=n(65).every,o=n(144),a=n(66),s=o("every"),c=a("every");r({target:"Array",proto:!0,forced:!s||!c},{every:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(12),i=n(329),o=n(0)("toPrimitive"),a=Date.prototype;o in a||r(a,o,i)},function(e,t,n){"use strict";var r=n(4),i=n(38);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),"number"!==e)}},function(e,t,n){var r=n(8),i=n(11),o=n(118),a=n(18),s=n(29),c=n(51);r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){for(var t,n,r=a(e),i=s.f,u=o(r),l={},h=0;u.length>h;)void 0!==(n=i(r,t=u[h++]))&&c(l,t,n);return l}})},function(e,t,n){"use strict";var r=n(332),i=n(189),o=n(336),a=n(216),s=n(217),c=n(337),u=n(338),l=n(359),h=n(161);e.exports=g,g.prototype.validate=function(e,t){var n;if("string"==typeof e){if(!(n=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var r=this._addSchema(e);n=r.validate||this._compile(r)}var i=n(t);!0!==n.$async&&(this.errors=n.errors);return i},g.prototype.compile=function(e,t){var n=this._addSchema(e,void 0,t);return n.validate||this._compile(n)},g.prototype.addSchema=function(e,t,n,r){if(Array.isArray(e)){for(var o=0;o<e.length;o++)this.addSchema(e[o],void 0,n,r);return this}var a=this._getId(e);if(void 0!==a&&"string"!=typeof a)throw new Error("schema id must be string");return k(this,t=i.normalizeId(t||a)),this._schemas[t]=this._addSchema(e,n,r,!0),this},g.prototype.addMetaSchema=function(e,t,n){return this.addSchema(e,t,n,!0),this},g.prototype.validateSchema=function(e,t){var n=e.$schema;if(void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(!(n=n||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(p)?p:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var r=this.validate(n,e);if(!r&&t){var i="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(i);this.logger.error(i)}return r},g.prototype.getSchema=function(e){var t=y(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var n=i.schema.call(e,{schema:{}},t);if(n){var o=n.schema,s=n.root,c=n.baseId,u=r.call(e,o,s,void 0,c);return e._fragments[t]=new a({ref:t,fragment:!0,schema:o,root:s,baseId:c,validate:u}),u}}(this,e)}},g.prototype.removeSchema=function(e){if(e instanceof RegExp)return b(this,this._schemas,e),b(this,this._refs,e),this;switch(typeof e){case"undefined":return b(this,this._schemas),b(this,this._refs),this._cache.clear(),this;case"string":var t=y(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var n=this._opts.serialize,r=n?n(e):e;this._cache.del(r);var o=this._getId(e);o&&(o=i.normalizeId(o),delete this._schemas[o],delete this._refs[o])}return this},g.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},g.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var n=void 0===(t=t||{}).separator?", ":t.separator,r=void 0===t.dataVar?"data":t.dataVar,i="",o=0;o<e.length;o++){var a=e[o];a&&(i+=r+a.dataPath+" "+a.message+n)}return i.slice(0,-n.length)},g.prototype._addSchema=function(e,t,n,r){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var o=this._opts.serialize,s=o?o(e):e,c=this._cache.get(s);if(c)return c;r=r||!1!==this._opts.addUsedSchema;var u=i.normalizeId(this._getId(e));u&&r&&k(this,u);var l,h=!1!==this._opts.validateSchema&&!t;h&&!(l=u&&u==i.normalizeId(e.$schema))&&this.validateSchema(e,!0);var f=i.ids.call(this,e),d=new a({id:u,schema:e,localRefs:f,cacheKey:s,meta:n});"#"!=u[0]&&r&&(this._refs[u]=d);this._cache.put(s,d),h&&l&&this.validateSchema(e,!0);return d},g.prototype._compile=function(e,t){if(e.compiling)return e.validate=o,o.schema=e.schema,o.errors=null,o.root=t||o,!0===e.schema.$async&&(o.$async=!0),o;var n,i;e.compiling=!0,e.meta&&(n=this._opts,this._opts=this._metaOpts);try{i=r.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=n)}return e.validate=i,e.refs=i.refs,e.refVal=i.refVal,e.root=i.root,i;function o(){var t=e.validate,n=t.apply(this,arguments);return o.errors=t.errors,n}},g.prototype.compileAsync=n(360);var f=n(361);g.prototype.addKeyword=f.add,g.prototype.getKeyword=f.get,g.prototype.removeKeyword=f.remove,g.prototype.validateKeyword=f.validate;var d=n(191);g.ValidationError=d.Validation,g.MissingRefError=d.MissingRef,g.$dataMetaSchema=l;var p="http://json-schema.org/draft-07/schema",m=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],v=["/properties"];function g(e){if(!(this instanceof g))return new g(e);e=this._opts=h.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:S,warn:S,error:S};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=c(e.format),this._cache=e.cache||new o,this._loadingSchemas={},this._compilations=[],this.RULES=u(),this._getId=function(e){switch(e.schemaId){case"auto":return _;case"id":return w;default:return E}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=s),this._metaOpts=function(e){for(var t=h.copy(e._opts),n=0;n<m.length;n++)delete t[m[n]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var n=e._opts.formats[t];e.addFormat(t,n)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var n=e._opts.keywords[t];e.addKeyword(t,n)}}(this),function(e){var t;e._opts.$data&&(t=n(364),e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var r=n(223);e._opts.$data&&(r=l(r,v));e.addMetaSchema(r,p,!0),e._refs["http://json-schema.org/schema"]=p}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var n in t)e.addSchema(t[n],n)}(this)}function y(e,t){return t=i.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function b(e,t,n){for(var r in t){var i=t[r];i.meta||n&&!n.test(r)||(e._cache.del(i.cacheKey),delete t[r])}}function w(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function E(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function _(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function k(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function S(){}},function(e,t,n){"use strict";var r=n(189),i=n(161),o=n(191),a=n(217),s=n(218),c=i.ucs2length,u=n(190),l=o.Validation;function h(e,t,n){var r=d.call(this,e,t,n);return r>=0?{index:r,compiling:!0}:(r=this._compilations.length,this._compilations[r]={schema:e,root:t,baseId:n},{index:r,compiling:!1})}function f(e,t,n){var r=d.call(this,e,t,n);r>=0&&this._compilations.splice(r,1)}function d(e,t,n){for(var r=0;r<this._compilations.length;r++){var i=this._compilations[r];if(i.schema==e&&i.root==t&&i.baseId==n)return r}return-1}function p(e,t){return"var pattern"+e+" = new RegExp("+i.toQuotedString(t[e])+");"}function m(e){return"var default"+e+" = defaults["+e+"];"}function v(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function g(e){return"var customRule"+e+" = customRules["+e+"];"}function y(e,t){if(!e.length)return"";for(var n="",r=0;r<e.length;r++)n+=t(r,e);return n}e.exports=function e(t,n,d,b){var w=this,E=this._opts,_=[void 0],k={},S=[],x={},T=[],P={},O=[];n=n||{schema:t,refVal:_,refs:k};var C=h.call(this,t,n,b),I=this._compilations[C.index];if(C.compiling)return I.callValidate=function e(){var t=I.validate,n=t.apply(this,arguments);return e.errors=t.errors,n};var R=this._formats,L=this.RULES;try{var A=D(t,n,d,b);I.validate=A;var M=I.callValidate;return M&&(M.schema=A.schema,M.errors=null,M.refs=A.refs,M.refVal=A.refVal,M.root=A.root,M.$async=A.$async,E.sourceCode&&(M.source=A.source)),A}finally{f.call(this,t,n,b)}function D(t,a,h,f){var d=!a||a&&a.schema==t;if(a.schema!=n.schema)return e.call(w,t,a,h,f);var b,x=!0===t.$async,P=s({isTop:!0,schema:t,isRoot:d,baseId:f,root:a,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:o.MissingRef,RULES:L,validate:s,util:i,resolve:r,resolveRef:j,usePattern:F,useDefault:U,useCustomRule:H,opts:E,formats:R,logger:w.logger,self:w});P=y(_,v)+y(S,p)+y(T,m)+y(O,g)+P,E.processCode&&(P=E.processCode(P,t));try{b=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",P)(w,L,R,n,_,T,O,u,c,l),_[0]=b}catch(e){throw w.logger.error("Error compiling schema, function code:",P),e}return b.schema=t,b.errors=null,b.refs=k,b.refVal=_,b.root=d?b:a,x&&(b.$async=!0),!0===E.sourceCode&&(b.source={code:P,patterns:S,defaults:T}),b}function j(t,i,o){i=r.url(t,i);var a,s,c=k[i];if(void 0!==c)return B(a=_[c],s="refVal["+c+"]");if(!o&&n.refs){var u=n.refs[i];if(void 0!==u)return B(a=n.refVal[u],s=N(i,a))}s=N(i);var l=r.call(w,D,n,i);if(void 0===l){var h=d&&d[i];h&&(l=r.inlineRef(h,E.inlineRefs)?h:e.call(w,h,n,d,t))}if(void 0!==l)return function(e,t){var n=k[e];_[n]=t}(i,l),B(l,s);!function(e){delete k[e]}(i)}function N(e,t){var n=_.length;return _[n]=t,k[e]=n,"refVal"+n}function B(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function F(e){var t=x[e];return void 0===t&&(t=x[e]=S.length,S[t]=e),"pattern"+t}function U(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return i.toQuotedString(e);case"object":if(null===e)return"null";var t=a(e),n=P[t];return void 0===n&&(n=P[t]=T.length,T[n]=e),"default"+n}}function H(e,t,n,r){if(!1!==w._opts.validateSchema){var i=e.definition.dependencies;if(i&&!i.every((function(e){return Object.prototype.hasOwnProperty.call(n,e)})))throw new Error("parent schema must have all required keywords: "+i.join(","));var o=e.definition.validateSchema;if(o)if(!o(t)){var a="keyword schema is invalid: "+w.errorsText(o.errors);if("log"!=w._opts.validateSchema)throw new Error(a);w.logger.error(a)}}var s,c=e.definition.compile,u=e.definition.inline,l=e.definition.macro;if(c)s=c.call(w,t,n,r);else if(l)s=l.call(w,t,n,r),!1!==E.validateSchema&&w.validateSchema(s,!0);else if(u)s=u.call(w,r,e.keyword,t,n);else if(!(s=e.definition.validate))return;if(void 0===s)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var h=O.length;return O[h]=s,{code:"customRule"+h,validate:s}}}},function(e,t,n){
/** @license URI.js v4.2.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1){t[0]=t[0].slice(0,-1);for(var r=t.length-1,i=1;i<r;++i)t[i]=t[i].slice(1,-1);return t[r]=t[r].slice(1),t.join("")}return t[0]}function n(e){return"(?:"+e+")"}function r(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function o(e){var r=t("[0-9]","[A-Fa-f]"),i=n(n("%[EFef]"+r+"%"+r+r+"%"+r+r)+"|"+n("%[89A-Fa-f]"+r+"%"+r+r)+"|"+n("%"+r+r)),o="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",a=t("[\\:\\/\\?\\#\\[\\]\\@]",o),s=e?"[\\uE000-\\uF8FF]":"[]",c=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),u=n("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),l=n(n(i+"|"+t(c,o,"[\\:]"))+"*"),h=(n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("[1-9][0-9]")+"|[0-9]"),n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("0?[1-9][0-9]")+"|0?0?[0-9]")),f=n(h+"\\."+h+"\\."+h+"\\."+h),d=n(r+"{1,4}"),p=n(n(d+"\\:"+d)+"|"+f),m=n(n(d+"\\:")+"{6}"+p),v=n("\\:\\:"+n(d+"\\:")+"{5}"+p),g=n(n(d)+"?\\:\\:"+n(d+"\\:")+"{4}"+p),y=n(n(n(d+"\\:")+"{0,1}"+d)+"?\\:\\:"+n(d+"\\:")+"{3}"+p),b=n(n(n(d+"\\:")+"{0,2}"+d)+"?\\:\\:"+n(d+"\\:")+"{2}"+p),w=n(n(n(d+"\\:")+"{0,3}"+d)+"?\\:\\:"+d+"\\:"+p),E=n(n(n(d+"\\:")+"{0,4}"+d)+"?\\:\\:"+p),_=n(n(n(d+"\\:")+"{0,5}"+d)+"?\\:\\:"+d),k=n(n(n(d+"\\:")+"{0,6}"+d)+"?\\:\\:"),S=n([m,v,g,y,b,w,E,_,k].join("|")),x=n(n(c+"|"+i)+"+"),T=(n(S+"\\%25"+x),n(S+n("\\%25|\\%(?!"+r+"{2})")+x)),P=n("[vV]"+r+"+\\."+t(c,o,"[\\:]")+"+"),O=n("\\["+n(T+"|"+S+"|"+P)+"\\]"),C=n(n(i+"|"+t(c,o))+"*"),I=n(O+"|"+f+"(?!"+C+")|"+C),R=n("[0-9]*"),L=n(n(l+"@")+"?"+I+n("\\:"+R)+"?"),A=n(i+"|"+t(c,o,"[\\:\\@]")),M=n(A+"*"),D=n(A+"+"),j=n(n(i+"|"+t(c,o,"[\\@]"))+"+"),N=n(n("\\/"+M)+"*"),B=n("\\/"+n(D+N)+"?"),F=n(j+N),U=n(D+N),H="(?!"+A+")",q=(n(N+"|"+B+"|"+F+"|"+U+"|"+H),n(n(A+"|"+t("[\\/\\?]",s))+"*")),z=n(n(A+"|[\\/\\?]")+"*"),V=n(n("\\/\\/"+L+N)+"|"+B+"|"+U+"|"+H),$=n(u+"\\:"+V+n("\\?"+q)+"?"+n("\\#"+z)+"?"),W=n(n("\\/\\/"+L+N)+"|"+B+"|"+F+"|"+H),K=n(W+n("\\?"+q)+"?"+n("\\#"+z)+"?");return n($+"|"+K),n(u+"\\:"+V+n("\\?"+q)+"?"),n(n("\\/\\/("+n("("+l+")@")+"?("+I+")"+n("\\:("+R+")")+"?)")+"?("+N+"|"+B+"|"+U+"|"+H+")"),n("\\?("+q+")"),n("\\#("+z+")"),n(n("\\/\\/("+n("("+l+")@")+"?("+I+")"+n("\\:("+R+")")+"?)")+"?("+N+"|"+B+"|"+F+"|"+H+")"),n("\\?("+q+")"),n("\\#("+z+")"),n(n("\\/\\/("+n("("+l+")@")+"?("+I+")"+n("\\:("+R+")")+"?)")+"?("+N+"|"+B+"|"+U+"|"+H+")"),n("\\?("+q+")"),n("\\#("+z+")"),n("("+l+")@"),n("\\:("+R+")"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",c,o),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",c,o),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",c,o),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",c,o),"g"),NOT_QUERY:new RegExp(t("[^\\%]",c,o,"[\\:\\@\\/\\?]",s),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",c,o,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",c,o),"g"),UNRESERVED:new RegExp(c,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",c,a),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+S+")"+n(n("\\%25|\\%(?!"+r+"{2})")+"("+x+")")+"?\\]?$")}}var a=o(!1),s=o(!0),c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=2147483647,l=/^xn--/,h=/[^\0-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,m=String.fromCharCode;function v(e){throw new RangeError(d[e])}function g(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]);var i=function(e,t){for(var n=[],r=e.length;r--;)n[r]=t(e[r]);return n}((e=e.replace(f,".")).split("."),t).join(".");return r+i}function y(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t}var b=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},w=function(e,t,n){var r=0;for(e=n?p(e/700):e>>1,e+=p(e/t);e>455;r+=36)e=p(e/35);return p(r+36*e/(e+38))},E=function(e){var t,n=[],r=e.length,i=0,o=128,a=72,s=e.lastIndexOf("-");s<0&&(s=0);for(var c=0;c<s;++c)e.charCodeAt(c)>=128&&v("not-basic"),n.push(e.charCodeAt(c));for(var l=s>0?s+1:0;l<r;){for(var h=i,f=1,d=36;;d+=36){l>=r&&v("invalid-input");var m=(t=e.charCodeAt(l++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(m>=36||m>p((u-i)/f))&&v("overflow"),i+=m*f;var g=d<=a?1:d>=a+26?26:d-a;if(m<g)break;var y=36-g;f>p(u/y)&&v("overflow"),f*=y}var b=n.length+1;a=w(i-h,b,0==h),p(i/b)>u-o&&v("overflow"),o+=p(i/b),i%=b,n.splice(i++,0,o)}return String.fromCodePoint.apply(String,n)},_=function(e){var t=[],n=(e=y(e)).length,r=128,i=0,o=72,a=!0,s=!1,c=void 0;try{for(var l,h=e[Symbol.iterator]();!(a=(l=h.next()).done);a=!0){var f=l.value;f<128&&t.push(m(f))}}catch(e){s=!0,c=e}finally{try{!a&&h.return&&h.return()}finally{if(s)throw c}}var d=t.length,g=d;for(d&&t.push("-");g<n;){var E=u,_=!0,k=!1,S=void 0;try{for(var x,T=e[Symbol.iterator]();!(_=(x=T.next()).done);_=!0){var P=x.value;P>=r&&P<E&&(E=P)}}catch(e){k=!0,S=e}finally{try{!_&&T.return&&T.return()}finally{if(k)throw S}}var O=g+1;E-r>p((u-i)/O)&&v("overflow"),i+=(E-r)*O,r=E;var C=!0,I=!1,R=void 0;try{for(var L,A=e[Symbol.iterator]();!(C=(L=A.next()).done);C=!0){var M=L.value;if(M<r&&++i>u&&v("overflow"),M==r){for(var D=i,j=36;;j+=36){var N=j<=o?1:j>=o+26?26:j-o;if(D<N)break;var B=D-N,F=36-N;t.push(m(b(N+B%F,0))),D=p(B/F)}t.push(m(b(D,0))),o=w(i,O,g==d),i=0,++g}}}catch(e){I=!0,R=e}finally{try{!C&&A.return&&A.return()}finally{if(I)throw R}}++i,++r}return t.join("")},k=function(e){return g(e,(function(e){return h.test(e)?"xn--"+_(e):e}))},S=function(e){return g(e,(function(e){return l.test(e)?E(e.slice(4).toLowerCase()):e}))},x={};function T(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function P(e){for(var t="",n=0,r=e.length;n<r;){var i=parseInt(e.substr(n+1,2),16);if(i<128)t+=String.fromCharCode(i),n+=3;else if(i>=194&&i<224){if(r-n>=6){var o=parseInt(e.substr(n+4,2),16);t+=String.fromCharCode((31&i)<<6|63&o)}else t+=e.substr(n,6);n+=6}else if(i>=224){if(r-n>=9){var a=parseInt(e.substr(n+4,2),16),s=parseInt(e.substr(n+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&a)<<6|63&s)}else t+=e.substr(n,9);n+=9}else t+=e.substr(n,3),n+=3}return t}function O(e,t){function n(e){var n=P(e);return n.match(t.UNRESERVED)?n:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,n).replace(t.NOT_USERINFO,T).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,n).toLowerCase().replace(t.NOT_HOST,T).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,n).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,T).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,n).replace(t.NOT_QUERY,T).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,n).replace(t.NOT_FRAGMENT,T).replace(t.PCT_ENCODED,i)),e}function C(e){return e.replace(/^0*(.*)/,"$1")||"0"}function I(e,t){var n=e.match(t.IPV4ADDRESS)||[],r=c(n,2)[1];return r?r.split(".").map(C).join("."):e}function R(e,t){var n=e.match(t.IPV6ADDRESS)||[],r=c(n,3),i=r[1],o=r[2];if(i){for(var a=i.toLowerCase().split("::").reverse(),s=c(a,2),u=s[0],l=s[1],h=l?l.split(":").map(C):[],f=u.split(":").map(C),d=t.IPV4ADDRESS.test(f[f.length-1]),p=d?7:8,m=f.length-p,v=Array(p),g=0;g<p;++g)v[g]=h[g]||f[m+g]||"";d&&(v[p-1]=I(v[p-1],t));var y=v.reduce((function(e,t,n){if(!t||"0"===t){var r=e[e.length-1];r&&r.index+r.length===n?r.length++:e.push({index:n,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(y&&y.length>1){var w=v.slice(0,y.index),E=v.slice(y.index+y.length);b=w.join(":")+"::"+E.join(":")}else b=v.join(":");return o&&(b+="%"+o),b}return e}var L=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,A=void 0==="".match(/(){0}/)[1];function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=!1!==t.iri?s:a;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(L);if(i){A?(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5])):(n.scheme=i[1]||void 0,n.userinfo=-1!==e.indexOf("@")?i[3]:void 0,n.host=-1!==e.indexOf("//")?i[4]:void 0,n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=-1!==e.indexOf("?")?i[7]:void 0,n.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(n.port)&&(n.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),n.host&&(n.host=R(I(n.host,r),r)),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==n.reference&&(n.error=n.error||"URI is not a "+t.reference+" reference.");var o=x[(t.scheme||n.scheme||"").toLowerCase()];if(t.unicodeSupport||o&&o.unicodeSupport)O(n,r);else{if(n.host&&(t.domainHost||o&&o.domainHost))try{n.host=k(n.host.replace(r.PCT_ENCODED,P).toLowerCase())}catch(e){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+e}O(n,a)}o&&o.parse&&o.parse(n,t)}else n.error=n.error||"URI can not be parsed.";return n}function D(e,t){var n=!1!==t.iri?s:a,r=[];return void 0!==e.userinfo&&(r.push(e.userinfo),r.push("@")),void 0!==e.host&&r.push(R(I(String(e.host),n),n).replace(n.IPV6ADDRESS,(function(e,t,n){return"["+t+(n?"%25"+n:"")+"]"}))),"number"==typeof e.port&&(r.push(":"),r.push(e.port.toString(10))),r.length?r.join(""):void 0}var j=/^\.\.?\//,N=/^\/\.(\/|$)/,B=/^\/\.\.(\/|$)/,F=/^\/?(?:.|\n)*?(?=\/|$)/;function U(e){for(var t=[];e.length;)if(e.match(j))e=e.replace(j,"");else if(e.match(N))e=e.replace(N,"/");else if(e.match(B))e=e.replace(B,"/"),t.pop();else if("."===e||".."===e)e="";else{var n=e.match(F);if(!n)throw new Error("Unexpected dot segment condition");var r=n[0];e=e.slice(r.length),t.push(r)}return t.join("")}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.iri?s:a,r=[],i=x[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host)if(n.IPV6ADDRESS.test(e.host));else if(t.domainHost||i&&i.domainHost)try{e.host=t.iri?S(e.host):k(e.host.replace(n.PCT_ENCODED,P).toLowerCase())}catch(n){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+n}O(e,n),"suffix"!==t.reference&&e.scheme&&(r.push(e.scheme),r.push(":"));var o=D(e,t);if(void 0!==o&&("suffix"!==t.reference&&r.push("//"),r.push(o),e.path&&"/"!==e.path.charAt(0)&&r.push("/")),void 0!==e.path){var c=e.path;t.absolutePath||i&&i.absolutePath||(c=U(c)),void 0===o&&(c=c.replace(/^\/\//,"/%2F")),r.push(c)}return void 0!==e.query&&(r.push("?"),r.push(e.query)),void 0!==e.fragment&&(r.push("#"),r.push(e.fragment)),r.join("")}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3],i={};return r||(e=M(H(e,n),n),t=M(H(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=U(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=U(t.path||""),i.query=t.query):(t.path?("/"===t.path.charAt(0)?i.path=U(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=U(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function z(e,t){return e&&e.toString().replace(t&&t.iri?s.PCT_ENCODED:a.PCT_ENCODED,P)}var V={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},$={scheme:"https",domainHost:V.domainHost,parse:V.parse,serialize:V.serialize},W={},K="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",G="[0-9A-Fa-f]",X=n(n("%[EFef]"+G+"%"+G+G+"%"+G+G)+"|"+n("%[89A-Fa-f]"+G+"%"+G+G)+"|"+n("%"+G+G)),J=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),Y=new RegExp(K,"g"),Q=new RegExp(X,"g"),Z=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',J),"g"),ee=new RegExp(t("[^]",K,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),te=ee;function ne(e){var t=P(e);return t.match(Y)?t:e}var re={scheme:"mailto",parse:function(e,t){var n=e,r=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var i=!1,o={},a=n.query.split("&"),s=0,c=a.length;s<c;++s){var u=a[s].split("=");switch(u[0]){case"to":for(var l=u[1].split(","),h=0,f=l.length;h<f;++h)r.push(l[h]);break;case"subject":n.subject=z(u[1],t);break;case"body":n.body=z(u[1],t);break;default:i=!0,o[z(u[0],t)]=z(u[1],t)}}i&&(n.headers=o)}n.query=void 0;for(var d=0,p=r.length;d<p;++d){var m=r[d].split("@");if(m[0]=z(m[0]),t.unicodeSupport)m[1]=z(m[1],t).toLowerCase();else try{m[1]=k(z(m[1],t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}r[d]=m.join("@")}return n},serialize:function(e,t){var n,r=e,o=null!=(n=e.to)?n instanceof Array?n:"number"!=typeof n.length||n.split||n.setInterval||n.call?[n]:Array.prototype.slice.call(n):[];if(o){for(var a=0,s=o.length;a<s;++a){var c=String(o[a]),u=c.lastIndexOf("@"),l=c.slice(0,u).replace(Q,ne).replace(Q,i).replace(Z,T),h=c.slice(u+1);try{h=t.iri?S(h):k(z(h,t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}o[a]=l+"@"+h}r.path=o.join(",")}var f=e.headers=e.headers||{};e.subject&&(f.subject=e.subject),e.body&&(f.body=e.body);var d=[];for(var p in f)f[p]!==W[p]&&d.push(p.replace(Q,ne).replace(Q,i).replace(ee,T)+"="+f[p].replace(Q,ne).replace(Q,i).replace(te,T));return d.length&&(r.query=d.join("&")),r}},ie=/^([^\:]+)\:(.*)/,oe={scheme:"urn",parse:function(e,t){var n=e.path&&e.path.match(ie),r=e;if(n){var i=t.scheme||r.scheme||"urn",o=n[1].toLowerCase(),a=n[2],s=i+":"+(t.nid||o),c=x[s];r.nid=o,r.nss=a,r.path=void 0,c&&(r=c.parse(r,t))}else r.error=r.error||"URN can not be parsed.";return r},serialize:function(e,t){var n=t.scheme||e.scheme||"urn",r=e.nid,i=n+":"+(t.nid||r),o=x[i];o&&(e=o.serialize(e,t));var a=e,s=e.nss;return a.path=(r||t.nid)+":"+s,a}},ae=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,se={scheme:"urn:uuid",parse:function(e,t){var n=e;return n.uuid=n.nss,n.nss=void 0,t.tolerant||n.uuid&&n.uuid.match(ae)||(n.error=n.error||"UUID is not valid."),n},serialize:function(e,t){var n=e;return n.nss=(e.uuid||"").toLowerCase(),n}};x[V.scheme]=V,x[$.scheme]=$,x[re.scheme]=re,x[oe.scheme]=oe,x[se.scheme]=se,e.SCHEMES=x,e.pctEncChar=T,e.pctDecChars=P,e.parse=M,e.removeDotSegments=U,e.serialize=H,e.resolveComponents=q,e.resolve=function(e,t,n){var r=function(e,t){var n=e;if(t)for(var r in t)n[r]=t[r];return n}({scheme:"null"},n);return H(q(M(e,r),M(t,r),r,!0),r)},e.normalize=function(e,t){return"string"==typeof e?e=H(M(e,t),t):"object"===r(e)&&(e=M(H(e,t),t)),e},e.equal=function(e,t,n){return"string"==typeof e?e=H(M(e,n),n):"object"===r(e)&&(e=H(e,n)),"string"==typeof t?t=H(M(t,n),n):"object"===r(t)&&(t=H(t,n)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?s.ESCAPE:a.ESCAPE,T)},e.unescapeComponent=z,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";e.exports=function(e){for(var t,n=0,r=e.length,i=0;i<r;)n++,(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<r&&56320==(64512&(t=e.charCodeAt(i)))&&i++;return n}},function(e,t,n){"use strict";var r=e.exports=function(e,t,n){"function"==typeof t&&(n=t,t={}),function e(t,n,i,o,a,s,c,u,l,h){if(o&&"object"==typeof o&&!Array.isArray(o)){for(var f in n(o,a,s,c,u,l,h),o){var d=o[f];if(Array.isArray(d)){if(f in r.arrayKeywords)for(var p=0;p<d.length;p++)e(t,n,i,d[p],a+"/"+f+"/"+p,s,a,f,o,p)}else if(f in r.propsKeywords){if(d&&"object"==typeof d)for(var m in d)e(t,n,i,d[m],a+"/"+f+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),s,a,f,o,m)}else(f in r.keywords||t.allKeys&&!(f in r.skipKeywords))&&e(t,n,i,d,a+"/"+f,s,a,f,o)}i(o,a,s,c,u,l,h)}}(t,"function"==typeof(n=t.cb||n)?n:n.pre||function(){},n.post||function(){},e,"",e)};r.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},r.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},r.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},r.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},function(e,t,n){"use strict";var r=e.exports=function(){this._cache={}};r.prototype.put=function(e,t){this._cache[e]=t},r.prototype.get=function(e){return this._cache[e]},r.prototype.del=function(e){delete this._cache[e]},r.prototype.clear=function(){this._cache={}}},function(e,t,n){"use strict";var r=n(161),i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o=[0,31,28,31,30,31,30,31,31,30,31,30,31],a=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,s=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,c=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,u=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,l=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,h=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,f=/^(?:\/(?:[^~/]|~0|~1)*)*$/,d=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,p=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function m(e){return e="full"==e?"full":"fast",r.copy(m[e])}function v(e){var t=e.match(i);if(!t)return!1;var n=+t[1],r=+t[2],a=+t[3];return r>=1&&r<=12&&a>=1&&a<=(2==r&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(n)?29:o[r])}function g(e,t){var n=e.match(a);if(!n)return!1;var r=n[1],i=n[2],o=n[3],s=n[5];return(r<=23&&i<=59&&o<=59||23==r&&59==i&&60==o)&&(!t||s)}e.exports=m,m.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":u,url:l,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:E,uuid:h,"json-pointer":f,"json-pointer-uri-fragment":d,"relative-json-pointer":p},m.full={date:v,time:g,"date-time":function(e){var t=e.split(y);return 2==t.length&&v(t[0])&&g(t[1],!0)},uri:function(e){return b.test(e)&&c.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":u,url:l,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:E,uuid:h,"json-pointer":f,"json-pointer-uri-fragment":d,"relative-json-pointer":p};var y=/t|\s/i;var b=/\/|:/;var w=/[^\\]\\Z/;function E(e){if(w.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},function(e,t,n){"use strict";var r=n(339),i=n(161).toHash;e.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=i(t),e.types=i(["number","integer","string","array","object","boolean","null"]),e.forEach((function(n){n.rules=n.rules.map((function(n){var i;if("object"==typeof n){var o=Object.keys(n)[0];i=n[o],n=o,i.forEach((function(n){t.push(n),e.all[n]=!0}))}return t.push(n),e.all[n]={keyword:n,code:r[n],implements:i}})),e.all.$comment={keyword:"$comment",code:r.$comment},n.type&&(e.types[n.type]=n)})),e.keywords=i(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},function(e,t,n){"use strict";e.exports={$ref:n(340),allOf:n(341),anyOf:n(342),$comment:n(343),const:n(344),contains:n(345),dependencies:n(346),enum:n(347),format:n(348),if:n(349),items:n(350),maximum:n(219),minimum:n(219),maxItems:n(220),minItems:n(220),maxLength:n(221),minLength:n(221),maxProperties:n(222),minProperties:n(222),multipleOf:n(351),not:n(352),oneOf:n(353),pattern:n(354),properties:n(355),propertyNames:n(356),required:n(357),uniqueItems:n(358),validate:n(218)}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i,o=" ",a=e.level,s=e.dataLevel,c=e.schema[t],u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(s||""),f="valid"+a;if("#"==c||"#/"==c)e.isRoot?(r=e.async,i="validate"):(r=!0===e.root.schema.$async,i="root.refVal[0]");else{var d=e.resolveRef(e.baseId,c,e.isRoot);if(void 0===d){var p=e.MissingRefError.message(e.baseId,c);if("fail"==e.opts.missingRefs){e.logger.error(p),(y=y||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",!1!==e.opts.messages&&(o+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(o+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),o+=" } "):o+=" {} ";var m=o;o=y.pop(),!e.compositeRule&&l?e.async?o+=" throw new ValidationError(["+m+"]); ":o+=" validate.errors = ["+m+"]; return false; ":o+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(o+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,c,p);e.logger.warn(p),l&&(o+=" if (true) { ")}}else if(d.inline){var v=e.util.copy(e);v.level++;var g="valid"+v.level;v.schema=d.schema,v.schemaPath="",v.errSchemaPath=c,o+=" "+e.validate(v).replace(/validate\.schema/g,d.code)+" ",l&&(o+=" if ("+g+") { ")}else r=!0===d.$async||e.async&&!1!==d.$async,i=d.code}if(i){var y;(y=y||[]).push(o),o="",e.opts.passContext?o+=" "+i+".call(this, ":o+=" "+i+"( ",o+=" "+h+", (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var b=o+=" , "+(s?"data"+(s-1||""):"parentData")+" , "+(s?e.dataPathArr[s]:"parentDataProperty")+", rootData)  ";if(o=y.pop(),r){if(!e.async)throw new Error("async schema referenced by sync schema");l&&(o+=" var "+f+"; "),o+=" try { await "+b+"; ",l&&(o+=" "+f+" = true; "),o+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",l&&(o+=" "+f+" = false; "),o+=" } ",l&&(o+=" if ("+f+") { ")}else o+=" if (!"+b+") { if (vErrors === null) vErrors = "+i+".errors; else vErrors = vErrors.concat("+i+".errors); errors = vErrors.length; } ",l&&(o+=" else { ")}return o}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.schema[t],o=e.schemaPath+e.util.getProperty(t),a=e.errSchemaPath+"/"+t,s=!e.opts.allErrors,c=e.util.copy(e),u="";c.level++;var l="valid"+c.level,h=c.baseId,f=!0,d=i;if(d)for(var p,m=-1,v=d.length-1;m<v;)p=d[m+=1],(e.opts.strictKeywords?"object"==typeof p&&Object.keys(p).length>0:e.util.schemaHasRules(p,e.RULES.all))&&(f=!1,c.schema=p,c.schemaPath=o+"["+m+"]",c.errSchemaPath=a+"/"+m,r+="  "+e.validate(c)+" ",c.baseId=h,s&&(r+=" if ("+l+") { ",u+="}"));return s&&(r+=f?" if (true) { ":" "+u.slice(0,-1)+" "),r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f="errs__"+i,d=e.util.copy(e),p="";d.level++;var m="valid"+d.level;if(a.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0:e.util.schemaHasRules(t,e.RULES.all)}))){var v=d.baseId;r+=" var "+f+" = errors; var "+h+" = false;  ";var g=e.compositeRule;e.compositeRule=d.compositeRule=!0;var y=a;if(y)for(var b,w=-1,E=y.length-1;w<E;)b=y[w+=1],d.schema=b,d.schemaPath=s+"["+w+"]",d.errSchemaPath=c+"/"+w,r+="  "+e.validate(d)+" ",d.baseId=v,r+=" "+h+" = "+h+" || "+m+"; if (!"+h+") { ",p+="}";e.compositeRule=d.compositeRule=g,r+=" "+p+" if (!"+h+") {   var err =   ",!1!==e.createErrors?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else u&&(r+=" if (true) { ");return r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.schema[t],o=e.errSchemaPath+"/"+t,a=(e.opts.allErrors,e.util.toQuotedString(i));return!0===e.opts.$comment?r+=" console.log("+a+");":"function"==typeof e.opts.$comment&&(r+=" self._opts.$comment("+a+", "+e.util.toQuotedString(o)+", validate.root.schema);"),r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f=e.opts.$data&&a&&a.$data;f&&(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; "),f||(r+=" var schema"+i+" = validate.schema"+s+";"),r+="var "+h+" = equal("+l+", schema"+i+"); if (!"+h+") {   ";var d=d||[];d.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValue: schema"+i+" } ",!1!==e.opts.messages&&(r+=" , message: 'should be equal to constant' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var p=r;return r=d.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+p+"]); ":r+=" validate.errors = ["+p+"]; return false; ":r+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",u&&(r+=" else { "),r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f="errs__"+i,d=e.util.copy(e);d.level++;var p="valid"+d.level,m="i"+i,v=d.dataLevel=e.dataLevel+1,g="data"+v,y=e.baseId,b=e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0:e.util.schemaHasRules(a,e.RULES.all);if(r+="var "+f+" = errors;var "+h+";",b){var w=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=a,d.schemaPath=s,d.errSchemaPath=c,r+=" var "+p+" = false; for (var "+m+" = 0; "+m+" < "+l+".length; "+m+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var E=l+"["+m+"]";d.dataPathArr[v]=m;var _=e.validate(d);d.baseId=y,e.util.varOccurences(_,g)<2?r+=" "+e.util.varReplace(_,g,E)+" ":r+=" var "+g+" = "+E+"; "+_+" ",r+=" if ("+p+") break; }  ",e.compositeRule=d.compositeRule=w,r+="  if (!"+p+") {"}else r+=" if ("+l+".length == 0) {";var k=k||[];k.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should contain a valid item' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var S=r;return r=k.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+S+"]); ":r+=" validate.errors = ["+S+"]; return false; ":r+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",b&&(r+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } "),e.opts.allErrors&&(r+=" } "),r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),h="errs__"+i,f=e.util.copy(e),d="";f.level++;var p="valid"+f.level,m={},v={},g=e.opts.ownProperties;for(E in a)if("__proto__"!=E){var y=a[E],b=Array.isArray(y)?v:m;b[E]=y}r+="var "+h+" = errors;";var w=e.errorPath;for(var E in r+="var missing"+i+";",v)if((b=v[E]).length){if(r+=" if ( "+l+e.util.getProperty(E)+" !== undefined ",g&&(r+=" && Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(E)+"') "),u){r+=" && ( ";var _=b;if(_)for(var k=-1,S=_.length-1;k<S;){I=_[k+=1],k&&(r+=" || "),r+=" ( ( "+(M=l+(A=e.util.getProperty(I)))+" === undefined ",g&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(I)+"') "),r+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?I:A)+") ) "}r+=")) {  ";var x="missing"+i,T="' + "+x+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,x,!0):w+" + "+x);var P=P||[];P.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(E)+"', missingProperty: '"+T+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(r+=" , message: 'should have ",1==b.length?r+="property "+e.util.escapeQuotes(b[0]):r+="properties "+e.util.escapeQuotes(b.join(", ")),r+=" when property "+e.util.escapeQuotes(E)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var O=r;r=P.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+O+"]); ":r+=" validate.errors = ["+O+"]; return false; ":r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var C=b;if(C)for(var I,R=-1,L=C.length-1;R<L;){I=C[R+=1];var A=e.util.getProperty(I),M=(T=e.util.escapeQuotes(I),l+A);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,I,e.opts.jsonPointers)),r+=" if ( "+M+" === undefined ",g&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(I)+"') "),r+=") {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(E)+"', missingProperty: '"+T+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(1==b.length?b[0]:b.join(", "))+"' } ",!1!==e.opts.messages&&(r+=" , message: 'should have ",1==b.length?r+="property "+e.util.escapeQuotes(b[0]):r+="properties "+e.util.escapeQuotes(b.join(", ")),r+=" when property "+e.util.escapeQuotes(E)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",u&&(d+="}",r+=" else { ")}e.errorPath=w;var D=f.baseId;for(var E in m){y=m[E];(e.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0:e.util.schemaHasRules(y,e.RULES.all))&&(r+=" "+p+" = true; if ( "+l+e.util.getProperty(E)+" !== undefined ",g&&(r+=" && Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(E)+"') "),r+=") { ",f.schema=y,f.schemaPath=s+e.util.getProperty(E),f.errSchemaPath=c+"/"+e.util.escapeFragment(E),r+="  "+e.validate(f)+" ",f.baseId=D,r+=" }  ",u&&(r+=" if ("+p+") { ",d+="}"))}return u&&(r+="   "+d+" if ("+h+" == errors) {"),r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f=e.opts.$data&&a&&a.$data;f&&(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ");var d="i"+i,p="schema"+i;f||(r+=" var "+p+" = validate.schema"+s+";"),r+="var "+h+";",f&&(r+=" if (schema"+i+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+i+")) "+h+" = false; else {"),r+=h+" = false;for (var "+d+"=0; "+d+"<"+p+".length; "+d+"++) if (equal("+l+", "+p+"["+d+"])) { "+h+" = true; break; }",f&&(r+="  }  "),r+=" if (!"+h+") {   ";var m=m||[];m.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValues: schema"+i+" } ",!1!==e.opts.messages&&(r+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var v=r;return r=m.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",u&&(r+=" else { "),r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||"");if(!1===e.opts.format)return u&&(r+=" if (true) { "),r;var h,f=e.opts.$data&&a&&a.$data;f?(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ",h="schema"+i):h=a;var d=e.opts.unknownFormats,p=Array.isArray(d);if(f){r+=" var "+(m="format"+i)+" = formats["+h+"]; var "+(v="isObject"+i)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(g="formatType"+i)+" = "+v+" && "+m+".type || 'string'; if ("+v+") { ",e.async&&(r+=" var async"+i+" = "+m+".async; "),r+=" "+m+" = "+m+".validate; } if (  ",f&&(r+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),r+=" (","ignore"!=d&&(r+=" ("+h+" && !"+m+" ",p&&(r+=" && self._opts.unknownFormats.indexOf("+h+") == -1 "),r+=") || "),r+=" ("+m+" && "+g+" == '"+n+"' && !(typeof "+m+" == 'function' ? ",e.async?r+=" (async"+i+" ? await "+m+"("+l+") : "+m+"("+l+")) ":r+=" "+m+"("+l+") ",r+=" : "+m+".test("+l+"))))) {"}else{var m;if(!(m=e.formats[a])){if("ignore"==d)return e.logger.warn('unknown format "'+a+'" ignored in schema at path "'+e.errSchemaPath+'"'),u&&(r+=" if (true) { "),r;if(p&&d.indexOf(a)>=0)return u&&(r+=" if (true) { "),r;throw new Error('unknown format "'+a+'" is used in schema at path "'+e.errSchemaPath+'"')}var v,g=(v="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(v){var y=!0===m.async;m=m.validate}if(g!=n)return u&&(r+=" if (true) { "),r;if(y){if(!e.async)throw new Error("async format in sync schema");r+=" if (!(await "+(b="formats"+e.util.getProperty(a)+".validate")+"("+l+"))) { "}else{r+=" if (! ";var b="formats"+e.util.getProperty(a);v&&(b+=".validate"),r+="function"==typeof m?" "+b+"("+l+") ":" "+b+".test("+l+") ",r+=") { "}}var w=w||[];w.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",r+=f?""+h:""+e.util.toQuotedString(a),r+="  } ",!1!==e.opts.messages&&(r+=" , message: 'should match format \"",r+=f?"' + "+h+" + '":""+e.util.escapeQuotes(a),r+="\"' "),e.opts.verbose&&(r+=" , schema:  ",r+=f?"validate.schema"+s:""+e.util.toQuotedString(a),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var E=r;return r=w.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+E+"]); ":r+=" validate.errors = ["+E+"]; return false; ":r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u&&(r+=" else { "),r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f="errs__"+i,d=e.util.copy(e);d.level++;var p="valid"+d.level,m=e.schema.then,v=e.schema.else,g=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0:e.util.schemaHasRules(m,e.RULES.all)),y=void 0!==v&&(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0:e.util.schemaHasRules(v,e.RULES.all)),b=d.baseId;if(g||y){var w;d.createErrors=!1,d.schema=a,d.schemaPath=s,d.errSchemaPath=c,r+=" var "+f+" = errors; var "+h+" = true;  ";var E=e.compositeRule;e.compositeRule=d.compositeRule=!0,r+="  "+e.validate(d)+" ",d.baseId=b,d.createErrors=!0,r+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }  ",e.compositeRule=d.compositeRule=E,g?(r+=" if ("+p+") {  ",d.schema=e.schema.then,d.schemaPath=e.schemaPath+".then",d.errSchemaPath=e.errSchemaPath+"/then",r+="  "+e.validate(d)+" ",d.baseId=b,r+=" "+h+" = "+p+"; ",g&&y?r+=" var "+(w="ifClause"+i)+" = 'then'; ":w="'then'",r+=" } ",y&&(r+=" else { ")):r+=" if (!"+p+") { ",y&&(d.schema=e.schema.else,d.schemaPath=e.schemaPath+".else",d.errSchemaPath=e.errSchemaPath+"/else",r+="  "+e.validate(d)+" ",d.baseId=b,r+=" "+h+" = "+p+"; ",g&&y?r+=" var "+(w="ifClause"+i)+" = 'else'; ":w="'else'",r+=" } "),r+=" if (!"+h+") {   var err =   ",!1!==e.createErrors?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+w+" } ",!1!==e.opts.messages&&(r+=" , message: 'should match \"' + "+w+" + '\" schema' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",u&&(r+=" else { ")}else u&&(r+=" if (true) { ");return r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f="errs__"+i,d=e.util.copy(e),p="";d.level++;var m="valid"+d.level,v="i"+i,g=d.dataLevel=e.dataLevel+1,y="data"+g,b=e.baseId;if(r+="var "+f+" = errors;var "+h+";",Array.isArray(a)){var w=e.schema.additionalItems;if(!1===w){r+=" "+h+" = "+l+".length <= "+a.length+"; ";var E=c;c=e.errSchemaPath+"/additionalItems",r+="  if (!"+h+") {   ";var _=_||[];_.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+a.length+" } ",!1!==e.opts.messages&&(r+=" , message: 'should NOT have more than "+a.length+" items' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var k=r;r=_.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+k+"]); ":r+=" validate.errors = ["+k+"]; return false; ":r+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",c=E,u&&(p+="}",r+=" else { ")}var S=a;if(S)for(var x,T=-1,P=S.length-1;T<P;)if(x=S[T+=1],e.opts.strictKeywords?"object"==typeof x&&Object.keys(x).length>0:e.util.schemaHasRules(x,e.RULES.all)){r+=" "+m+" = true; if ("+l+".length > "+T+") { ";var O=l+"["+T+"]";d.schema=x,d.schemaPath=s+"["+T+"]",d.errSchemaPath=c+"/"+T,d.errorPath=e.util.getPathExpr(e.errorPath,T,e.opts.jsonPointers,!0),d.dataPathArr[g]=T;var C=e.validate(d);d.baseId=b,e.util.varOccurences(C,y)<2?r+=" "+e.util.varReplace(C,y,O)+" ":r+=" var "+y+" = "+O+"; "+C+" ",r+=" }  ",u&&(r+=" if ("+m+") { ",p+="}")}if("object"==typeof w&&(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0:e.util.schemaHasRules(w,e.RULES.all))){d.schema=w,d.schemaPath=e.schemaPath+".additionalItems",d.errSchemaPath=e.errSchemaPath+"/additionalItems",r+=" "+m+" = true; if ("+l+".length > "+a.length+") {  for (var "+v+" = "+a.length+"; "+v+" < "+l+".length; "+v+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);O=l+"["+v+"]";d.dataPathArr[g]=v;C=e.validate(d);d.baseId=b,e.util.varOccurences(C,y)<2?r+=" "+e.util.varReplace(C,y,O)+" ":r+=" var "+y+" = "+O+"; "+C+" ",u&&(r+=" if (!"+m+") break; "),r+=" } }  ",u&&(r+=" if ("+m+") { ",p+="}")}}else if(e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0:e.util.schemaHasRules(a,e.RULES.all)){d.schema=a,d.schemaPath=s,d.errSchemaPath=c,r+="  for (var "+v+" = 0; "+v+" < "+l+".length; "+v+"++) { ",d.errorPath=e.util.getPathExpr(e.errorPath,v,e.opts.jsonPointers,!0);O=l+"["+v+"]";d.dataPathArr[g]=v;C=e.validate(d);d.baseId=b,e.util.varOccurences(C,y)<2?r+=" "+e.util.varReplace(C,y,O)+" ":r+=" var "+y+" = "+O+"; "+C+" ",u&&(r+=" if (!"+m+") break; "),r+=" }"}return u&&(r+=" "+p+" if ("+f+" == errors) {"),r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(a||""),f=e.opts.$data&&s&&s.$data;if(f?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,!f&&"number"!=typeof s)throw new Error(t+" must be number");i+="var division"+o+";if (",f&&(i+=" "+r+" !== undefined && ( typeof "+r+" != 'number' || "),i+=" (division"+o+" = "+h+" / "+r+", ",e.opts.multipleOfPrecision?i+=" Math.abs(Math.round(division"+o+") - division"+o+") > 1e-"+e.opts.multipleOfPrecision+" ":i+=" division"+o+" !== parseInt(division"+o+") ",i+=" ) ",f&&(i+="  )  "),i+=" ) {   ";var d=d||[];d.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { multipleOf: "+r+" } ",!1!==e.opts.messages&&(i+=" , message: 'should be multiple of ",i+=f?"' + "+r:r+"'"),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+c:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var p=i;return i=d.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+p+"]); ":i+=" validate.errors = ["+p+"]; return false; ":i+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),h="errs__"+i,f=e.util.copy(e);f.level++;var d="valid"+f.level;if(e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0:e.util.schemaHasRules(a,e.RULES.all)){f.schema=a,f.schemaPath=s,f.errSchemaPath=c,r+=" var "+h+" = errors;  ";var p,m=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.createErrors=!1,f.opts.allErrors&&(p=f.opts.allErrors,f.opts.allErrors=!1),r+=" "+e.validate(f)+" ",f.createErrors=!0,p&&(f.opts.allErrors=p),e.compositeRule=f.compositeRule=m,r+=" if ("+d+") {   ";var v=v||[];v.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var g=r;r=v.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(r+=" if (false) { ");return r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f="errs__"+i,d=e.util.copy(e),p="";d.level++;var m="valid"+d.level,v=d.baseId,g="prevValid"+i,y="passingSchemas"+i;r+="var "+f+" = errors , "+g+" = false , "+h+" = false , "+y+" = null; ";var b=e.compositeRule;e.compositeRule=d.compositeRule=!0;var w=a;if(w)for(var E,_=-1,k=w.length-1;_<k;)E=w[_+=1],(e.opts.strictKeywords?"object"==typeof E&&Object.keys(E).length>0:e.util.schemaHasRules(E,e.RULES.all))?(d.schema=E,d.schemaPath=s+"["+_+"]",d.errSchemaPath=c+"/"+_,r+="  "+e.validate(d)+" ",d.baseId=v):r+=" var "+m+" = true; ",_&&(r+=" if ("+m+" && "+g+") { "+h+" = false; "+y+" = ["+y+", "+_+"]; } else { ",p+="}"),r+=" if ("+m+") { "+h+" = "+g+" = true; "+y+" = "+_+"; }";return e.compositeRule=d.compositeRule=b,r+=p+"if (!"+h+") {   var err =   ",!1!==e.createErrors?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+y+" } ",!1!==e.opts.messages&&(r+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }",e.opts.allErrors&&(r+=" } "),r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(a||""),f=e.opts.$data&&s&&s.$data;f?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,i+="if ( ",f&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'string') || "),i+=" !"+(f?"(new RegExp("+r+"))":e.usePattern(s))+".test("+h+") ) {   ";var d=d||[];d.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { pattern:  ",i+=f?""+r:""+e.util.toQuotedString(s),i+="  } ",!1!==e.opts.messages&&(i+=" , message: 'should match pattern \"",i+=f?"' + "+r+" + '":""+e.util.escapeQuotes(s),i+="\"' "),e.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+c:""+e.util.toQuotedString(s),i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var p=i;return i=d.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+p+"]); ":i+=" validate.errors = ["+p+"]; return false; ":i+=" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",l&&(i+=" else { "),i}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),h="errs__"+i,f=e.util.copy(e),d="";f.level++;var p="valid"+f.level,m="key"+i,v="idx"+i,g=f.dataLevel=e.dataLevel+1,y="data"+g,b="dataProperties"+i,w=Object.keys(a||{}).filter(A),E=e.schema.patternProperties||{},_=Object.keys(E).filter(A),k=e.schema.additionalProperties,S=w.length||_.length,x=!1===k,T="object"==typeof k&&Object.keys(k).length,P=e.opts.removeAdditional,O=x||T||P,C=e.opts.ownProperties,I=e.baseId,R=e.schema.required;if(R&&(!e.opts.$data||!R.$data)&&R.length<e.opts.loopRequired)var L=e.util.toHash(R);function A(e){return"__proto__"!==e}if(r+="var "+h+" = errors;var "+p+" = true;",C&&(r+=" var "+b+" = undefined;"),O){if(r+=C?" "+b+" = "+b+" || Object.keys("+l+"); for (var "+v+"=0; "+v+"<"+b+".length; "+v+"++) { var "+m+" = "+b+"["+v+"]; ":" for (var "+m+" in "+l+") { ",S){if(r+=" var isAdditional"+i+" = !(false ",w.length)if(w.length>8)r+=" || validate.schema"+s+".hasOwnProperty("+m+") ";else{var M=w;if(M)for(var D=-1,j=M.length-1;D<j;)X=M[D+=1],r+=" || "+m+" == "+e.util.toQuotedString(X)+" "}if(_.length){var N=_;if(N)for(var B=-1,F=N.length-1;B<F;)oe=N[B+=1],r+=" || "+e.usePattern(oe)+".test("+m+") "}r+=" ); if (isAdditional"+i+") { "}if("all"==P)r+=" delete "+l+"["+m+"]; ";else{var U=e.errorPath,H="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),x)if(P)r+=" delete "+l+"["+m+"]; ";else{r+=" "+p+" = false; ";var q=c;c=e.errSchemaPath+"/additionalProperties",(ne=ne||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+H+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var z=r;r=ne.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+z+"]); ":r+=" validate.errors = ["+z+"]; return false; ":r+=" var err = "+z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=q,u&&(r+=" break; ")}else if(T)if("failing"==P){r+=" var "+h+" = errors;  ";var V=e.compositeRule;e.compositeRule=f.compositeRule=!0,f.schema=k,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var $=l+"["+m+"]";f.dataPathArr[g]=m;var W=e.validate(f);f.baseId=I,e.util.varOccurences(W,y)<2?r+=" "+e.util.varReplace(W,y,$)+" ":r+=" var "+y+" = "+$+"; "+W+" ",r+=" if (!"+p+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+l+"["+m+"]; }  ",e.compositeRule=f.compositeRule=V}else{f.schema=k,f.schemaPath=e.schemaPath+".additionalProperties",f.errSchemaPath=e.errSchemaPath+"/additionalProperties",f.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);$=l+"["+m+"]";f.dataPathArr[g]=m;W=e.validate(f);f.baseId=I,e.util.varOccurences(W,y)<2?r+=" "+e.util.varReplace(W,y,$)+" ":r+=" var "+y+" = "+$+"; "+W+" ",u&&(r+=" if (!"+p+") break; ")}e.errorPath=U}S&&(r+=" } "),r+=" }  ",u&&(r+=" if ("+p+") { ",d+="}")}var K=e.opts.useDefaults&&!e.compositeRule;if(w.length){var G=w;if(G)for(var X,J=-1,Y=G.length-1;J<Y;){var Q=a[X=G[J+=1]];if(e.opts.strictKeywords?"object"==typeof Q&&Object.keys(Q).length>0:e.util.schemaHasRules(Q,e.RULES.all)){var Z=e.util.getProperty(X),ee=($=l+Z,K&&void 0!==Q.default);f.schema=Q,f.schemaPath=s+Z,f.errSchemaPath=c+"/"+e.util.escapeFragment(X),f.errorPath=e.util.getPath(e.errorPath,X,e.opts.jsonPointers),f.dataPathArr[g]=e.util.toQuotedString(X);W=e.validate(f);if(f.baseId=I,e.util.varOccurences(W,y)<2){W=e.util.varReplace(W,y,$);var te=$}else{te=y;r+=" var "+y+" = "+$+"; "}if(ee)r+=" "+W+" ";else{if(L&&L[X]){r+=" if ( "+te+" === undefined ",C&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(X)+"') "),r+=") { "+p+" = false; ";U=e.errorPath,q=c;var ne,re=e.util.escapeQuotes(X);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(U,X,e.opts.jsonPointers)),c=e.errSchemaPath+"/required",(ne=ne||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+re+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+re+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";z=r;r=ne.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+z+"]); ":r+=" validate.errors = ["+z+"]; return false; ":r+=" var err = "+z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=q,e.errorPath=U,r+=" } else { "}else u?(r+=" if ( "+te+" === undefined ",C&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(X)+"') "),r+=") { "+p+" = true; } else { "):(r+=" if ("+te+" !== undefined ",C&&(r+=" &&   Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(X)+"') "),r+=" ) { ");r+=" "+W+" } "}}u&&(r+=" if ("+p+") { ",d+="}")}}if(_.length){var ie=_;if(ie)for(var oe,ae=-1,se=ie.length-1;ae<se;){Q=E[oe=ie[ae+=1]];if(e.opts.strictKeywords?"object"==typeof Q&&Object.keys(Q).length>0:e.util.schemaHasRules(Q,e.RULES.all)){f.schema=Q,f.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(oe),f.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(oe),r+=C?" "+b+" = "+b+" || Object.keys("+l+"); for (var "+v+"=0; "+v+"<"+b+".length; "+v+"++) { var "+m+" = "+b+"["+v+"]; ":" for (var "+m+" in "+l+") { ",r+=" if ("+e.usePattern(oe)+".test("+m+")) { ",f.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);$=l+"["+m+"]";f.dataPathArr[g]=m;W=e.validate(f);f.baseId=I,e.util.varOccurences(W,y)<2?r+=" "+e.util.varReplace(W,y,$)+" ":r+=" var "+y+" = "+$+"; "+W+" ",u&&(r+=" if (!"+p+") break; "),r+=" } ",u&&(r+=" else "+p+" = true; "),r+=" }  ",u&&(r+=" if ("+p+") { ",d+="}")}}}return u&&(r+=" "+d+" if ("+h+" == errors) {"),r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),h="errs__"+i,f=e.util.copy(e);f.level++;var d="valid"+f.level;if(r+="var "+h+" = errors;",e.opts.strictKeywords?"object"==typeof a&&Object.keys(a).length>0:e.util.schemaHasRules(a,e.RULES.all)){f.schema=a,f.schemaPath=s,f.errSchemaPath=c;var p="key"+i,m="idx"+i,v="i"+i,g="' + "+p+" + '",y="data"+(f.dataLevel=e.dataLevel+1),b="dataProperties"+i,w=e.opts.ownProperties,E=e.baseId;w&&(r+=" var "+b+" = undefined; "),r+=w?" "+b+" = "+b+" || Object.keys("+l+"); for (var "+m+"=0; "+m+"<"+b+".length; "+m+"++) { var "+p+" = "+b+"["+m+"]; ":" for (var "+p+" in "+l+") { ",r+=" var startErrs"+i+" = errors; ";var _=p,k=e.compositeRule;e.compositeRule=f.compositeRule=!0;var S=e.validate(f);f.baseId=E,e.util.varOccurences(S,y)<2?r+=" "+e.util.varReplace(S,y,_)+" ":r+=" var "+y+" = "+_+"; "+S+" ",e.compositeRule=f.compositeRule=k,r+=" if (!"+d+") { for (var "+v+"=startErrs"+i+"; "+v+"<errors; "+v+"++) { vErrors["+v+"].propertyName = "+p+"; }   var err =   ",!1!==e.createErrors?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { propertyName: '"+g+"' } ",!1!==e.opts.messages&&(r+=" , message: 'property name \\'"+g+"\\' is invalid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&u&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),u&&(r+=" break; "),r+=" } }"}return u&&(r+="  if ("+h+" == errors) {"),r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=" ",i=e.level,o=e.dataLevel,a=e.schema[t],s=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,l="data"+(o||""),h="valid"+i,f=e.opts.$data&&a&&a.$data;f&&(r+=" var schema"+i+" = "+e.util.getData(a.$data,o,e.dataPathArr)+"; ");var d="schema"+i;if(!f)if(a.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var p=[],m=a;if(m)for(var v,g=-1,y=m.length-1;g<y;){v=m[g+=1];var b=e.schema.properties[v];b&&(e.opts.strictKeywords?"object"==typeof b&&Object.keys(b).length>0:e.util.schemaHasRules(b,e.RULES.all))||(p[p.length]=v)}}else p=a;if(f||p.length){var w=e.errorPath,E=f||p.length>=e.opts.loopRequired,_=e.opts.ownProperties;if(u)if(r+=" var missing"+i+"; ",E){f||(r+=" var "+d+" = validate.schema"+s+"; ");var k="' + "+(C="schema"+i+"["+(T="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,C,e.opts.jsonPointers)),r+=" var "+h+" = true; ",f&&(r+=" if (schema"+i+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+i+")) "+h+" = false; else {"),r+=" for (var "+T+" = 0; "+T+" < "+d+".length; "+T+"++) { "+h+" = "+l+"["+d+"["+T+"]] !== undefined ",_&&(r+=" &&   Object.prototype.hasOwnProperty.call("+l+", "+d+"["+T+"]) "),r+="; if (!"+h+") break; } ",f&&(r+="  }  "),r+="  if (!"+h+") {   ",(O=O||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+k+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var S=r;r=O.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+S+"]); ":r+=" validate.errors = ["+S+"]; return false; ":r+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var x=p;if(x)for(var T=-1,P=x.length-1;T<P;){R=x[T+=1],T&&(r+=" || "),r+=" ( ( "+(D=l+(M=e.util.getProperty(R)))+" === undefined ",_&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(R)+"') "),r+=") && (missing"+i+" = "+e.util.toQuotedString(e.opts.jsonPointers?R:M)+") ) "}r+=") {  ";var O;k="' + "+(C="missing"+i)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(w,C,!0):w+" + "+C),(O=O||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+k+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";S=r;r=O.pop(),!e.compositeRule&&u?e.async?r+=" throw new ValidationError(["+S+"]); ":r+=" validate.errors = ["+S+"]; return false; ":r+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(E){f||(r+=" var "+d+" = validate.schema"+s+"; ");var C;k="' + "+(C="schema"+i+"["+(T="i"+i)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(w,C,e.opts.jsonPointers)),f&&(r+=" if ("+d+" && !Array.isArray("+d+")) {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+k+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+d+" !== undefined) { "),r+=" for (var "+T+" = 0; "+T+" < "+d+".length; "+T+"++) { if ("+l+"["+d+"["+T+"]] === undefined ",_&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", "+d+"["+T+"]) "),r+=") {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+k+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",f&&(r+="  }  ")}else{var I=p;if(I)for(var R,L=-1,A=I.length-1;L<A;){R=I[L+=1];var M=e.util.getProperty(R),D=(k=e.util.escapeQuotes(R),l+M);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(w,R,e.opts.jsonPointers)),r+=" if ( "+D+" === undefined ",_&&(r+=" || ! Object.prototype.hasOwnProperty.call("+l+", '"+e.util.escapeQuotes(R)+"') "),r+=") {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+k+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=w}else u&&(r+=" if (true) {");return r}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i=" ",o=e.level,a=e.dataLevel,s=e.schema[t],c=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,h="data"+(a||""),f="valid"+o,d=e.opts.$data&&s&&s.$data;if(d?(i+=" var schema"+o+" = "+e.util.getData(s.$data,a,e.dataPathArr)+"; ",r="schema"+o):r=s,(s||d)&&!1!==e.opts.uniqueItems){d&&(i+=" var "+f+"; if ("+r+" === false || "+r+" === undefined) "+f+" = true; else if (typeof "+r+" != 'boolean') "+f+" = false; else { "),i+=" var i = "+h+".length , "+f+" = true , j; if (i > 1) { ";var p=e.schema.items&&e.schema.items.type,m=Array.isArray(p);if(!p||"object"==p||"array"==p||m&&(p.indexOf("object")>=0||p.indexOf("array")>=0))i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+h+"[i], "+h+"[j])) { "+f+" = false; break outer; } } } ";else{i+=" var itemIndices = {}, item; for (;i--;) { var item = "+h+"[i]; ";var v="checkDataType"+(m?"s":"");i+=" if ("+e.util[v](p,"item",e.opts.strictNumbers,!0)+") continue; ",m&&(i+=" if (typeof item == 'string') item = '\"' + item; "),i+=" if (typeof itemIndices[item] == 'number') { "+f+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}i+=" } ",d&&(i+="  }  "),i+=" if (!"+f+") {   ";var g=g||[];g.push(i),i="",!1!==e.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+c:""+s,i+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var y=i;i=g.pop(),!e.compositeRule&&l?e.async?i+=" throw new ValidationError(["+y+"]); ":i+=" validate.errors = ["+y+"]; return false; ":i+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",l&&(i+=" else { ")}else l&&(i+=" if (true) { ");return i}},function(e,t,n){"use strict";var r=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var n=0;n<t.length;n++){e=JSON.parse(JSON.stringify(e));var i,o=t[n].split("/"),a=e;for(i=1;i<o.length;i++)a=a[o[i]];for(i=0;i<r.length;i++){var s=r[i],c=a[s];c&&(a[s]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e}},function(e,t,n){"use strict";var r=n(191).MissingRef;e.exports=function e(t,n,i){var o=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof n&&(i=n,n=void 0);var a=s(t).then((function(){var e=o._addSchema(t,void 0,n);return e.validate||function e(t){try{return o._compile(t)}catch(e){if(e instanceof r)return i(e);throw e}function i(r){var i=r.missingSchema;if(u(i))throw new Error("Schema "+i+" is loaded but "+r.missingRef+" cannot be resolved");var a=o._loadingSchemas[i];return a||(a=o._loadingSchemas[i]=o._opts.loadSchema(i)).then(c,c),a.then((function(e){if(!u(i))return s(e).then((function(){u(i)||o.addSchema(e,i,void 0,n)}))})).then((function(){return e(t)}));function c(){delete o._loadingSchemas[i]}function u(e){return o._refs[e]||o._schemas[e]}}}(e)}));i&&a.then((function(e){i(null,e)}),i);return a;function s(t){var n=t.$schema;return n&&!o.getSchema(n)?e.call(o,{$ref:n},!0):Promise.resolve()}}},function(e,t,n){"use strict";var r=/^[a-z_$][a-z0-9_$-]*$/i,i=n(362),o=n(363);e.exports={add:function(e,t){var n=this.RULES;if(n.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!r.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var o=t.type;if(Array.isArray(o))for(var a=0;a<o.length;a++)c(e,o[a],t);else c(e,o,t);var s=t.metaSchema;s&&(t.$data&&this._opts.$data&&(s={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(s,!0))}function c(e,t,r){for(var o,a=0;a<n.length;a++){var s=n[a];if(s.type==t){o=s;break}}o||(o={type:t,rules:[]},n.push(o));var c={keyword:e,definition:r,custom:!0,code:i,implements:r.implements};o.rules.push(c),n.custom[e]=c}return n.keywords[e]=n.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var n=0;n<t.length;n++)for(var r=t[n].rules,i=0;i<r.length;i++)if(r[i].keyword==e){r.splice(i,1);break}return this},validate:function e(t,n){e.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(o,!0);if(r(t))return!0;if(e.errors=r.errors,n)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r,i,o=" ",a=e.level,s=e.dataLevel,c=e.schema[t],u=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,h=!e.opts.allErrors,f="data"+(s||""),d="valid"+a,p="errs__"+a,m=e.opts.$data&&c&&c.$data;m?(o+=" var schema"+a+" = "+e.util.getData(c.$data,s,e.dataPathArr)+"; ",i="schema"+a):i=c;var v,g,y,b,w,E="definition"+a,_=this.definition,k="";if(m&&_.$data){w="keywordValidate"+a;var S=_.validateSchema;o+=" var "+E+" = RULES.custom['"+t+"'].definition; var "+w+" = "+E+".validate;"}else{if(!(b=e.useCustomRule(this,c,e.schema,e)))return;i="validate.schema"+u,w=b.code,v=_.compile,g=_.inline,y=_.macro}var x=w+".errors",T="i"+a,P="ruleErr"+a,O=_.async;if(O&&!e.async)throw new Error("async keyword in sync schema");if(g||y||(o+=x+" = null;"),o+="var "+p+" = errors;var "+d+";",m&&_.$data&&(k+="}",o+=" if ("+i+" === undefined) { "+d+" = true; } else { ",S&&(k+="}",o+=" "+d+" = "+E+".validateSchema("+i+"); if ("+d+") { ")),g)_.statements?o+=" "+b.validate+" ":o+=" "+d+" = "+b.validate+"; ";else if(y){var C=e.util.copy(e);k="";C.level++;var I="valid"+C.level;C.schema=b.validate,C.schemaPath="";var R=e.compositeRule;e.compositeRule=C.compositeRule=!0;var L=e.validate(C).replace(/validate\.schema/g,w);e.compositeRule=C.compositeRule=R,o+=" "+L}else{(j=j||[]).push(o),o="",o+="  "+w+".call( ",e.opts.passContext?o+="this":o+="self",v||!1===_.schema?o+=" , "+f+" ":o+=" , "+i+" , "+f+" , validate.schema"+e.schemaPath+" ",o+=" , (dataPath || '')",'""'!=e.errorPath&&(o+=" + "+e.errorPath);var A=s?"data"+(s-1||""):"parentData",M=s?e.dataPathArr[s]:"parentDataProperty",D=o+=" , "+A+" , "+M+" , rootData )  ";o=j.pop(),!1===_.errors?(o+=" "+d+" = ",O&&(o+="await "),o+=D+"; "):o+=O?" var "+(x="customErrors"+a)+" = null; try { "+d+" = await "+D+"; } catch (e) { "+d+" = false; if (e instanceof ValidationError) "+x+" = e.errors; else throw e; } ":" "+x+" = null; "+d+" = "+D+"; "}if(_.modifying&&(o+=" if ("+A+") "+f+" = "+A+"["+M+"];"),o+=""+k,_.valid)h&&(o+=" if (true) { ");else{var j;o+=" if ( ",void 0===_.valid?(o+=" !",o+=y?""+I:""+d):o+=" "+!_.valid+" ",o+=") { ",r=this.keyword,(j=j||[]).push(o),o="",(j=j||[]).push(o),o="",!1!==e.createErrors?(o+=" { keyword: '"+(r||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),o+=" } "):o+=" {} ";var N=o;o=j.pop(),!e.compositeRule&&h?e.async?o+=" throw new ValidationError(["+N+"]); ":o+=" validate.errors = ["+N+"]; return false; ":o+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var B=o;o=j.pop(),g?_.errors?"full"!=_.errors&&(o+="  for (var "+T+"="+p+"; "+T+"<errors; "+T+"++) { var "+P+" = vErrors["+T+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+P+".schemaPath === undefined) { "+P+'.schemaPath = "'+l+'"; } ',e.opts.verbose&&(o+=" "+P+".schema = "+i+"; "+P+".data = "+f+"; "),o+=" } "):!1===_.errors?o+=" "+B+" ":(o+=" if ("+p+" == errors) { "+B+" } else {  for (var "+T+"="+p+"; "+T+"<errors; "+T+"++) { var "+P+" = vErrors["+T+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+P+".schemaPath === undefined) { "+P+'.schemaPath = "'+l+'"; } ',e.opts.verbose&&(o+=" "+P+".schema = "+i+"; "+P+".data = "+f+"; "),o+=" } } "):y?(o+="   var err =   ",!1!==e.createErrors?(o+=" { keyword: '"+(r||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(o+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(o+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+f+" "),o+=" } "):o+=" {} ",o+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&h&&(e.async?o+=" throw new ValidationError(vErrors); ":o+=" validate.errors = vErrors; return false; ")):!1===_.errors?o+=" "+B+" ":(o+=" if (Array.isArray("+x+")) { if (vErrors === null) vErrors = "+x+"; else vErrors = vErrors.concat("+x+"); errors = vErrors.length;  for (var "+T+"="+p+"; "+T+"<errors; "+T+"++) { var "+P+" = vErrors["+T+"]; if ("+P+".dataPath === undefined) "+P+".dataPath = (dataPath || '') + "+e.errorPath+";  "+P+'.schemaPath = "'+l+'";  ',e.opts.verbose&&(o+=" "+P+".schema = "+i+"; "+P+".data = "+f+"; "),o+=" } } else { "+B+" } "),o+=" } ",h&&(o+=" else { ")}return o}},function(e,t,n){"use strict";var r=n(223);e.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:r.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:r.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9),n(145);var o=n(155),a=n(22),s=function(){function e(t,n,i,a,s,c){var u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],h=arguments.length>8&&void 0!==arguments[8]&&arguments[8];r(this,e),this.schema=o.retrieveSchema(t,s,n),this.formData=n,this.idSchema=i,this.name=a,this.definitions=s,this.onChange=c,this.required=u,this.disabled=l,this.readOnly=h}var t,n,s;return t=e,(n=[{key:"toFormData",value:function(e,t){var n=Number(e);if(""===e){if(t){if(!this.required&&t.valid)return;if(this.required&&t.valueMissing&&!t.badInput)return;return"."}return console.log("returning ."),"."}return isNaN(n)?".":n}},{key:"onNumberChange",value:function(e){var t=e.target.value;this.rangeValue&&(this.rangeValue.textContent=t),this.formData=this.toFormData(t,e.target.validity),this.onChange&&this.onChange(this.formData)}},{key:"render",value:function(){var e=this,t=a.escapeHtmlForIdClass(this.idSchema.$id),n=Number(this.formData);isNaN(n)&&(n=0);var r=document.createElement("div");if(this.schema.hasOwnProperty("minimum")&&this.schema.hasOwnProperty("maximum"))r.className="field-range-wrapper",r.innerHTML='\n        <input\n        type="range"\n        id="'.concat(t,'"\n        class="form-control"\n        ').concat(this.required?"required":"","\n        ").concat(this.disabled||this.readOnly?"disabled":"","\n        value=").concat(null==n?"":n,"\n        ").concat(this.schema.multipleOf?"step=".concat(Number(this.schema.multipleOf)):"","\n        min=").concat(Number(this.schema.minimum),"\n        max=").concat(Number(this.schema.maximum),'\n        />\n        <span class="range-view">').concat(n,"</span>"),this.rangeValue=r.querySelector("span");else if(o.isSelect(this.schema)){var i=o.getOptionsList(this.schema),s=n,c=!1;this.required||i.unshift({value:"",label:""});var u=i.map((function(t,n){var r=t.value,i=t.label,o=s===e.toFormData(r);return c|=o,'\n          <option\n          key="'.concat(n,'"\n          value="').concat(a.escapeHtml(r),'"\n          ').concat(o?"selected":"",">\n            ").concat(a.escapeHtml(i),"\n          </option>")}));r.innerHTML='\n        <select\n        id="'.concat(t,'"\n        class="form-control"\n        ').concat(this.required?"required":"","\n        ").concat(this.disabled||this.readOnly?"disabled":"","\n        >\n        ").concat(u.join(" "),"\n        </select>"),c||(r.querySelector("#".concat(t)).selectedIndex=-1)}else{var l="",h="",f="any";this.schema.hasOwnProperty("minimum")&&(l='min="'.concat(this.schema.minimum,'"')),this.schema.hasOwnProperty("maximum")&&(h='max="'.concat(this.schema.maximum,'"')),this.schema.hasOwnProperty("multipleOf")?f="".concat(this.schema.multipleOf):"integer"===this.schema.type&&(f="1"),r.innerHTML='\n        <input\n        id="'.concat(t,'"\n        type="number"\n        class="form-control"\n        ').concat(this.required?"required":"","\n        ").concat(this.disabled||this.readOnly?"disabled":"","\n        ").concat(l," ").concat(h,' step="').concat(f,'"\n        value="').concat(null==n?"":a.escapeHtml(n),'"\n        />')}var d=r.querySelector("#".concat(t));return d.onchange=this.onNumberChange.bind(this),d.oninput=this.onNumberChange.bind(this),r}}])&&i(t.prototype,n),s&&i(t,s),e}();e.exports=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9),n(145);var o=n(155),a=n(22),s=function(){function e(t,n,i,a,s,c){var u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],h=arguments.length>8&&void 0!==arguments[8]&&arguments[8];r(this,e),this.schema=o.retrieveSchema(t,s,n),this.formData=n,this.idSchema=i,this.name=a,this.definitions=s,this.onChange=c,this.required=u,this.disabled=l,this.readOnly=h}var t,n,s;return t=e,(n=[{key:"toFormData",value:function(e){return""===e?void 0:e}},{key:"onStringChange",value:function(e){var t=e.target.value;this.formData=this.toFormData(t),this.onChange&&this.onChange(this.formData)}},{key:"render",value:function(){var e=this,t=a.escapeHtmlForIdClass(this.idSchema.$id),n=this.formData,r=document.createElement("div");if(o.isSelect(this.schema)){var i=o.getOptionsList(this.schema),s=n,c=!1;this.required||i.unshift({value:"",label:""});var u=i.map((function(t,n){var r=t.value,i=t.label,o=s===e.toFormData(r);return c|=o,'\n          <option\n          key="'.concat(n,'"\n          value="').concat(a.escapeHtml(r),'"\n          ').concat(o?"selected":"",">\n            ").concat(a.escapeHtml(i),"\n          </option>")}));r.innerHTML='\n        <select\n        id="'.concat(t,'"\n        class="form-control"\n        ').concat(this.required?"required":"","\n        ").concat(this.disabled||this.readOnly?"disabled":"","\n        >\n        ").concat(u.join(" "),"\n        </select>"),c||(r.querySelector("#".concat(t)).selectedIndex=-1)}else r.innerHTML='\n        <input\n        id="'.concat(t,'"\n        type="text"\n        class="form-control"\n        ').concat(this.required?"required":"","\n        ").concat(this.disabled||this.readOnly?"disabled":"",'\n        value="').concat(null==n?"":a.escapeHtml(n),'"\n        />');var l=r.querySelector("#".concat(t));return l.onchange=this.onStringChange.bind(this),l.oninput=this.onStringChange.bind(this),r}}])&&i(t.prototype,n),s&&i(t,s),e}();e.exports=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9);var o=n(155),a=n(22),s=function(){function e(t,n,i,a,s,c){var u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],h=arguments.length>8&&void 0!==arguments[8]&&arguments[8];r(this,e),this.schema=o.retrieveSchema(t,s,n),this.formData=n,this.idSchema=i,this.name=a,this.definitions=s,this.onChange=c,this.required=u,this.disabled=l,this.readOnly=h}var t,n,s;return t=e,(n=[{key:"onBooleanChange",value:function(e){this.formData=e.target.checked,this.onChange&&this.onChange(this.formData)}},{key:"render",value:function(){var e=a.escapeHtmlForIdClass(this.idSchema.$id),t=this.formData,n=document.createElement("div");return n.className="checkbox",n.innerHTML='\n      <input\n      type="checkbox"\n      id="'.concat(e,'"\n      ').concat(t?"checked":"","\n      ").concat(this.required?"required":"","\n      ").concat(this.disabled||this.readOnly?"disabled":"",'\n      />\n      <label for="').concat(e,'"></span>\n      '),n.querySelector("#".concat(e)).onchange=this.onBooleanChange.bind(this),n}}])&&i(t.prototype,n),s&&i(t,s),e}();e.exports=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(36),n(37),n(9),n(139),n(78),n(148),n(160),n(110),n(140);var o=n(155),a=n(192),s=n(22),c=function(){function e(t,n,i,a,s,c){var u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],h=arguments.length>8&&void 0!==arguments[8]&&arguments[8];r(this,e),this.retrievedSchema=o.retrieveSchema(t,s,n),this.schema=t,this.formData=n,this.idSchema=i,this.name=a,this.definitions=s,this.onChange=c,this.required=u,this.disabled=l,this.readOnly=h}var t,n,c;return t=e,(n=[{key:"isRequired",value:function(e){return Array.isArray(this.retrievedSchema.required)&&this.retrievedSchema.required.includes(e)}},{key:"sortObject",value:function(e){var t=this,n=Object.keys(e).sort(),r={};return n.forEach((function(n){var i=e[n];"object"==typeof i&&(i=t.sortObject(i)),r[n]=i})),r}},{key:"isSameSchema",value:function(e,t){return JSON.stringify(this.sortObject(e))===JSON.stringify(this.sortObject(t))}},{key:"onPropertyChange",value:function(e,t){var n=this;return function(r){var i=n.schema,a={};if(a[e]=r,n.formData=Object.assign(n.formData,a),i.hasOwnProperty("dependencies")){var s=o.retrieveSchema(i,n.definitions,n.formData);n.isSameSchema(n.retrievedSchema,s)||(n.retrievedSchema=s,n.formData=o.getDefaultFormState(s,n.formData,n.definitions),n.renderField(t))}n.onChange&&n.onChange(n.formData)}}},{key:"renderField",value:function(e){var t=this,n=s.escapeHtmlForIdClass(this.idSchema.$id),r=this.retrievedSchema.description,i=this.retrievedSchema.title?this.retrievedSchema.title:this.name;null!=i&&(i=s.escapeHtml(i),i=this.required?i+o.REQUIRED_FIELD_SYMBOL:i),e.innerHTML=(i?'<legend id="'.concat("".concat(n,"__title"),'">',i,"</legend>"):"")+(r?'<p id="'.concat(n,'__description" class="field-description">\n        ').concat(s.escapeHtml(r),"</p>"):""),Object.keys(this.retrievedSchema.properties).forEach((function(n){var r=t.retrievedSchema.properties[n],i="".concat(t.idSchema.$id,"_").concat(n),s=t.formData[n],c=o.toIdSchema(r,i,t.definitions,s),u=new a(r,s,c,n,t.definitions,t.onPropertyChange(n,e),t.isRequired(n),r.disabled,r.readOnly).render();e.appendChild(u)}))}},{key:"render",value:function(){var e=document.createElement("fieldset");return this.renderField(e),e}}])&&i(t.prototype,n),c&&i(t,c),e}();e.exports=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(36),n(37),n(9),n(151),n(139),n(78),n(143),n(145),n(148),n(110),n(140);var o=n(155),a=n(192),s=n(22),c=n(224),u=function(){function e(t,n,i,a,s,c){var u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7],h=arguments.length>8&&void 0!==arguments[8]&&arguments[8];r(this,e),this.schema=o.retrieveSchema(t,s,n),this.formData=Array.isArray(n)?n:[],this.idSchema=i,this.name=a,this.definitions=s,this.onChange=c,this.required=u,this.disabled=l,this.readOnly=h}var t,n,u;return t=e,(n=[{key:"require",value:function(e){return Array.isArray(this.schema.required)&&this.schema.required.includes(e)}},{key:"onChangeForIndex",value:function(e){var t=this;return function(n){var r=t.formData.map((function(t,r){return e===r?void 0===n?null:n:t}));t.formData=r,t.onChange&&t.onChange(t.formData)}}},{key:"onSelectChange",value:function(e,t){var n=this;return function(r){r.target.checked?(n.formData.push(e),n.formData.sort((function(e,n){return t.indexOf(e)>t.indexOf(n)}))):n.formData=n.formData.filter((function(t){return t!==e})),n.onChange&&n.onChange(n.formData)}}},{key:"allowAdditionalItems",value:function(){var e=this.schema;return!0===e.additionalItems&&console.warn("additionalItems=true is currently not supported"),o.isObject(e.additionalItems)}},{key:"isAddable",value:function(e){var t=this.schema,n=!0;return void 0!==t.maxItems&&(n=e.length<t.maxItems),n}},{key:"isItemRequired",value:function(e){return Array.isArray(e.type)?!e.type.includes("null"):"null"!==e.type}},{key:"itemFieldId",value:function(e){return"array_".concat(s.escapeHtmlForIdClass(this.idSchema.$id),"_").concat(e)}},{key:"onDropIndexClick",value:function(e,t){var n=this;return function(r){var i=n.schema,a=e.querySelector("div.array-items"),s=i.items;o.isFixedItems(i)&&n.allowAdditionalItems(i)&&(s=i.additionalItems);var c=a.cloneNode(!1);r.preventDefault();for(var u=0;u<t;u++){var l=n.itemFieldId(u),h=e.querySelector("#".concat(l));c.appendChild(h)}for(var f=t+1;f<n.formData.length;f++){var d=n.renderArrayFieldItem(e,n.formData[f],f-1,s,!0);c.appendChild(d)}n.formData=n.formData.filter((function(e,n){return n!==t})),e.replaceChild(c,a),n.onChange&&n.onChange(n.formData)}}},{key:"renderRemoveButton",value:function(e,t){var n=document.createElement("button");return n.className="btn-remove btn-form-tools",n.disabled=this.disabled||this.readOnly,n.onclick=this.onDropIndexClick(e,t),n}},{key:"onAddClick",value:function(e){var t=this;return function(n){var r=t.schema,i=t.definitions,a=t.formData.length,s=e.querySelector("div.array-items");n.preventDefault();var c=r.items;o.isFixedItems(r)&&t.allowAdditionalItems(r)&&(c=r.additionalItems);var u=o.getDefaultFormState(c,void 0,i);t.formData.push(u);var l=t.renderArrayFieldItem(e,u,a,c,!0);s.appendChild(l),t.onChange&&t.onChange(t.formData)}}},{key:"renderAddButton",value:function(e){var t=document.createElement("button");return t.className="btn-add btn-form-tools",t.disabled=this.disabled||this.readOnly,t.onclick=this.onAddClick(e),t}},{key:"renderArrayFieldItem",value:function(e,t,n,r,i){var s=document.createElement("div"),c=this.itemFieldId(n);if(s.className="array-item-row",s.id=c,i){s.innerHTML='\n      <div class="array-item array-item-col-field">\n      </div>\n      <div class="array-item-toolbox array-item-col-tool">\n      </div>\n      ';var u=s.querySelector("div.array-item-toolbox"),l=this.renderRemoveButton(e,n);u.appendChild(l)}else s.innerHTML='\n      <div class="array-item array-item-col">\n      </div>';var h="".concat(this.idSchema.$id,"_").concat(n),f=o.toIdSchema(r,h,this.definitions,t),d=s.querySelector("div.array-item"),p=new a(r,t,f,null,this.definitions,this.onChangeForIndex(n),this.isItemRequired(r),r.disabled,r.readOnly).render();return d.appendChild(p),s}},{key:"renderArrayFieldset",value:function(){var e=s.escapeHtmlForIdClass(this.idSchema.$id),t=this.schema.description,n=this.schema.title?this.schema.title:this.name;n=s.escapeHtml(n);var r=document.createElement("fieldset");return r.innerHTML="".concat((n?'<legend id="'.concat("".concat(e,"__title"),'">',n,"</legend>"):"")+(t?'<p id="'.concat(e,'__description" class="field-description">\n        ').concat(s.escapeHtml(t),"</p>"):""),'<div class="array-items"></div>'),r}},{key:"renderNormalArray",value:function(){var e=this,t=this.schema,n=this.definitions,r=this.formData,i=o.retrieveSchema(t.items,n,r),a=this.renderArrayFieldset(),s=a.querySelector("div.array-items");if(r.forEach((function(t,n){var r=e.renderArrayFieldItem(a,t,n,i,!0);s.appendChild(r)})),this.isAddable(r)){var c=this.renderAddButton(a);a.appendChild(c)}return a}},{key:"renderFixedArray",value:function(){var e=this,t=this.schema,n=this.definitions,r=this.renderArrayFieldset(),i=r.querySelector("div.array-items"),a=this.formData,s=t.items.map((function(e,t){return o.retrieveSchema(e,n,a[t])}));if((!a||a.length<s.length)&&(a=(a=a||[]).concat(new Array(s.length-a.length))),a.forEach((function(a,c){var u=c>=s.length,l=u,h=u?o.retrieveSchema(t.additionalItems,n):s[c],f=e.renderArrayFieldItem(r,a,c,h,l);i.appendChild(f)})),this.allowAdditionalItems()&&this.isAddable(a)){var c=this.renderAddButton(r);r.appendChild(c)}return r}},{key:"renderMultiSelect",value:function(){var e=this,t=s.escapeHtmlForIdClass(this.idSchema.$id),n=this.formData,r=this.schema,i=this.definitions,a=o.retrieveSchema(r.items,i,n),c=o.optionsList(a),u=c.map((function(e){return e.value})),l=document.createElement("fieldset");return l.className="checkboxes",c.forEach((function(r,i){var o=n.includes(r.value),a=e.disabled||e.readOnly?"disabled":"",c=document.createElement("div");c.className="checkbox ".concat(a),c.innerHTML='\n      <input\n        type="checkbox"\n        id="'.concat(t,"_").concat(i,'"\n        ').concat(o?"checked":"","\n        ").concat(e.disabled||e.readOnly?"disabled":"",'\n      />\n      <span class="checkbox-title">').concat(s.escapeHtml(r.label),"</span>\n      "),c.querySelector("input").onchange=e.onSelectChange(r.value,u),l.appendChild(c)})),l}},{key:"render",value:function(){var e=this.schema;return e.hasOwnProperty("items")?o.isFixedItems(e)?this.renderFixedArray():o.isMultiSelect(e,this.definitions)?this.renderMultiSelect():this.renderNormalArray():new c(e).render()}}])&&i(t.prototype,n),u&&i(t,u),e}();e.exports=u},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9),n(145),n(150);var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=document.createElement("div");return t.className="errors-field hidden",t.innerHTML='\n      <div>\n        <h3 class="errors-title" data-l10n-id="errors"></h3>\n      </div>\n      <ul class="errors-list">\n      </ul>',this.field=t,this.errorlist=t.querySelector("ul"),this}var t,n,i;return t=e,(n=[{key:"render",value:function(e){if(e.length>0){var t=e.map((function(e){return'\n            <li class="error-item">\n              '.concat("".concat(e.dataPath," ").concat(e.message).trim(),"\n            </li>")}));this.errorlist.innerHTML=t.join(" "),this.field.classList.remove("hidden")}else this.field.classList.add("hidden");return this.field}}])&&r(t.prototype,n),i&&r(t,i),e}();e.exports=i},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(36),n(37),n(9),n(3),n(46);var i=n(35),o=n(19),a=n(22),s=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.name=t.name,this.description=t.description,this.author=t.author,this.homepageUrl=t.homepage_url,this.licenseUrl=t.license_url,this.version=t.version,this.primaryType=t.primary_type,this.url=t.url,this.checksum=t.checksum,this.installed=t.installed,this.installedAddonsMap=n,this.availableAddonsMap=r,this.container=document.getElementById("discovered-addons-list"),this.render()}var t,n,s;return t=e,(n=[{key:"view",value:function(){var e;return e=this.installed?'<span class="addon-discovery-settings-added" data-l10n-id="addon-discovery-added"></span>':'\n        <button id="addon-install-'.concat(a.escapeHtmlForIdClass(this.id),'"\n          class="text-button addon-discovery-settings-add"\n          data-l10n-id="addon-discovery-add">\n        </button>'),'\n      <li class="discovered-addon-item">\n        <div class="addon-settings-header '.concat(a.escapeHtmlForIdClass(this.primaryType),'">\n          <span class="addon-settings-name">\n            ').concat(a.escapeHtml(this.name),'\n          </span>\n          <span class="addon-settings-version">\n            ').concat(a.escapeHtml(this.version),'\n          </span>\n          <span class="addon-settings-description">\n            ').concat(a.escapeHtml(this.description),'\n          </span>\n          <span class="addon-settings-author">\n            ').concat(o.getMessage("by"),' <a href="').concat(this.homepageUrl,'" target="_blank" rel="noopener">').concat(a.escapeHtml(this.author),'</a>\n          </span>\n          <span id="addon-license-').concat(a.escapeHtmlForIdClass(this.id),'" class="addon-settings-license" \n            data-license-href="').concat(this.licenseUrl,'" data-id="').concat(a.escapeHtmlForIdClass(this.id),'">\n            (').concat(o.getMessage("license"),')\n          </span>\n        </div>\n        <div class="addon-settings-controls">\n          ').concat(e,"\n        </div>\n      </li>")}},{key:"render",value:function(){this.container.insertAdjacentHTML("beforeend",this.view()),this.installed||document.getElementById("addon-install-".concat(a.escapeHtmlForIdClass(this.id))).addEventListener("click",this.handleInstall.bind(this)),document.getElementById("addon-license-".concat(a.escapeHtmlForIdClass(this.id))).addEventListener("click",this.handleLicense.bind(this))}},{key:"handleInstall",value:function(e){var t=this,n=e.target.parentNode;n.innerHTML='<span class="addon-discovery-settings-installing"\n             data-l10n-id="addon-discovery-installing"></span>',i.installAddon(this.id,this.url,this.checksum).then((function(e){n.innerHTML='<span class="addon-discovery-settings-added"\n          data-l10n-id="addon-discovery-added"></span>';var r=t.availableAddonsMap.get(t.id);r&&(r.installed=!0),t.installedAddonsMap.set(t.id,e),e.content_scripts&&e.content_scripts.length>0&&window.location.reload()})).catch((function(e){console.error("Failed to install add-on: ".concat(t.id,"\n").concat(e)),n.innerHTML='<span class="addon-discovery-settings-install-failed"\n                 data-l10n-id="addon-discovery-failed"></span>'}))}},{key:"handleLicense",value:function(e){e.target.dataset.id&&i.getAddonsInfo().then((function(t){var n="".concat(t.urls[0],"/license/").concat(e.target.dataset.id),r=document.getElementById("media-modal");if(null==r){var i=document.createElement("div");i.className="media-modal",i.id="media-modal";var a=document.createElement("div");a.className="media-modal-frame",a.innerHTML='<div class="media-modal-close" \n            id="modal-close-button"></div>\n            <div class="media-modal-content">\n            <p id="media-modal-text"></p></div>',i.appendChild(a),document.body.appendChild(i),document.getElementById("modal-close-button").addEventListener("click",(function(){(r=document.getElementById("media-modal")).parentNode.removeChild(r)})),fetch(n).then((function(e){return e.text()})).then((function(e){document.getElementById("media-modal-text").innerText=e})).catch((function(){document.getElementById("media-modal-text").innerText=o.getMessage("failed-read-file")}))}}))}}])&&r(t.prototype,n),s&&r(t,s),e}();e.exports=s},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(36),n(37),n(9),n(3),n(46);var i=n(35),o=n(19),a=n(22),s=n(142),c=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.id,this.name=t.name,this.description=t.description,this.author=t.author,this.homepageUrl=t.homepage_url,this.licenseUrl="/addons/".concat(encodeURIComponent(this.id),"/license?jwt=").concat(i.jwt),this.version=t.version,this.primaryType=t.primary_type,this.enabled=t.enabled,this.schema=t.schema,this.metadata=t,this.updateUrl=null,this.updateVersion=null,this.updateChecksum=null,this.container=document.getElementById("installed-addons-list"),this.installedAddonsMap=n,this.availableAddonsMap=r,this.render()}var t,n,c;return t=e,(n=[{key:"view",value:function(){var e,t;this.enabled?(e=o.getMessage("disable"),t="addon-settings-disable"):(e=o.getMessage("enable"),t="addon-settings-enable");var n=this.schema?"":"hidden",r=this.name||this.id;return'\n      <li id="addon-item-'.concat(a.escapeHtmlForIdClass(this.id),'"\n        class="addon-item">\n        <div class="addon-settings-header ').concat(a.escapeHtmlForIdClass(this.primaryType),'">\n          <span class="addon-settings-name">\n            ').concat(a.escapeHtml(r),'\n          </span>\n          <span class="addon-settings-version">\n            ').concat(a.escapeHtml(this.version),'\n          </span>\n          <span class="addon-settings-description">\n            ').concat(a.escapeHtml(this.description),'\n          </span>\n          <span class="addon-settings-author">\n            ').concat(o.getMessage("by"),' <a href="').concat(this.homepageUrl,'" target="_blank" rel="noopener">').concat(a.escapeHtml(this.author),'</a>\n          </span>\n          <span id="addon-license-').concat(a.escapeHtmlForIdClass(this.id),'" class="addon-settings-license" \n            data-license-href="').concat(this.licenseUrl,'" data-id="').concat(a.escapeHtmlForIdClass(this.id),'">\n            (').concat(o.getMessage("license"),')\n          </span>\n        </div>\n        <div class="addon-settings-controls">\n          <button id="addon-config-').concat(a.escapeHtmlForIdClass(this.id),'"\n            class="text-button addon-settings-config ').concat(n,'"\n            data-l10n-id="addon-configure">\n          </button>\n          <button id="addon-update-').concat(a.escapeHtmlForIdClass(this.id),'"\n            class="text-button addon-settings-update hidden"\n            data-l10n-id="addon-update">\n          </button>\n          <span class="addon-settings-spacer"></span>\n          <button id="addon-remove-').concat(a.escapeHtmlForIdClass(this.id),'"\n            class="text-button addon-settings-remove"\n            data-l10n-id="addon-remove">\n          </button>\n          <button id="addon-toggle-').concat(a.escapeHtmlForIdClass(this.id),'"\n            class="text-button ').concat(t,'">\n            ').concat(e,"\n          </button>\n        </div>\n      </li>")}},{key:"render",value:function(){this.container.insertAdjacentHTML("beforeend",this.view()),document.getElementById("addon-config-".concat(a.escapeHtmlForIdClass(this.id))).addEventListener("click",this.handleConfig.bind(this)),document.getElementById("addon-update-".concat(a.escapeHtmlForIdClass(this.id))).addEventListener("click",this.handleUpdate.bind(this)),document.getElementById("addon-remove-".concat(a.escapeHtmlForIdClass(this.id))).addEventListener("click",this.handleRemove.bind(this)),document.getElementById("addon-toggle-".concat(a.escapeHtmlForIdClass(this.id))).addEventListener("click",this.handleToggle.bind(this)),document.getElementById("addon-license-".concat(a.escapeHtmlForIdClass(this.id))).addEventListener("click",this.handleLicense.bind(this))}},{key:"setUpdateAvailable",value:function(e,t,n){this.updateUrl=e,this.updateVersion=t,this.updateChecksum=n,document.getElementById("addon-update-".concat(a.escapeHtmlForIdClass(this.id))).classList.remove("hidden")}},{key:"handleConfig",value:function(){s("/settings/addons/config/".concat(this.id))}},{key:"handleUpdate",value:function(e){var t=this,n=e.target.parentNode,r=document.querySelector("#addon-item-".concat(a.escapeHtmlForIdClass(this.id)," ")+".addon-settings-version"),s=document.createElement("span");s.classList.add("addon-updating"),s.innerText=o.getMessage("addon-updating"),n.replaceChild(s,e.target),i.updateAddon(this.id,this.updateUrl,this.updateChecksum).then((function(e){t.version=t.updateVersion,t.installedAddonsMap.get(t.id).version=t.version,r.innerText=t.version,s.innerText=o.getMessage("addon-updated"),e.content_scripts&&e.content_scripts.length>0&&e.enabled&&window.location.reload()})).catch((function(e){console.error("Failed to update add-on: ".concat(t.id,"\n").concat(e)),s.innerText=o.getMessage("addon-update-failed")}))}},{key:"handleRemove",value:function(e){var t=this,n=e.target;n.disabled=!0,i.uninstallAddon(this.id).then((function(){var e=document.getElementById("addon-item-".concat(a.escapeHtmlForIdClass(t.id)));e.parentNode.removeChild(e),t.installedAddonsMap.delete(t.id);var n=t.availableAddonsMap.get(t.id);n&&(n.installed=!1),t.metadata.content_scripts&&t.metadata.content_scripts.length>0&&t.enabled&&window.location.reload()})).catch((function(e){console.error("Failed to uninstall add-on: ".concat(t.id,"\n").concat(e)),n.disabled=!1}))}},{key:"handleToggle",value:function(e){var t=this,n=e.target,r=!this.enabled;n.disabled=!0,i.setAddonSetting(this.id,r).then((function(){t.enabled=r,t.installedAddonsMap.get(t.id).enabled=r,t.enabled?(n.innerText=o.getMessage("disable"),n.classList.remove("addon-settings-enable"),n.classList.add("addon-settings-disable")):(n.innerText=o.getMessage("enable"),n.classList.remove("addon-settings-disable"),n.classList.add("addon-settings-enable")),n.disabled=!1})).catch((function(e){console.error("Failed to toggle add-on: ".concat(t.id,"\n").concat(e)),n.disabled=!1}))}},{key:"handleLicense",value:function(e){e.target.dataset.id&&i.getAddonsInfo().then((function(t){var n="".concat(t.urls[0],"/license/").concat(e.target.dataset.id),r=document.getElementById("media-modal");if(null==r){var i=document.createElement("div");i.className="media-modal",i.id="media-modal";var a=document.createElement("div");a.className="media-modal-frame",a.innerHTML='<div class="media-modal-close" \n            id="modal-close-button"></div>\n            <div class="media-modal-content">\n            <p id="media-modal-text"></p></div>',i.appendChild(a),document.body.appendChild(i),document.getElementById("modal-close-button").addEventListener("click",(function(){(r=document.getElementById("media-modal")).parentNode.removeChild(r)})),fetch(n).then((function(e){return e.text()})).then((function(e){document.getElementById("media-modal-text").innerText=e})).catch((function(){document.getElementById("media-modal-text").innerText=o.getMessage("failed-read-file")}))}}))}}])&&r(t.prototype,n),c&&r(t,c),e}();e.exports=c},function(e,t,n){"use strict";const r=e=>e&&e.includeBoundaries?"(?:(?<=\\s|^)(?=[a-fA-F\\d:])|(?<=[a-fA-F\\d:])(?=\\s|$))":"",i="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",o="[a-fA-F\\d]{1,4}",a=`\n(\n(?:${o}:){7}(?:${o}|:)|                                // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${o}:){6}(?:${i}|:${o}|:)|                         // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${o}:){5}(?::${i}|(:${o}){1,2}|:)|                 // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${o}:){4}(?:(:${o}){0,1}:${i}|(:${o}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${o}:){3}(?:(:${o}){0,2}:${i}|(:${o}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${o}:){2}(?:(:${o}){0,3}:${i}|(:${o}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${o}:){1}(?:(:${o}){0,4}:${i}|(:${o}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::((?::${o}){0,5}:${i}|(?::${o}){1,7}|:))           // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(%[0-9a-zA-Z]{1,})?                                           // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=e=>e&&e.exact?new RegExp(`(?:^${i}$)|(?:^${a}$)`):new RegExp(`(?:${r(e)}${i}${r(e)})|(?:${r(e)}${a}${r(e)})`,"g");s.v4=e=>e&&e.exact?new RegExp(`^${i}$`):new RegExp(`${r(e)}${i}${r(e)}`,"g"),s.v6=e=>e&&e.exact?new RegExp(`^${a}$`):new RegExp(`${r(e)}${a}${r(e)}`,"g"),e.exports=s},function(e,t,n){function r(e){this.mode=o.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,n=this.data.length;t<n;t++){var r=[],i=this.data.charCodeAt(t);i>65536?(r[0]=240|(1835008&i)>>>18,r[1]=128|(258048&i)>>>12,r[2]=128|(4032&i)>>>6,r[3]=128|63&i):i>2048?(r[0]=224|(61440&i)>>>12,r[1]=128|(4032&i)>>>6,r[2]=128|63&i):i>128?(r[0]=192|(1984&i)>>>6,r[1]=128|63&i):r[0]=i,this.parsedData.push(r)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function i(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}r.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,n=this.parsedData.length;t<n;t++)e.put(this.parsedData[t],8)}},i.prototype={addData:function(e){var t=new r(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[n][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=i.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var r=-1;r<=7;r++)t+r<=-1||this.moduleCount<=t+r||(this.modules[e+n][t+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=y.getLostPoint(this);(0==n||e>r)&&(e=r,t=n)}return t},createMovieClip:function(e,t,n){var r=e.createEmptyMovieClip(t,n);this.make();for(var i=0;i<this.modules.length;i++)for(var o=1*i,a=0;a<this.modules[i].length;a++){var s=1*a;this.modules[i][a]&&(r.beginFill(0,100),r.moveTo(s,o),r.lineTo(s+1,o),r.lineTo(s+1,o+1),r.lineTo(s,o+1),r.endFill())}return r},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=y.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var r=e[t],i=e[n];if(null==this.modules[r][i])for(var o=-2;o<=2;o++)for(var a=-2;a<=2;a++)this.modules[r+o][i+a]=-2==o||2==o||-2==a||2==a||0==o&&0==a}},setupTypeNumber:function(e){for(var t=y.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(n=0;n<18;n++){r=!e&&1==(t>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,r=y.getBCHTypeInfo(n),i=0;i<15;i++){var o=!e&&1==(r>>i&1);i<6?this.modules[i][8]=o:i<8?this.modules[i+1][8]=o:this.modules[this.moduleCount-15+i][8]=o}for(i=0;i<15;i++){o=!e&&1==(r>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=o:i<9?this.modules[8][15-i-1+1]=o:this.modules[8][15-i-1]=o}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,r=this.moduleCount-1,i=7,o=0,a=this.moduleCount-1;a>0;a-=2)for(6==a&&a--;;){for(var s=0;s<2;s++)if(null==this.modules[r][a-s]){var c=!1;o<e.length&&(c=1==(e[o]>>>i&1)),y.getMask(t,r,a-s)&&(c=!c),this.modules[r][a-s]=c,-1==--i&&(o++,i=7)}if((r+=n)<0||this.moduleCount<=r){r-=n,n=-n;break}}}},i.PAD0=236,i.PAD1=17,i.createData=function(e,t,n){for(var r=_.getRSBlocks(e,t),o=new k,a=0;a<n.length;a++){var s=n[a];o.put(s.mode,4),o.put(s.getLength(),y.getLengthInBits(s.mode,e)),s.write(o)}var c=0;for(a=0;a<r.length;a++)c+=r[a].dataCount;if(o.getLengthInBits()>8*c)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*c+")");for(o.getLengthInBits()+4<=8*c&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*c||(o.put(i.PAD0,8),o.getLengthInBits()>=8*c));)o.put(i.PAD1,8);return i.createBytes(o,r)},i.createBytes=function(e,t){for(var n=0,r=0,i=0,o=new Array(t.length),a=new Array(t.length),s=0;s<t.length;s++){var c=t[s].dataCount,u=t[s].totalCount-c;r=Math.max(r,c),i=Math.max(i,u),o[s]=new Array(c);for(var l=0;l<o[s].length;l++)o[s][l]=255&e.buffer[l+n];n+=c;var h=y.getErrorCorrectPolynomial(u),f=new E(o[s],h.getLength()-1).mod(h);a[s]=new Array(h.getLength()-1);for(l=0;l<a[s].length;l++){var d=l+f.getLength()-a[s].length;a[s][l]=d>=0?f.get(d):0}}var p=0;for(l=0;l<t.length;l++)p+=t[l].totalCount;var m=new Array(p),v=0;for(l=0;l<r;l++)for(s=0;s<t.length;s++)l<o[s].length&&(m[v++]=o[s][l]);for(l=0;l<i;l++)for(s=0;s<t.length;s++)l<a[s].length&&(m[v++]=a[s][l]);return m};for(var o={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},a=1,s=0,c=3,u=2,l=0,h=1,f=2,d=3,p=4,m=5,v=6,g=7,y={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;y.getBCHDigit(t)-y.getBCHDigit(y.G15)>=0;)t^=y.G15<<y.getBCHDigit(t)-y.getBCHDigit(y.G15);return(e<<10|t)^y.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;y.getBCHDigit(t)-y.getBCHDigit(y.G18)>=0;)t^=y.G18<<y.getBCHDigit(t)-y.getBCHDigit(y.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return y.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case l:return(t+n)%2==0;case h:return t%2==0;case f:return n%3==0;case d:return(t+n)%3==0;case p:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case m:return t*n%2+t*n%3==0;case v:return(t*n%2+t*n%3)%2==0;case g:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new E([1],0),n=0;n<e;n++)t=t.multiply(new E([1,b.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case o.MODE_NUMBER:return 10;case o.MODE_ALPHA_NUM:return 9;case o.MODE_8BIT_BYTE:case o.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case o.MODE_NUMBER:return 12;case o.MODE_ALPHA_NUM:return 11;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case o.MODE_NUMBER:return 14;case o.MODE_ALPHA_NUM:return 13;case o.MODE_8BIT_BYTE:return 16;case o.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r++)for(var i=0;i<t;i++){for(var o=0,a=e.isDark(r,i),s=-1;s<=1;s++)if(!(r+s<0||t<=r+s))for(var c=-1;c<=1;c++)i+c<0||t<=i+c||0==s&&0==c||a==e.isDark(r+s,i+c)&&o++;o>5&&(n+=3+o-5)}for(r=0;r<t-1;r++)for(i=0;i<t-1;i++){var u=0;e.isDark(r,i)&&u++,e.isDark(r+1,i)&&u++,e.isDark(r,i+1)&&u++,e.isDark(r+1,i+1)&&u++,0!=u&&4!=u||(n+=3)}for(r=0;r<t;r++)for(i=0;i<t-6;i++)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(n+=40);for(i=0;i<t;i++)for(r=0;r<t-6;r++)e.isDark(r,i)&&!e.isDark(r+1,i)&&e.isDark(r+2,i)&&e.isDark(r+3,i)&&e.isDark(r+4,i)&&!e.isDark(r+5,i)&&e.isDark(r+6,i)&&(n+=40);var l=0;for(i=0;i<t;i++)for(r=0;r<t;r++)e.isDark(r,i)&&l++;return n+=10*(Math.abs(100*l/t/t-50)/5)}},b={glog:function(e){if(e<1)throw new Error("glog("+e+")");return b.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return b.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},w=0;w<8;w++)b.EXP_TABLE[w]=1<<w;for(w=8;w<256;w++)b.EXP_TABLE[w]=b.EXP_TABLE[w-4]^b.EXP_TABLE[w-5]^b.EXP_TABLE[w-6]^b.EXP_TABLE[w-8];for(w=0;w<255;w++)b.LOG_TABLE[b.EXP_TABLE[w]]=w;function E(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var r=0;r<e.length-n;r++)this.num[r]=e[r+n]}function _(e,t){this.totalCount=e,this.dataCount=t}function k(){this.buffer=[],this.length=0}E.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<e.getLength();r++)t[n+r]^=b.gexp(b.glog(this.get(n))+b.glog(e.get(r)));return new E(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=b.glog(this.get(0))-b.glog(e.get(0)),n=new Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(r=0;r<e.getLength();r++)n[r]^=b.gexp(b.glog(e.get(r))+t);return new E(n,0).mod(e)}},_.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],_.getRSBlocks=function(e,t){var n=_.getRsBlockTable(e,t);if(null==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var r=n.length/3,i=[],o=0;o<r;o++)for(var a=n[3*o+0],s=n[3*o+1],c=n[3*o+2],u=0;u<a;u++)i.push(new _(s,c));return i},_.getRsBlockTable=function(e,t){switch(t){case a:return _.RS_BLOCK_TABLE[4*(e-1)+0];case s:return _.RS_BLOCK_TABLE[4*(e-1)+1];case c:return _.RS_BLOCK_TABLE[4*(e-1)+2];case u:return _.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},k.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var S=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function x(e){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M"},"string"==typeof e&&(e={content:e}),e)for(var t in e)this.options[t]=e[t];if("string"!=typeof this.options.content)throw new Error("Expected 'content' as string!");if(0===this.options.content.length)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0&&this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");var n=this.options.content,r=function(e,t){for(var n=function(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)}(e),r=1,i=0,o=0,a=S.length;o<=a;o++){var s=S[o];if(!s)throw new Error("Content too long: expected "+i+" but got "+n);switch(t){case"L":i=s[0];break;case"M":i=s[1];break;case"Q":i=s[2];break;case"H":i=s[3];break;default:throw new Error("Unknwon error correction level: "+t)}if(n<=i)break;r++}if(r>S.length)throw new Error("Content too long");return r}(n,this.options.ecl),o=function(e){switch(e){case"L":return a;case"M":return s;case"Q":return c;case"H":return u;default:throw new Error("Unknwon error correction level: "+e)}}(this.options.ecl);this.qrcode=new i(r,o),this.qrcode.addData(n),this.qrcode.make()}x.prototype.svg=function(e){var t=this.options||{},n=this.qrcode.modules;void 0===e&&(e={container:t.container||"svg"});for(var r=void 0===t.pretty||!!t.pretty,i=r?"  ":"",o=r?"\r\n":"",a=t.width,s=t.height,c=n.length,u=a/(c+2*t.padding),l=s/(c+2*t.padding),h=void 0!==t.join&&!!t.join,f=void 0!==t.swap&&!!t.swap,d=void 0===t.xmlDeclaration||!!t.xmlDeclaration,p=void 0!==t.predefined&&!!t.predefined,m=p?i+'<defs><path id="qrmodule" d="M0 0 h'+l+" v"+u+' H0 z" style="fill:'+t.color+';shape-rendering:crispEdges;" /></defs>'+o:"",v=i+'<rect x="0" y="0" width="'+a+'" height="'+s+'" style="fill:'+t.background+';shape-rendering:crispEdges;"/>'+o,g="",y="",b=0;b<c;b++)for(var w=0;w<c;w++){if(n[w][b]){var E=w*u+t.padding*u,_=b*l+t.padding*l;if(f){var k=E;E=_,_=k}if(h){var S=u+E,x=l+_;E=Number.isInteger(E)?Number(E):E.toFixed(2),_=Number.isInteger(_)?Number(_):_.toFixed(2),S=Number.isInteger(S)?Number(S):S.toFixed(2),y+="M"+E+","+_+" V"+(x=Number.isInteger(x)?Number(x):x.toFixed(2))+" H"+S+" V"+_+" H"+E+" Z "}else g+=p?i+'<use x="'+E.toString()+'" y="'+_.toString()+'" href="#qrmodule" />'+o:i+'<rect x="'+E.toString()+'" y="'+_.toString()+'" width="'+u+'" height="'+l+'" style="fill:'+t.color+';shape-rendering:crispEdges;"/>'+o}}h&&(g=i+'<path x="0" y="0" style="fill:'+t.color+';shape-rendering:crispEdges;" d="'+y+'" />');var T="";switch(e.container){case"svg":d&&(T+='<?xml version="1.0" standalone="yes"?>'+o),T+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+a+'" height="'+s+'">'+o,T+=m+v+g,T+="</svg>";break;case"svg-viewbox":d&&(T+='<?xml version="1.0" standalone="yes"?>'+o),T+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+a+" "+s+'">'+o,T+=m+v+g,T+="</svg>";break;case"g":T+='<g width="'+a+'" height="'+s+'">'+o,T+=m+v+g,T+="</g>";break;default:T+=(m+v+g).replace(/^\s+/,"")}return T},x.prototype.save=function(e,t){var r=this.svg();"function"!=typeof t&&(t=function(e,t){});try{n(375).writeFile(e,r,t)}catch(e){t(e)}},e.exports=x},function(e,t){},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9);var i=n(35),o=n(142),a=n(22),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.email=t.email,this.name=t.name,this.id=t.id,this.loggedIn=t.loggedIn,this.container=document.getElementById("users-list"),this.render()}var t,n,s;return t=e,(n=[{key:"view",value:function(){return'\n      <li id="user-item-'.concat(a.escapeHtml(this.id),'" class="user-item">\n        <div class="user-settings-header">\n          <span class="user-settings-name">').concat(a.escapeHtml(this.name),'</span>\n          <span class="user-settings-description">\n            ').concat(a.escapeHtml(this.email),'\n          </span>\n        </div>\n        <div class="user-settings-controls">\n          <button id="user-remove-').concat(a.escapeHtml(this.id),'"\n            class="text-button user-settings-remove"\n            data-l10n-id="remove">\n          </button>\n          <button id="user-edit-').concat(a.escapeHtml(this.id),'"\n            class="text-button user-settings-edit"\n            data-l10n-id="edit">\n          </button>\n        </div>\n      </li>')}},{key:"render",value:function(){this.container.insertAdjacentHTML("beforeend",this.view()),document.getElementById("user-remove-".concat(a.escapeHtml(this.id))).addEventListener("click",this.handleRemove.bind(this)),document.getElementById("user-edit-".concat(a.escapeHtml(this.id))).addEventListener("click",this.handleEdit.bind(this))}},{key:"handleRemove",value:function(e){var t=this,n=e.target;n.disabled=!0,i.deleteUser(this.id).then((function(){var e=document.getElementById("user-item-".concat(a.escapeHtml(t.id)));e.parentNode.removeChild(e),t.loggedIn&&i.logout().then((function(){window.location.href="/login"}))})).catch((function(e){console.error("Failed to delete user: ".concat(t.email,"\n").concat(e)),n.disabled=!1}))}},{key:"handleEdit",value:function(){o("/settings/users/edit/".concat(encodeURIComponent(this.id)))}}])&&r(t.prototype,n),s&&r(t,s),e}();e.exports=s},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9);var i=n(22),o=n(142),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ssid=t.ssid,this.encryption=t.encryption,this.quality=t.quality,this.configured=t.configured,this.connected=t.connected,this.container=document.getElementById("network-settings-wifi-network-list"),this.render()}var t,n,a;return t=e,(n=[{key:"view",value:function(){var e="",t="";this.configured&&(e="configured",t=this.connected?'<div class="wireless-network-info-connected" data-l10n-id="wireless-connected"></div>':'<div class="wireless-network-info-disconnected" data-l10n-id="wireless-connected"></div>');var n="/images/".concat(this.encryption?"wifi-secure":"wifi",".svg");return'<li class="wireless-network-item">\n        <div class="wireless-network-info '.concat(e,'">\n          <div class="wireless-network-info-ssid">\n            ').concat(i.escapeHtml(this.ssid),"\n          </div>\n          ").concat(t,'\n        </div>\n        <img class="wireless-network-icon" src="').concat(n,'" data-l10n-id="wireless-icon">\n      </li>')}},{key:"render",value:function(){var e=this,t=document.createElement("ul");t.innerHTML=this.view();var n=t.firstChild;n.addEventListener("click",(function(){document.getElementById("network-settings-wifi-ssid").value=e.ssid,o("/settings/network/wifi/configure")})),this.container.appendChild(n)}}])&&r(t.prototype,n),a&&r(t,a),e}();e.exports=a},function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(36),n(37),n(9),n(44),n(23),n(145),n(379),n(43),n(148),n(160),n(3),n(5),n(33),n(146);var a=n(141),s=n(149),c=n(120),u=n(22),l=function(){function e(t,n){var i=this;for(var o in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.limit=100,this.href=new URL(n.href,a.ORIGIN),this.model=t,this.schema={},n.events){this.schema[o]={};var c=n.events[o];if("object"===c.type)for(var u=0,l=Array.from(Object.keys(c.properties));u<l.length;u++){var h=l[u];this.schema[o][h]=c.properties[h]}else this.schema[o].data=c}this.container=document.getElementById("things"),this.element=this.render();var f,d=t.events,p=r(d=d.map((function(e){var t=Object.keys(e)[0],n=new Date(e[t].timestamp);return Object.assign(e[t],{name:t,timestamp:n})})).sort((function(e,t){return t.timestamp-e.timestamp})).slice(0,this.limit).reverse());try{for(p.s();!(f=p.n()).done;){var m=f.value;this.prependEvent(m)}}catch(e){p.e(e)}finally{p.f()}this.onEvent=this.onEvent.bind(this),this.model.subscribe(s.EVENT_OCCURRED,this.onEvent),setInterval((function(){return i.updateTimestamps()}),1e4)}var t,n,i;return t=e,(n=[{key:"onEvent",value:function(e){var t,n=r(Object.keys(e).map((function(t){var n=new Date(e[t].timestamp);return Object.assign(e[t],{name:t,timestamp:n})})).sort((function(e,t){return e.timestamp-t.timestamp})));try{for(n.s();!(t=n.n()).done;){var i=t.value;this.prependEvent(i)}}catch(e){n.e(e)}finally{n.f()}}},{key:"cleanup",value:function(){this.model.unsubscribe(s.EVENT_OCCURRED,this.onEvent)}},{key:"render",value:function(){var e=document.createElement("div");return e.innerHTML='<ul class="event-list"></ul>',this.container.appendChild(e.firstChild)}},{key:"prependEvent",value:function(e){if(this.schema.hasOwnProperty(e.name)){var t=this.schema[e.name],n="",i=e.data;if(null!==i){("object"!=typeof i||Array.isArray(i))&&(i={data:i});var o,a=r(Array.from(Object.keys(i)).sort());try{for(a.s();!(o=a.n()).done;){var s=o.value;if(t.hasOwnProperty(s)){var l=c.convert(i[s],t[s].unit),h=l.value,f=l.unit;switch(t[s].type){case"number":case"integer":n+="".concat(u.escapeHtml(s),": ").concat(u.escapeHtml(h)),f&&(n+=" ".concat(c.nameToAbbreviation(f)));break;case"object":case"array":h=JSON.stringify(h);case"boolean":case"string":default:n+="".concat(u.escapeHtml(s),": ").concat(u.escapeHtml(h))}n+="<br>"}}}catch(e){a.e(e)}finally{a.f()}n=n.substring(0,n.length-4)}var d=document.createElement("div"),p='<li class="event-item">\n      <div class="event-header">\n        <span class="event-name">'.concat(u.escapeHtml(e.name),'</span>\n        <span class="event-time" data-original="').concat(e.timestamp.toISOString(),'"\n              title="').concat(e.timestamp.toLocaleString(),'">\n          ').concat(u.fuzzyTime(e.timestamp),'\n        </span>\n      </div>\n      <div class="event-body">').concat(n,"</div>\n    </li>");for(d.innerHTML=p;this.element.childNodes.length>=this.limit;)this.element.removeChild(this.element.lastChild);this.element.insertBefore(d.firstChild,this.element.firstChild)}}},{key:"updateTimestamps",value:function(){var e,t=r(this.element.querySelectorAll(".event-time"));try{for(t.s();!(e=t.n()).done;){var n=e.value;n.innerText=u.fuzzyTime(new Date(n.dataset.original))}}catch(e){t.e(e)}finally{t.f()}}}])&&o(t.prototype,n),i&&o(t,i),e}();e.exports=l},function(e,t,n){"use strict";var r=n(8),i=n(40),o=[].reverse,a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),o.call(this)}})},function(e,t,n){"use strict";function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(36),n(37),n(44),n(78),n(23),n(43),n(3),n(5),n(150),n(33),n(146);var o=n(35),a=n(141),s=n(175),c=n(142),u=n(22),l=n(19),h={init:function(){this.element=document.getElementById("context-menu"),this.editContent=document.getElementById("context-menu-content-edit"),this.removeContent=document.getElementById("context-menu-content-remove"),this.backButton=document.getElementById("context-menu-back-button"),this.headingIcon=document.getElementById("context-menu-heading-icon"),this.headingCustomIcon=document.getElementById("context-menu-heading-custom-icon"),this.headingText=document.getElementById("context-menu-heading-text"),this.saveButton=document.getElementById("edit-thing-save-button"),this.thingIcon=document.getElementById("edit-thing-icon"),this.titleInput=document.getElementById("edit-thing-title"),this.thingType=document.getElementById("edit-thing-type"),this.customIcon=document.getElementById("edit-thing-custom-icon"),this.customIconInput=document.getElementById("edit-thing-custom-icon-input"),this.customIconLabel=document.getElementById("edit-thing-custom-icon-label"),this.label=document.getElementById("edit-thing-label"),this.removeButton=document.getElementById("remove-thing-button"),this.logoutForm=document.getElementById("logout"),this.thingId="",window.addEventListener("_contextmenu",this.show.bind(this)),this.backButton.addEventListener("click",this.hide.bind(this)),this.saveButton.addEventListener("click",this.handleEdit.bind(this)),this.removeButton.addEventListener("click",this.handleRemove.bind(this)),this.logoutForm.addEventListener("submit",(function(e){e.preventDefault(),o.logout().then((function(){window.location.href="/login"}))})),this.thingType.addEventListener("change",this.handleTypeChange.bind(this)),this.customIconInput.addEventListener("change",this.handleIconUpload.bind(this))},show:function(e){switch(this.iconData=null,this.customIcon.iconHref="",e.detail.iconHref?(this.headingCustomIcon.classList.remove("hidden"),this.headingCustomIcon.iconHref=e.detail.iconHref,this.headingIcon.classList.add("custom-thing"),this.headingIcon.style.backgroundImage="",this.customIcon.iconHref=e.detail.iconHref):(this.headingCustomIcon.classList.add("hidden"),this.headingIcon.classList.remove("custom-thing"),this.headingIcon.style.backgroundImage='url("'.concat(e.detail.thingIcon,'")'),this.customIcon.iconHref=""),this.headingText.textContent=e.detail.thingTitle,this.thingId=e.detail.thingId,this.element.classList.remove("hidden"),this.editContent.classList.add("hidden"),this.removeContent.classList.add("hidden"),e.detail.action){case"edit":this.thingType.disabled=!1,this.titleInput.disabled=!1,this.saveButton.disabled=!1,this.customIconInput.disabled=!1,this.titleInput.value=e.detail.thingTitle,this.thingType.innerHTML="",e.detail.selectedCapability&&"Custom"!==e.detail.selectedCapability?(this.thingIcon.classList.remove("custom-thing"),this.thingIcon.style.backgroundImage='url("'.concat(e.detail.thingIcon,'")'),this.customIconLabel.classList.add("hidden"),this.customIcon.classList.add("hidden")):(this.thingIcon.classList.add("custom-thing"),this.thingIcon.style.backgroundImage="",this.customIconLabel.classList.remove("hidden"),this.customIcon.classList.remove("hidden"));var t=u.sortCapabilities(e.detail.capabilities);t.push("Custom");var n,i=r(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=document.createElement("option");a.value=o,(e.detail.selectedCapability===o||"Custom"===o&&!e.detail.selectedCapability)&&(a.selected=!0),a.innerText=l.getMessageStrict(o)||o,this.thingType.appendChild(a)}}catch(e){i.e(e)}finally{i.f()}this.editContent.classList.remove("hidden");break;case"remove":this.removeContent.classList.remove("hidden")}},hide:function(){this.element.classList.add("hidden"),this.headingIcon.classList.remove("hidden"),this.headingCustomIcon.classList.add("hidden"),this.headingText.textContent="",this.thingId=""},handleTypeChange:function(){var e=this.thingType.options[this.thingType.selectedIndex].value;this.customIconLabel.classList.add("hidden"),this.customIcon.classList.add("hidden");var t="";"Custom"===e?(this.customIconLabel.classList.remove("hidden"),this.customIcon.classList.remove("hidden")):s.capabilityHasIcon(e)&&(t=s.capabilityToIcon(e)),t?(this.thingIcon.classList.remove("custom-thing"),this.thingIcon.style.backgroundImage='url("'.concat(t,'")')):(this.thingIcon.classList.add("custom-thing"),this.thingIcon.style.backgroundImage="")},handleIconUpload:function(){var e=this;if(this.label.classList.add("hidden"),0!==this.customIconInput.files.length){var t=this.customIconInput.files[0];if(!["image/jpeg","image/png","image/svg+xml"].includes(t.type))return this.label.innerText=l.getMessage("invalid-file"),this.label.classList.add("error"),void this.label.classList.remove("hidden");var n=new FileReader;n.onloadend=function(n){if(n.target.error)return console.error(n.target.error),e.label.innerText=l.getMessage("failed-read-file"),e.label.classList.add("error"),e.label.classList.remove("hidden"),void(e.saveButton.disabled=!1);e.iconData={mime:t.type,data:btoa(n.target.result)},e.saveButton.disabled=!1,e.customIcon.iconHref=URL.createObjectURL(t),e.customIcon.classList.remove("hidden")},this.saveButton.disabled=!0,n.readAsBinaryString(t)}},handleEdit:function(){var e=this;this.thingType.disabled=!0,this.titleInput.disabled=!0,this.saveButton.disabled=!0,this.customIconInput.disabled=!0;var t=this.titleInput.value.trim();if(0!==t.length){var n;this.thingType.options.length>0&&(n=this.thingType.options[this.thingType.selectedIndex].value);var r={title:t,selectedCapability:n};"Custom"===n&&this.iconData&&(r.iconData=this.iconData),a.gatewayModel.updateThing(this.thingId,r).then((function(){e.hide(),e.saveButton.disabled=!1})).catch((function(t){console.error("Error updating thing: ".concat(t)),e.label.innerText=l.getMessage("failed-save"),e.label.classList.add("error"),e.label.classList.remove("hidden"),e.thingType.disabled=!1,e.titleInput.disabled=!1,e.saveButton.disabled=!1,e.customIconInput.disabled=!1}))}},handleRemove:function(){var e=this;a.gatewayModel.removeThing(this.thingId).then((function(){c("/things"),e.hide()})).catch((function(t){console.error("Error removing thing: ".concat(t)),e.hide()}))}};e.exports=h},function(e,t,n){"use strict";n(9),n(139),n(23),n(3),n(105),n(45),n(140),n(33),n(146);var r=n(142),i=n(35),o=n(141),a=n(149),s=n(173).createThingFromCapability,c={ORIGIN_X:6,ORIGIN_Y:7,MAX_X:100,MAX_Y:100,THING_GAP:11,init:function(){this.things=[],this.view=document.getElementById("floorplan-view"),this.floorplan=document.getElementById("floorplan"),this.backButton=document.getElementById("back-button"),this.menuButton=document.getElementById("menu-button"),this.editButton=document.getElementById("floorplan-edit-button"),this.doneButton=document.getElementById("floorplan-done-button"),this.floorplanBackButton=document.getElementById("floorplan-back-button"),this.uploadForm=document.getElementById("floorplan-upload-form"),this.uploadButton=document.getElementById("floorplan-upload-button"),this.fileInput=document.getElementById("floorplan-file-input"),this.thingsElement=this.floorplan,this.updateVminRequest=null,this.vmin=1,this.onResize=this.onResize.bind(this),this.updateVmin=this.updateVmin.bind(this),this.interactTimeout=null,this.onPointerDown=this.onPointerDown.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.selectThing=this.selectThing.bind(this),this.moveThing=this.moveThing.bind(this),this.deselectThing=this.deselectThing.bind(this),this.editButton.addEventListener("click",this.edit.bind(this)),this.doneButton.addEventListener("click",this.done.bind(this)),this.floorplanBackButton.addEventListener("click",this.done.bind(this)),this.uploadButton.addEventListener("click",this.requestFile.bind(this)),this.uploadForm.addEventListener("submit",this.blackHole),this.fileInput.addEventListener("change",this.upload.bind(this)),this.refreshThings=this.refreshThings.bind(this),this.things=[]},refreshThings:function(e){var t=this;if(!this.view.classList.contains("edit")){for(var n;void 0!==(n=this.things.pop());)this.removeInteract(n),n.cleanup();if(this.thingsElement.innerHTML="",0!==e.length){var r=this.ORIGIN_X,i=this.ORIGIN_Y;e.forEach((function(e,n){o.gatewayModel.getThingModel(n).then((function(n){e.floorplanX&&e.floorplanY||(e.floorplanX=r,e.floorplanY=i,(r+=t.THING_GAP)>t.MAX_X&&(r=t.ORIGIN_X,i+=t.THING_GAP),i>t.MAX_Y&&(i=t.ORIGIN_Y));var o=a.ThingFormat.LINK_ICON,c=s(e.selectedCapability,n,e,o);c.element.dataset.index=t.things.length,t.addInteract(c),t.things.push(c),t.updateVmin()}))}))}}},addInteract:function(e){e.element.addEventListener("click",this.blackHole),e.element.addEventListener("mousedown",this.onPointerDown),e.element.addEventListener("mouseup",this.onPointerUp),e.element.addEventListener("touchstart",this.onPointerDown),e.element.addEventListener("touchend",this.onPointerUp)},removeInteract:function(e){e.element.removeEventListener("click",this.blackHole),e.element.removeEventListener("mousedown",this.onPointerDown),e.element.removeEventListener("mouseup",this.onPointerUp),e.element.removeEventListener("touchstart",this.onPointerDown),e.element.removeEventListener("touchend",this.onPointerUp)},show:function(){window.addEventListener("resize",this.onResize),this.backButton.classList.add("hidden"),this.menuButton.classList.remove("hidden"),o.gatewayModel.subscribe(a.DELETE_THINGS,this.refreshThings),o.gatewayModel.subscribe(a.REFRESH_THINGS,this.refreshThings,!0)},edit:function(){var e=this;this.view.classList.add("edit"),this.editButton.classList.add("hidden"),this.doneButton.classList.remove("hidden"),this.uploadForm.classList.remove("hidden"),this.thingsElement.classList.add("editing"),this.things.forEach((function(t){t.element.addEventListener("click",e.blackHole),t.element.addEventListener("mousedown",e.selectThing),t.element.addEventListener("touchstart",e.selectThing)}),this),this.pointerOffsetX=0,this.pointerOffsetY=0,this.thingsElement.addEventListener("mousemove",this.moveThing),this.thingsElement.addEventListener("mouseup",this.deselectThing),this.thingsElement.addEventListener("touchmove",this.moveThing),this.thingsElement.addEventListener("touchend",this.deselectThing)},done:function(){var e=this;this.view.classList.remove("edit"),this.doneButton.classList.add("hidden"),this.editButton.classList.remove("hidden"),this.uploadForm.classList.add("hidden"),this.thingsElement.classList.remove("editing"),this.things.forEach((function(t){t.element.removeEventListener("click",e.blackHole),t.element.removeEventListener("mousedown",e.selectThing),t.element.removeEventListener("touchstart",e.selectThing)}),this),this.thingsElement.removeEventListener("mousemove",this.moveThing),this.thingsElement.removeEventListener("mouseup",this.deselectThing),this.thingsElement.removeEventListener("touchmove",this.moveThing),this.thingsElement.removeEventListener("touchend",this.deselectThing)},requestFile:function(){this.fileInput.click()},upload:function(e){var t=this;this.uploadButton.classList.add("loading"),i.uploadFloorplan(e.target.files[0]).then((function(){t.uploadButton.classList.remove("loading"),i.loadImage("/uploads/floorplan.svg").then((function(e){t.floorplan.style.backgroundImage="url(".concat(URL.createObjectURL(e),")")}))})).catch((function(e){t.uploadButton.classList.remove("loading"),console.error("Failed to upload floorplan ".concat(e))}))},onResize:function(){this.view.classList.contains("selected")?this.updateVminRequest||(this.updateVminRequest=window.requestAnimationFrame(this.updateVmin)):window.removeEventListener("resize",this.onResize)},updateVmin:function(){var e=this;this.updateVminRequest=null;var t=Math.min(window.innerWidth,window.innerHeight)/100;this.vmin=t,this.things.forEach((function(t){var n=t.element;n.style.transform=e.makeTransform(parseFloat(n.dataset.x),parseFloat(n.dataset.y))}))},screenToRelVmin:function(e){var t=this.thingsElement.getBoundingClientRect();return{x:(e.x-t.left)/this.vmin,y:(e.y-t.right)/this.vmin}},selectThing:function(e){e.preventDefault(),this.selectedThing=e.currentTarget;var t={x:e.clientX||e.touches[0].clientX,y:e.clientY||e.touches[0].clientY},n=this.screenToRelVmin(t);this.pointerOffsetX=n.x-parseFloat(this.selectedThing.dataset.x),this.pointerOffsetY=n.y-parseFloat(this.selectedThing.dataset.y),this.selectedThing.style.cursor="grabbing"},deselectThing:function(){if(this.selectedThing){var e=this.selectedThing,t=parseFloat(e.dataset.x),n=parseFloat(e.dataset.y),r=decodeURI(e.dataset.href),a=r.split("/").pop().replace(/%2F/g,"/");e.style.cursor="",i.setThingFloorplanPosition(a,t,n).then((function(){return o.gatewayModel.getThing(a)})).then((function(e){e&&(e.floorplanX=t,e.floorplanY=n)})).catch((function(e){console.error("Error trying to move thing ".concat(r," ").concat(e))})),this.selectedThing=null,this.pointerOffsetX=0,this.pointerOffsetY=0}},moveThing:function(e){if(this.selectedThing){var t={x:e.clientX||e.touches[0].clientX,y:e.clientY||e.touches[0].clientY},n=this.screenToRelVmin(t);n.x-=this.pointerOffsetX,n.y-=this.pointerOffsetY,n.x<0||n.x>100||n.y<0||n.y>100||(this.selectedThing.dataset.x=n.x,this.selectedThing.dataset.y=n.y,this.selectedThing.style.transform=this.makeTransform(n.x,n.y))}},makeTransform:function(e,t){var n=10*this.vmin/128,r="translate(".concat(e,"vmin,").concat(t,"vmin)"),i="scale(".concat(n,")");return"".concat(r," translate(-50%, -50%) ").concat(i)},onPointerDown:function(e){var t=this;this.thingsElement.classList.contains("editing")||"mousedown"===e.type&&1!==e.buttons||(e.preventDefault(),e.stopPropagation(),this.selectedThing=e.currentTarget,this.interactTimeout=setTimeout((function(){t.selectedThing&&r("".concat(t.selectedThing.dataset.href,"?referrer=%2Ffloorplan")),t.interactTimeout=null}),750))},onPointerUp:function(e){if(!this.thingsElement.classList.contains("editing")&&this.selectedThing){e.preventDefault(),e.stopPropagation();var t=this.things[this.selectedThing.dataset.index];this.interactTimeout&&(t.handleClick&&t.handleClick(),clearTimeout(this.interactTimeout),this.interactTimeout=null),this.selectedThing=null}},blackHole:function(e){return e.preventDefault(),e.stopPropagation(),!1}};e.exports=c},function(e,t,n){"use strict";var r=n(141),i=n(142),o={init:function(){i("/","/things"),i("/things",r.showThings.bind(r)),i("/things/:thingId",r.showThings.bind(r)),i("/things/:thingId/actions/:actionName",r.showThings.bind(r)),i("/things/:thingId/events",r.showThings.bind(r)),i("/settings",r.showSettings.bind(r)),i("/settings/:section",r.showSettings.bind(r)),i("/settings/:section/:subsection",r.showSettings.bind(r)),i("/settings/:section/:subsection/:id",r.showSettings.bind(r)),i("/floorplan",r.showFloorplan.bind(r)),i("/rules",r.showRules.bind(r)),i("/rules/:rule",r.showRule.bind(r)),i("/logs",r.showLogs.bind(r)),i("/logs/things/:thingId/properties",r.showLogs.bind(r)),i("/logs/things/:thingId/properties/:propId",r.showLogs.bind(r)),i("/extensions/:extensionId",r.showExtension.bind(r)),i()}};e.exports=o},function(e,t,n){function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(36),n(37),n(139),n(44),n(23),n(43),n(3),n(46),n(5),n(140),n(33);var o=n(35),a=n(225),s=n(384),c=n(142),u={init:function(){this.createRuleButton=document.getElementById("create-rule-button"),this.createRuleHint=document.getElementById("create-rule-hint"),this.rulesList=document.getElementById("rules"),this.gateway=new a,this.nextId=0,this.createRuleButton.addEventListener("click",(function(){c("/rules/new")}))},readRules:function(){var e=this;return o.getRules().then((function(t){e.rulesList.querySelectorAll(".rule").forEach((function(e){e.parentNode.removeChild(e)}));var n,i=r(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;e.addRuleCard(o)}}catch(e){i.e(e)}finally{i.f()}0===t.length?e.createRuleHint.classList.remove("hidden"):e.createRuleHint.classList.add("hidden")}))},addRuleCard:function(e){var t=document.createElement("div");t.classList.add("rule");try{new s(this.gateway,t,this.nextId,e)}catch(t){return console.error("Invalid rule",e,t),void(this.nextId+=1)}this.nextId+=1,this.rulesList.appendChild(t)},show:function(){var e=this;Promise.all([this.gateway.readThings(),this.gateway.readNotifiers()]).then((function(){return e.readRules()}))}};e.exports=u},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9);var i=n(226),o=n(167),a=n(142),s=n(22),c=n(19),u=function(){"use strict";function e(t,n,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elt=n,this.id=r,this.rule=new i(t,a);var u=this.rule.enabled?"checked":"",l="";this.rule.valid()||(u="",l="[".concat(c.getMessage("rule-invalid").toLocaleUpperCase(),"] "),this.elt.classList.add("invalid"));var h=c.getMessage("thing-icons-thing-src"),f=c.getMessage("thing-icons-thing-src");if(this.rule.trigger){var d=this.rule.trigger;d.triggers&&d.triggers.length>0&&(d=d.triggers[0]);var p=o.thingFromPart(t,d);p?h=o.icon(p):"TimeTrigger"===d.type&&(h="/images/thing-icons/clock.svg")}if(this.rule.effect){var m=this.rule.effect;m.effects&&m.effects.length>0&&(m=m.effects[0]);var v=o.thingFromPart(t,m);v&&(f=o.icon(v))}this.elt.innerHTML='\n      <div class="rule-edit-overlay">\n        <div class="rule-delete-button"></div>\n        <input class="rule-edit-button" type="button" value="Edit Rule"/>\n        <div class="rule-delete-dialog">\n          <p data-l10n-id="rule-delete-prompt"></p>\n          <input class="rule-delete-cancel-button" type="button"\n                 data-l10n-id="rule-delete-cancel-button" />\n          <input class="rule-delete-confirm-button" type="button"\n                 data-l10n-id="rule-delete-confirm-button" />\n        </div>\n      </div>\n      <div class="rule-preview">\n        <div class="rule-part-block trigger">\n          <img class="rule-part-icon" src="'.concat(h,'"/>\n        </div>\n        <div class="rule-part-block effect">\n          <img class="rule-part-icon" src="').concat(f,'"/>\n        </div>\n      </div>\n      <div class="rule-info">\n        <h3>').concat(l).concat(s.escapeHtml(this.rule.name),"</h3>\n        <p>").concat(s.escapeHtml(this.rule.toHumanDescription()),'</p>\n      </div>\n      <form class="rule-switch switch">\n        <input type="checkbox" id="rule-switch-').concat(s.escapeHtml(r),'"\n               class="switch-checkbox" ').concat(u,'/>\n        <label class="switch-slider" for="rule-switch-').concat(s.escapeHtml(r),'">\n        </label>\n      </form>\n    '),this.onEditButtonClick=this.onEditButtonClick.bind(this),this.onDeleteButtonClick=this.onDeleteButtonClick.bind(this),this.onDeleteCancelClick=this.onDeleteCancelClick.bind(this),this.onDeleteConfirmClick=this.onDeleteConfirmClick.bind(this),this.onEnabledCheckboxChange=this.onEnabledCheckboxChange.bind(this),this.editButton=this.elt.querySelector(".rule-edit-button"),this.editButton.addEventListener("click",this.onEditButtonClick),this.deleteButton=this.elt.querySelector(".rule-delete-button"),this.deleteButton.addEventListener("click",this.onDeleteButtonClick),this.deleteCancel=this.elt.querySelector(".rule-delete-cancel-button"),this.deleteCancel.addEventListener("click",this.onDeleteCancelClick),this.deleteConfirm=this.elt.querySelector(".rule-delete-confirm-button"),this.deleteConfirm.addEventListener("click",this.onDeleteConfirmClick),this.enabledCheckbox=this.elt.querySelector(".switch-checkbox"),this.enabledCheckbox.addEventListener("change",this.onEnabledCheckboxChange),this.editOverlay=this.elt.querySelector(".rule-edit-overlay")}var t,n,u;return t=e,(n=[{key:"onEditButtonClick",value:function(){a("/rules/".concat(encodeURIComponent(this.rule.id)))}},{key:"onDeleteButtonClick",value:function(){this.editOverlay.classList.add("delete")}},{key:"onDeleteCancelClick",value:function(){this.editOverlay.classList.remove("delete")}},{key:"onDeleteConfirmClick",value:function(){this.rule.delete(),this.elt.parentNode.removeChild(this.elt)}},{key:"onEnabledCheckboxChange",value:function(){this.enabledCheckbox.checked?this.rule.enabled=!0:this.rule.enabled=!1,this.rule.update()}}])&&r(t.prototype,n),u&&r(t,u),e}();e.exports=u},function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)}))}}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(36),n(37),n(9),n(151),n(139),n(44),n(23),n(145),n(43),n(3),n(46),n(5),n(194),n(140),n(33),n(100);var s,c,u,l=n(35),h=n(386),f=n(225),d=n(226),p=n(167),m=n(389),v=n(390),g=n(392),y=n(142),b={init:function(){var e=this;this.gateway=new f,this.onPresentationChange=this.onPresentationChange.bind(this),this.onRuleChange=this.onRuleChange.bind(this),this.onRuleDescriptionInput=this.onRuleDescriptionInput.bind(this),this.onAnimatePlayStopClick=this.onAnimatePlayStopClick.bind(this),this.animate=this.animate.bind(this),this.animateDelay=1e3,this.rule=null,this.partBlocks=[],this.ruleEffectType="SetEffect",this.view=document.getElementById("rule-view"),this.titleBar=this.view.querySelector(".title-bar"),this.ruleArea=document.getElementById("rule-area"),this.ruleName=this.view.querySelector(".rule-name"),this.ruleNameCustomize=this.view.querySelector(".rule-name-customize"),this.animatePlayStop=this.view.querySelector(".rule-preview-button"),this.animatePlayStop.addEventListener("click",this.onAnimatePlayStopClick);var t=function(){var t=document.createRange();t.selectNodeContents(e.ruleName);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)};this.ruleNameCustomize.addEventListener("click",t),this.ruleName.addEventListener("dblclick",(function(e){e.preventDefault(),t()})),this.ruleName.contentEditable=!0,this.ruleName.addEventListener("keypress",(function(t){"Enter"===t.key&&(t.preventDefault(),e.ruleName.blur())})),this.ruleName.addEventListener("blur",(function(){e.rule.name=e.ruleName.textContent,e.rule.update(),e.onPresentationChange()})),this.ruleDescription=this.view.querySelector(".rule-info > p"),this.ruleDescription.addEventListener("input",this.onRuleDescriptionInput),this.rulePartsList=document.getElementById("rule-parts-list"),this.onboardingHint=document.getElementById("onboarding-hint"),this.connection=document.getElementById("connection"),this.deleteOverlay=document.getElementById("rule-delete-overlay"),this.deleteButton=document.getElementById("delete-button"),this.deleteCancel=this.view.querySelector(".rule-delete-cancel-button"),this.deleteConfirm=this.view.querySelector(".rule-delete-confirm-button"),this.deleteButton.addEventListener("click",(function(){e.deleteOverlay.classList.add("active")})),this.deleteCancel.addEventListener("click",(function(){e.deleteOverlay.classList.remove("active")})),this.deleteConfirm.addEventListener("click",(function(){e.rule.delete().then((function(){e.deleteOverlay.classList.remove("active"),y("/rules")}))})),this.onScrollLeftClick=this.onScrollLeftClick.bind(this),this.onScrollRightClick=this.onScrollRightClick.bind(this);var n=document.getElementById("rule-parts-list-scroll-left"),r=document.getElementById("rule-parts-list-scroll-right");n.addEventListener("click",this.onScrollLeftClick),n.addEventListener("touchstart",this.onScrollLeftClick),r.addEventListener("click",this.onScrollRightClick),r.addEventListener("touchstart",this.onScrollRightClick),this.onWindowResize=this.onWindowResize.bind(this),window.addEventListener("resize",this.onWindowResize),this.onWindowResize()},getEffectType:function(){return"If"===this.ruleDescription.querySelector(".rule-effect-select").value?"SetEffect":"PulseEffect"},onRuleDescriptionInput:function(e){var t=e.target.value;if(e.target.classList.contains("rule-trigger-select"))"and"===t?this.rule.trigger.op="AND":"or"===t&&(this.rule.trigger.op="OR");else if(e.target.classList.contains("rule-effect-select")){var n=this.getEffectType();this.ruleEffectType=n;var r,i=o(this.rule.effect.effects);try{for(i.s();!(r=i.n()).done;){var a=r.value;"SetEffect"!==a.type&&"PulseEffect"!==a.type||(a.type=n)}}catch(e){i.e(e)}finally{i.f()}}else console.warn("Unexpected input event",e);this.onRuleChange()},onDeviceBlockDown:function(e,t){if(this.rule){var n=t.target.getBoundingClientRect(),r=n.left,i=n.top,o=new h(this.ruleArea,this.onPresentationChange,this.onRuleChange,e);o.snapToGrid(r,i),o.draggable.onDown(t),this.partBlocks.push(o)}},onBlockDown:function(e,t){if(this.rule){var n=t.target.getBoundingClientRect(),r=n.left,i=n.top,o=e();o.snapToGrid(r,i),o.draggable.onDown(t),this.partBlocks.push(o)}},makeBlock:function(e,t,n){var r=document.createElement("div");return r.classList.add("rule-part"),r.innerHTML='<div class="rule-part-block '.concat(e,'">\n      <img class="rule-part-icon" src="').concat(t,'"/>\n    </div>\n    <p>').concat(n,"</p>"),r},makeRulePartBlock:function(e,t){var n=null;if("TimeTrigger"===t.type)n=new g(this.ruleArea,this.onPresentationChange,this.onRuleChange);else if("NotificationEffect"===t.type)n=new m(this.ruleArea,this.onPresentationChange,this.onRuleChange);else if("NotifierOutletEffect"===t.type){var r=this.gateway.notifiers.filter((function(e){return e.id===t.notifier}))[0];if(!r)return;var i=r.outlets.filter((function(e){return e.id===t.outlet}))[0];if(!i)return;n=new v(this.ruleArea,this.onPresentationChange,this.onRuleChange,r,i,{title:t.title,message:t.message,level:t.level})}else{var o=p.thingFromPart(this.gateway,t);if(!o)return;n=new h(this.ruleArea,this.onPresentationChange,this.onRuleChange,o)}var a={};a[e]=t,n.setRulePart(a),n.snapToCenter(),this.partBlocks.push(n)},showConnection:function(){this.connection.classList.remove("hidden");var e=document.getElementById("drag-hint"),t=window.getComputedStyle(e).flexDirection;function n(e){var t=e.querySelector(".selected");return t?JSON.parse(t.dataset.ruleFragment):e.querySelector(".time-input")||e.querySelector(".message-input-container")||e.querySelector(".open-button")}var r=Array.from(this.ruleArea.querySelectorAll(".rule-part-block.trigger")).map((function(e){return e.parentNode})).filter(n),i=Array.from(this.ruleArea.querySelectorAll(".rule-part-block.effect")).map((function(e){return e.parentNode})).filter(n);if(0!==r.length&&0!==i.length){var o=this.ruleArea.getBoundingClientRect(),a={x:o.width/2,y:o.height/2},s=r.length>1,c=i.length>1,u=r[0].getBoundingClientRect();this.connection.innerHTML="";for(var l=0;l<i.length;l++){var h=k(i[l]),f=a;s||(f=_(r[0]));var d=document.createElementNS("http://www.w3.org/2000/svg","circle");if(d.classList.add("effect"),d.setAttribute("r",6),d.setAttribute("cx",h.x),d.setAttribute("cy",h.y),this.connection.appendChild(d),!s||c){var p=S(f,h);p.classList.add("effect"),this.connection.appendChild(p)}}for(var m=0;m<r.length;m++){var v=_(r[m]),g=document.createElementNS("http://www.w3.org/2000/svg","circle");if(g.classList.add("trigger"),g.setAttribute("r",6),g.setAttribute("cx",v.x),g.setAttribute("cy",v.y),this.connection.insertBefore(g,this.connection.firstChild),s){var y=a;c||(y=k(i[0]));var b=S(v,y);b.classList.add("trigger"),this.connection.appendChild(b)}}if(s&&c){var w=document.createElementNS("http://www.w3.org/2000/svg","circle");w.classList.add("center"),w.setAttribute("r",6),w.setAttribute("cx",a.x),w.setAttribute("cy",a.y),this.connection.appendChild(w)}}function E(e){var t=e.style.transform.match(/translate\((\d+)px, +(\d+)px\)/);return t?{x:parseFloat(t[1]),y:parseFloat(t[2])}:{x:0,y:0}}function _(e){var n=E(e);return"column"===t?(n.x+=u.width/2,n.y+=u.height+10):(n.x+=u.width+10,n.y+=u.height/2),n}function k(e){var n=E(e);return"column"===t?(n.x+=u.width/2,n.y-=10):(n.x-=10,n.y+=u.height/2),n}function S(e,t){var n=(e.x+t.x)/2,r=["M",e.x,e.y,"C",n,e.y,n,t.y,t.x,t.y].join(" "),i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",r),i}},hideConnection:function(){this.connection.classList.add("hidden")},partBlocksByRole:function(){var e,t=[],n=[],r=o(this.partBlocks);try{for(r.s();!(e=r.n()).done;){var i=e.value;i.rulePart&&(i.rulePart.trigger&&t.push(i),i.rulePart.effect&&n.push(i))}}catch(e){r.e(e)}finally{r.f()}return{triggerBlocks:t,effectBlocks:n}},onRuleChange:function(){if(this.rule){this.partBlocks=this.partBlocks.filter((function(e){return"removed"!==e.role}));var e=this.partBlocksByRole(),t=e.triggerBlocks,n=e.effectBlocks,r=t.map((function(e){return e.rulePart.trigger})),i="AND";this.rule.trigger&&(i=this.rule.trigger.op||i),this.rule.trigger={type:"MultiTrigger",op:i,triggers:r};var a=n.map((function(e){return e.rulePart.effect}));this.rule.effect={type:"MultiEffect",effects:a};var s,c=this.getEffectType(),u=o(this.rule.effect.effects);try{for(u.s();!(s=u.n()).done;){var l=s.value;"SetEffect"!==l.type&&"PulseEffect"!==l.type||(l.type=c)}}catch(e){u.e(e)}finally{u.f()}this.rule.update(),this.onPresentationChange()}},onPresentationChange:function(){this.ruleName.textContent=this.rule.name||"Rule Name",this.ruleDescription.innerHTML=this.rule.toHumanInterface();var e=this.ruleDescription.querySelector(".rule-effect-select");this.rule.effect&&0===this.rule.effect.effects.length&&(e.value="SetEffect"===this.ruleEffectType?"If":"While"),"If"===e.value?e.style.width="1.8rem":delete e.style.width;var t=this.rule.valid();t?this.titleBar.classList.remove("invalid"):this.titleBar.classList.add("invalid"),t&&!document.querySelector(".dragging")?this.showConnection():this.hideConnection(),document.querySelector(".rule-part-container")?this.onboardingHint.classList.add("hidden"):this.onboardingHint.classList.remove("hidden")},show:(u=i(regeneratorRuntime.mark((function e(t){var n,r,i,o,a,s,c,u,h,f,p,m,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){return e.parentNode.removeChild(e)},this.rule=null,this.ruleEffectType="SetEffect",n=Promise.resolve(null),"new"!==t&&(n=l.getRule(t)),this.partBlocks.forEach((function(e){e.remove()})),this.rulePartsList.querySelectorAll(".rule-part").forEach(r),this.showSimpleBlocks(),e.next=10,this.showNotifierOutletBlocks();case 10:return e.next=12,this.showDeviceBlocks();case 12:return this.onWindowResize(),e.next=15,n;case 15:if(i=e.sent,this.rule=new d(this.gateway,i),this.ruleArea.querySelectorAll(".rule-part-container").forEach(r),i){for(o=document.getElementById("drag-hint"),a=window.getComputedStyle(o).flexDirection,s=this.ruleArea.getBoundingClientRect(),c={width:300,height:100},u=s.width/2-c.width/2,h=s.height/2-c.height/2,this.rule.trigger||(this.rule.trigger={type:"MultiTrigger",op:"AND",triggers:[]}),"MultiTrigger"!==this.rule.trigger.type&&(this.rule.trigger={type:"MultiTrigger",op:"AND",triggers:[this.rule.trigger]}),f=this.rule.trigger.triggers,p=0;p<f.length;p++)"column"===a?this.makeRulePartBlock("trigger",f[p],u,s.height/4-c.height/2):this.makeRulePartBlock("trigger",f[p],s.width/4-c.width/2,h);for(this.rule.effect||(this.rule.effect={type:"MultiEffect",effects:[]}),"MultiEffect"!==this.rule.effect.type&&(this.rule.effect={type:"MultiEffect",effects:[this.rule.effect]}),m=this.rule.effect.effects,v=0;v<m.length;v++)"column"===a?this.makeRulePartBlock("effect",m[v],u,3*s.height/4-c.height/2):this.makeRulePartBlock("effect",m[v],3*s.width/4-c.width/2,h)}this.onWindowResize(),this.onRuleChange();case 21:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)}),showSimpleBlocks:function(){var e=this,t=this.makeBlock("time-trigger-block","/images/thing-icons/clock.svg","Clock"),n=this.onBlockDown.bind(this,(function(){return new g(e.ruleArea,e.onPresentationChange,e.onRuleChange)}));t.addEventListener("mousedown",n),t.addEventListener("touchstart",n),this.rulePartsList.appendChild(t);var r=this.makeBlock("notification-effect-block","/images/thing-icons/notification.svg","Browser Notification"),i=this.onBlockDown.bind(this,(function(){return new m(e.ruleArea,e.onPresentationChange,e.onRuleChange)}));r.addEventListener("mousedown",i),r.addEventListener("touchstart",i),this.rulePartsList.appendChild(r)},showNotifierOutletBlocks:(c=i(regeneratorRuntime.mark((function e(){var t,n,r,i,a,s,c,u,l,h,f=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gateway.readNotifiers();case 2:t=e.sent,n=function(e,t){return function(){return new v(f.ruleArea,f.onPresentationChange,f.onRuleChange,e,t)}},r=o(t);try{for(r.s();!(i=r.n()).done;){a=i.value,s=o(a.outlets);try{for(s.s();!(c=s.n()).done;)u=c.value,l=this.makeBlock("notifier-outlet-block","/images/thing-icons/notification.svg","".concat(u.name," Notification")),h=this.onBlockDown.bind(this,n(a,u)),l.addEventListener("mousedown",h),l.addEventListener("touchstart",h),this.rulePartsList.appendChild(l)}catch(e){s.e(e)}finally{s.f()}}}catch(e){r.e(e)}finally{r.f()}case 6:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)}),showDeviceBlocks:(s=i(regeneratorRuntime.mark((function e(){var t,n,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gateway.readThings();case 2:t=e.sent,n=o(t);try{for(n.s();!(r=n.n()).done;)i=r.value,(a=this.makeBlock("device-block",p.icon(i),i.title)).addEventListener("mousedown",this.onDeviceBlockDown.bind(this,i)),a.addEventListener("touchstart",this.onDeviceBlockDown.bind(this,i)),this.rulePartsList.appendChild(a)}catch(e){n.e(e)}finally{n.f()}case 5:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),onWindowResize:function(){var e=this.rulePartsList.scrollWidth,t=this.rulePartsList.getBoundingClientRect().width,n=document.getElementById("rule-parts-list-scroll-left"),r=document.getElementById("rule-parts-list-scroll-right");if(t<e?(n.classList.remove("hidden"),r.classList.remove("hidden")):(n.classList.add("hidden"),r.classList.add("hidden")),this.rule){var i=this.partBlocksByRole(),o=i.triggerBlocks,a=i.effectBlocks;o.forEach((function(e,t){e.snapToCenter(t,o.length)})),a.forEach((function(e,t){e.snapToCenter(t,a.length)})),this.onPresentationChange()}},onScrollLeftClick:function(){this.rulePartsList.scrollLeft-=128},onScrollRightClick:function(){this.rulePartsList.scrollLeft+=128},onAnimatePlayStopClick:function(){this.animatePlayStop.classList.contains("stop")?this.stopAnimate():this.startAnimate()},startAnimate:function(){this.animateTimeout&&clearTimeout(this.animateTimeout),this.rule&&this.rule.valid()&&(this.animateStep=-1,this.ruleArea.querySelectorAll(".rule-part-block").forEach((function(e){e.classList.add("inactive")})),this.animatePlayStop.classList.add("stop"),setTimeout(this.animate,this.animateDelay))},animate:function(){this.animateStep+=1;var e=this.animateStep>>1,t=!!(1&this.animateStep);if(e>this.rule.trigger.triggers.length)this.stopAnimate();else{var n=this.ruleArea.querySelectorAll(".rule-part-block.trigger"),r=this.ruleArea.querySelectorAll(".rule-part-block.effect"),i=this.connection.querySelectorAll("path.trigger"),o=this.connection.querySelectorAll("path.effect"),a=this.connection.querySelectorAll("circle.trigger"),s=this.connection.querySelectorAll("circle.effect"),c=this.connection.querySelector("circle.center");if(t)if(e===n.length)for(var u=0;u<n.length;u++)p(u);else p(e);else e>0&&p(e-1);var l=e===n.length||1===n.length;if(!t)if(e===this.rule.trigger.triggers.length)for(var h=0;h<n.length;h++)d(h);else d(e);(!t||"SetEffect"===this.getEffectType())&&(l||"OR"===this.rule.trigger.op)?(r.forEach((function(e){e.classList.remove("inactive")})),c&&c.classList.add("active"),o.forEach((function(e){e.classList.add("active")})),s.forEach((function(e){e.classList.add("active")}))):(r.forEach((function(e){e.classList.add("inactive")})),c&&c.classList.remove("active"),o.forEach((function(e){e.classList.remove("active")})),s.forEach((function(e){e.classList.remove("active")})));var f=this.animateDelay;t&&(f/=1.5),this.animateTimeout=setTimeout(this.animate,f)}function d(e){n[e].classList.remove("inactive"),i.length>0&&i[e].classList.add("active"),a[e].classList.add("active")}function p(e){n[e].classList.add("inactive"),i.length>0&&i[e].classList.remove("active"),a[e].classList.remove("active")}},stopAnimate:function(){this.animateTimeout&&(clearTimeout(this.animateTimeout),this.animateTimeout=null),this.ruleArea.querySelectorAll(".rule-part-block.inactive").forEach((function(e){e.classList.remove("inactive")})),this.connection.querySelectorAll(".active").forEach((function(e){e.classList.remove("active")})),this.animatePlayStop.classList.remove("stop")}};window.RuleScreen=b,e.exports=b},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(60),n(13),n(3),n(14),n(61),n(5);var l=n(387),h=n(176),f=n(167),d=function(e){"use strict";!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(d,e);var t,n,s,h=a(d);function d(e,t,n,r){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(i=h.call(this,e,t,n,r.title,f.icon(r))).thing=r;var o=i.elt.querySelector(".rule-part-info");return i.propertySelect=new l(c(i),o,r),i}return t=d,(n=[{key:"onUp",value:function(e,t){var n=this.role;i(u(d.prototype),"onUp",this).call(this,e,t),this.role!==n&&(this.propertySelect.updateOptionsForRole(this.role),this.rulePart=null,this.onRuleChange())}},{key:"setRulePart",value:function(e){i(u(d.prototype),"setRulePart",this).call(this,e),this.propertySelect.updateOptionsForRole(this.role),this.propertySelect.selectByRuleFragment(e)}},{key:"remove",value:function(){i(u(d.prototype),"remove",this).call(this),this.propertySelect.remove()}}])&&r(t.prototype,n),s&&r(t,s),d}(h);e.exports=d},function(e,t,n){function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(36),n(37),n(9),n(151),n(44),n(23),n(43),n(160),n(3),n(5),n(194),n(33);var a=n(19),s=n(167),c=n(120),u=n(22);function l(e){return e.trigger?e.trigger.property:e.effect.property}function h(e,t){if(!!e!=!!t)return!1;if(e.trigger&&!t.trigger)return!1;if(e.effect&&!t.effect)return!1;var n=e.trigger||e.effect,r=t.trigger||t.effect,i=l(e);if(!function(e,t){return!e&&!t||e&&t&&e.type===t.type&&e.id===t.id&&e.thing===t.thing}(i,l(t)))return!1;if(n.type.match(/(Set|Pulse)Effect/)){if(!r.type.match(/(Set|Pulse)Effect/))return!1}else if(n.type!==r.type)return!1;return i&&"boolean"===i.type?e.trigger?n.onValue===r.onValue:n.value===r.value:"EventTrigger"===n.type?n.event===r.event:"ActionEffect"!==n.type||n.action===r.action}var f=function(){"use strict";function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.devicePropertyBlock=t,this.thing=r,this.role="",this.elt=document.createElement("div"),this.elt.classList.add("property-select"),this.onClick=this.onClick.bind(this),this.elt.addEventListener("click",this.onClick),this.onDocumentClick=this.onDocumentClick.bind(this),document.body.addEventListener("click",this.onDocumentClick),this.clearOptions(),this.elt.addEventListener("mousedown",(function(e){e.stopPropagation()})),this.elt.addEventListener("touchstart",(function(e){e.stopPropagation()})),n.appendChild(this.elt)}var t,n,i;return t=e,(n=[{key:"clearOptions",value:function(){this.elt.innerHTML="",this.addOption(a.getMessage("rule-select-property"),null,!0)}},{key:"addOption",value:function(e,t,n){var i=this,o=document.createElement("div");o.classList.add("property-select-option"),n&&o.classList.add("selected"),o.dataset.ruleFragment=JSON.stringify(t);var a=document.createElement("span");if(a.classList.add("property-select-name"),a.textContent=e,a.title=e,o.appendChild(a),t){var s=l(t);if(!s)return this.updateOption(o),void this.elt.appendChild(o);var h=function(e){e.stopPropagation()};if("number"===s.type||"integer"===s.type){var f,d,p,m,v;if(t.trigger){(f=document.createElement("option")).textContent="<",f.classList.add("lt-option"),"integer"===s.type&&((p=document.createElement("option")).textContent="=",p.classList.add("eq-option")),(d=document.createElement("option")).textContent=">",d.classList.add("gt-option");var g=document.createElement("select");g.appendChild(f),"integer"===s.type&&g.appendChild(p),g.appendChild(d),g.addEventListener("click",h),o.appendChild(g)}if(s.hasOwnProperty("enum")&&s.enum.length>0){(v=document.createElement("select")).classList.add("value-select");var y,b=r(s.enum);try{for(b.s();!(y=b.n()).done;){var w=y.value,E=document.createElement("option");E.value=c.convert(w,s.unit).value,E.innerText=E.value,v.appendChild(E)}}catch(e){b.e(e)}finally{b.f()}v.addEventListener("click",h),o.appendChild(v)}else{var _=c.convert(0,s.unit).unit!==s.unit;(m=document.createElement("input")).classList.add("value-input"),m.type="number",s.hasOwnProperty("multipleOf")&&!_?m.step="".concat(s.multipleOf):"number"===s.type?m.step="any":m.step="1",s.hasOwnProperty("minimum")&&(m.min="".concat(c.convert(s.minimum,s.unit))),s.hasOwnProperty("maximum")&&(m.max="".concat(c.convert(s.maximum,s.unit))),m.addEventListener("click",h),o.appendChild(m)}o.addEventListener("change",(function(){var e;e=m?parseFloat(m.value):parseFloat(v.options[v.selectedIndex].value),e=c.convert(e,c.convert(0,s.unit).unit,s.unit).value,e=u.adjustInputValue(e,s),m&&(m.value=e),t.trigger?(f.selected?t.trigger.levelType="LESS":d.selected?t.trigger.levelType="GREATER":"integer"===s.type&&p.selected&&(t.trigger.levelType="EQUAL"),t.trigger.value=e):t.effect.value=e,i.devicePropertyBlock.rulePart=t,i.devicePropertyBlock.onRuleChange(),o.dataset.ruleFragment=JSON.stringify(t),i.select(o)}))}else if("string"===s.type){var k,S;if(s.hasOwnProperty("enum")&&s.enum.length>0){(S=document.createElement("select")).classList.add("value-select");var x,T=r(s.enum);try{for(T.s();!(x=T.n()).done;){var P=x.value,O=document.createElement("option");O.value=P,O.innerText=P,S.appendChild(O)}}catch(e){T.e(e)}finally{T.f()}S.addEventListener("click",h),o.appendChild(S)}else(k=document.createElement("input")).classList.add("value-input"),"color"===s.name?k.type="color":k.type="text",k.addEventListener("click",h),o.appendChild(k);o.addEventListener("change",(function(){var e;e=k?k.value:S.options[S.selectedIndex].value;var n=i.devicePropertyBlock.rulePart,r=!n;t.trigger?(t.trigger.value=e,r=r||n.trigger&&n.trigger.type===t.trigger.type):(t.effect.value=e,r=r||n.effect&&n.effect.property.id===t.effect.property.id&&n.effect.property.thing===t.effect.property.thing),o.dataset.ruleFragment=JSON.stringify(t),r&&(i.devicePropertyBlock.rulePart=t,i.devicePropertyBlock.onRuleChange()),i.select(o)}))}this.updateOption(o),this.elt.appendChild(o)}else this.elt.appendChild(o)}},{key:"updateOption",value:function(e){var t=JSON.parse(e.dataset.ruleFragment);if(t){var n=l(t);if(n){var r=t.trigger?t.trigger.value:t.effect.value,i=e.querySelector(".value-input")||e.querySelector(".value-select");"number"===n.type||"integer"===n.type?(t.trigger&&("GREATER"===t.trigger.levelType?e.querySelector(".gt-option").setAttribute("selected",""):"integer"===n.type&&"EQUAL"===t.trigger.levelType?e.querySelector(".eq-option").setAttribute("selected",""):e.querySelector(".lt-option").setAttribute("selected","")),i.value=c.convert(r,n.unit).value):"color"!==n.name&&"string"!==n.type||(i.value=r)}}}},{key:"updateOptionsForRole",value:function(e){if(this.role!==e){this.role=e,this.clearOptions();for(var t=0,n=Object.keys(this.thing.properties);t<n.length;t++){var r=n[t],i=JSON.parse(JSON.stringify(this.thing.properties[r]));i.name||(i.name=r);var o=i.links.filter((function(e){return!e.rel||"property"===e.rel}));if(0!==o.length){i.id=s.extractProperty(o[0].href),i.thing=s.extractThing(o[0].href),delete i.links;var c=i.title||u.capitalize(i.name);if("trigger"===e){if("boolean"===i.type){var l={type:"BooleanTrigger",property:i,onValue:!0,label:c},h=Object.assign({},l,{onValue:!1}),f=c,d="".concat(a.getMessage("rule-not")," ").concat(f);"on"===i.name&&(f=a.getMessage("on"),d=a.getMessage("off")),this.addOption(f,{trigger:l}),this.addOption(d,{trigger:h})}else if("string"===i.type){var p="";"color"===i.name&&(p="#ffffff"),this.addOption(c,{trigger:{type:"EqualityTrigger",property:i,value:p,label:c}})}else if("number"===i.type||"integer"===i.type){var m=i.maximum||0,v=i.minimum||0,g=Math.round((m+v)/2);this.addOption(c,{trigger:{type:"LevelTrigger",property:i,levelType:"LESS",value:g,label:c}})}}else if("effect"===e){if(i.readOnly)continue;if("boolean"===i.type){var y={type:"PulseEffect",property:i,value:!0,label:c},b=Object.assign({},y,{value:!1}),w=c,E="".concat(a.getMessage("rule-not")," ").concat(w);"on"===i.name&&(w=a.getMessage("on"),E=a.getMessage("off")),this.addOption(w,{effect:y}),this.addOption(E,{effect:b})}else if("color"===i.name)this.addOption(c,{effect:{type:"PulseEffect",property:i,value:"#ffffff",label:c}});else if("string"===i.type)this.addOption(c,{effect:{type:"PulseEffect",property:i,value:"text",label:c}});else if("number"===i.type||"integer"===i.type){var _=((i.maximum||0)+(i.minimum||0))/2;this.addOption(c,{effect:{type:"PulseEffect",property:i,value:_,label:c}})}}}}"trigger"===e?this.addEventOptions():"effect"===e&&this.addActionOptions()}}},{key:"addEventOptions",value:function(){for(var e=0,t=Object.keys(this.thing.events);e<t.length;e++){var n=t[e],r=this.thing.events[n].title||this.thing.events[n].label||n,i={type:"EventTrigger",thing:s.extractThing(this.thing.href),event:n,label:r};this.addOption("".concat(a.getMessage("rule-event"),' "').concat(i.label,'"'),{trigger:i})}}},{key:"addActionOptions",value:function(){for(var e=0,t=Object.keys(this.thing.actions);e<t.length;e++){var n=t[e];if(!(this.thing.actions[n].input&&Object.keys(this.thing.actions[n].input).length>0)){var r=this.thing.actions[n].title||this.thing.actions[n].label||n,i={type:"ActionEffect",thing:s.extractThing(this.thing.href),action:n,label:r,parameters:{}};this.addOption("".concat(a.getMessage("rule-action"),' "').concat(i.label,'"'),{effect:i})}}}},{key:"onClick",value:function(e){if(this.elt.classList.toggle("open"),this.elt.classList.contains("open"))this.devicePropertyBlock.elt.classList.add("open");else{document.activeElement.blur();var t=e.target;t.classList.contains("property-select-option")||(t=t.parentNode),this.select(t);var n=JSON.parse(t.dataset.ruleFragment);if(!n)return;this.devicePropertyBlock.rulePart=n,this.devicePropertyBlock.elt.classList.remove("open"),this.devicePropertyBlock.onRuleChange()}}},{key:"selectByRuleFragment",value:function(e){var t,n=r(this.elt.querySelectorAll(".property-select-option"));try{for(n.s();!(t=n.n()).done;){var i=t.value;if(h(JSON.parse(i.dataset.ruleFragment),e))return i.dataset.ruleFragment=JSON.stringify(e),this.updateOption(i),void this.select(i)}}catch(e){n.e(e)}finally{n.f()}}},{key:"select",value:function(e){var t=this.elt.querySelector(".selected");if(t)if(JSON.parse(t.dataset.ruleFragment))t.classList.remove("selected");else{if(t===e)return;this.elt.removeChild(t)}e.classList.add("selected")}},{key:"onDocumentClick",value:function(e){if(this.elt.classList.contains("open")){for(var t=e.target;t;){if(t===this.elt)return;t=t.parentNode}this.elt.classList.remove("open"),document.activeElement.blur()}}},{key:"remove",value:function(){this.elt.removeEventListener("click",this.onClick),document.body.removeEventListener("click",this.onDocumentClick)}}])&&o(t.prototype,n),i&&o(t,i),e}();e.exports=f},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9),n(157);var i=function(){"use strict";function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elt=t,this.afterDown=n,this.afterMove=r,this.afterUp=i;var o=this.elt.parentNode.getBoundingClientRect();this.baseX=o.left,this.baseY=o.top,this.onDown=this.onDown.bind(this),this.onMove=this.onMove.bind(this),this.onUp=this.onUp.bind(this),t.addEventListener("mousedown",this.onDown),t.addEventListener("touchstart",this.onDown)}var t,n,i;return t=e,(n=[{key:"getClientCoords",value:function(e){return e.type.startsWith("touch")?{clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY}:{clientX:e.clientX,clientY:e.clientY}}},{key:"onDown",value:function(e){if(window.addEventListener("mousemove",this.onMove),window.addEventListener("touchmove",this.onMove),window.addEventListener("mouseup",this.onUp),window.addEventListener("touchend",this.onUp),e.preventDefault(),this.afterDown){var t=this.getClientCoords(e);this.afterDown(t.clientX,t.clientY)}}},{key:"onMove",value:function(e){var t=this.getClientCoords(e),n=t.clientX-this.baseX,r=t.clientY-this.baseY;this.elt.style.transform="translate(".concat(n,"px,").concat(r,"px)"),this.afterMove&&this.afterMove(t.clientX,t.clientY,n,r)}},{key:"onUp",value:function(e){if(window.removeEventListener("mousemove",this.onMove),window.removeEventListener("touchmove",this.onMove),window.removeEventListener("mouseup",this.onUp),window.removeEventListener("touchend",this.onUp),this.afterUp){var t=this.getClientCoords(e);this.afterUp(t.clientX,t.clientY)}}}])&&r(t.prototype,n),i&&r(t,i),e}();e.exports=i},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(60),n(13),n(3),n(14),n(61),n(5);var u=n(176),l=n(19),h=function(e){"use strict";!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(h,e);var t,n,s,u=a(h);function h(e,t,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var i=(r=u.call(this,e,t,n,l.getMessage("rule-notification"),"/images/thing-icons/notification.svg")).elt.querySelector(".rule-part-info"),o=document.createElement("div");o.classList.add("message-input-container");var a=document.createElement("span");return a.classList.add("message-input-label"),a.innerText=l.getMessage("notification-message"),o.appendChild(a),r.messageInput=document.createElement("input"),r.messageInput.type="text",o.appendChild(r.messageInput),r.messageInput.addEventListener("mousedown",(function(e){e.stopPropagation()})),r.messageInput.addEventListener("touchstart",(function(e){e.stopPropagation()})),r.messageInput.addEventListener("change",(function(){r.rulePart={effect:{type:"NotificationEffect",message:r.messageInput.value}},r.onRuleChange()})),i.appendChild(o),r}return t=h,(n=[{key:"setRulePart",value:function(e){if(this.rulePart=e,e.effect&&(this.role="effect",this.rulePartBlock.classList.add("effect"),this.messageInput.value=e.effect.message),e.trigger)throw new Error("NotificationEffectBlock can only be an effect")}},{key:"onUp",value:function(e,t){i(c(h.prototype),"onUp",this).call(this,e,t),"trigger"===this.role&&this.remove(),"effect"===this.role&&(this.rulePart={effect:{type:"NotificationEffect",message:this.messageInput.value}},this.onRuleChange())}}])&&r(t.prototype,n),s&&r(t,s),h}(u);e.exports=h},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(143),n(23),n(60),n(13),n(3),n(14),n(61),n(5),n(33);var l=n(176),h=n(391),f=n(19),d=function(e){"use strict";!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(d,e);var t,n,s,l=a(d);function d(e,t,n,r,i,o){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(a=l.call(this,e,t,n,"".concat(i.name," ").concat(f.getMessage("rule-notification")),"/images/thing-icons/notification.svg")).notifier=r,a.outlet=i,a.values={title:"",message:"",level:0},o&&(a.values=o);var s=a.elt.querySelector(".rule-part-block"),u=a.elt.querySelector(".rule-part-info");return a.updateValues=a.updateValues.bind(c(a)),a.dropdown=new h(c(a),u),a.dropdown.addValue({id:"title",title:f.getMessage("notification-title"),type:"string",value:a.values.title}),a.dropdown.addValue({id:"message",title:f.getMessage("notification-message"),type:"string",value:a.values.message}),a.levels=[f.getMessage("notification-low"),f.getMessage("notification-normal"),f.getMessage("notification-high")],a.dropdown.addValue({id:"level",title:f.getMessage("notification-level"),type:"string",enum:a.levels,value:a.levels[a.values.level]}),s.addEventListener("click",a.onBlockClick.bind(c(a))),u.addEventListener("click",a.onBlockClick.bind(c(a))),a.updateRulePart(),a}return t=d,(n=[{key:"onBlockClick",value:function(){this.dropdown.elt.classList.contains("open")||this.dropdown.onCommit()}},{key:"updateValues",value:function(e){this.values=e,this.values.level=this.levels.indexOf(this.values.level),this.updateRulePart(),this.onRuleChange()}},{key:"updateRulePart",value:function(){this.setRulePart({effect:{type:"NotifierOutletEffect",notifier:this.notifier.id,outlet:this.outlet.id,title:this.values.title,message:this.values.message,level:this.values.level}})}},{key:"setRulePart",value:function(e){if(this.rulePart=e,e.trigger)throw new Error("NotifierOutletBlock can only be an effect");if(e.effect){this.role="effect",this.rulePartBlock.classList.add("effect");var t=this.rulePart.effect;this.dropdown.setValue("title",t.title),this.dropdown.setValue("message",t.message),this.dropdown.setValue("level",this.levels[t.level])}}},{key:"remove",value:function(){i(u(d.prototype),"remove",this).call(this),this.dropdown.remove()}}])&&r(t.prototype,n),s&&r(t,s),d}(l);e.exports=d},function(e,t,n){function r(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(36),n(37),n(44),n(23),n(43),n(3),n(5),n(33);var a=n(19),s=function(){"use strict";function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.block=t,this.elt=document.createElement("div"),this.elt.classList.add("property-select"),this.elt.classList.add("block-configure-dropdown"),this.onClick=this.onClick.bind(this),this.elt.addEventListener("click",this.onClick),this.onDocumentClick=this.onDocumentClick.bind(this),document.body.addEventListener("click",this.onDocumentClick),this.valueElts={},this.addValue({openButton:!0,id:null,title:a.getMessage("rule-configure"),type:null}),this.elt.addEventListener("mousedown",(function(e){e.stopPropagation()})),this.elt.addEventListener("touchstart",(function(e){e.stopPropagation()})),n.appendChild(this.elt)}var t,n,i;return t=e,(n=[{key:"addValue",value:function(e){var t=document.createElement("div");t.classList.add("property-select-option"),t.dataset.schema=JSON.stringify(e),e.openButton&&t.classList.add("open-button");var n=document.createElement("span");n.classList.add("property-select-name"),n.textContent=e.title,n.title=e.title,t.appendChild(n);var i=function(e){e.stopPropagation()};if("number"===e.type||"integer"===e.type){var o,a;if(e.hasOwnProperty("enum")&&e.enum.length>0){(a=document.createElement("select")).classList.add("value-select");var s,c=r(e.enum);try{for(c.s();!(s=c.n()).done;){var u=s.value,l=document.createElement("option");l.value=u,l.innerText=u,a.appendChild(l)}}catch(e){c.e(e)}finally{c.f()}a.addEventListener("click",i),a.value=e.value,this.valueElts[e.id]=a,t.appendChild(a)}else(o=document.createElement("input")).classList.add("value-input"),o.type="number",e.hasOwnProperty("multipleOf")?o.step="".concat(e.multipleOf):"number"===e.type?o.step="any":o.step="1",e.hasOwnProperty("minimum")&&(o.min="".concat(e.minimum)),e.hasOwnProperty("maximum")&&(o.max="".concat(e.maximum)),o.addEventListener("click",i),o.value=e.value,this.valueElts[e.id]=o,t.appendChild(o);t.addEventListener("change",(function(){var t;t=o?parseFloat(o.value):parseFloat(a.options[a.selectedIndex].value),e.hasOwnProperty("multipleOf")&&(t=Math.round(t/e.multipleOf)*e.multipleOf),"integer"===e.type&&(t=parseInt(t)),e.hasOwnProperty("minimum")&&(t=Math.max(t,e.minimum)),e.hasOwnProperty("maximum")&&(t=Math.min(t,e.maximum)),o&&(o.value=t)}))}else if("string"===e.type)if(e.hasOwnProperty("enum")&&e.enum.length>0){var h=document.createElement("select");h.classList.add("value-select");var f,d=r(e.enum);try{for(d.s();!(f=d.n()).done;){var p=f.value,m=document.createElement("option");m.value=p,m.innerText=p,h.appendChild(m)}}catch(e){d.e(e)}finally{d.f()}h.addEventListener("click",i),h.value=e.value,this.valueElts[e.id]=h,t.appendChild(h)}else{var v=document.createElement("input");v.classList.add("value-input"),"color"===e.id?v.type="color":v.type="text",v.addEventListener("click",i),v.value=e.value,this.valueElts[e.id]=v,t.appendChild(v)}this.elt.appendChild(t)}},{key:"onClick",value:function(e){this.elt.classList.add("open")}},{key:"onDocumentClick",value:function(e){if(this.elt.classList.contains("open")){for(var t=e.target;t;){if(t===this.elt)return;t=t.parentNode}this.elt.classList.remove("open"),document.activeElement.blur(),this.onCommit()}}},{key:"onCommit",value:function(){var e={};for(var t in this.valueElts){var n=this.valueElts[t];if("SELECT"===n.tagName){var r=n.options[n.selectedIndex].value,i=JSON.parse(n.parentNode.dataset.schema);"integer"===i.type?r=parseInt(r):"number"===i.type&&(r=parseFloat(r)),e[t]=r}else e[t]=n.value}this.block.updateValues(e)}},{key:"setValue",value:function(e,t){this.valueElts[e].value=t}},{key:"remove",value:function(){this.elt.removeEventListener("click",this.onClick),document.body.removeEventListener("click",this.onDocumentClick)}}])&&o(t.prototype,n),i&&o(t,i),e}();e.exports=s},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(60),n(13),n(3),n(14),n(61),n(5),n(227);var u=n(176),l=n(19),h=function(e){"use strict";!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(h,e);var t,n,s,u=a(h);function h(e,t,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);var i=(r=u.call(this,e,t,n,l.getMessage("rule-time-title"),"/images/thing-icons/clock.svg")).elt.querySelector(".rule-part-info");r.timeInput=document.createElement("input"),r.timeInput.type="time";var o=new Date,a=h.leftPad(o.getHours()),s=h.leftPad(o.getMinutes());return r.timeInput.value="".concat(a,":").concat(s),r.timeInput.classList.add("time-input"),r.timeInput.addEventListener("mousedown",(function(e){e.stopPropagation()})),r.timeInput.addEventListener("touchstart",(function(e){e.stopPropagation()})),r.timeInput.addEventListener("change",(function(){r.rulePart={trigger:{type:"TimeTrigger",time:r.timeInput.value,localized:!0}},r.onRuleChange()})),i.appendChild(r.timeInput),r}return t=h,s=[{key:"leftPad",value:function(e){return e.toString().padStart(2,"0")}}],(n=[{key:"setRulePart",value:function(e){var t=this;if(this.rulePart=e,e.trigger&&(this.role="trigger",this.rulePartBlock.classList.add("trigger"),setTimeout((function(){t.timeInput.value=e.trigger.time}),0)),e.effect)throw new Error("TimeTriggerBlock can only be a trigger")}},{key:"onUp",value:function(e,t){i(c(h.prototype),"onUp",this).call(this,e,t),"effect"===this.role&&this.remove(),"trigger"===this.role&&(this.rulePart={trigger:{type:"TimeTrigger",time:this.timeInput.value,localized:!0}},this.onRuleChange())}}])&&r(t.prototype,n),s&&r(t,s),h}(u);e.exports=h},function(e,t,n){var r=n(16),i=n(169),o=n(24),a=Math.ceil,s=function(e){return function(t,n,s){var c,u,l=String(o(t)),h=l.length,f=void 0===s?" ":String(s),d=r(n);return d<=h||""==f?l:(c=d-h,(u=i.call(f,a(c/f.length))).length>c&&(u=u.slice(0,c)),e?l+u:u+l)}};e.exports={start:s(!1),end:s(!0)}},function(e,t,n){var r=n(79);e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw o}}}}function a(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(36),n(37),n(9),n(139),n(44),n(23),n(43),n(3),n(46),n(5),n(105),n(140),n(33),n(100);var u=n(35),l=n(141),h=n(149),f=n(19),d=n(396),p=n(142),m=n(22),v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logs={},this.logDescr=null,this.resizeTimeout=null,this.start=new Date(Date.now()-6048e5),this.end=new Date(Date.now()),this.refreshThings=this.refreshThings.bind(this),this.onWindowResize=this.onWindowResize.bind(this),this.showCreateLog=this.showCreateLog.bind(this),this.hideCreateLog=this.hideCreateLog.bind(this),this.onCreateLogDeviceSelect=this.onCreateLogDeviceSelect.bind(this),this.onCreateLog=this.onCreateLog.bind(this),this.hideRemoveDialog=this.hideRemoveDialog.bind(this),this.onRemoveConfirm=this.onRemoveConfirm.bind(this),window.addEventListener("resize",this.onWindowResize),this.closing=!1}var t,n,a,s,v;return t=e,(n=[{key:"init",value:function(){this.view=document.getElementById("logs-view"),this.createLogScreen=document.getElementById("create-log-screen"),this.createLogHint=document.querySelector(".create-log-hint"),this.createLogDevice=document.querySelector(".create-log-device"),this.createLogDevice.addEventListener("change",this.onCreateLogDeviceSelect),this.createLogProperty=document.querySelector(".create-log-property"),this.createLogSaveButton=document.getElementById("create-log-save-button"),this.createLogSaveButton.addEventListener("click",this.onCreateLog),this.createLogButton=document.querySelector(".create-log-button"),this.createLogButton.addEventListener("click",this.showCreateLog),this.createLogRetentionNumber=document.querySelector(".create-log-retention-duration-number"),this.createLogRetentionUnit=document.querySelector(".create-log-retention-duration-unit"),this.createLogBackButton=document.getElementById("create-log-back-button"),this.createLogBackButton.addEventListener("click",this.hideCreateLog),this.logsContainer=this.view.querySelector(".logs"),this.logsHeader=document.querySelector(".logs-header"),this.logRemoveDialog=document.getElementById("log-remove-dialog"),this.logRemoveButton=document.getElementById("log-remove-button"),this.logRemoveButton.addEventListener("click",this.onRemoveConfirm),this.logRemoveName=document.getElementById("log-remove-name"),this.logRemoveBackButton=document.getElementById("log-remove-back-button"),this.logRemoveBackButton.addEventListener("click",this.hideRemoveDialog),this.logsBackButton=document.getElementById("logs-back-button"),this.logsBackButton.addEventListener("click",(function(){p("/logs")})),this.menuButton=document.getElementById("menu-button"),this.onWindowResize()}},{key:"show",value:function(e){this.logDescr=e,this.reload(),l.gatewayModel.unsubscribe(h.REFRESH_THINGS,this.refreshThings),l.gatewayModel.subscribe(h.REFRESH_THINGS,this.refreshThings,!0)}},{key:"reload",value:function(){var e=this;this.end=new Date(Date.now());var t=!!this.logDescr;if(t){var n=[{listener:this.handleRemove.bind(this),name:f.getMessage("remove"),icon:"/images/remove.svg"}];l.buildOverflowMenu(n),l.showOverflowButton(),this.createLogButton.classList.add("hidden"),this.menuButton.classList.add("hidden"),this.logsBackButton.classList.remove("hidden"),this.view.classList.add("solo-view")}else l.hideOverflowButton(),this.createLogButton.classList.remove("hidden"),this.menuButton.classList.remove("hidden"),this.logsBackButton.classList.add("hidden"),this.logsHeader.textContent="Logs",this.view.classList.remove("solo-view");u.getLogs().then((function(n){for(var r in e.logs)e.logs[r].remove(),delete e.logs[r];var i,a=[],s=o(n);try{for(s.s();!(i=s.n()).done;){var c=i.value,u=!0;if(t&&(u=c.thing===e.logDescr.thing&&c.property===e.logDescr.property),u){var l=new d(c.thing,c.property,e.start,e.end,t);e.logs[c.id]=l,e.logsContainer.appendChild(l.elt),a.push(l.load())}}}catch(e){s.e(e)}finally{s.f()}return n&&0!==n.length?e.createLogHint.classList.add("hidden"):e.createLogHint.classList.remove("hidden"),Promise.all(a)})).then((function(){e.streamAll()})).catch((function(e){l.showMessage("Server error: unable to retrieve logs",5e3),console.error("Unable to fetch schema",e)}))}},{key:"streamAll",value:function(){var e=this;if(!this.closing&&!this.messageSocket){var t="start=".concat(this.start.getTime(),"&end=").concat(this.end.getTime()),n="jwt=".concat(u.jwt,"&").concat(t),r="";this.thing&&(r="things/".concat(this.thing,"/properties/").concat(this.property));var i="".concat(l.ORIGIN.replace(/^http/,"ws"),"/logs/").concat(r,"?").concat(n);this.messageSocket=new WebSocket(i);var a=function(){e.closing=!0,e.messageSocket&&(e.messageSocket.readyState!==WebSocket.OPEN&&e.messageSocket.readyState!==WebSocket.CONNECTING||e.messageSocket.close())};window.addEventListener("beforeunload",a);var s=function(t){var n,r=o(JSON.parse(t.data));try{for(r.s();!(n=r.n()).done;){var i=n.value;e.logs.hasOwnProperty(i.id)&&e.logs[i.id].addRawPoint(i)}}catch(e){r.e(e)}finally{r.f()}},c=function t(){for(var n in e.messageSocket.removeEventListener("message",s),e.messageSocket.removeEventListener("close",t),e.messageSocket.removeEventListener("error",t),e.messageSocket.close(),e.messageSocket=null,window.removeEventListener("beforeunload",a),e.logs)e.logs[n].loading=!1,e.logs[n].redraw()};this.messageSocket.addEventListener("message",s),this.messageSocket.addEventListener("close",c),this.messageSocket.addEventListener("error",c)}}},{key:"refreshThings",value:function(e){var t=this;this.createLogDevice.innerHTML="",this.things=e,e.forEach((function(e,n){for(var r in e.properties){var i=e.properties[r];if("boolean"===i.type||"number"===i.type||"integer"===i.type){var o=document.createElement("option");o.innerText=e.title,o.value=n,t.createLogDevice.appendChild(o);break}}})),this.createLogSaveButton.disabled=0===this.createLogDevice.childNodes.length,this.onCreateLogDeviceSelect()}},{key:"onCreateLogDeviceSelect",value:function(){this.createLogProperty.innerHTML="";var e=this.things.get(this.createLogDevice.value);if(e)for(var t in e.properties){var n=e.properties[t];if("boolean"===n.type||"number"===n.type||"integer"===n.type){var r=document.createElement("option");r.innerText=n.title||m.capitalize(t),r.value=t,this.createLogProperty.appendChild(r)}}}},{key:"showCreateLog",value:function(){this.createLogScreen.classList.remove("hidden"),l.hideOverflowButton()}},{key:"hideCreateLog",value:function(){this.createLogScreen.classList.add("hidden"),this.reload()}},{key:"onCreateLog",value:(s=regeneratorRuntime.mark((function e(){var t,n,i,o,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=7*(n=24*(t=36e5)),o=this.createLogRetentionNumber.value,e.t0=this.createLogRetentionUnit.value,e.next="hours"===e.t0?7:"days"===e.t0?9:"weeks"===e.t0?11:9;break;case 7:return o*=t,e.abrupt("break",13);case 9:return o*=n,e.abrupt("break",13);case 11:return o*=i,e.abrupt("break",13);case 13:u.addLog({descr:{type:"property",thing:this.createLogDevice.value,property:this.createLogProperty.value},maxAge:o}).then((function(e){var t=r(e,2),n=t[0],i=t[1];if(n)return a.createLogHint.classList.add("hidden"),void a.hideCreateLog();i?l.showMessage("".concat(f.getMessage("logs-unable-to-create"),": ").concat(i),5e3):l.showMessage(f.getMessage("logs-unable-to-create"),5e3)}));case 14:case"end":return e.stop()}}),e,this)})),v=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=s.apply(e,t);function a(e){i(o,n,r,a,c,"next",e)}function c(e){i(o,n,r,a,c,"throw",e)}a(void 0)}))},function(){return v.apply(this,arguments)})},{key:"onWindowResize",value:function(){var e=this;this.resizeTimeout&&window.clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout((function(){for(var t in e.logs)e.logs[t].dimension(),e.logs[t].drawSkeleton(),e.logs[t].redraw();e.resizeTimeout=null}),100)}},{key:"handleEdit",value:function(){}},{key:"handleRemove",value:function(){this.logRemoveName.textContent=this.logsHeader.textContent,this.logRemoveDialog.classList.remove("hidden")}},{key:"hideRemoveDialog",value:function(){this.logRemoveDialog.classList.add("hidden")}},{key:"onRemoveConfirm",value:function(){if(this.hideRemoveDialog(),this.logDescr){var e=this.logDescr.thing,t=this.logDescr.property;u.deleteLog(e,t).then((function(){p("/logs")})).catch((function(){l.showMessage(f.getMessage("logs-server-remove-error"),5e3)}))}else console.warn("Ignoring attempt to remove log from logs view")}}])&&c(t.prototype,n),a&&c(t,a),e}();e.exports=new v},function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(9),n(139),n(147),n(3),n(46),n(5),n(227),n(105),n(45),n(140),n(100);var o=n(141),a=n(149),s=n(175),c=n(120),u=n(22),l=n(19),h=function(){function e(t,n,r,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.thingId=t,this.propertyId=n,this.logStart=new Date(r.getTime()),this.logEnd=new Date(i.getTime()),this.start=new Date(this.logEnd.getTime()-864e5),this.end=new Date(this.logEnd.getTime()),this.soloView=o,this.loading=!0,this.dimension(),this.elt=document.createElement("div"),this.elt.classList.add("logs-log-container"),this.soloView&&this.elt.classList.add("logs-log-container-solo-view"),this.rawPoints=[],this.onPropertyStatus=this.onPropertyStatus.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerLeave=this.onPointerLeave.bind(this),this.scrollLeft=this.scrollLeft.bind(this),this.scrollRight=this.scrollRight.bind(this),this.pointerState={},this.prevPointerState={},this.touchTooltipTimeout=null,this.liveScrollUpdate=this.liveScrollUpdate.bind(this),this.drawSkeleton()}var t,n,h,f,d;return t=e,(n=[{key:"dimension",value:function(){this.xMargin=96,this.xStart=this.xMargin+20,window.innerWidth<800&&(this.xMargin=72,this.xStart=48),this.width=window.innerWidth,this.soloView?(this.yMargin=30,this.scrollHeight=30,this.yPadding=30,this.height=window.innerHeight-96-2*this.yMargin-this.scrollHeight-this.yPadding):(this.yMargin=20,this.height=200,this.scrollHeight=30,this.yPadding=20),this.graphHeight=this.height-2*this.yMargin,this.graphWidth=this.width-this.xStart-this.xMargin}},{key:"drawSkeleton",value:function(){if(this.removeAll(".logs-log-info"),this.removeAll(".logs-graph"),this.removeAll(".logs-graph-tooltip"),!this.soloView){this.name||(this.name=document.createElement("div"),this.name.classList.add("logs-log-name")),this.icon||(this.icon=document.createElement("div"),this.icon.classList.add("logs-log-icon")),this.infoContainer=document.createElement("a"),this.infoContainer.classList.add("logs-log-info");var e="/logs/things/".concat(encodeURIComponent(this.thingId).replace(/%2F/g,"%252F"),"/properties/").concat(encodeURIComponent(this.propertyId).replace(/%2F/g,"%252F"));this.infoContainer.setAttribute("href",e),this.infoContainer.appendChild(this.icon),this.infoContainer.appendChild(this.name),this.elt.appendChild(this.infoContainer)}this.createWeekDropdown(),this.graph=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.graph.classList.add("logs-graph"),this.graph.style.width="".concat(this.width,"px"),this.graph.style.height="".concat(this.height+this.scrollHeight+this.yPadding,"px"),this.graph.addEventListener("mousedown",this.onPointerDown),this.graph.addEventListener("mousemove",this.onPointerMove),this.graph.addEventListener("mouseup",this.onPointerUp),this.graph.addEventListener("mouseleave",this.onPointerLeave),this.graph.addEventListener("touchstart",this.onPointerDown),this.graph.addEventListener("touchmove",this.onPointerMove),this.graph.addEventListener("touchend",this.onPointerUp),this.graph.addEventListener("contextmenu",(function(e){return e.preventDefault()}));var t=this.makePath([{x:this.xStart,y:this.yMargin},{x:this.xStart,y:this.height-this.yMargin},{x:this.width-this.xMargin,y:this.height-this.yMargin}]);t.classList.add("logs-graph-axes"),this.graph.appendChild(t),this.yAxisLabel=this.makeText("",this.xStart-5,this.height/2,"end","middle"),this.yAxisLabel.classList.add("logs-graph-label"),this.graph.appendChild(this.yAxisLabel),this.progress=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.progress.classList.add("logs-graph-progress"),this.progress.setAttribute("x",this.xStart),this.progress.setAttribute("y",this.yMargin),this.progressWidth=Math.floor(.05*this.graphWidth),this.progress.setAttribute("width",this.progressWidth),this.progress.setAttribute("height",this.graphHeight),this.graph.appendChild(this.progress),this.selectionHighlight=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.selectionHighlight.classList.add("logs-graph-selection-highlight"),this.selectionHighlight.setAttribute("x",this.xStart),this.selectionHighlight.setAttribute("y",this.yMargin),this.selectionHighlight.setAttribute("width",0),this.selectionHighlight.setAttribute("height",this.graphHeight),this.graph.appendChild(this.selectionHighlight),this.drawScrollBar(),this.elt.appendChild(this.graph),this.tooltip=document.createElement("div"),this.tooltip.classList.add("logs-graph-tooltip"),this.tooltipValue=document.createElement("p"),this.tooltipDate=document.createElement("p"),this.tooltip.appendChild(this.tooltipValue),this.tooltip.appendChild(this.tooltipDate),this.elt.appendChild(this.tooltip)}},{key:"createWeekDropdown",value:function(){var e=this;if(!this.weekDropdown){this.weekDropdown=document.createElement("select"),this.weekDropdown.classList.add("logs-log-week-dropdown","arrow-select");for(var t=[{name:l.getMessage("minute"),value:6e4},{name:l.getMessage("hour"),value:36e5},{name:l.getMessage("day"),value:864e5},{name:l.getMessage("week"),value:6048e5}],n=this.end.getTime()-this.start.getTime(),r=!1,i=0,o=t;i<o.length;i++){var a=o[i],s=document.createElement("option");s.textContent=a.name,s.value=a.value,a.value===n&&(s.setAttribute("selected",!0),r=!0),this.weekDropdown.appendChild(s)}r||(this.weekDropdown.value=864e5),this.weekDropdown.addEventListener("change",(function(){var t=e.end.getTime(),n=t-e.weekDropdown.value;n<e.logStart.getTime()&&(t=(n=e.logStart.getTime())+e.weekDropdown.value),e.start=new Date(n),e.end=new Date(t),e.redraw()})),this.elt.appendChild(this.weekDropdown)}}},{key:"makePath",value:function(e,t){for(var n=document.createElementNS("http://www.w3.org/2000/svg","path"),r=["M",e[0].x.toFixed(1),e[0].y.toFixed(1)],i=1;i<e.length;i++)r.push("L",e[i].x.toFixed(1),e[i].y.toFixed(1));return t&&r.push("Z"),n.setAttribute("d",r.join(" ")),n}},{key:"makeText",value:function(e,t,n,r,i){var o=document.createElementNS("http://www.w3.org/2000/svg","text");return o.textContent=e,o.setAttribute("text-anchor",r),o.setAttribute("dominant-baseline",i),o.setAttribute("x",t),o.setAttribute("y",n),o}},{key:"load",value:(f=regeneratorRuntime.mark((function e(){var t,n,r,i,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.gatewayModel.getThing(this.thingId);case 2:return t=e.sent,e.next=5,o.gatewayModel.getThingModel(this.thingId);case 5:if(this.thingModel=e.sent,t&&this.thingModel){e.next=8;break}return e.abrupt("return");case 8:n=t.title,this.property=this.thingModel.propertyDescriptions[this.propertyId],r=this.property&&this.property.title||this.propertyId&&u.capitalize(this.propertyId)||"",i="".concat(n," ").concat(r),this.soloView?document.querySelector(".logs-header").textContent=i:this.name.textContent=i,this.soloView||(l="",l=t.selectedCapability?s.capabilityToIcon(t.selectedCapability):s.defaultIcon(),this.icon.style.backgroundImage="url(".concat(l,")")),h=c.convert(0,this.property&&this.property.unit||"").unit,this.yAxisLabel.textContent=c.nameToAbbreviation(h),this.thingModel.subscribe(a.PROPERTY_STATUS,this.onPropertyStatus),this.rawPoints.length>0&&this.redraw();case 18:case"end":return e.stop()}}),e,this)})),d=function(){var e=this,t=arguments;return new Promise((function(n,i){var o=f.apply(e,t);function a(e){r(o,n,i,a,s,"next",e)}function s(e){r(o,n,i,a,s,"throw",e)}a(void 0)}))},function(){return d.apply(this,arguments)})},{key:"clearPoints",value:function(){this.rawPoints=[]}},{key:"addRawPoint",value:function(e){if(this.rawPoints.push({value:c.convert(e.value,this.property.unit).value,time:e.date}),this.loading&&this.rawPoints.length>2){var t=(this.rawPoints[this.rawPoints.length-1].time-this.start.getTime())/(this.end.getTime()-this.start.getTime());t=Math.min(t,1);var n=Math.floor((.95*t+.05)*this.graphWidth);n>this.progressWidth&&(this.progress.setAttribute("width",n),this.progressWidth=n)}}},{key:"valueBounds",value:function(){if("percent"===this.property.unit)return{min:0,max:100};if("boolean"===this.property.type)return{min:0,max:1};if(0===this.rawPoints.length)return this.property.hasOwnProperty("minimum")&&this.property.hasOwnProperty("maximum")?{min:c.convert(this.property.minimum,this.property.unit).value,max:c.convert(this.property.maximum,this.property.unit).value}:{min:0,max:1};for(var e=this.rawPoints[0].value,t=e,n=1;n<this.rawPoints.length;n++){var r=this.rawPoints[n].value;t<r&&(t=r),e>r&&(e=r)}if(this.property.hasOwnProperty("minimum")&&this.property.hasOwnProperty("maximum")){var i=c.convert(this.property.minimum,this.property.unit).value,o=c.convert(this.property.maximum,this.property.unit).value;if((o-i)/(t-e+.001)<3&&e>=i&&t<=o)return{min:i,max:o}}var a=.1*(t-e);return 1!==this.rawPoints.length&&e!==t||(a=1),e>=0&&e-3*a<0&&(e=a),{min:e-a,max:t+a}}},{key:"timeToX",value:function(e,t,n){var r=t||this.start.getTime();return(e-r)/((n||this.end.getTime())-r)*this.graphWidth+this.xStart}},{key:"xToTime",value:function(e,t,n){var r=t||this.start.getTime(),i=n||this.end.getTime();return(e-this.xStart)/this.graphWidth*(i-r)+r}},{key:"valueToY",value:function(e){return this.height-this.yMargin-(e-this.valueMin)/(this.valueMax-this.valueMin)*this.graphHeight}},{key:"interpolate",value:function(e,t,n){return t.x-e.x==0?{x:n,y:e.y}:{x:n,y:(t.y-e.y)/(t.x-e.x)*(n-e.x)+e.y}}},{key:"determineBounds",value:function(){if(!this.hasOwnProperty("valueMin")){var e=this.valueBounds();this.valueMin=e.min,this.valueMax=e.max;var t=Math.pow(10,Math.ceil(Math.log(this.valueMax-this.valueMin)/Math.LN10)-3);this.valueMax=Math.ceil(this.valueMax/t)*t,this.valueMin=Math.floor(this.valueMin/t)*t}}},{key:"redraw",value:function(){if(this.property&&(this.removeAll(".logs-graph-line"),this.removeAll(".logs-graph-fill"),this.removeAll(".logs-graph-label"),this.removeAll(".logs-graph-tick"),this.removeTooltip(),this.progress.setAttribute("width",0),this.progressWidth=0,this.determineBounds(),this.drawYTicks(),this.drawXTicks(),this.updateScrollBar(),0!==this.rawPoints.length)){var e=[],t=this.nearestIndex(this.start.getTime())-1;t=Math.max(0,t);var n=Math.max(0,t-1),r=this.nearestIndex(this.end.getTime())+1;r=Math.min(r,this.rawPoints.length-1);for(var i=Math.min(r+1,this.rawPoints.length-1),o=t;o<=r;o++){var a=this.rawPoints[o];if(a.time<this.start.getTime())n=o;else if(a.time>this.end.getTime())o<i&&(i=o);else{var s=this.timeToX(a.time),c=this.valueToY(a.value);e.length>0&&("boolean"!==this.property.type&&"integer"!==this.property.type||e.push({x:s,y:e[e.length-1].y})),e.push({x:s,y:c})}}var u={x:this.timeToX(this.rawPoints[n].time),y:this.valueToY(this.rawPoints[n].value)};if("boolean"===this.property.type||"integer"===this.property.type)e.unshift({x:this.xStart,y:u.y},{x:e.length>0?e[0].x:this.xStart+this.graphWidth,y:u.y});else if(e.length>0){var l=this.interpolate(u,e[0],this.xStart);e.unshift(l)}var h={x:this.timeToX(this.rawPoints[i].time),y:this.valueToY(this.rawPoints[i].value)};if("boolean"===this.property.type||"integer"===this.property.type){var f=e[e.length-1];e.push({x:f.x,y:f.y},{x:this.xStart+this.graphWidth,y:f.y})}else if(e.length>0){var d=this.interpolate(e[e.length-1],h,this.xStart+this.graphWidth);e.push(d)}else{var p=this.interpolate(u,h,this.xStart),m=this.interpolate(u,h,this.xStart+this.graphWidth);e.push(p,m)}var v=this.makePath(e);v.classList.add("logs-graph-line"),e.unshift({x:e[0].x,y:this.height-this.yMargin}),e.push({x:e[e.length-1].x,y:this.height-this.yMargin});var g=this.makePath(e);g.classList.add("logs-graph-fill"),this.graph.appendChild(g),this.graph.appendChild(v),this.liveScrollFrameRequest||(this.liveScrollFrameRequest=window.requestAnimationFrame(this.liveScrollUpdate))}}},{key:"timeToLabel",value:function(e){var t=new Date(e);if(0===t.getHours()&&0===t.getMinutes())return"".concat(t.getDate());var n=t.getMinutes().toString().padStart(2,"0");if(0===t.getSeconds())return"".concat(t.getHours(),":").concat(n);var r=t.getSeconds().toString().padStart(2,"0");return"".concat(t.getHours(),":").concat(n,":").concat(r)}},{key:"valueToLabel",value:function(e,t){var n;if(t=t||0,"boolean"===this.property.type)n=this.propertyLabel(e).toLocaleUpperCase();else if(Math.floor(e)===e)n=e.toFixed(0);else{var r=Math.max(0,2+t-Math.log(this.valueMax-this.valueMin)/Math.LN10);n=e.toFixed(r)}return n}},{key:"removeAll",value:function(e){this.elt.querySelectorAll(e).forEach((function(e){e.parentNode.removeChild(e)}))}},{key:"drawYTicks",value:function(){if(this.graph.appendChild(this.yAxisLabel),"boolean"!==this.property.type)for(var e=Math.pow(10,Math.floor(Math.log(this.valueMax-this.valueMin)/Math.LN10)-1),t=this.valueMin+e,n=1;t<this.valueMax;){var r=this.valueToY(t),i=5;n%5==0&&(i*=1.5);var o=this.makePath([{x:this.xStart,y:r},{x:this.xStart+i,y:r}]);o.classList.add("logs-graph-tick"),this.graph.appendChild(o),t+=e,n+=1}var a=this.makePath([{x:this.xStart-1,y:this.valueToY(this.valueMax)-1},{x:this.xStart+10,y:this.valueToY(this.valueMax)-1}]);a.classList.add("logs-graph-tick","logs-graph-tick-big"),this.graph.appendChild(a);var s=this.makeText(this.valueToLabel(this.valueMin),this.xStart-5,this.valueToY(this.valueMin),"end","middle");s.classList.add("logs-graph-label"),this.graph.appendChild(s),(s=this.makeText(this.valueToLabel(this.valueMax),this.xStart-5,this.valueToY(this.valueMax),"end","middle")).classList.add("logs-graph-label"),this.graph.appendChild(s)}},{key:"drawXTicks",value:function(){var e,t=[864e5,432e5,36e5,9e5,3e5,6e4,1e4,1e3];for(e=1;e<t.length-1;e++){var n=t[e];if(this.timeToX(n)-this.timeToX(0)<48)break}for(var r=t[e],i=t[e-1],o=this.timeToX(r)-this.timeToX(0),a=this.floorDate(new Date(this.start.getTime())).getTime(),s=a;s<this.end.getTime();){if(s>this.start.getTime()){var c=this.timeToX(s),u=5;if((s-a)%i==0){var l=this.timeToLabel(s),h=this.makeText(l,c,this.height-this.yMargin+2,"middle","hanging");h.classList.add("logs-graph-label"),this.graph.appendChild(h),u*=2}else if(o>48){var f=this.timeToLabel(s),d=this.makeText(f,c,this.height-this.yMargin+2,"middle","hanging");d.classList.add("logs-graph-label"),this.graph.appendChild(d)}var p=this.makePath([{x:c,y:this.height-this.yMargin},{x:c,y:this.height-this.yMargin-u}]);p.classList.add("logs-graph-tick"),this.graph.appendChild(p)}s+=r}}},{key:"drawScrollBar",value:function(){var e=this.height+this.scrollHeight/2-8;this.scrollBar=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.scrollBar.classList.add("logs-scroll-bar"),this.scrollBar.setAttribute("x",this.xStart),this.scrollBar.setAttribute("y",e),this.scrollBar.setAttribute("width",this.graphWidth),this.scrollBar.setAttribute("height",16),this.graph.appendChild(this.scrollBar),this.scrollControl=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.scrollControl.classList.add("logs-scroll-control"),this.scrollControl.setAttribute("y",e),this.scrollControl.setAttribute("height",16),this.graph.appendChild(this.scrollControl);var t=1/Math.sqrt(3),n=e+8;this.scrollButtonLeft=this.makePath([{x:this.xStart-16-8,y:n},{x:this.xStart-8,y:n-16*t},{x:this.xStart-8,y:n+16*t}],!0),this.scrollButtonLeft.classList.add("logs-scroll-button"),this.scrollButtonLeft.addEventListener("click",this.scrollLeft),this.graph.appendChild(this.scrollButtonLeft);var r=this.xStart+this.graphWidth+8;this.scrollButtonRight=this.makePath([{x:r+16,y:n},{x:r,y:n-16*t},{x:r,y:n+16*t}],!0),this.scrollButtonRight.classList.add("logs-scroll-button"),this.scrollButtonRight.addEventListener("click",this.scrollRight),this.graph.appendChild(this.scrollButtonRight)}},{key:"updateScrollBar",value:function(){var e=this.timeToX(this.start.getTime(),this.logStart.getTime(),this.logEnd.getTime()),t=this.timeToX(this.end.getTime(),this.logStart.getTime(),this.logEnd.getTime());if(t-e<16){var n=(t+e)/2;e=n-8,(t=n+8)>this.xStart+this.graphWidth&&(e=(t=this.xStart+this.graphWidth)-16),e<this.xStart&&(t=(e=this.xStart)+16)}this.scrollControl.setAttribute("x",e),this.scrollControl.setAttribute("width",t-e)}},{key:"scrollLeft",value:function(){var e=this.end.getTime()-this.start.getTime();this.scroll(-e/2)}},{key:"scrollRight",value:function(){var e=this.end.getTime()-this.start.getTime();this.scroll(e/2)}},{key:"scroll",value:function(e){var t=this.start.getTime()+e,n=this.end.getTime()+e,r=n-t;e<0&&t<this.logStart.getTime()?n=(t=this.logStart.getTime())+r:e>0&&n>this.logEnd.getTime()&&(t=(n=this.logEnd.getTime())-r),this.start=new Date(t),this.end=new Date(n),this.redraw()}},{key:"propertyLabel",value:function(e){if("boolean"===this.property.type)switch(this.property["@type"]){case"OnOffProperty":return e?l.getMessage("on"):l.getMessage("off");case"MotionProperty":return e?l.getMessage("motion"):l.getMessage("no-motion");case"OpenProperty":return e?l.getMessage("open"):l.getMessage("closed");case"LeakProperty":return e?l.getMessage("leak"):l.getMessage("dry");case"PushedProperty":return e?l.getMessage("pushed"):l.getMessage("not-pushed");case"BooleanProperty":default:return e?l.getMessage("true"):l.getMessage("false")}return"".concat(e)}},{key:"floorDate",value:function(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}},{key:"nearestIndex",value:function(e){for(var t=0,n=this.rawPoints.length-1,r=0;n>t;)if(r=Math.floor((t+n)/2),this.rawPoints[r].time<e)t=r+1;else{if(!(this.rawPoints[r].time>e))break;n=r-1}return r}},{key:"nearestPoint",value:function(e,t){var n=this.xToTime(e);if(n<this.start.getTime()||n>this.end.getTime())return null;for(var r=this.nearestIndex(n),i=null,o=5e3,a=r-2;a<r+3;a++)if(!(a<0||a>this.rawPoints.length-1||this.rawPoints[a].time<this.start.getTime()||this.rawPoints[a].time>this.end.getTime())){var s=this.timeToX(this.rawPoints[a].time)-e,c=this.valueToY(this.rawPoints[a].value)-t,u=s*s+c*c;u>o||(o=u,i=this.rawPoints[a])}return i}},{key:"constrainTime",value:function(e){return e<this.start.getTime()?this.start.getTime():e>this.end.getTime()?this.end.getTime():e}},{key:"setPointerState",value:function(e){this.prevPointerState=this.pointerState,this.pointerState=e}},{key:"convertTouchEvent",value:function(e){e.isTouch=!1,e.targetTouches&&e.targetTouches.length>0&&(e.clientX=e.targetTouches[0].clientX,e.clientY=e.targetTouches[0].clientY,e.isTouch=!0)}},{key:"onPointerDown",value:function(e){var t=this;if(this.convertTouchEvent(e),2!==e.buttons)if(e.target.classList.contains("logs-scroll-control")){var n=parseFloat(this.scrollControl.getAttribute("x"));this.setPointerState({action:1,scrollOffset:e.clientX-n})}else if(e.isTouch){var r=this.graph.getBoundingClientRect();this.drawTooltip(e.clientX-r.left,e.clientY-r.top),clearTimeout(this.touchTooltipTimeout),this.touchTooltipTimeout=setTimeout((function(){t.removeTooltip()}),5e3)}else{var i=this.graph.getBoundingClientRect();if(e.clientY-i.top>this.graphHeight+this.yMargin)return;this.setPointerState({action:2,dragStart:this.constrainTime(this.xToTime(e.clientX))})}else e.preventDefault()}},{key:"onPointerMove",value:function(e){if((e.buttons||1===this.pointerState.action)&&e.preventDefault(),this.convertTouchEvent(e),1===e.buttons&&this.prevPointerState.action&&!this.pointerState.action&&this.setPointerState(this.prevPointerState),2===this.pointerState.action)this.drawHighlight(e.clientX);else if(1===this.pointerState.action){var t=e.clientX-this.pointerState.scrollOffset,n=parseFloat(this.scrollControl.getAttribute("width")),r=this.xStart+this.graphWidth-n;t<this.xStart?t=this.xStart:t>r&&(t=r),this.scrollControl.setAttribute("x",t),this.finishScrolling()}else{var i=this.graph.getBoundingClientRect();this.drawTooltip(e.clientX-i.left,e.clientY-i.top)}}},{key:"drawHighlight",value:function(e){var t=this.timeToX(this.pointerState.dragStart),n=Math.min(t,e),r=Math.max(t,e);n=Math.max(n,this.xStart),r=Math.min(r,this.graphWidth+this.xStart),this.selectionHighlight.setAttribute("x",n),this.selectionHighlight.setAttribute("width",r-n)}},{key:"removeHighlight",value:function(){this.selectionHighlight.setAttribute("width",0)}},{key:"drawTooltip",value:function(e,t){if(this.property&&this.rawPoints&&0!==this.rawPoints.length){var n=this.nearestPoint(e,t);if(n){var r=this.timeToX(n.time),i=this.valueToY(n.value);this.tooltip.style.display="block",this.tooltip.style.transform="translate(".concat(r,"px,").concat(i,"px)");var o=this.valueToLabel(n.value,2),a=c.nameToAbbreviation(c.convert(0,this.property.unit||"").unit);this.tooltipValue.textContent="".concat(o," ").concat(a);var s=new Date(n.time).toTimeString().split(" ");this.tooltipDate.textContent="".concat(s[0]),this.pointHighlight||(this.pointHighlight=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.pointHighlight.classList.add("logs-graph-point-highlight"),this.pointHighlight.setAttribute("r",3),this.graph.appendChild(this.pointHighlight)),this.pointHighlight.setAttribute("cx",r),this.pointHighlight.setAttribute("cy",i)}else this.removeTooltip()}}},{key:"onPointerLeave",value:function(){this.removeTooltip(),this.removeHighlight(),1===this.pointerState.action&&this.finishScrolling(),this.setPointerState({})}},{key:"onPointerUp",value:function(e){if(e.buttons&&e.preventDefault(),this.convertTouchEvent(e),this.removeHighlight(),1===this.pointerState.action)this.finishScrolling();else if(2===this.pointerState.action){var t,n,r=this.constrainTime(this.xToTime(e.clientX));if(Math.abs(r-this.pointerState.dragStart)<1e4)return void this.setPointerState({});this.pointerState.dragStart<r?(t=new Date(this.pointerState.dragStart),n=new Date(r)):(t=new Date(r),n=new Date(this.pointerState.dragStart)),this.start=t,this.end=n,this.redraw()}2===e.button&&(this.start=this.logStart,this.end=this.logEnd,this.weekDropdown.value=6048e5,this.redraw()),this.setPointerState({})}},{key:"finishScrolling",value:function(){var e=parseFloat(this.scrollControl.getAttribute("x")),t=parseFloat(this.scrollControl.getAttribute("width")),n=e+t/2,r=this.xStart+t/2,i=this.graphWidth-t,o=this.end.getTime()-this.start.getTime(),a=this.logStart.getTime()+o/2,s=(n-r)/i*(this.logEnd.getTime()-o/2-a)+a-(this.start.getTime()+o/2);this.scroll(s)}},{key:"removeTooltip",value:function(){this.tooltip.style.display="none",this.pointHighlight&&(this.pointHighlight.parentNode.removeChild(this.pointHighlight),this.pointHighlight=null)}},{key:"onPropertyStatus",value:function(e){if(!this.loading&&this.property&&e.hasOwnProperty(this.propertyId)){var t=this.rawPoints[this.rawPoints.length-1];if(!t||e[this.propertyId]!==t.value){var n=Date.now();if(this.addRawPoint({value:e[this.propertyId],date:n}),!this.pointerState.action){var r=this.logEnd.getTime()-this.end.getTime();if(this.logEnd.setTime(n),r<1e4){var i=n-this.end.getTime();this.start.setTime(this.start.getTime()+i),this.end.setTime(this.end.getTime()+i)}this.redraw()}}}}},{key:"liveScrollUpdate",value:function(){if(this.pointerState.action)this.liveScrollFrameRequest=null;else{var e=Date.now();if(this.timeToX(e)-this.timeToX(this.logEnd.getTime())<1)this.liveScrollFrameRequest=window.requestAnimationFrame(this.liveScrollUpdate);else{var t=(this.end.getTime()-this.start.getTime())/10,n=!1;if(this.logEnd.getTime()-this.end.getTime()<t){var r=e-this.end.getTime();this.end.setTime(this.end.getTime()+r),this.start.setTime(this.start.getTime()+r),n=!0}this.logEnd.setTime(e),this.liveScrollFrameRequest=window.requestAnimationFrame(this.liveScrollUpdate),n&&this.redraw()}}}},{key:"remove",value:function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt),this.thingModel&&this.thingModel.unsubscribe(a.PROPERTY_STATUS,this.onPropertyStatus),this.liveScrollFrameRequest&&(window.cancelAnimationFrame(this.liveScrollFrameRequest),this.liveScrollFrameRequest=null)}}])&&i(t.prototype,n),h&&i(t,h),e}();e.exports=h},function(e,t,n){(function(e,t){
/**
@license @nocompile
Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
(function(){"use strict";var n;function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function i(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}function o(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}var a="undefined"!=typeof window&&window===this?this:void 0!==e&&null!=e?e:this,s="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};function c(){c=function(){},a.Symbol||(a.Symbol=f)}function u(e,t){this.a=e,s(this,"description",{configurable:!0,writable:!0,value:t})}u.prototype.toString=function(){return this.a};var l,h,f=(l=0,function e(t){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new u("jscomp_symbol_"+(t||"")+"_"+l++,t)});function d(){c();var e=a.Symbol.iterator;e||(e=a.Symbol.iterator=a.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[e]&&s(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return function(e){return d(),(e={next:e})[a.Symbol.iterator]=function(){return this},e}(r(this))}}),d=function(){}}if("function"==typeof Object.setPrototypeOf)h=Object.setPrototypeOf;else{var p;e:{var m={};try{m.__proto__={Pa:!0},p=m.Pa;break e}catch(Ke){}p=!1}h=p?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var v=h;function g(){this.l=!1,this.b=null,this.Ea=void 0,this.a=1,this.Y=0,this.c=null}function y(e){if(e.l)throw new TypeError("Generator is already running");e.l=!0}function b(e,t){e.c={Sa:t,Wa:!0},e.a=e.Y}function w(e,t){return e.a=3,{value:t}}function E(e){this.a=new g,this.b=e}function _(e,t,n,r){try{var i=t.call(e.a.b,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.a.l=!1,i;var o=i.value}catch(t){return e.a.b=null,b(e.a,t),k(e)}return e.a.b=null,r.call(e.a,o),k(e)}function k(e){for(;e.a.a;)try{var t=e.b(e.a);if(t)return e.a.l=!1,{value:t.value,done:!1}}catch(t){e.a.Ea=void 0,b(e.a,t)}if(e.a.l=!1,e.a.c){if(t=e.a.c,e.a.c=null,t.Wa)throw t.Sa;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function S(e){this.next=function(t){return y(e.a),e.a.b?t=_(e,e.a.b.next,t,e.a.J):(e.a.J(t),t=k(e)),t},this.throw=function(t){return y(e.a),e.a.b?t=_(e,e.a.b.throw,t,e.a.J):(b(e.a,t),t=k(e)),t},this.return=function(t){return function(e,t){y(e.a);var n=e.a.b;return n?_(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.a.return):(e.a.return(t),k(e))}(e,t)},d(),this[Symbol.iterator]=function(){return this}}function x(e,t){return t=new S(new E(t)),v&&v(t,e.prototype),t}g.prototype.J=function(e){this.Ea=e},g.prototype.return=function(e){this.c={return:e},this.a=this.Y},Array.from||(Array.from=function(e){return[].slice.call(e)}),Object.assign||(Object.assign=function(e){for(var t,n=[].slice.call(arguments,1),r=0;r<n.length;r++)if(t=n[r])for(var i=e,o=t,a=Object.getOwnPropertyNames(o),s=0;s<a.length;s++)i[t=a[s]]=o[t];return e}),function(){if((t=document.createEvent("Event")).initEvent("foo",!0,!0),t.preventDefault(),!t.defaultPrevented){var e=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(e.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var t,n=/Trident/.test(navigator.userAgent);if(!window.Event||n&&"function"!=typeof window.Event){var r=window.Event;if(window.Event=function(e,t){t=t||{};var n=document.createEvent("Event");return n.initEvent(e,!!t.bubbles,!!t.cancelable),n},r){for(var i in r)window.Event[i]=r[i];window.Event.prototype=r.prototype}}if((!window.CustomEvent||n&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail),n},window.CustomEvent.prototype=window.Event.prototype),!window.MouseEvent||n&&"function"!=typeof window.MouseEvent){if(n=window.MouseEvent,window.MouseEvent=function(e,t){t=t||{};var n=document.createEvent("MouseEvent");return n.initMouseEvent(e,!!t.bubbles,!!t.cancelable,t.view||window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),n},n)for(var o in n)window.MouseEvent[o]=n[o];window.MouseEvent.prototype=n.prototype}}(),function(){function e(){}function t(e,t){if(!e.childNodes.length)return[];switch(e.nodeType){case Node.DOCUMENT_NODE:return m.call(e,t);case Node.DOCUMENT_FRAGMENT_NODE:return v.call(e,t);default:return p.call(e,t)}}var n="undefined"==typeof HTMLTemplateElement,r=!(document.createDocumentFragment().cloneNode()instanceof DocumentFragment),i=!1;/Trident/.test(navigator.userAgent)&&function(){function e(e,t){if(e instanceof DocumentFragment)for(var r;r=e.firstChild;)n.call(this,r,t);else n.call(this,e,t);return e}i=!0;var t=Node.prototype.cloneNode;Node.prototype.cloneNode=function(e){return e=t.call(this,e),this instanceof DocumentFragment&&(e.__proto__=DocumentFragment.prototype),e},DocumentFragment.prototype.querySelectorAll=HTMLElement.prototype.querySelectorAll,DocumentFragment.prototype.querySelector=HTMLElement.prototype.querySelector,Object.defineProperties(DocumentFragment.prototype,{nodeType:{get:function(){return Node.DOCUMENT_FRAGMENT_NODE},configurable:!0},localName:{get:function(){},configurable:!0},nodeName:{get:function(){return"#document-fragment"},configurable:!0}});var n=Node.prototype.insertBefore;Node.prototype.insertBefore=e;var r=Node.prototype.appendChild;Node.prototype.appendChild=function(t){return t instanceof DocumentFragment?e.call(this,t,null):r.call(this,t),t};var o=Node.prototype.removeChild,a=Node.prototype.replaceChild;Node.prototype.replaceChild=function(t,n){return t instanceof DocumentFragment?(e.call(this,t,n),o.call(this,n)):a.call(this,t,n),n},Document.prototype.createDocumentFragment=function(){var e=this.createElement("df");return e.__proto__=DocumentFragment.prototype,e};var s=Document.prototype.importNode;Document.prototype.importNode=function(e,t){return t=s.call(this,e,t||!1),e instanceof DocumentFragment&&(t.__proto__=DocumentFragment.prototype),t}}();var o=Node.prototype.cloneNode,a=Document.prototype.createElement,s=Document.prototype.importNode,c=Node.prototype.removeChild,u=Node.prototype.appendChild,l=Node.prototype.replaceChild,h=DOMParser.prototype.parseFromString,f=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML")||{get:function(){return this.innerHTML},set:function(e){this.innerHTML=e}},d=Object.getOwnPropertyDescriptor(window.Node.prototype,"childNodes")||{get:function(){return this.childNodes}},p=Element.prototype.querySelectorAll,m=Document.prototype.querySelectorAll,v=DocumentFragment.prototype.querySelectorAll,g=function(){if(!n){var e=document.createElement("template"),t=document.createElement("template");return t.content.appendChild(document.createElement("div")),e.content.appendChild(t),0===(e=e.cloneNode(!0)).content.childNodes.length||0===e.content.firstChild.content.childNodes.length||r}}();if(n){var y=document.implementation.createHTMLDocument("template"),b=!0,w=document.createElement("style");w.textContent="template{display:none;}";var E=document.head;E.insertBefore(w,E.firstElementChild),e.prototype=Object.create(HTMLElement.prototype);var _=!document.createElement("div").hasOwnProperty("innerHTML");e.U=function(t){if(!t.content&&t.namespaceURI===document.documentElement.namespaceURI){t.content=y.createDocumentFragment();for(var n;n=t.firstChild;)u.call(t.content,n);if(_)t.__proto__=e.prototype;else if(t.cloneNode=function(t){return e.b(this,t)},b)try{S(t),x(t)}catch(e){b=!1}e.a(t.content)}};var k={option:["select"],thead:["table"],col:["colgroup","table"],tr:["tbody","table"],th:["tr","tbody","table"],td:["tr","tbody","table"]},S=function(t){Object.defineProperty(t,"innerHTML",{get:function(){return R(this)},set:function(t){var n=k[(/<([a-z][^/\0>\x20\t\r\n\f]+)/i.exec(t)||["",""])[1].toLowerCase()];if(n)for(var r=0;r<n.length;r++)t="<"+n[r]+">"+t+"</"+n[r]+">";for(y.body.innerHTML=t,e.a(y);this.content.firstChild;)c.call(this.content,this.content.firstChild);if(t=y.body,n)for(r=0;r<n.length;r++)t=t.lastChild;for(;t.firstChild;)u.call(this.content,t.firstChild)},configurable:!0})},x=function(e){Object.defineProperty(e,"outerHTML",{get:function(){return"<template>"+this.innerHTML+"</template>"},set:function(e){if(!this.parentNode)throw Error("Failed to set the 'outerHTML' property on 'Element': This element has no parent node.");for(y.body.innerHTML=e,e=this.ownerDocument.createDocumentFragment();y.body.firstChild;)u.call(e,y.body.firstChild);l.call(this.parentNode,e,this)},configurable:!0})};S(e.prototype),x(e.prototype),e.a=function(n){for(var r,i=0,o=(n=t(n,"template")).length;i<o&&(r=n[i]);i++)e.U(r)},document.addEventListener("DOMContentLoaded",(function(){e.a(document)})),Document.prototype.createElement=function(){var t=a.apply(this,arguments);return"template"===t.localName&&e.U(t),t},DOMParser.prototype.parseFromString=function(){var t=h.apply(this,arguments);return e.a(t),t},Object.defineProperty(HTMLElement.prototype,"innerHTML",{get:function(){return R(this)},set:function(t){f.set.call(this,t),e.a(this)},configurable:!0,enumerable:!0});var T=/[&\u00A0"]/g,P=/[&\u00A0<>]/g,O=function(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case" ":return"&nbsp;"}},C=(w=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t})("area base br col command embed hr img input keygen link meta param source track wbr".split(" ")),I=w("style script xmp iframe noembed noframes plaintext noscript".split(" ")),R=function(e,t){"template"===e.localName&&(e=e.content);for(var n,r="",i=t?t(e):d.get.call(e),o=0,a=i.length;o<a&&(n=i[o]);o++){e:{var s=n,c=e,u=t;switch(s.nodeType){case Node.ELEMENT_NODE:for(var l=s.localName,h="<"+l,f=s.attributes,p=0;c=f[p];p++)h+=" "+c.name+'="'+c.value.replace(T,O)+'"';h+=">",s=C[l]?h:h+R(s,u)+"</"+l+">";break e;case Node.TEXT_NODE:s=s.data,s=c&&I[c.localName]?s:s.replace(P,O);break e;case Node.COMMENT_NODE:s="\x3c!--"+s.data+"--\x3e";break e;default:throw window.console.error(s),Error("not implemented")}}r+=s}return r}}if(n||g){e.b=function(e,t){var n=o.call(e,!1);return this.U&&this.U(n),t&&(u.call(n.content,o.call(e.content,!0)),L(n.content,e.content)),n};var L=function(n,r){if(r.querySelectorAll&&0!==(r=t(r,"template")).length)for(var i,o,a=0,s=(n=t(n,"template")).length;a<s;a++)o=r[a],i=n[a],e&&e.U&&e.U(o),l.call(i.parentNode,A.call(o,!0),i)},A=Node.prototype.cloneNode=function(t){if(!i&&r&&this instanceof DocumentFragment){if(!t)return this.ownerDocument.createDocumentFragment();var n=M.call(this.ownerDocument,this,!0)}else n=this.nodeType===Node.ELEMENT_NODE&&"template"===this.localName&&this.namespaceURI==document.documentElement.namespaceURI?e.b(this,t):o.call(this,t);return t&&L(n,this),n},M=Document.prototype.importNode=function(n,r){if(r=r||!1,"template"===n.localName)return e.b(n,r);var i=s.call(this,n,r);if(r){L(i,n),n=t(i,'script:not([type]),script[type="application/javascript"],script[type="text/javascript"]');for(var o,c=0;c<n.length;c++){o=n[c],(r=a.call(document,"script")).textContent=o.textContent;for(var u,h=o.attributes,f=0;f<h.length;f++)u=h[f],r.setAttribute(u.name,u.value);l.call(o.parentNode,r,o)}}return i}}n&&(window.HTMLTemplateElement=e)}();var T=setTimeout;function P(){}function O(e){if(!(this instanceof O))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this.I=0,this.za=!1,this.C=void 0,this.W=[],M(e,this)}function C(e,t){for(;3===e.I;)e=e.C;0===e.I?e.W.push(t):(e.za=!0,D((function(){var n=1===e.I?t.Ya:t.Za;if(null===n)(1===e.I?I:R)(t.va,e.C);else{try{var r=n(e.C)}catch(e){return void R(t.va,e)}I(t.va,r)}})))}function I(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof O)return e.I=3,e.C=t,void L(e);if("function"==typeof n)return void M(function(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e.I=1,e.C=t,L(e)}catch(t){R(e,t)}}function R(e,t){e.I=2,e.C=t,L(e)}function L(e){2===e.I&&0===e.W.length&&D((function(){e.za||"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e.C)}));for(var t=0,n=e.W.length;t<n;t++)C(e,e.W[t]);e.W=null}function A(e,t,n){this.Ya="function"==typeof e?e:null,this.Za="function"==typeof t?t:null,this.va=n}function M(e,t){var n=!1;try{e((function(e){n||(n=!0,I(t,e))}),(function(e){n||(n=!0,R(t,e))}))}catch(e){n||(n=!0,R(t,e))}}O.prototype.catch=function(e){return this.then(null,e)},O.prototype.then=function(e,t){var n=new this.constructor(P);return C(this,new A(e,t,n)),n},O.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))};var D="function"==typeof t&&function(e){t(e)}||function(e){T(e,0)};if(!window.Promise){window.Promise=O,O.prototype.then=O.prototype.then,O.all=function(e){return new O((function(t,n){function r(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(t){r(e,t)}),n)}i[e]=a,0==--o&&t(i)}catch(e){n(e)}}if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);for(var o=i.length,a=0;a<i.length;a++)r(a,i[a])}))},O.race=function(e){return new O((function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)}))},O.resolve=function(e){return e&&"object"==typeof e&&e.constructor===O?e:new O((function(t){t(e)}))},O.reject=function(e){return new O((function(t,n){n(e)}))};var j=document.createTextNode(""),N=[];new MutationObserver((function(){for(var e=N.length,t=0;t<e;t++)N[t]();N.splice(0,e)})).observe(j,{characterData:!0}),D=function(e){N.push(e),j.textContent=0<j.textContent.length?"":"a"}}!function(t,n){if(!(n in t)){var r=typeof e==typeof r?window:e,i=0,o=""+Math.random(),a="__symbol@@"+o,s=t.getOwnPropertyNames,c=t.getOwnPropertyDescriptor,u=t.create,l=t.keys,h=t.freeze||t,f=t.defineProperty,d=t.defineProperties,p=c(t,"getOwnPropertyNames"),m=t.prototype,v=m.hasOwnProperty,g=m.propertyIsEnumerable,y=m.toString,b=function(e,t,n){v.call(e,a)||f(e,a,{enumerable:!1,configurable:!1,writable:!1,value:{}}),e[a]["@@"+t]=n},w=function(e,t){var n=u(e);return s(t).forEach((function(e){S.call(t,e)&&I(n,e,t[e])})),n},E=function(){},_=function(e){return e!=a&&!v.call(P,e)},k=function(e){return e!=a&&v.call(P,e)},S=function(e){var t=""+e;return k(t)?v.call(this,t)&&this[a]["@@"+t]:g.call(this,e)},x=function(e){return f(m,e,{enumerable:!1,configurable:!0,get:E,set:function(t){L(this,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),b(this,e,!0)}}),h(P[e]=f(t(e),"constructor",O))},T=function(e){if(this&&this!==r)throw new TypeError("Symbol is not a constructor");return x("__symbol:".concat(e||"",o,++i))},P=u(null),O={value:T},C=function(e){return P[e]},I=function(e,t,n){var r=""+t;if(k(r)){if(t=L,n.enumerable){var i=u(n);i.enumerable=!1}else i=n;t(e,r,i),b(e,r,!!n.enumerable)}else f(e,t,n);return e},R=function(e){return s(e).filter(k).map(C)};p.value=I,f(t,"defineProperty",p),p.value=R,f(t,n,p),p.value=function(e){return s(e).filter(_)},f(t,"getOwnPropertyNames",p),p.value=function(e,t){var n=R(t);return n.length?l(t).concat(n).forEach((function(n){S.call(t,n)&&I(e,n,t[n])})):d(e,t),e},f(t,"defineProperties",p),p.value=S,f(m,"propertyIsEnumerable",p),p.value=T,f(r,"Symbol",p),p.value=function(e){return(e="__symbol:".concat("__symbol:",e,o))in m?P[e]:x(e)},f(T,"for",p),p.value=function(e){if(_(e))throw new TypeError(e+" is not a symbol");return v.call(P,e)?e.slice(20,-o.length):void 0},f(T,"keyFor",p),p.value=function(e,t){var n=c(e,t);return n&&k(t)&&(n.enumerable=S.call(e,t)),n},f(t,"getOwnPropertyDescriptor",p),p.value=function(e,t){return 1===arguments.length?u(e):w(e,t)},f(t,"create",p),p.value=function(){var e=y.call(this);return"[object String]"===e&&k(this)?"[object Symbol]":e},f(m,"toString",p);try{var L=u(f({},"__symbol:",{get:function(){return f(this,"__symbol:",{value:!1})["__symbol:"]}}))["__symbol:"]||f}catch(e){L=function(e,t,n){var r=c(m,t);delete m[t],f(e,t,n),f(m,t,r)}}}}(Object,"getOwnPropertySymbols"),function(e){var t,n=e.defineProperty,r=e.prototype,i=r.toString;"iterator match replace search split hasInstance isConcatSpreadable unscopables species toPrimitive toStringTag".split(" ").forEach((function(o){if(!(o in Symbol))switch(n(Symbol,o,{value:Symbol(o)}),o){case"toStringTag":(t=e.getOwnPropertyDescriptor(r,"toString")).value=function(){var e=i.call(this),t=this[Symbol.toStringTag];return void 0===t?e:"[object "+t+"]"},n(r,"toString",t)}}))}(Object,Symbol),function(e,t,n){function r(){return this}t[e]||(t[e]=function(){var t=0,n=this,i={next:function(){var e=n.length<=t;return e?{done:e}:{done:e,value:n[t++]}}};return i[e]=r,i}),n[e]||(n[e]=function(){var t=String.fromCodePoint,n=this,i=0,o=n.length,a={next:function(){var e=o<=i,r=e?"":t(n.codePointAt(i));return i+=r.length,e?{done:e}:{done:e,value:r}}};return a[e]=r,a})}(Symbol.iterator,Array.prototype,String.prototype);var B=Object.prototype.toString;Object.prototype.toString=function(){return void 0===this?"[object Undefined]":null===this?"[object Null]":B.call(this)},Object.keys=function(e){return Object.getOwnPropertyNames(e).filter((function(t){return(t=Object.getOwnPropertyDescriptor(e,t))&&t.enumerable}))};var F=window.Symbol.iterator;String.prototype[F]&&String.prototype.codePointAt||(String.prototype[F]=function e(){var t,n=this;return x(e,(function(e){if(1==e.a&&(t=0),3!=e.a)return t<n.length?e=w(e,n[t]):(e.a=0,e=void 0),e;t++,e.a=2}))}),Set.prototype[F]||(Set.prototype[F]=function e(){var t,n,r=this;return x(e,(function(e){if(1==e.a&&(t=[],r.forEach((function(e){t.push(e)})),n=0),3!=e.a)return n<t.length?e=w(e,t[n]):(e.a=0,e=void 0),e;n++,e.a=2}))}),Map.prototype[F]||(Map.prototype[F]=function e(){var t,n,r=this;return x(e,(function(e){if(1==e.a&&(t=[],r.forEach((function(e,n){t.push([n,e])})),n=0),3!=e.a)return n<t.length?e=w(e,t[n]):(e.a=0,e=void 0),e;n++,e.a=2}))}),window.WebComponents=window.WebComponents||{flags:{}};var U=document.querySelector('script[src*="webcomponents-bundle"]'),H=/wc-(.+)/,q={};if(!q.noOpts){if(location.search.slice(1).split("&").forEach((function(e){var t;(e=e.split("="))[0]&&(t=e[0].match(H))&&(q[t[1]]=e[1]||!0)})),U)for(var z=0,V=void 0;V=U.attributes[z];z++)"src"!==V.name&&(q[V.name]=V.value||!0);if(q.log&&q.log.split){var $=q.log.split(",");q.log={},$.forEach((function(e){q.log[e]=!0}))}else q.log={}}window.WebComponents.flags=q;var W=q.shadydom;if(W){window.ShadyDOM=window.ShadyDOM||{},window.ShadyDOM.force=W;var K=q.noPatch;window.ShadyDOM.noPatch="true"===K||K}var G=q.register||q.ce;function X(){}function J(e){return e.__shady||(e.__shady=new X),e.__shady}function Y(e){return e&&e.__shady}G&&window.customElements&&(window.customElements.forcePolyfill=G),X.prototype.toJSON=function(){return{}};var Q=window.ShadyDOM||{};Q.Ua=!(!Element.prototype.attachShadow||!Node.prototype.getRootNode);var Z=Object.getOwnPropertyDescriptor(Node.prototype,"firstChild");function ee(e){return(e=Y(e))&&void 0!==e.firstChild}function te(e){return e instanceof ShadowRoot}function ne(e){return(e=(e=Y(e))&&e.root)&&An(e)}Q.B=!!(Z&&Z.configurable&&Z.get),Q.sa=Q.force||!Q.Ua,Q.D=Q.noPatch||!1,Q.la=Q.preferPerformance,Q.ua="on-demand"===Q.D,Q.Ia=navigator.userAgent.match("Trident");var re=Element.prototype,ie=re.matches||re.matchesSelector||re.mozMatchesSelector||re.msMatchesSelector||re.oMatchesSelector||re.webkitMatchesSelector,oe=document.createTextNode(""),ae=0,se=[];function ce(e){se.push(e),oe.textContent=ae++}new MutationObserver((function(){for(;se.length;)try{se.shift()()}catch(e){throw oe.textContent=ae++,e}})).observe(oe,{characterData:!0});var ue=!!document.contains;function le(e,t){for(;t;){if(t==e)return!0;t=t.__shady_parentNode}return!1}function he(e){for(var t=e.length-1;0<=t;t--){var n=e[t],r=n.getAttribute("id")||n.getAttribute("name");r&&"length"!==r&&isNaN(r)&&(e[r]=n)}return e.item=function(t){return e[t]},e.namedItem=function(t){if("length"!==t&&isNaN(t)&&e[t])return e[t];for(var n=i(e),r=n.next();!r.done;r=n.next())if(((r=r.value).getAttribute("id")||r.getAttribute("name"))==t)return r;return null},e}function fe(e){var t=[];for(e=e.__shady_native_firstChild;e;e=e.__shady_native_nextSibling)t.push(e);return t}function de(e){var t=[];for(e=e.__shady_firstChild;e;e=e.__shady_nextSibling)t.push(e);return t}function pe(e,t,n){if(n.configurable=!0,n.value)e[t]=n.value;else try{Object.defineProperty(e,t,n)}catch(e){}}function me(e,t,n,r){for(var i in n=void 0===n?"":n,t)r&&0<=r.indexOf(i)||pe(e,n+i,t[i])}function ve(e,t){for(var n in t)n in e&&pe(e,n,t[n])}function ge(e){var t={};return Object.getOwnPropertyNames(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t}function ye(e,t){for(var n,r=Object.getOwnPropertyNames(t),i=0;i<r.length;i++)e[n=r[i]]=t[n]}var be,we=[];function Ee(e){be||(be=!0,ce(_e)),we.push(e)}function _e(){be=!1;for(var e=!!we.length;we.length;)we.shift()();return e}function ke(){this.a=!1,this.addedNodes=[],this.removedNodes=[],this.ia=new Set}_e.list=we,ke.prototype.flush=function(){if(this.a){this.a=!1;var e=this.takeRecords();e.length&&this.ia.forEach((function(t){t(e)}))}},ke.prototype.takeRecords=function(){if(this.addedNodes.length||this.removedNodes.length){var e=[{addedNodes:this.addedNodes,removedNodes:this.removedNodes}];return this.addedNodes=[],this.removedNodes=[],e}return[]};var Se=/[&\u00A0"]/g,xe=/[&\u00A0<>]/g;function Te(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case" ":return"&nbsp;"}}function Pe(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}var Oe=Pe("area base br col command embed hr img input keygen link meta param source track wbr".split(" ")),Ce=Pe("style script xmp iframe noembed noframes plaintext noscript".split(" "));function Ie(e,t){"template"===e.localName&&(e=e.content);for(var n="",r=t?t(e):e.childNodes,i=0,o=r.length,a=void 0;i<o&&(a=r[i]);i++){e:{var s=a,c=e,u=t;switch(s.nodeType){case Node.ELEMENT_NODE:for(var l,h="<"+(c=s.localName),f=s.attributes,d=0;l=f[d];d++)h+=" "+l.name+'="'+l.value.replace(Se,Te)+'"';h+=">",s=Oe[c]?h:h+Ie(s,u)+"</"+c+">";break e;case Node.TEXT_NODE:s=s.data,s=c&&Ce[c.localName]?s:s.replace(xe,Te);break e;case Node.COMMENT_NODE:s="\x3c!--"+s.data+"--\x3e";break e;default:throw window.console.error(s),Error("not implemented")}}n+=s}return n}var Re=Q.B,Le={querySelector:function(e){return this.__shady_native_querySelector(e)},querySelectorAll:function(e){return this.__shady_native_querySelectorAll(e)}},Ae={};function Me(e){Ae[e]=function(t){return t["__shady_native_"+e]}}function De(e,t){for(var n in me(e,t,"__shady_native_"),t)Me(n)}function je(e,t){t=void 0===t?[]:t;for(var n=0;n<t.length;n++){var r=t[n],i=Object.getOwnPropertyDescriptor(e,r);i&&(Object.defineProperty(e,"__shady_native_"+r,i),i.value?Le[r]||(Le[r]=i.value):Me(r))}}var Ne=document.createTreeWalker(document,NodeFilter.SHOW_ALL,null,!1),Be=document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT,null,!1),Fe=document.implementation.createHTMLDocument("inert");function Ue(e){for(var t;t=e.__shady_native_firstChild;)e.__shady_native_removeChild(t)}var He=["firstElementChild","lastElementChild","children","childElementCount"],qe=["querySelector","querySelectorAll"];var ze=ge({get childNodes(){return this.__shady_childNodes},get firstChild(){return this.__shady_firstChild},get lastChild(){return this.__shady_lastChild},get childElementCount(){return this.__shady_childElementCount},get children(){return this.__shady_children},get firstElementChild(){return this.__shady_firstElementChild},get lastElementChild(){return this.__shady_lastElementChild},get shadowRoot(){return this.__shady_shadowRoot}}),Ve=ge({get textContent(){return this.__shady_textContent},set textContent(e){this.__shady_textContent=e},get innerHTML(){return this.__shady_innerHTML},set innerHTML(e){return this.__shady_innerHTML=e}}),$e=ge({get parentElement(){return this.__shady_parentElement},get parentNode(){return this.__shady_parentNode},get nextSibling(){return this.__shady_nextSibling},get previousSibling(){return this.__shady_previousSibling},get nextElementSibling(){return this.__shady_nextElementSibling},get previousElementSibling(){return this.__shady_previousElementSibling},get className(){return this.__shady_className},set className(e){return this.__shady_className=e}});function We(e){for(var t in e){var n=e[t];n&&(n.enumerable=!1)}}We(ze),We(Ve),We($e);var Ke,Ge=Q.B||!0===Q.D,Xe=Ge?function(){}:function(e){var t=J(e);t.Ka||(t.Ka=!0,ve(e,$e))},Je=Ge?function(){}:function(e){var t=J(e);t.Ja||(t.Ja=!0,ve(e,ze),window.customElements&&window.customElements.polyfillWrapFlushCallback&&!Q.D||ve(e,Ve))},Ye="__eventWrappers"+Date.now(),Qe=(Ke=Object.getOwnPropertyDescriptor(Event.prototype,"composed"))?function(e){return Ke.get.call(e)}:null,Ze=function(){function e(){}var t=!1,n={get capture(){return t=!0,!1}};return window.addEventListener("test",e,n),window.removeEventListener("test",e,n),t}();function et(e){if(e&&"object"==typeof e)var t=!!e.capture,n=!!e.once,r=!!e.passive,i=e.O;else t=!!e,r=n=!1;return{Ga:i,capture:t,once:n,passive:r,Fa:Ze?e:t}}var tt={blur:!0,focus:!0,focusin:!0,focusout:!0,click:!0,dblclick:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,wheel:!0,beforeinput:!0,input:!0,keydown:!0,keyup:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0,pointerover:!0,pointerenter:!0,pointerdown:!0,pointermove:!0,pointerup:!0,pointercancel:!0,pointerout:!0,pointerleave:!0,gotpointercapture:!0,lostpointercapture:!0,dragstart:!0,drag:!0,dragenter:!0,dragleave:!0,dragover:!0,drop:!0,dragend:!0,DOMActivate:!0,DOMFocusIn:!0,DOMFocusOut:!0,keypress:!0},nt={DOMAttrModified:!0,DOMAttributeNameChanged:!0,DOMCharacterDataModified:!0,DOMElementNameChanged:!0,DOMNodeInserted:!0,DOMNodeInsertedIntoDocument:!0,DOMNodeRemoved:!0,DOMNodeRemovedFromDocument:!0,DOMSubtreeModified:!0};function rt(e){return e instanceof Node?e.__shady_getRootNode():e}function it(e,t){var n=[],r=e;for(e=rt(e);r;)n.push(r),r=r.__shady_assignedSlot?r.__shady_assignedSlot:r.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&r.host&&(t||r!==e)?r.host:r.__shady_parentNode;return n[n.length-1]===document&&n.push(window),n}function ot(e,t){if(!te)return e;e=it(e,!0);for(var n,r,i=0,o=void 0,a=void 0;i<t.length;i++)if((r=rt(n=t[i]))!==o&&(a=e.indexOf(r),o=r),!te(r)||-1<a)return n}function at(e){function t(t,n){return(t=new e(t,n)).__composed=n&&!!n.composed,t}return t.__proto__=e,t.prototype=e.prototype,t}var st={focus:!0,blur:!0};function ct(e){return e.__target!==e.target||e.__relatedTarget!==e.relatedTarget}function ut(e,t,n){if(n=t.__handlers&&t.__handlers[e.type]&&t.__handlers[e.type][n])for(var r,i=0;(r=n[i])&&(!ct(e)||e.target!==e.relatedTarget)&&(r.call(t,e),!e.__immediatePropagationStopped);i++);}function lt(e){var t,n=e.composedPath();Object.defineProperty(e,"currentTarget",{get:function(){return i},configurable:!0});for(var r=n.length-1;0<=r;r--){var i=n[r];if(ut(e,i,"capture"),e.ma)return}for(Object.defineProperty(e,"eventPhase",{get:function(){return Event.AT_TARGET}}),r=0;r<n.length;r++){var o=Y(i=n[r]);if(o=o&&o.root,(0===r||o&&o===t)&&(ut(e,i,"bubble"),i!==window&&(t=i.__shady_getRootNode()),e.ma))break}}function ht(e,t,n,r,i,o){for(var a=0;a<e.length;a++){var s=e[a],c=s.type,u=s.capture,l=s.once,h=s.passive;if(t===s.node&&n===c&&r===u&&i===l&&o===h)return a}return-1}function ft(e){return _e(),this.__shady_native_dispatchEvent(e)}function dt(e,t,n){var r=et(n),i=r.capture,o=r.once,a=r.passive,s=r.Ga;if(r=r.Fa,t){var c=typeof t;if(("function"===c||"object"===c)&&("object"!==c||t.handleEvent&&"function"==typeof t.handleEvent)){if(nt[e])return this.__shady_native_addEventListener(e,t,r);var u=s||this;if(s=t[Ye]){if(-1<ht(s,u,e,i,o,a))return}else t[Ye]=[];s=function(r){if(o&&this.__shady_removeEventListener(e,t,n),r.__target||vt(r),u!==this){var i=Object.getOwnPropertyDescriptor(r,"currentTarget");Object.defineProperty(r,"currentTarget",{get:function(){return u},configurable:!0})}if(r.__previousCurrentTarget=r.currentTarget,(!te(u)&&"slot"!==u.localName||-1!=r.composedPath().indexOf(u))&&(r.composed||-1<r.composedPath().indexOf(u)))if(ct(r)&&r.target===r.relatedTarget)r.eventPhase===Event.BUBBLING_PHASE&&r.stopImmediatePropagation();else if(r.eventPhase===Event.CAPTURING_PHASE||r.bubbles||r.target===u||u instanceof Window){var a="function"===c?t.call(u,r):t.handleEvent&&t.handleEvent(r);return u!==this&&(i?(Object.defineProperty(r,"currentTarget",i),i=null):delete r.currentTarget),a}},t[Ye].push({node:u,type:e,capture:i,once:o,passive:a,lb:s}),st[e]?(this.__handlers=this.__handlers||{},this.__handlers[e]=this.__handlers[e]||{capture:[],bubble:[]},this.__handlers[e][i?"capture":"bubble"].push(s)):this.__shady_native_addEventListener(e,s,r)}}}function pt(e,t,n){if(t){var r=et(n);n=r.capture;var i=r.once,o=r.passive,a=r.Ga;if(r=r.Fa,nt[e])return this.__shady_native_removeEventListener(e,t,r);var s=a||this;a=void 0;var c=null;try{c=t[Ye]}catch(e){}c&&(-1<(i=ht(c,s,e,n,i,o))&&(a=c.splice(i,1)[0].lb,c.length||(t[Ye]=void 0))),this.__shady_native_removeEventListener(e,a||t,r),a&&st[e]&&this.__handlers&&this.__handlers[e]&&(-1<(t=(e=this.__handlers[e][n?"capture":"bubble"]).indexOf(a))&&e.splice(t,1))}}var mt=ge({get composed(){return void 0===this.__composed&&(Qe?this.__composed="focusin"===this.type||"focusout"===this.type||Qe(this):!1!==this.isTrusted&&(this.__composed=tt[this.type])),this.__composed||!1},composedPath:function(){return this.__composedPath||(this.__composedPath=it(this.__target,this.composed)),this.__composedPath},get target(){return ot(this.currentTarget||this.__previousCurrentTarget,this.composedPath())},get relatedTarget(){return this.__relatedTarget?(this.__relatedTargetComposedPath||(this.__relatedTargetComposedPath=it(this.__relatedTarget,!0)),ot(this.currentTarget||this.__previousCurrentTarget,this.__relatedTargetComposedPath)):null},stopPropagation:function(){Event.prototype.stopPropagation.call(this),this.ma=!0},stopImmediatePropagation:function(){Event.prototype.stopImmediatePropagation.call(this),this.ma=this.__immediatePropagationStopped=!0}});function vt(e){if(e.__target=e.target,e.__relatedTarget=e.relatedTarget,Q.B){var t=Object.getPrototypeOf(e);if(!t.hasOwnProperty("__shady_patchedProto")){var n=Object.create(t);n.__shady_sourceProto=t,me(n,mt),t.__shady_patchedProto=n}e.__proto__=t.__shady_patchedProto}else me(e,mt)}var gt=at(Event),yt=at(CustomEvent),bt=at(MouseEvent);var wt=Object.getOwnPropertyNames(Element.prototype).filter((function(e){return"on"===e.substring(0,2)})),Et=Object.getOwnPropertyNames(HTMLElement.prototype).filter((function(e){return"on"===e.substring(0,2)}));function _t(e){return{set:function(t){var n=J(this),r=e.substring(2);n.N||(n.N={}),n.N[e]&&this.removeEventListener(r,n.N[e]),this.__shady_addEventListener(r,t),n.N[e]=t},get:function(){var t=Y(this);return t&&t.N&&t.N[e]},configurable:!0}}function kt(e,t){return{index:e,aa:[],ha:t}}function St(e,t,n,r){var i=0,o=0,a=0,s=0,c=Math.min(t-i,r-o);if(0==i&&0==o)e:{for(a=0;a<c;a++)if(e[a]!==n[a])break e;a=c}if(t==e.length&&r==n.length){s=e.length;for(var u=n.length,l=0;l<c-a&&xt(e[--s],n[--u]);)l++;s=l}if(o+=a,r-=s,0==(t-=s)-(i+=a)&&0==r-o)return[];if(i==t){for(t=kt(i,0);o<r;)t.aa.push(n[o++]);return[t]}if(o==r)return[kt(i,t-i)];for(r=r-(a=o)+1,s=t-(c=i)+1,t=Array(r),u=0;u<r;u++)t[u]=Array(s),t[u][0]=u;for(u=0;u<s;u++)t[0][u]=u;for(u=1;u<r;u++)for(l=1;l<s;l++)if(e[c+l-1]===n[a+u-1])t[u][l]=t[u-1][l-1];else{var h=t[u-1][l]+1,f=t[u][l-1]+1;t[u][l]=h<f?h:f}for(c=t.length-1,a=t[0].length-1,r=t[c][a],e=[];0<c||0<a;)0==c?(e.push(2),a--):0==a?(e.push(3),c--):(s=t[c-1][a-1],(h=(u=t[c-1][a])<(l=t[c][a-1])?u<s?u:s:l<s?l:s)==s?(s==r?e.push(0):(e.push(1),r=s),c--,a--):h==u?(e.push(3),c--,r=u):(e.push(2),a--,r=l));for(e.reverse(),t=void 0,c=[],a=0;a<e.length;a++)switch(e[a]){case 0:t&&(c.push(t),t=void 0),i++,o++;break;case 1:t||(t=kt(i,0)),t.ha++,i++,t.aa.push(n[o]),o++;break;case 2:t||(t=kt(i,0)),t.ha++,i++;break;case 3:t||(t=kt(i,0)),t.aa.push(n[o]),o++}return t&&c.push(t),c}function xt(e,t){return e===t}var Tt=ge({dispatchEvent:ft,addEventListener:dt,removeEventListener:pt}),Pt=null;function Ot(){return Pt||(Pt=window.ShadyCSS&&window.ShadyCSS.ScopingShim),Pt||null}function Ct(e,t,n){var r=Ot();return!(!r||"class"!==t)&&(r.setElementClass(e,n),!0)}function It(e,t){var n=Ot();n&&n.unscopeNode(e,t)}function Rt(e){if(e.nodeType!==Node.ELEMENT_NODE)return"";var t=Ot();return t?t.currentScopeForNode(e):""}function Lt(e,t){if(e)for(e.nodeType===Node.ELEMENT_NODE&&t(e),e=e.__shady_firstChild;e;e=e.__shady_nextSibling)e.nodeType===Node.ELEMENT_NODE&&Lt(e,t)}var At=window.document,Mt=Q.la,Dt=Object.getOwnPropertyDescriptor(Node.prototype,"isConnected"),jt=Dt&&Dt.get;function Nt(e){for(var t;t=e.__shady_firstChild;)e.__shady_removeChild(t)}function Bt(e,t,n){if(e=(e=Y(e))&&e.Z){if(t)if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(var r=0,i=t.childNodes.length;r<i;r++)e.addedNodes.push(t.childNodes[r]);else e.addedNodes.push(t);n&&e.removedNodes.push(n),function(e){e.a||(e.a=!0,ce((function(){e.flush()})))}(e)}}var Ft=ge({get parentNode(){var e=Y(this);return void 0!==(e=e&&e.parentNode)?e:this.__shady_native_parentNode},get firstChild(){var e=Y(this);return void 0!==(e=e&&e.firstChild)?e:this.__shady_native_firstChild},get lastChild(){var e=Y(this);return void 0!==(e=e&&e.lastChild)?e:this.__shady_native_lastChild},get nextSibling(){var e=Y(this);return void 0!==(e=e&&e.nextSibling)?e:this.__shady_native_nextSibling},get previousSibling(){var e=Y(this);return void 0!==(e=e&&e.previousSibling)?e:this.__shady_native_previousSibling},get childNodes(){if(ee(this)){var e=Y(this);if(!e.childNodes){e.childNodes=[];for(var t=this.__shady_firstChild;t;t=t.__shady_nextSibling)e.childNodes.push(t)}var n=e.childNodes}else n=this.__shady_native_childNodes;return n.item=function(e){return n[e]},n},get parentElement(){var e=Y(this);return(e=e&&e.parentNode)&&e.nodeType!==Node.ELEMENT_NODE&&(e=null),void 0!==e?e:this.__shady_native_parentElement},get isConnected(){if(jt&&jt.call(this))return!0;if(this.nodeType==Node.DOCUMENT_FRAGMENT_NODE)return!1;var e=this.ownerDocument;if(ue){if(e.__shady_native_contains(this))return!0}else if(e.documentElement&&e.documentElement.__shady_native_contains(this))return!0;for(e=this;e&&!(e instanceof Document);)e=e.__shady_parentNode||(te(e)?e.host:void 0);return!!(e&&e instanceof Document)},get textContent(){if(ee(this)){for(var e=[],t=this.__shady_firstChild;t;t=t.__shady_nextSibling)t.nodeType!==Node.COMMENT_NODE&&e.push(t.__shady_textContent);return e.join("")}return this.__shady_native_textContent},set textContent(e){switch(null==e&&(e=""),this.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:if(!ee(this)&&Q.B){var t=this.__shady_firstChild;(t!=this.__shady_lastChild||t&&t.nodeType!=Node.TEXT_NODE)&&Nt(this),this.__shady_native_textContent=e}else Nt(this),(0<e.length||this.nodeType===Node.ELEMENT_NODE)&&this.__shady_insertBefore(document.createTextNode(e));break;default:this.nodeValue=e}},insertBefore:function(e,t){if(this.ownerDocument!==At&&e.ownerDocument!==At)return this.__shady_native_insertBefore(e,t),e;if(e===this)throw Error("Failed to execute 'appendChild' on 'Node': The new child element contains the parent.");if(t){var n=Y(t);if(void 0!==(n=n&&n.parentNode)&&n!==this||void 0===n&&t.__shady_native_parentNode!==this)throw Error("Failed to execute 'insertBefore' on 'Node': The node before which the new node is to be inserted is not a child of this node.")}if(t===e)return e;Bt(this,e);var r=[],a=(n=Nn(this))?n.host.localName:Rt(this),s=e.__shady_parentNode;if(s){var c=Rt(e),u=!!n||!Nn(e)||Mt&&void 0!==this.__noInsertionPoint;s.__shady_removeChild(e,u)}s=!0;var l=(!Mt||void 0===e.__noInsertionPoint&&void 0===this.__noInsertionPoint)&&!function e(t,n){var r=Ot();if(!r)return!0;if(t.nodeType===Node.DOCUMENT_FRAGMENT_NODE){for(r=!0,t=t.__shady_firstChild;t;t=t.__shady_nextSibling)r=r&&e(t,n);return r}return t.nodeType!==Node.ELEMENT_NODE||r.currentScopeForNode(t)===n}(e,a),h=n&&!e.__noInsertionPoint&&(!Mt||e.nodeType===Node.DOCUMENT_FRAGMENT_NODE);return(h||l)&&(l&&(c=c||Rt(e)),Lt(e,(function(e){if(h&&"slot"===e.localName&&r.push(e),l){var t=c;Ot()&&(t&&It(e,t),(t=Ot())&&t.scopeNode(e,a))}}))),r.length&&(Cn(n),n.c.push.apply(n.c,r instanceof Array?r:o(i(r))),Sn(n)),ee(this)&&(function(e,t,n){dn(t,2);var r=J(t);if(void 0!==r.firstChild&&(r.childNodes=null),e.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(e=e.__shady_native_firstChild;e;e=e.__shady_native_nextSibling)pn(e,t,r,n);else pn(e,t,r,n)}(e,this,t),(u=Y(this)).root?(s=!1,ne(this)&&Sn(u.root)):n&&"slot"===this.localName&&(s=!1,Sn(n))),s?(n=te(this)?this.host:this,t?(t=function e(t){var n=t;if(t&&"slot"===t.localName){var r=Y(t);(r=r&&r.V)&&(n=r.length?r[0]:e(t.__shady_nextSibling))}return n}(t),n.__shady_native_insertBefore(e,t)):n.__shady_native_appendChild(e)):e.ownerDocument!==this.ownerDocument&&this.ownerDocument.adoptNode(e),e},appendChild:function(e){if(this!=e||!te(e))return this.__shady_insertBefore(e)},removeChild:function(e,t){if(t=void 0!==t&&t,this.ownerDocument!==At)return this.__shady_native_removeChild(e);if(e.__shady_parentNode!==this)throw Error("The node to be removed is not a child of this node: "+e);Bt(this,null,e);var n=Nn(e),r=n&&function(e,t){if(e.a){In(e);var n,r=e.b;for(n in r)for(var i=r[n],o=0;o<i.length;o++){var a=i[o];if(le(t,a)){i.splice(o,1);var s=e.a.indexOf(a);if(0<=s&&(e.a.splice(s,1),(s=Y(a.__shady_parentNode))&&s.ca&&s.ca--),o--,a=Y(a),s=a.V)for(var c=0;c<s.length;c++){var u=s[c],l=u.__shady_native_parentNode;l&&l.__shady_native_removeChild(u)}a.V=[],a.assignedNodes=[],s=!0}}return s}}(n,e),i=Y(this);if(ee(this)&&(function(e,t){var n=J(e);t=J(t),e===t.firstChild&&(t.firstChild=n.nextSibling),e===t.lastChild&&(t.lastChild=n.previousSibling),e=n.previousSibling;var r=n.nextSibling;e&&(J(e).nextSibling=r),r&&(J(r).previousSibling=e),n.parentNode=n.previousSibling=n.nextSibling=void 0,void 0!==t.childNodes&&(t.childNodes=null)}(e,this),ne(this))){Sn(i.root);var o=!0}if(Ot()&&!t&&n&&e.nodeType!==Node.TEXT_NODE){var a=Rt(e);Lt(e,(function(e){It(e,a)}))}return function e(t){var n=Y(t);if(n&&void 0!==n.ka)for(n=t.__shady_firstChild;n;n=n.__shady_nextSibling)e(n);(t=Y(t))&&(t.ka=void 0)}(e),n&&((t="slot"===this.localName)&&(o=!0),(r||t)&&Sn(n)),o||(o=te(this)?this.host:this,(!i.root&&"slot"!==e.localName||o===e.__shady_native_parentNode)&&o.__shady_native_removeChild(e)),e},replaceChild:function(e,t){return this.__shady_insertBefore(e,t),this.__shady_removeChild(t),e},cloneNode:function(e){if("template"==this.localName)return this.__shady_native_cloneNode(e);var t=this.__shady_native_cloneNode(!1);if(e&&t.nodeType!==Node.ATTRIBUTE_NODE){e=this.__shady_firstChild;for(var n;e;e=e.__shady_nextSibling)n=e.__shady_cloneNode(!0),t.__shady_appendChild(n)}return t},getRootNode:function(e){if(this&&this.nodeType){var t=J(this),n=t.ka;return void 0===n&&(te(this)?(n=this,t.ka=n):(n=(n=this.__shady_parentNode)?n.__shady_getRootNode(e):this,document.documentElement.__shady_native_contains(this)&&(t.ka=n))),n}},contains:function(e){return le(this,e)}}),Ut=ge({get assignedSlot(){var e=this.__shady_parentNode;return(e=e&&e.__shady_shadowRoot)&&xn(e),(e=Y(this))&&e.assignedSlot||null}});function Ht(e,t,n){var r=[];return function e(t,n,r,i){for(t=t.__shady_firstChild;t;t=t.__shady_nextSibling){var o;if(o=t.nodeType===Node.ELEMENT_NODE){var a=n,s=r,c=i,u=a(o=t);u&&c.push(o),s&&s(u)?o=u:(e(o,a,s,c),o=void 0)}if(o)break}}(e,t,n,r),r}var qt=ge({get firstElementChild(){var e=Y(this);if(e&&void 0!==e.firstChild){for(e=this.__shady_firstChild;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.__shady_nextSibling;return e}return this.__shady_native_firstElementChild},get lastElementChild(){var e=Y(this);if(e&&void 0!==e.lastChild){for(e=this.__shady_lastChild;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.__shady_previousSibling;return e}return this.__shady_native_lastElementChild},get children(){return ee(this)?he(Array.prototype.filter.call(de(this),(function(e){return e.nodeType===Node.ELEMENT_NODE}))):this.__shady_native_children},get childElementCount(){var e=this.__shady_children;return e?e.length:0}}),zt=ge({querySelector:function(e){return Ht(this,(function(t){return ie.call(t,e)}),(function(e){return!!e}))[0]||null},querySelectorAll:function(e,t){if(t){t=Array.prototype.slice.call(this.__shady_native_querySelectorAll(e));var n=this.__shady_getRootNode();return he(t.filter((function(e){return e.__shady_getRootNode()==n})))}return he(Ht(this,(function(t){return ie.call(t,e)})))}}),Vt=Q.la&&!Q.D?ye({},qt):qt;ye(qt,zt);var $t=window.document;function Wt(e,t){if("slot"===t)ne(e=e.__shady_parentNode)&&Sn(Y(e).root);else if("slot"===e.localName&&"name"===t&&(t=Nn(e))){if(t.a){In(t);var n=e.La,r=Rn(e);if(r!==n){var i=(n=t.b[n]).indexOf(e);0<=i&&n.splice(i,1),(n=t.b[r]||(t.b[r]=[])).push(e),1<n.length&&(t.b[r]=Ln(n))}}Sn(t)}}var Kt=ge({get previousElementSibling(){var e=Y(this);if(e&&void 0!==e.previousSibling){for(e=this.__shady_previousSibling;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.__shady_previousSibling;return e}return this.__shady_native_previousElementSibling},get nextElementSibling(){var e=Y(this);if(e&&void 0!==e.nextSibling){for(e=this.__shady_nextSibling;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.__shady_nextSibling;return e}return this.__shady_native_nextElementSibling},get slot(){return this.getAttribute("slot")},set slot(e){this.__shady_setAttribute("slot",e)},get className(){return this.getAttribute("class")||""},set className(e){this.__shady_setAttribute("class",e)},setAttribute:function(e,t){this.ownerDocument!==$t?this.__shady_native_setAttribute(e,t):Ct(this,e,t)||(this.__shady_native_setAttribute(e,t),Wt(this,e))},removeAttribute:function(e){this.ownerDocument!==$t?this.__shady_native_removeAttribute(e):Ct(this,e,"")?""===this.getAttribute(e)&&this.__shady_native_removeAttribute(e):(this.__shady_native_removeAttribute(e),Wt(this,e))}});Q.la||wt.forEach((function(e){Kt[e]=_t(e)}));var Gt=ge({attachShadow:function(e){if(!this)throw Error("Must provide a host.");if(!e)throw Error("Not enough arguments.");if(e.shadyUpgradeFragment&&!Q.Ia){var t=e.shadyUpgradeFragment;if(t.__proto__=ShadowRoot.prototype,kn(t,this,e),mn(t,t),e=t.__noInsertionPoint?null:t.querySelectorAll("slot"),t.__noInsertionPoint=void 0,e&&e.length){var n=t;Cn(n),n.c.push.apply(n.c,e instanceof Array?e:o(i(e))),Sn(t)}t.host.__shady_native_appendChild(t)}else t=new _n(bn,this,e);return this.__CE_shadowRoot=t},get shadowRoot(){var e=Y(this);return e&&e.bb||null}});ye(Kt,Gt);var Xt=document.implementation.createHTMLDocument("inert"),Jt=ge({get innerHTML(){return ee(this)?Ie("template"===this.localName?this.content:this,de):this.__shady_native_innerHTML},set innerHTML(e){if("template"===this.localName)this.__shady_native_innerHTML=e;else{Nt(this);var t=this.localName||"div";for(t=this.namespaceURI&&this.namespaceURI!==Xt.namespaceURI?Xt.createElementNS(this.namespaceURI,t):Xt.createElement(t),Q.B?t.__shady_native_innerHTML=e:t.innerHTML=e;e=t.__shady_firstChild;)this.__shady_insertBefore(e)}}}),Yt=ge({blur:function(){var e=Y(this);(e=(e=e&&e.root)&&e.activeElement)?e.__shady_blur():this.__shady_native_blur()}});Q.la||Et.forEach((function(e){Yt[e]=_t(e)}));var Qt=ge({assignedNodes:function(e){if("slot"===this.localName){var t=this.__shady_getRootNode();return t&&te(t)&&xn(t),(t=Y(this))&&(e&&e.flatten?t.V:t.assignedNodes)||[]}},addEventListener:function(e,t,n){if("slot"!==this.localName||"slotchange"===e)dt.call(this,e,t,n);else{"object"!=typeof n&&(n={capture:!!n});var r=this.__shady_parentNode;if(!r)throw Error("ShadyDOM cannot attach event to slot unless it has a `parentNode`");n.O=this,r.__shady_addEventListener(e,t,n)}},removeEventListener:function(e,t,n){if("slot"!==this.localName||"slotchange"===e)pt.call(this,e,t,n);else{"object"!=typeof n&&(n={capture:!!n});var r=this.__shady_parentNode;if(!r)throw Error("ShadyDOM cannot attach event to slot unless it has a `parentNode`");n.O=this,r.__shady_removeEventListener(e,t,n)}}}),Zt=ge({getElementById:function(e){return""===e?null:Ht(this,(function(t){return t.id==e}),(function(e){return!!e}))[0]||null}}),en=ge({get activeElement(){var e=Q.B?document.__shady_native_activeElement:document.activeElement;if(!e||!e.nodeType)return null;var t=!!te(this);if(!(this===document||t&&this.host!==e&&this.host.__shady_native_contains(e)))return null;for(t=Nn(e);t&&t!==this;)t=Nn(e=t.host);return this===document?t?null:e:t===this?e:null}}),tn=window.document,nn=ge({importNode:function(e,t){if(e.ownerDocument!==tn||"template"===e.localName)return this.__shady_native_importNode(e,t);var n=this.__shady_native_importNode(e,!1);if(t)for(e=e.__shady_firstChild;e;e=e.__shady_nextSibling)t=this.__shady_importNode(e,!0),n.__shady_appendChild(t);return n}}),rn=ge({dispatchEvent:ft,addEventListener:dt.bind(window),removeEventListener:pt.bind(window)}),on={};Object.getOwnPropertyDescriptor(HTMLElement.prototype,"parentElement")&&(on.parentElement=Ft.parentElement),Object.getOwnPropertyDescriptor(HTMLElement.prototype,"contains")&&(on.contains=Ft.contains),Object.getOwnPropertyDescriptor(HTMLElement.prototype,"children")&&(on.children=qt.children),Object.getOwnPropertyDescriptor(HTMLElement.prototype,"innerHTML")&&(on.innerHTML=Jt.innerHTML),Object.getOwnPropertyDescriptor(HTMLElement.prototype,"className")&&(on.className=Kt.className);var an={EventTarget:[Tt],Node:[Ft,window.EventTarget?null:Tt],Text:[Ut],Comment:[Ut],CDATASection:[Ut],ProcessingInstruction:[Ut],Element:[Kt,qt,Ut,!Q.B||"innerHTML"in Element.prototype?Jt:null,window.HTMLSlotElement?null:Qt],HTMLElement:[Yt,on],HTMLSlotElement:[Qt],DocumentFragment:[Vt,Zt],Document:[nn,Vt,Zt,en],Window:[rn]},sn=Q.B?null:["innerHTML","textContent"];function cn(e,t,n,r){t.forEach((function(t){return e&&t&&me(e,t,n,r)}))}function un(e){var t,n=e?null:sn;for(t in an)cn(window[t]&&window[t].prototype,an[t],e,n)}function ln(e){return e.__shady_protoIsPatched=!0,cn(e,an.EventTarget),cn(e,an.Node),cn(e,an.Element),cn(e,an.HTMLElement),cn(e,an.HTMLSlotElement),e}["Text","Comment","CDATASection","ProcessingInstruction"].forEach((function(e){var t=window[e],n=Object.create(t.prototype);n.__shady_protoIsPatched=!0,cn(n,an.EventTarget),cn(n,an.Node),an[e]&&cn(n,an[e]),t.prototype.__shady_patchedProto=n}));var hn=Q.ua,fn=Q.B;function dn(e,t){if(hn&&!e.__shady_protoIsPatched&&!te(e)){var n=Object.getPrototypeOf(e),r=n.hasOwnProperty("__shady_patchedProto")&&n.__shady_patchedProto;r||(ln(r=Object.create(n)),n.__shady_patchedProto=r),Object.setPrototypeOf(e,r)}fn||(1===t?Xe(e):2===t&&Je(e))}function pn(e,t,n,r){dn(e,1),r=r||null;var i=J(e),o=r?J(r):null;i.previousSibling=r?o.previousSibling:t.__shady_lastChild,(o=Y(i.previousSibling))&&(o.nextSibling=e),(o=Y(i.nextSibling=r))&&(o.previousSibling=e),i.parentNode=t,r?r===n.firstChild&&(n.firstChild=e):(n.lastChild=e,n.firstChild||(n.firstChild=e)),n.childNodes=null}function mn(e,t){var n=J(e);if(t||void 0===n.firstChild){n.childNodes=null;var r=n.firstChild=e.__shady_native_firstChild;for(n.lastChild=e.__shady_native_lastChild,dn(e,2),n=r,r=void 0;n;n=n.__shady_native_nextSibling){var i=J(n);i.parentNode=t||e,i.nextSibling=n.__shady_native_nextSibling,i.previousSibling=r||null,r=n,dn(n,1)}}}var vn=ge({addEventListener:function(e,t,n){"object"!=typeof n&&(n={capture:!!n}),n.O=n.O||this,this.host.__shady_addEventListener(e,t,n)},removeEventListener:function(e,t,n){"object"!=typeof n&&(n={capture:!!n}),n.O=n.O||this,this.host.__shady_removeEventListener(e,t,n)}});function gn(e,t){me(e,vn,t),me(e,en,t),me(e,Jt,t),me(e,qt,t),Q.D&&!t?(me(e,Ft,t),me(e,Zt,t)):Q.B||(me(e,$e),me(e,ze),me(e,Ve))}var yn,bn={},wn=Q.deferConnectionCallbacks&&"loading"===document.readyState;function En(e){var t=[];do{t.unshift(e)}while(e=e.__shady_parentNode);return t}function _n(e,t,n){if(e!==bn)throw new TypeError("Illegal constructor");this.a=null,kn(this,t,n)}function kn(e,t,n){if(e.host=t,e.mode=n&&n.mode,mn(e.host),(t=J(e.host)).root=e,t.bb="closed"!==e.mode?e:null,(t=J(e)).firstChild=t.lastChild=t.parentNode=t.nextSibling=t.previousSibling=null,Q.preferPerformance)for(;t=e.host.__shady_native_firstChild;)e.host.__shady_native_removeChild(t);else Sn(e)}function Sn(e){e.T||(e.T=!0,Ee((function(){return xn(e)})))}function xn(e){var t;if(t=e.T){for(var n;e;)e.T&&(n=e),te(e=(t=e).host.__shady_getRootNode())&&(t=Y(t.host))&&0<t.ca||(e=void 0);t=n}(n=t)&&n._renderSelf()}function Tn(e,t,n){var r=J(t),i=r.oa;r.oa=null,n||(n=(e=e.b[t.__shady_slot||"__catchall"])&&e[0]),n?(J(n).assignedNodes.push(t),r.assignedSlot=n):r.assignedSlot=void 0,i!==r.assignedSlot&&r.assignedSlot&&(J(r.assignedSlot).ra=!0)}function Pn(e,t,n){for(var r=0,i=void 0;r<n.length&&(i=n[r]);r++)if("slot"==i.localName){var o=Y(i).assignedNodes;o&&o.length&&Pn(e,t,o)}else t.push(n[r])}function On(e,t){t.__shady_native_dispatchEvent(new Event("slotchange")),(t=Y(t)).assignedSlot&&On(e,t.assignedSlot)}function Cn(e){e.c=e.c||[],e.a=e.a||[],e.b=e.b||{}}function In(e){if(e.c&&e.c.length){for(var t,n=e.c,r=0;r<n.length;r++){var i=n[r];mn(i);var o=i.__shady_parentNode;mn(o),(o=Y(o)).ca=(o.ca||0)+1,o=Rn(i),e.b[o]?((t=t||{})[o]=!0,e.b[o].push(i)):e.b[o]=[i],e.a.push(i)}if(t)for(var a in t)e.b[a]=Ln(e.b[a]);e.c=[]}}function Rn(e){var t=e.name||e.getAttribute("name")||"__catchall";return e.La=t}function Ln(e){return e.sort((function(e,t){e=En(e);for(var n=En(t),r=0;r<e.length;r++){t=e[r];var i=n[r];if(t!==i)return(e=de(t.__shady_parentNode)).indexOf(t)-e.indexOf(i)}}))}function An(e){return In(e),!(!e.a||!e.a.length)}if(_n.prototype._renderSelf=function(){var e=wn;if(wn=!0,this.T=!1,this.a){In(this);for(var t,n=0;n<this.a.length;n++){var r=Y(t=this.a[n]),i=r.assignedNodes;if(r.assignedNodes=[],r.V=[],r.Ba=i)for(r=0;r<i.length;r++){var o=Y(i[r]);o.oa=o.assignedSlot,o.assignedSlot===t&&(o.assignedSlot=null)}}for(n=this.host.__shady_firstChild;n;n=n.__shady_nextSibling)Tn(this,n);for(n=0;n<this.a.length;n++){if(!(i=Y(t=this.a[n])).assignedNodes.length)for(r=t.__shady_firstChild;r;r=r.__shady_nextSibling)Tn(this,r,t);if((r=(r=Y(t.__shady_parentNode))&&r.root)&&(An(r)||r.T)&&r._renderSelf(),Pn(this,i.V,i.assignedNodes),r=i.Ba){for(o=0;o<r.length;o++)Y(r[o]).oa=null;i.Ba=null,r.length>i.assignedNodes.length&&(i.ra=!0)}i.ra&&(i.ra=!1,On(this,t))}for(t=this.a,n=[],i=0;i<t.length;i++)(o=Y(r=t[i].__shady_parentNode))&&o.root||!(0>n.indexOf(r))||n.push(r);for(t=0;t<n.length;t++){for(i=(o=n[t])===this?this.host:o,r=[],o=o.__shady_firstChild;o;o=o.__shady_nextSibling)if("slot"==o.localName)for(var a=Y(o).V,s=0;s<a.length;s++)r.push(a[s]);else r.push(o);o=fe(i),a=St(r,r.length,o,o.length);for(var c=s=0,u=void 0;s<a.length&&(u=a[s]);s++){for(var l=0,h=void 0;l<u.aa.length&&(h=u.aa[l]);l++)h.__shady_native_parentNode===i&&i.__shady_native_removeChild(h),o.splice(u.index+c,1);c-=u.ha}for(c=0,u=void 0;c<a.length&&(u=a[c]);c++)for(s=o[u.index],l=u.index;l<u.index+u.ha;l++)h=r[l],i.__shady_native_insertBefore(h,s),o.splice(l,0,h)}}if(!Q.preferPerformance&&!this.Aa)for(n=this.host.__shady_firstChild;n;n=n.__shady_nextSibling)t=Y(n),n.__shady_native_parentNode!==this.host||"slot"!==n.localName&&t.assignedSlot||this.host.__shady_native_removeChild(n);this.Aa=!0,wn=e,yn&&yn()},function(e){e.__proto__=DocumentFragment.prototype,gn(e,"__shady_"),gn(e),Object.defineProperties(e,{nodeType:{value:Node.DOCUMENT_FRAGMENT_NODE,configurable:!0},nodeName:{value:"#document-fragment",configurable:!0},nodeValue:{value:null,configurable:!0}}),["localName","namespaceURI","prefix"].forEach((function(t){Object.defineProperty(e,t,{value:void 0,configurable:!0})})),["ownerDocument","baseURI","isConnected"].forEach((function(t){Object.defineProperty(e,t,{get:function(){return this.host[t]},configurable:!0})}))}(_n.prototype),window.customElements&&window.customElements.define&&Q.sa&&!Q.preferPerformance){var Mn=new Map;yn=function(){var e=[];Mn.forEach((function(t,n){e.push([n,t])})),Mn.clear();for(var t=0;t<e.length;t++){var n=e[t][0];e[t][1]?n.__shadydom_connectedCallback():n.__shadydom_disconnectedCallback()}},wn&&document.addEventListener("readystatechange",(function(){wn=!1,yn()}),{once:!0});var Dn=window.customElements.define,jn=function(e,t){var n=t.prototype.connectedCallback,r=t.prototype.disconnectedCallback;Dn.call(window.customElements,e,function(e,t,n){var r=0,i="__isConnected"+r++;return(t||n)&&(e.prototype.connectedCallback=e.prototype.__shadydom_connectedCallback=function(){wn?Mn.set(this,!0):this[i]||(this[i]=!0,t&&t.call(this))},e.prototype.disconnectedCallback=e.prototype.__shadydom_disconnectedCallback=function(){wn?this.isConnected||Mn.set(this,!1):this[i]&&(this[i]=!1,n&&n.call(this))}),e}(t,n,r)),t.prototype.connectedCallback=n,t.prototype.disconnectedCallback=r};window.customElements.define=jn,Object.defineProperty(window.CustomElementRegistry.prototype,"define",{value:jn,configurable:!0})}function Nn(e){if(te(e=e.__shady_getRootNode()))return e}function Bn(e){this.node=e}function Fn(e){Object.defineProperty(Bn.prototype,e,{get:function(){return this.node["__shady_"+e]},set:function(t){this.node["__shady_"+e]=t},configurable:!0})}(n=Bn.prototype).addEventListener=function(e,t,n){return this.node.__shady_addEventListener(e,t,n)},n.removeEventListener=function(e,t,n){return this.node.__shady_removeEventListener(e,t,n)},n.appendChild=function(e){return this.node.__shady_appendChild(e)},n.insertBefore=function(e,t){return this.node.__shady_insertBefore(e,t)},n.removeChild=function(e){return this.node.__shady_removeChild(e)},n.replaceChild=function(e,t){return this.node.__shady_replaceChild(e,t)},n.cloneNode=function(e){return this.node.__shady_cloneNode(e)},n.getRootNode=function(e){return this.node.__shady_getRootNode(e)},n.contains=function(e){return this.node.__shady_contains(e)},n.dispatchEvent=function(e){return this.node.__shady_dispatchEvent(e)},n.setAttribute=function(e,t){this.node.__shady_setAttribute(e,t)},n.getAttribute=function(e){return this.node.__shady_native_getAttribute(e)},n.hasAttribute=function(e){return this.node.__shady_native_hasAttribute(e)},n.removeAttribute=function(e){this.node.__shady_removeAttribute(e)},n.attachShadow=function(e){return this.node.__shady_attachShadow(e)},n.focus=function(){this.node.__shady_native_focus()},n.blur=function(){this.node.__shady_blur()},n.importNode=function(e,t){if(this.node.nodeType===Node.DOCUMENT_NODE)return this.node.__shady_importNode(e,t)},n.getElementById=function(e){if(this.node.nodeType===Node.DOCUMENT_NODE)return this.node.__shady_getElementById(e)},n.querySelector=function(e){return this.node.__shady_querySelector(e)},n.querySelectorAll=function(e,t){return this.node.__shady_querySelectorAll(e,t)},n.assignedNodes=function(e){if("slot"===this.node.localName)return this.node.__shady_assignedNodes(e)},a.Object.defineProperties(Bn.prototype,{activeElement:{configurable:!0,enumerable:!0,get:function(){if(te(this.node)||this.node.nodeType===Node.DOCUMENT_NODE)return this.node.__shady_activeElement}},_activeElement:{configurable:!0,enumerable:!0,get:function(){return this.activeElement}},host:{configurable:!0,enumerable:!0,get:function(){if(te(this.node))return this.node.host}},parentNode:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_parentNode}},firstChild:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_firstChild}},lastChild:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_lastChild}},nextSibling:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_nextSibling}},previousSibling:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_previousSibling}},childNodes:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_childNodes}},parentElement:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_parentElement}},firstElementChild:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_firstElementChild}},lastElementChild:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_lastElementChild}},nextElementSibling:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_nextElementSibling}},previousElementSibling:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_previousElementSibling}},children:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_children}},childElementCount:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_childElementCount}},shadowRoot:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_shadowRoot}},assignedSlot:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_assignedSlot}},isConnected:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_isConnected}},innerHTML:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_innerHTML},set:function(e){this.node.__shady_innerHTML=e}},textContent:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_textContent},set:function(e){this.node.__shady_textContent=e}},slot:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_slot},set:function(e){this.node.__shady_slot=e}},className:{configurable:!0,enumerable:!0,get:function(){return this.node.__shady_className},set:function(e){return this.node.__shady_className=e}}}),wt.forEach((function(e){return Fn(e)})),Et.forEach((function(e){return Fn(e)}));var Un=new WeakMap;function Hn(e){if(te(e)||e instanceof Bn)return e;var t=Un.get(e);return t||(t=new Bn(e),Un.set(e,t)),t}if(Q.sa){var qn=Q.B?function(e){return e}:function(e){return Je(e),Xe(e),e},zn={inUse:Q.sa,patch:qn,isShadyRoot:te,enqueue:Ee,flush:_e,flushInitial:function(e){!e.Aa&&e.T&&xn(e)},settings:Q,filterMutations:function(e,t){var n=t.getRootNode();return e.map((function(e){var t=n===e.target.getRootNode();if(t&&e.addedNodes){if((t=[].slice.call(e.addedNodes).filter((function(e){return n===e.getRootNode()}))).length)return e=Object.create(e),Object.defineProperty(e,"addedNodes",{value:t,configurable:!0}),e}else if(t)return e})).filter((function(e){return e}))},observeChildren:function(e,t){var n=J(e);n.Z||(n.Z=new ke),n.Z.ia.add(t);var r=n.Z;return{Ma:t,S:r,Na:e,takeRecords:function(){return r.takeRecords()}}},unobserveChildren:function(e){var t=e&&e.S;t&&(t.ia.delete(e.Ma),t.ia.size||(J(e.Na).Z=null))},deferConnectionCallbacks:Q.deferConnectionCallbacks,preferPerformance:Q.preferPerformance,handlesDynamicScoping:!0,wrap:Q.D?Hn:qn,wrapIfNeeded:!0===Q.D?Hn:function(e){return e},Wrapper:Bn,composedPath:function(e){return e.__composedPath||(e.__composedPath=it(e.target,!0)),e.__composedPath},noPatch:Q.D,patchOnDemand:Q.ua,nativeMethods:Le,nativeTree:Ae,patchElementProto:ln};window.ShadyDOM=zn,function(){var e=["dispatchEvent","addEventListener","removeEventListener"];window.EventTarget?je(window.EventTarget.prototype,e):(je(Node.prototype,e),je(Window.prototype,e)),Re?je(Node.prototype,"parentNode firstChild lastChild previousSibling nextSibling childNodes parentElement textContent".split(" ")):De(Node.prototype,{parentNode:{get:function(){return Ne.currentNode=this,Ne.parentNode()}},firstChild:{get:function(){return Ne.currentNode=this,Ne.firstChild()}},lastChild:{get:function(){return Ne.currentNode=this,Ne.lastChild()}},previousSibling:{get:function(){return Ne.currentNode=this,Ne.previousSibling()}},nextSibling:{get:function(){return Ne.currentNode=this,Ne.nextSibling()}},childNodes:{get:function(){var e=[];Ne.currentNode=this;for(var t=Ne.firstChild();t;)e.push(t),t=Ne.nextSibling();return e}},parentElement:{get:function(){return Be.currentNode=this,Be.parentNode()}},textContent:{get:function(){switch(this.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:for(var e,t=document.createTreeWalker(this,NodeFilter.SHOW_TEXT,null,!1),n="";e=t.nextNode();)n+=e.nodeValue;return n;default:return this.nodeValue}},set:function(e){switch(null==e&&(e=""),this.nodeType){case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:Ue(this),(0<e.length||this.nodeType===Node.ELEMENT_NODE)&&this.__shady_native_insertBefore(document.createTextNode(e),void 0);break;default:this.nodeValue=e}}}}),je(Node.prototype,"appendChild insertBefore removeChild replaceChild cloneNode contains".split(" ")),je(HTMLElement.prototype,["parentElement","contains"]),e={firstElementChild:{get:function(){return Be.currentNode=this,Be.firstChild()}},lastElementChild:{get:function(){return Be.currentNode=this,Be.lastChild()}},children:{get:function(){var e=[];Be.currentNode=this;for(var t=Be.firstChild();t;)e.push(t),t=Be.nextSibling();return he(e)}},childElementCount:{get:function(){return this.children?this.children.length:0}}},Re?(je(Element.prototype,He),je(Element.prototype,["previousElementSibling","nextElementSibling","innerHTML","className"]),je(HTMLElement.prototype,["children","innerHTML","className"])):(De(Element.prototype,e),De(Element.prototype,{previousElementSibling:{get:function(){return Be.currentNode=this,Be.previousSibling()}},nextElementSibling:{get:function(){return Be.currentNode=this,Be.nextSibling()}},innerHTML:{get:function(){return Ie(this,fe)},set:function(e){var t="template"===this.localName?this.content:this;Ue(t);var n=this.localName||"div";for((n=this.namespaceURI&&this.namespaceURI!==Fe.namespaceURI?Fe.createElementNS(this.namespaceURI,n):Fe.createElement(n)).innerHTML=e,e="template"===this.localName?n.content:n;n=e.__shady_native_firstChild;)t.__shady_native_insertBefore(n,void 0)}},className:{get:function(){return this.getAttribute("class")||""},set:function(e){this.setAttribute("class",e)}}})),je(Element.prototype,"setAttribute getAttribute hasAttribute removeAttribute focus blur".split(" ")),je(Element.prototype,qe),je(HTMLElement.prototype,["focus","blur"]),window.HTMLTemplateElement&&je(window.HTMLTemplateElement.prototype,["innerHTML"]),Re?je(DocumentFragment.prototype,He):De(DocumentFragment.prototype,e),je(DocumentFragment.prototype,qe),Re?(je(Document.prototype,He),je(Document.prototype,["activeElement"])):De(Document.prototype,e),je(Document.prototype,["importNode","getElementById"]),je(Document.prototype,qe)}(),un("__shady_"),Object.defineProperty(document,"_activeElement",en.activeElement),me(Window.prototype,rn,"__shady_"),Q.D?Q.ua&&me(Element.prototype,Gt):(un(),function(){if(!Qe&&Object.getOwnPropertyDescriptor(Event.prototype,"isTrusted")){var e=function(){var e=new MouseEvent("click",{bubbles:!0,cancelable:!0,composed:!0});this.__shady_dispatchEvent(e)};Element.prototype.click?Element.prototype.click=e:HTMLElement.prototype.click&&(HTMLElement.prototype.click=e)}}()),function(){for(var e in st)window.__shady_native_addEventListener(e,(function(e){e.__target||(vt(e),lt(e))}),!0)}(),window.Event=gt,window.CustomEvent=yt,window.MouseEvent=bt,window.ShadowRoot=_n}var Vn=window.Document.prototype.createElement,$n=window.Document.prototype.createElementNS,Wn=window.Document.prototype.importNode,Kn=window.Document.prototype.prepend,Gn=window.Document.prototype.append,Xn=window.DocumentFragment.prototype.prepend,Jn=window.DocumentFragment.prototype.append,Yn=window.Node.prototype.cloneNode,Qn=window.Node.prototype.appendChild,Zn=window.Node.prototype.insertBefore,er=window.Node.prototype.removeChild,tr=window.Node.prototype.replaceChild,nr=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),rr=window.Element.prototype.attachShadow,ir=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),or=window.Element.prototype.getAttribute,ar=window.Element.prototype.setAttribute,sr=window.Element.prototype.removeAttribute,cr=window.Element.prototype.getAttributeNS,ur=window.Element.prototype.setAttributeNS,lr=window.Element.prototype.removeAttributeNS,hr=window.Element.prototype.insertAdjacentElement,fr=window.Element.prototype.insertAdjacentHTML,dr=window.Element.prototype.prepend,pr=window.Element.prototype.append,mr=window.Element.prototype.before,vr=window.Element.prototype.after,gr=window.Element.prototype.replaceWith,yr=window.Element.prototype.remove,br=window.HTMLElement,wr=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),Er=window.HTMLElement.prototype.insertAdjacentElement,_r=window.HTMLElement.prototype.insertAdjacentHTML,kr=new Set;function Sr(e){var t=kr.has(e);return e=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(e),!t&&e}"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach((function(e){return kr.add(e)}));var xr=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function Tr(e){var t=e.isConnected;if(void 0!==t)return t;if(xr(e))return!0;for(;e&&!(e.__CE_isImportDocument||e instanceof Document);)e=e.parentNode||(window.ShadowRoot&&e instanceof ShadowRoot?e.host:void 0);return!(!e||!(e.__CE_isImportDocument||e instanceof Document))}function Pr(e){var t=e.children;if(t)return Array.prototype.slice.call(t);for(t=[],e=e.firstChild;e;e=e.nextSibling)e.nodeType===Node.ELEMENT_NODE&&t.push(e);return t}function Or(e,t){for(;t&&t!==e&&!t.nextSibling;)t=t.parentNode;return t&&t!==e?t.nextSibling:null}function Cr(){var e=!(null==Jr||!Jr.noDocumentConstructionObserver),t=!(null==Jr||!Jr.shadyDomFastWalk);this.X=[],this.a=[],this.R=!1,this.shadyDomFastWalk=t,this.jb=!e}function Ir(e,t,n,r){var i=window.ShadyDom;if(e.shadyDomFastWalk&&i&&i.inUse){if(t.nodeType===Node.ELEMENT_NODE&&n(t),t.querySelectorAll)for(e=i.nativeMethods.querySelectorAll.call(t,"*"),t=0;t<e.length;t++)n(e[t])}else!function e(t,n,r){for(var i=t;i;){if(i.nodeType===Node.ELEMENT_NODE){var o=i;n(o);var a=o.localName;if("link"===a&&"import"===o.getAttribute("rel")){if(i=o.import,void 0===r&&(r=new Set),i instanceof Node&&!r.has(i))for(r.add(i),i=i.firstChild;i;i=i.nextSibling)e(i,n,r);i=Or(t,o);continue}if("template"===a){i=Or(t,o);continue}if(o=o.__CE_shadowRoot)for(o=o.firstChild;o;o=o.nextSibling)e(o,n,r)}i=i.firstChild?i.firstChild:Or(t,i)}}(t,n,r)}function Rr(e,t){e.R&&Ir(e,t,(function(t){return Lr(e,t)}))}function Lr(e,t){if(e.R&&!t.__CE_patched){t.__CE_patched=!0;for(var n=0;n<e.X.length;n++)e.X[n](t);for(n=0;n<e.a.length;n++)e.a[n](t)}}function Ar(e,t){var n=[];for(Ir(e,t,(function(e){return n.push(e)})),t=0;t<n.length;t++){var r=n[t];1===r.__CE_state?e.connectedCallback(r):jr(e,r)}}function Mr(e,t){var n=[];for(Ir(e,t,(function(e){return n.push(e)})),t=0;t<n.length;t++){var r=n[t];1===r.__CE_state&&e.disconnectedCallback(r)}}function Dr(e,t,n){var r=(n=void 0===n?{}:n).kb,i=n.upgrade||function(t){return jr(e,t)},o=[];for(Ir(e,t,(function(t){if(e.R&&Lr(e,t),"link"===t.localName&&"import"===t.getAttribute("rel")){var n=t.import;n instanceof Node&&(n.__CE_isImportDocument=!0,n.__CE_registry=document.__CE_registry),n&&"complete"===n.readyState?n.__CE_documentLoadHandled=!0:t.addEventListener("load",(function(){var n=t.import;if(!n.__CE_documentLoadHandled){n.__CE_documentLoadHandled=!0;var o=new Set;r&&(r.forEach((function(e){return o.add(e)})),o.delete(n)),Dr(e,n,{kb:o,upgrade:i})}}))}else o.push(t)}),r),t=0;t<o.length;t++)i(o[t])}function jr(e,t){try{var n=t.ownerDocument,r=n.__CE_registry,i=r&&(n.defaultView||n.__CE_isImportDocument)?Wr(r,t.localName):void 0;if(i&&void 0===t.__CE_state){i.constructionStack.push(t);try{try{if(new i.constructorFunction!==t)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{i.constructionStack.pop()}}catch(e){throw t.__CE_state=2,e}if(t.__CE_state=1,t.__CE_definition=i,i.attributeChangedCallback&&t.hasAttributes()){var o=i.observedAttributes;for(i=0;i<o.length;i++){var a=o[i],s=t.getAttribute(a);null!==s&&e.attributeChangedCallback(t,a,null,s,null)}}Tr(t)&&e.connectedCallback(t)}}catch(e){Br(e)}}function Nr(e,t,n,r){var i=t.__CE_registry;if(i&&(null===r||"http://www.w3.org/1999/xhtml"===r)&&(i=Wr(i,n)))try{var o=new i.constructorFunction;if(void 0===o.__CE_state||void 0===o.__CE_definition)throw Error("Failed to construct '"+n+"': The returned value was not constructed with the HTMLElement constructor.");if("http://www.w3.org/1999/xhtml"!==o.namespaceURI)throw Error("Failed to construct '"+n+"': The constructed element's namespace must be the HTML namespace.");if(o.hasAttributes())throw Error("Failed to construct '"+n+"': The constructed element must not have any attributes.");if(null!==o.firstChild)throw Error("Failed to construct '"+n+"': The constructed element must not have any children.");if(null!==o.parentNode)throw Error("Failed to construct '"+n+"': The constructed element must not have a parent node.");if(o.ownerDocument!==t)throw Error("Failed to construct '"+n+"': The constructed element's owner document is incorrect.");if(o.localName!==n)throw Error("Failed to construct '"+n+"': The constructed element's local name is incorrect.");return o}catch(i){return Br(i),t=null===r?Vn.call(t,n):$n.call(t,r,n),Object.setPrototypeOf(t,HTMLUnknownElement.prototype),t.__CE_state=2,t.__CE_definition=void 0,Lr(e,t),t}return Lr(e,t=null===r?Vn.call(t,n):$n.call(t,r,n)),t}function Br(e){var t=e.message,n=e.sourceURL||e.fileName||"",r=e.line||e.lineNumber||0,i=e.column||e.columnNumber||0,o=void 0;void 0===ErrorEvent.prototype.initErrorEvent?o=new ErrorEvent("error",{cancelable:!0,message:t,filename:n,lineno:r,colno:i,error:e}):((o=document.createEvent("ErrorEvent")).initErrorEvent("error",!1,!0,t,n,r),o.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0}})}),void 0===o.error&&Object.defineProperty(o,"error",{configurable:!0,enumerable:!0,get:function(){return e}}),window.dispatchEvent(o),o.defaultPrevented||console.error(e)}function Fr(){var e=this;this.C=void 0,this.Ca=new Promise((function(t){e.a=t}))}function Ur(e){var t=document;this.S=void 0,this.M=e,this.a=t,Dr(this.M,this.a),"loading"===this.a.readyState&&(this.S=new MutationObserver(this.b.bind(this)),this.S.observe(this.a,{childList:!0,subtree:!0}))}function Hr(e){e.S&&e.S.disconnect()}function qr(e){this.ea=new Map,this.fa=new Map,this.xa=new Map,this.na=!1,this.qa=new Map,this.da=function(e){return e()},this.P=!1,this.ga=[],this.M=e,this.ya=e.jb?new Ur(e):void 0}function zr(e,t){if(!Sr(t))throw new SyntaxError("The element name '"+t+"' is not valid.");if(Wr(e,t))throw Error("A custom element with name '"+t+"' has already been defined.");if(e.na)throw Error("A custom element is already being defined.")}function Vr(e,t,n){var r;e.na=!0;try{var i=n.prototype;if(!(i instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var o=function(e){var t=i[e];if(void 0!==t&&!(t instanceof Function))throw Error("The '"+e+"' callback must be a function.");return t},a=o("connectedCallback"),s=o("disconnectedCallback"),c=o("adoptedCallback"),u=(r=o("attributeChangedCallback"))&&n.observedAttributes||[]}catch(e){throw e}finally{e.na=!1}return n={localName:t,constructorFunction:n,connectedCallback:a,disconnectedCallback:s,adoptedCallback:c,attributeChangedCallback:r,observedAttributes:u,constructionStack:[]},e.fa.set(t,n),e.xa.set(n.constructorFunction,n),n}function $r(e){if(!1!==e.P){e.P=!1;for(var t=[],n=e.ga,r=new Map,i=0;i<n.length;i++)r.set(n[i],[]);for(Dr(e.M,document,{upgrade:function(n){if(void 0===n.__CE_state){var i=n.localName,o=r.get(i);o?o.push(n):e.fa.has(i)&&t.push(n)}}}),i=0;i<t.length;i++)jr(e.M,t[i]);for(i=0;i<n.length;i++){for(var o=n[i],a=r.get(o),s=0;s<a.length;s++)jr(e.M,a[s]);(o=e.qa.get(o))&&o.resolve(void 0)}n.length=0}}function Wr(e,t){var n=e.fa.get(t);if(n)return n;if(n=e.ea.get(t)){e.ea.delete(t);try{return Vr(e,t,n())}catch(e){Br(e)}}}function Kr(e,t,n){function r(t){return function(n){for(var r=[],i=0;i<arguments.length;++i)r[i]=arguments[i];i=[];for(var o=[],a=0;a<r.length;a++){var s=r[a];if(s instanceof Element&&Tr(s)&&o.push(s),s instanceof DocumentFragment)for(s=s.firstChild;s;s=s.nextSibling)i.push(s);else i.push(s)}for(t.apply(this,r),r=0;r<o.length;r++)Mr(e,o[r]);if(Tr(this))for(r=0;r<i.length;r++)(o=i[r])instanceof Element&&Ar(e,o)}}void 0!==n.prepend&&(t.prepend=r(n.prepend)),void 0!==n.append&&(t.append=r(n.append))}function Gr(e){function t(t,n){Object.defineProperty(t,"innerHTML",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(t){var r=this,i=void 0;if(Tr(this)&&(i=[],Ir(e,this,(function(e){e!==r&&i.push(e)}))),n.set.call(this,t),i)for(var o=0;o<i.length;o++){var a=i[o];1===a.__CE_state&&e.disconnectedCallback(a)}return this.ownerDocument.__CE_registry?Dr(e,this):Rr(e,this),t}})}function n(t,n){t.insertAdjacentElement=function(t,r){var i=Tr(r);return t=n.call(this,t,r),i&&Mr(e,r),Tr(t)&&Ar(e,r),t}}function r(t,n){function r(t,n){for(var r=[];t!==n;t=t.nextSibling)r.push(t);for(n=0;n<r.length;n++)Dr(e,r[n])}t.insertAdjacentHTML=function(e,t){if("beforebegin"===(e=e.toLowerCase())){var i=this.previousSibling;n.call(this,e,t),r(i||this.parentNode.firstChild,this)}else if("afterbegin"===e)i=this.firstChild,n.call(this,e,t),r(this.firstChild,i);else if("beforeend"===e)i=this.lastChild,n.call(this,e,t),r(i||this.firstChild,null);else{if("afterend"!==e)throw new SyntaxError("The value provided ("+String(e)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.");i=this.nextSibling,n.call(this,e,t),r(this.nextSibling,i)}}}rr&&(Element.prototype.attachShadow=function(t){if(t=rr.call(this,t),e.R&&!t.__CE_patched){t.__CE_patched=!0;for(var n=0;n<e.X.length;n++)e.X[n](t)}return this.__CE_shadowRoot=t}),ir&&ir.get?t(Element.prototype,ir):wr&&wr.get?t(HTMLElement.prototype,wr):function(e,t){e.R=!0,e.a.push(t)}(e,(function(e){t(e,{enumerable:!0,configurable:!0,get:function(){return Yn.call(this,!0).innerHTML},set:function(e){var t="template"===this.localName,n=t?this.content:this,r=$n.call(document,this.namespaceURI,this.localName);for(r.innerHTML=e;0<n.childNodes.length;)er.call(n,n.childNodes[0]);for(e=t?r.content:r;0<e.childNodes.length;)Qn.call(n,e.childNodes[0])}})})),Element.prototype.setAttribute=function(t,n){if(1!==this.__CE_state)return ar.call(this,t,n);var r=or.call(this,t);ar.call(this,t,n),n=or.call(this,t),e.attributeChangedCallback(this,t,r,n,null)},Element.prototype.setAttributeNS=function(t,n,r){if(1!==this.__CE_state)return ur.call(this,t,n,r);var i=cr.call(this,t,n);ur.call(this,t,n,r),r=cr.call(this,t,n),e.attributeChangedCallback(this,n,i,r,t)},Element.prototype.removeAttribute=function(t){if(1!==this.__CE_state)return sr.call(this,t);var n=or.call(this,t);sr.call(this,t),null!==n&&e.attributeChangedCallback(this,t,n,null,null)},Element.prototype.removeAttributeNS=function(t,n){if(1!==this.__CE_state)return lr.call(this,t,n);var r=cr.call(this,t,n);lr.call(this,t,n);var i=cr.call(this,t,n);r!==i&&e.attributeChangedCallback(this,n,r,i,t)},Er?n(HTMLElement.prototype,Er):hr&&n(Element.prototype,hr),_r?r(HTMLElement.prototype,_r):fr&&r(Element.prototype,fr),Kr(e,Element.prototype,{prepend:dr,append:pr}),function(e){function t(t){return function(n){for(var r=[],i=0;i<arguments.length;++i)r[i]=arguments[i];i=[];for(var o=[],a=0;a<r.length;a++){var s=r[a];if(s instanceof Element&&Tr(s)&&o.push(s),s instanceof DocumentFragment)for(s=s.firstChild;s;s=s.nextSibling)i.push(s);else i.push(s)}for(t.apply(this,r),r=0;r<o.length;r++)Mr(e,o[r]);if(Tr(this))for(r=0;r<i.length;r++)(o=i[r])instanceof Element&&Ar(e,o)}}var n=Element.prototype;void 0!==mr&&(n.before=t(mr)),void 0!==vr&&(n.after=t(vr)),void 0!==gr&&(n.replaceWith=function(t){for(var n=[],r=0;r<arguments.length;++r)n[r]=arguments[r];r=[];for(var i=[],o=0;o<n.length;o++){var a=n[o];if(a instanceof Element&&Tr(a)&&i.push(a),a instanceof DocumentFragment)for(a=a.firstChild;a;a=a.nextSibling)r.push(a);else r.push(a)}for(o=Tr(this),gr.apply(this,n),n=0;n<i.length;n++)Mr(e,i[n]);if(o)for(Mr(e,this),n=0;n<r.length;n++)(i=r[n])instanceof Element&&Ar(e,i)}),void 0!==yr&&(n.remove=function(){var t=Tr(this);yr.call(this),t&&Mr(e,this)})}(e)}Cr.prototype.connectedCallback=function(e){var t=e.__CE_definition;if(t.connectedCallback)try{t.connectedCallback.call(e)}catch(e){Br(e)}},Cr.prototype.disconnectedCallback=function(e){var t=e.__CE_definition;if(t.disconnectedCallback)try{t.disconnectedCallback.call(e)}catch(e){Br(e)}},Cr.prototype.attributeChangedCallback=function(e,t,n,r,i){var o=e.__CE_definition;if(o.attributeChangedCallback&&-1<o.observedAttributes.indexOf(t))try{o.attributeChangedCallback.call(e,t,n,r,i)}catch(e){Br(e)}},Fr.prototype.resolve=function(e){if(this.C)throw Error("Already resolved.");this.C=e,this.a(e)},Ur.prototype.b=function(e){var t=this.a.readyState;for("interactive"!==t&&"complete"!==t||Hr(this),t=0;t<e.length;t++)for(var n=e[t].addedNodes,r=0;r<n.length;r++)Dr(this.M,n[r])},(n=qr.prototype).$a=function(e,t){var n=this;if(!(t instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");zr(this,e),this.ea.set(e,t),this.ga.push(e),this.P||(this.P=!0,this.da((function(){return $r(n)})))},n.define=function(e,t){var n=this;if(!(t instanceof Function))throw new TypeError("Custom element constructors must be functions.");zr(this,e),Vr(this,e,t),this.ga.push(e),this.P||(this.P=!0,this.da((function(){return $r(n)})))},n.upgrade=function(e){Dr(this.M,e)},n.get=function(e){if(e=Wr(this,e))return e.constructorFunction},n.whenDefined=function(e){if(!Sr(e))return Promise.reject(new SyntaxError("'"+e+"' is not a valid custom element name."));var t=this.qa.get(e);if(t)return t.Ca;t=new Fr,this.qa.set(e,t);var n=this.fa.has(e)||this.ea.has(e);return e=-1===this.ga.indexOf(e),n&&e&&t.resolve(void 0),t.Ca},n.polyfillWrapFlushCallback=function(e){this.ya&&Hr(this.ya);var t=this.da;this.da=function(n){return e((function(){return t(n)}))}},window.CustomElementRegistry=qr,qr.prototype.define=qr.prototype.define,qr.prototype.upgrade=qr.prototype.upgrade,qr.prototype.get=qr.prototype.get,qr.prototype.whenDefined=qr.prototype.whenDefined,qr.prototype.polyfillDefineLazy=qr.prototype.$a,qr.prototype.polyfillWrapFlushCallback=qr.prototype.polyfillWrapFlushCallback;var Xr={};var Jr=window.customElements;function Yr(){var e=new Cr;!function(e){function t(){var t=this.constructor,n=document.__CE_registry.xa.get(t);if(!n)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var r=n.constructionStack;if(0===r.length)return r=Vn.call(document,n.localName),Object.setPrototypeOf(r,t.prototype),r.__CE_state=1,r.__CE_definition=n,Lr(e,r),r;var i=r.length-1,o=r[i];if(o===Xr)throw Error("Failed to construct '"+n.localName+"': This element was already constructed.");return r[i]=Xr,Object.setPrototypeOf(o,t.prototype),Lr(e,o),o}t.prototype=br.prototype,Object.defineProperty(HTMLElement.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:t}),window.HTMLElement=t}(e),function(e){Document.prototype.createElement=function(t){return Nr(e,this,t,null)},Document.prototype.importNode=function(t,n){return t=Wn.call(this,t,!!n),this.__CE_registry?Dr(e,t):Rr(e,t),t},Document.prototype.createElementNS=function(t,n){return Nr(e,this,n,t)},Kr(e,Document.prototype,{prepend:Kn,append:Gn})}(e),Kr(e,DocumentFragment.prototype,{prepend:Xn,append:Jn}),function(e){function t(t,n){Object.defineProperty(t,"textContent",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(t){if(this.nodeType===Node.TEXT_NODE)n.set.call(this,t);else{var r=void 0;if(this.firstChild){var i=this.childNodes,o=i.length;if(0<o&&Tr(this)){r=Array(o);for(var a=0;a<o;a++)r[a]=i[a]}}if(n.set.call(this,t),r)for(t=0;t<r.length;t++)Mr(e,r[t])}}})}Node.prototype.insertBefore=function(t,n){if(t instanceof DocumentFragment){var r=Pr(t);if(t=Zn.call(this,t,n),Tr(this))for(n=0;n<r.length;n++)Ar(e,r[n]);return t}return r=t instanceof Element&&Tr(t),n=Zn.call(this,t,n),r&&Mr(e,t),Tr(this)&&Ar(e,t),n},Node.prototype.appendChild=function(t){if(t instanceof DocumentFragment){var n=Pr(t);if(t=Qn.call(this,t),Tr(this))for(var r=0;r<n.length;r++)Ar(e,n[r]);return t}return n=t instanceof Element&&Tr(t),r=Qn.call(this,t),n&&Mr(e,t),Tr(this)&&Ar(e,t),r},Node.prototype.cloneNode=function(t){return t=Yn.call(this,!!t),this.ownerDocument.__CE_registry?Dr(e,t):Rr(e,t),t},Node.prototype.removeChild=function(t){var n=t instanceof Element&&Tr(t),r=er.call(this,t);return n&&Mr(e,t),r},Node.prototype.replaceChild=function(t,n){if(t instanceof DocumentFragment){var r=Pr(t);if(t=tr.call(this,t,n),Tr(this))for(Mr(e,n),n=0;n<r.length;n++)Ar(e,r[n]);return t}r=t instanceof Element&&Tr(t);var i=tr.call(this,t,n),o=Tr(this);return o&&Mr(e,n),r&&Mr(e,t),o&&Ar(e,t),i},nr&&nr.get?t(Node.prototype,nr):function(e,t){e.R=!0,e.X.push(t)}(e,(function(e){t(e,{enumerable:!0,configurable:!0,get:function(){for(var e=[],t=this.firstChild;t;t=t.nextSibling)t.nodeType!==Node.COMMENT_NODE&&e.push(t.textContent);return e.join("")},set:function(e){for(;this.firstChild;)er.call(this,this.firstChild);null!=e&&""!==e&&Qn.call(this,document.createTextNode(e))}})}))}(e),Gr(e),e=new qr(e),document.__CE_registry=e,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:e})}function Qr(){this.end=this.start=0,this.rules=this.parent=this.previous=null,this.cssText=this.parsedCssText="",this.atRule=!1,this.type=0,this.parsedSelector=this.selector=this.keyframesName=""}function Zr(e){var t=e=e.replace(ai,"").replace(si,""),n=new Qr;n.start=0,n.end=t.length;for(var r=n,i=0,o=t.length;i<o;i++)if("{"===t[i]){r.rules||(r.rules=[]);var a=r,s=a.rules[a.rules.length-1]||null;(r=new Qr).start=i+1,r.parent=a,r.previous=s,a.rules.push(r)}else"}"===t[i]&&(r.end=i+1,r=r.parent||n);return function e(t,n){var r=n.substring(t.start,t.end-1);if(t.parsedCssText=t.cssText=r.trim(),t.parent&&(r=(r=(r=function(e){return e.replace(/\\([0-9a-f]{1,6})\s/gi,(function(e,t){for(t=6-(e=t).length;t--;)e="0"+e;return"\\"+e}))}(r=n.substring(t.previous?t.previous.end:t.parent.start,t.start-1))).replace(di," ")).substring(r.lastIndexOf(";")+1),r=t.parsedSelector=t.selector=r.trim(),t.atRule=0===r.indexOf("@"),t.atRule?0===r.indexOf("@media")?t.type=ii:r.match(fi)&&(t.type=ri,t.keyframesName=t.selector.split(di).pop()):t.type=0===r.indexOf("--")?oi:ni),r=t.rules)for(var i=0,o=r.length,a=void 0;i<o&&(a=r[i]);i++)e(a,n);return t}(n,e)}Jr&&!Jr.forcePolyfill&&"function"==typeof Jr.define&&"function"==typeof Jr.get||Yr(),window.__CE_installPolyfill=Yr;var ei,ti,ni=1,ri=7,ii=4,oi=1e3,ai=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,si=/@import[^;]*;/gim,ci=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,ui=/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,li=/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,hi=/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,fi=/^@[^\s]*keyframes/,di=/\s+/g,pi=!(window.ShadyDOM&&window.ShadyDOM.inUse);function mi(e){ei=(!e||!e.shimcssproperties)&&(pi||!(navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)||!window.CSS||!CSS.supports||!CSS.supports("box-shadow","0 0 0 var(--foo)")))}window.ShadyCSS&&void 0!==window.ShadyCSS.cssBuild&&(ti=window.ShadyCSS.cssBuild);var vi=!(!window.ShadyCSS||!window.ShadyCSS.disableRuntime);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?ei=window.ShadyCSS.nativeCss:window.ShadyCSS?(mi(window.ShadyCSS),window.ShadyCSS=void 0):mi(window.WebComponents&&window.WebComponents.flags);var gi=ei,yi=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,bi=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,wi=/(--[\w-]+)\s*([:,;)]|$)/gi,Ei=/(animation\s*:)|(animation-name\s*:)/,_i=/@media\s(.*)/,ki=/\{[^}]*\}/g,Si=new Set;function xi(e,t){return e?("string"==typeof e&&(e=Zr(e)),t&&Oi(e,t),function e(t,n,r){r=void 0===r?"":r;var i="";if(t.cssText||t.rules){var o,a=t.rules;if((o=a)&&(o=!((o=a[0])&&o.selector&&0===o.selector.indexOf("--"))),o){o=0;for(var s=a.length,c=void 0;o<s&&(c=a[o]);o++)i=e(c,n,i)}else n?n=t.cssText:n=(n=(n=t.cssText).replace(ci,"").replace(ui,"")).replace(li,"").replace(hi,""),(i=n.trim())&&(i="  "+i+"\n")}return i&&(t.selector&&(r+=t.selector+" {\n"),r+=i,t.selector&&(r+="}\n\n")),r}(e,gi)):""}function Ti(e){return!e.__cssRules&&e.textContent&&(e.__cssRules=Zr(e.textContent)),e.__cssRules||null}function Pi(e){return!!e.parent&&e.parent.type===ri}function Oi(e,t,n,r){if(e){var i=!1,o=e.type;if(r&&o===ii){var a=e.selector.match(_i);a&&(window.matchMedia(a[1]).matches||(i=!0))}if(o===ni?t(e):n&&o===ri?n(e):o===oi&&(i=!0),(e=e.rules)&&!i)for(i=0,o=e.length,a=void 0;i<o&&(a=e[i]);i++)Oi(a,t,n,r)}}function Ci(e,t,n,r){var i=document.createElement("style");return t&&i.setAttribute("scope",t),i.textContent=e,Li(i,n,r),i}var Ii=null;function Ri(e){e=document.createComment(" Shady DOM styles for "+e+" ");var t=document.head;return t.insertBefore(e,(Ii?Ii.nextSibling:null)||t.firstChild),Ii=e}function Li(e,t,n){(t=t||document.head).insertBefore(e,n&&n.nextSibling||t.firstChild),Ii?e.compareDocumentPosition(Ii)===Node.DOCUMENT_POSITION_PRECEDING&&(Ii=e):Ii=e}function Ai(e,t){for(var n=0,r=e.length;t<r;t++)if("("===e[t])n++;else if(")"===e[t]&&0==--n)return t;return-1}function Mi(e,t){pi?e.setAttribute("class",t):window.ShadyDOM.nativeMethods.setAttribute.call(e,"class",t)}var Di=window.ShadyDOM&&window.ShadyDOM.wrap||function(e){return e};function ji(e){var t=e.localName,n="";return t?-1<t.indexOf("-")||(n=t,t=e.getAttribute&&e.getAttribute("is")||""):(t=e.is,n=e.extends),{is:t,ba:n}}function Ni(e){for(var t=[],n="",r=0;0<=r&&r<e.length;r++)if("("===e[r]){var i=Ai(e,r);n+=e.slice(r,i+1),r=i}else","===e[r]?(t.push(n),n=""):n+=e[r];return n&&t.push(n),t}function Bi(e){if(void 0!==ti)return ti;if(void 0===e.__cssBuild){var t=e.getAttribute("css-build");if(t)e.__cssBuild=t;else{if(""!==(t=(t="template"===e.localName?e.content.firstChild:e.firstChild)instanceof Comment&&"css-build"===(t=t.textContent.trim().split(":"))[0]?t[1]:"")){var n="template"===e.localName?e.content.firstChild:e.firstChild;n.parentNode.removeChild(n)}e.__cssBuild=t}}return e.__cssBuild||""}function Fi(e){return!(""===(e=void 0===e?"":e)||!gi)&&(pi?"shadow"===e:"shady"===e)}function Ui(){}function Hi(e,t,n){var r;if(t.nodeType===Node.ELEMENT_NODE&&n(t),r="template"===t.localName?(t.content||t._content||t).childNodes:t.children||t.childNodes)for(t=0;t<r.length;t++)Hi(e,r[t],n)}function qi(e,t,n){if(t)if(e.classList)n?(e.classList.remove("style-scope"),e.classList.remove(t)):(e.classList.add("style-scope"),e.classList.add(t));else if(e.getAttribute){var r=e.getAttribute("class");n?r&&Mi(e,t=r.replace("style-scope","").replace(t,"")):Mi(e,(r?r+" ":"")+"style-scope "+t)}}function zi(e,t,n){Hi(oo,e,(function(e){qi(e,t,!0),qi(e,n)}))}function Vi(e,t){Hi(oo,e,(function(e){qi(e,t||"",!0)}))}function $i(e,t,n,r,i){var o=oo;return""===(i=void 0===i?"":i)&&(pi||"shady"===(void 0===r?"":r)?i=xi(t,n):i=function(e,t,n,r,i){var o=Wi(n,r);return n=n?"."+n:"",xi(t,(function(t){t.c||(t.selector=t.w=Ki(e,t,e.b,n,o),t.c=!0),i&&i(t,n,o)}))}(o,t,(e=ji(e)).is,e.ba,n)+"\n\n"),i.trim()}function Wi(e,t){return t?"[is="+e+"]":e}function Ki(e,t,n,r,i){var o=Ni(t.selector);if(!Pi(t)){t=0;for(var a=o.length,s=void 0;t<a&&(s=o[t]);t++)o[t]=n.call(e,s,r,i)}return o.filter((function(e){return!!e})).join(",")}function Gi(e){return e.replace(Yi,(function(e,t,n){return-1<n.indexOf("+")?n=n.replace(/\+/g,"___"):-1<n.indexOf("___")&&(n=n.replace(/___/g,"+")),":"+t+"("+n+")"}))}function Xi(e,t){e=e.split(/(\[.+?\])/);for(var n=[],r=0;r<e.length;r++)if(1==r%2)n.push(e[r]);else{var i=e[r];""===i&&r===e.length-1||((i=i.split(":"))[0]+=t,n.push(i.join(":")))}return n.join("")}function Ji(e){":root"===e.selector&&(e.selector="html")}Ui.prototype.b=function(e,t,n){var r=!1;e=e.trim();var i=Yi.test(e);i&&(e=Gi(e=e.replace(Yi,(function(e,t,n){return":"+t+"("+n.replace(/\s/g,"")+")"}))));var o=io.test(e);if(o){var a=function(e){for(var t,n=[];t=e.match(io);){var r=t.index,i=Ai(e,r);if(-1===i)throw Error(t.input+" selector missing ')'");t=e.slice(r,i+1),e=e.replace(t,""),n.push(t)}return{wa:e,matches:n}}(e);e=a.wa,a=a.matches}return e=(e=e.replace(eo,":host $1")).replace(Qi,(function(e,i,o){return r||(e=function(e,t,n,r){var i=e.indexOf("::slotted");if(0<=e.indexOf(":host")?e=function(e,t){var n=e.match(to);return(n=n&&n[2].trim()||"")?n[0].match(Zi)?e.replace(to,(function(e,n,r){return t+r})):n.split(Zi)[0]===t?n:"should_not_match":e.replace(":host",t)}(e,r):0!==i&&(e=n?Xi(e,n):e),n=!1,0<=i&&(t="",n=!0),n){var o=!0;n&&(e=e.replace(no,(function(e,t){return" > "+t})))}return{value:e,Qa:t,stop:o}}(o,i,t,n),r=r||e.stop,i=e.Qa,o=e.value),i+o})),o&&(e=function(e,t){var n=e.split("");return t.reduce((function(e,t,r){return e+t+n[r+1]}),n[0])}(e,a)),i&&(e=Gi(e)),e.replace(ro,(function(e,t,n,r){return'[dir="'+n+'"] '+t+r+", "+t+'[dir="'+n+'"]'+r}))},Ui.prototype.c=function(e){return e.match(":host")?"":e.match("::slotted")?this.b(e,":not(.style-scope)"):Xi(e.trim(),":not(.style-scope)")},a.Object.defineProperties(Ui.prototype,{a:{configurable:!0,enumerable:!0,get:function(){return"style-scope"}}});var Yi=/:(nth[-\w]+)\(([^)]+)\)/,Qi=/(^|[\s>+~]+)((?:\[.+?\]|[^\s>+~=[])+)/g,Zi=/[[.:#*]/,eo=/^(::slotted)/,to=/(:host)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,no=/(?:::slotted)(?:\(((?:\([^)(]*\)|[^)(]*)+?)\))/,ro=/(.*):dir\((?:(ltr|rtl))\)(.*)/,io=/:(?:matches|any|-(?:webkit|moz)-any)/,oo=new Ui;function ao(e,t,n,r,i){this.H=e||null,this.b=t||null,this.ta=n||[],this.F=null,this.cssBuild=i||"",this.ba=r||"",this.a=this.G=this.L=null}function so(e){return e?e.__styleInfo:null}function co(e,t){return e.__styleInfo=t}function uo(e){var t=this.matches||this.matchesSelector||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector;return t&&t.call(this,e)}ao.prototype.c=function(){return this.H},ao.prototype._getStyleRules=ao.prototype.c;var lo=/:host\s*>\s*/,ho=navigator.userAgent.match("Trident");function fo(){}function po(e){if(!e.v){var t={},n={};mo(e,n)&&(t.K=n,e.rules=null),t.cssText=e.parsedCssText.replace(ki,"").replace(yi,""),e.v=t}}function mo(e,t){var n=e.v;if(!n){n=e.parsedCssText;for(var r;e=yi.exec(n);)"inherit"===(r=(e[2]||e[3]).trim())&&"unset"===r||(t[e[1].trim()]=r),r=!0;return r}if(n.K)return Object.assign(t,n.K),!0}function vo(e,t,n){return t&&(t=0<=t.indexOf(";")?go(e,t,n):function e(t,n){var r=t.indexOf("var(");if(-1===r)return n(t,"","","");var i=Ai(t,r+3),o=t.substring(r+4,i);return r=t.substring(0,r),t=e(t.substring(i+1),n),-1===(i=o.indexOf(","))?n(r,o.trim(),"",t):n(r,o.substring(0,i).trim(),o.substring(i+1).trim(),t)}(t,(function(t,r,i,o){return r?((r=vo(e,n[r],n))&&"initial"!==r?"apply-shim-inherit"===r&&(r="inherit"):r=vo(e,n[i]||i,n)||i,t+(r||"")+o):t+o}))),t&&t.trim()||""}function go(e,t,n){t=t.split(";");for(var r,i,o=0;o<t.length;o++)if(r=t[o]){if(bi.lastIndex=0,i=bi.exec(r))r=vo(e,n[i[1]],n);else if(-1!==(i=r.indexOf(":"))){var a=r.substring(i);a=vo(e,a=a.trim(),n)||a,r=r.substring(0,i)+a}t[o]=r&&r.lastIndexOf(";")===r.length-1?r.slice(0,-1):r||""}return t.join(";")}function yo(e,t,n){var r={},i={};return Oi(t,(function(t){!function(e,t,n,r){if(t.v||po(t),t.v.K){var i=ji(e);e=i.is,i=i.ba,i=e?Wi(e,i):"html";var o=t.parsedSelector,a=!!o.match(lo)||"html"===i&&-1<o.indexOf("html"),s=0===o.indexOf(":host")&&!a;"shady"===n&&(s=!(a=o===i+" > *."+i||-1!==o.indexOf("html"))&&0===o.indexOf(i)),(a||s)&&(n=i,s&&(t.w||(t.w=Ki(oo,t,oo.b,e?"."+e:"",i)),n=t.w||i),a&&"html"===i&&(n=t.w||t.J),r({wa:n,Xa:s,mb:a}))}}(e,t,n,(function(n){uo.call(e._element||e,n.wa)&&(n.Xa?mo(t,r):mo(t,i))}))}),null,!0),{cb:i,Va:r}}function bo(e,t,n,r){var i=ji(t),o=Wi(i.is,i.ba),a=new RegExp("(?:^|[^.#[:])"+(t.extends?"\\"+o.slice(0,-1)+"\\]":o)+"($|[.:[\\s>+~])"),s=so(t);i=s.H,s=s.cssBuild;var c=function(e,t){e=e.b;var n={};if(!pi&&e)for(var r=0,i=e[r];r<e.length;i=e[++r]){var o=i,a=t;o.l=new RegExp("\\b"+o.keyframesName+"(?!\\B|-)","g"),o.a=o.keyframesName+"-"+a,o.w=o.w||o.selector,o.selector=o.w.replace(o.keyframesName,o.a),n[i.keyframesName]=wo(i)}return n}(i,r);return $i(t,i,(function(t){var i="";if(t.v||po(t),t.v.cssText&&(i=go(e,t.v.cssText,n)),t.cssText=i,!pi&&!Pi(t)&&t.cssText){var s=i=t.cssText;if(null==t.Da&&(t.Da=Ei.test(i)),t.Da)if(null==t.ja)for(var u in t.ja=[],c)i!==(s=(s=c[u])(i))&&(i=s,t.ja.push(u));else{for(u=0;u<t.ja.length;++u)i=(s=c[t.ja[u]])(i);s=i}t.cssText=s,t.w=t.w||t.selector,i="."+r,s=0;for(var l=(u=Ni(t.w)).length,h=void 0;s<l&&(h=u[s]);s++)u[s]=h.match(a)?h.replace(o,i):i+" "+h;t.selector=u.join(",")}}),s)}function wo(e){return function(t){return t.replace(e.l,e.a)}}function Eo(e,t){var n=_o,r=Ti(e);e.textContent=xi(r,(function(e){var r=e.cssText=e.parsedCssText;e.v&&e.v.cssText&&(r=r.replace(ci,"").replace(ui,""),e.cssText=go(n,r,t))}))}a.Object.defineProperties(fo.prototype,{a:{configurable:!0,enumerable:!0,get:function(){return"x-scope"}}});var _o=new fo,ko={},So=window.customElements;if(So&&!pi&&!vi){var xo=So.define;So.define=function(e,t,n){ko[e]||(ko[e]=Ri(e)),xo.call(So,e,t,n)}}function To(){this.cache={}}function Po(){}To.prototype.store=function(e,t,n,r){var i=this.cache[e]||[];i.push({K:t,styleElement:n,G:r}),100<i.length&&i.shift(),this.cache[e]=i};var Oo=new RegExp(oo.a+"\\s*([^\\s]*)");function Co(e){return(e=(e.classList&&e.classList.value?e.classList.value:e.getAttribute("class")||"").match(Oo))?e[1]:""}function Io(e){var t=Di(e).getRootNode();return t===e||t===e.ownerDocument?"":(e=t.host)?ji(e).is:""}function Ro(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.target!==document.documentElement&&n.target!==document.head)for(var r=0;r<n.addedNodes.length;r++){var i=n.addedNodes[r];if(i.nodeType===Node.ELEMENT_NODE){var o=i.getRootNode(),a=Co(i);if(a&&o===i.ownerDocument&&("style"!==i.localName&&"template"!==i.localName||""===Bi(i)))Vi(i,a);else if(o instanceof ShadowRoot)for((o=Io(i))!==a&&zi(i,a,o),i=window.ShadyDOM.nativeMethods.querySelectorAll.call(i,":not(."+oo.a+")"),a=0;a<i.length;a++){var s=Io(o=i[a]);s&&qi(o,s)}}}}}if(!(pi||window.ShadyDOM&&window.ShadyDOM.handlesDynamicScoping)){var Lo=new MutationObserver(Ro),Ao=function(e){Lo.observe(e,{childList:!0,subtree:!0})};if(window.customElements&&!window.customElements.polyfillWrapFlushCallback)Ao(document);else{var Mo=function(){Ao(document.body)};window.HTMLImports?window.HTMLImports.whenReady(Mo):requestAnimationFrame((function(){if("loading"===document.readyState){var e=function(){Mo(),document.removeEventListener("readystatechange",e)};document.addEventListener("readystatechange",e)}else Mo()}))}Po=function(){Ro(Lo.takeRecords())}}var Do={},jo=Promise.resolve();function No(e){(e=Do[e])&&(e._applyShimCurrentVersion=e._applyShimCurrentVersion||0,e._applyShimValidatingVersion=e._applyShimValidatingVersion||0,e._applyShimNextVersion=(e._applyShimNextVersion||0)+1)}function Bo(e){return e._applyShimCurrentVersion===e._applyShimNextVersion}var Fo={},Uo=new To;function Ho(){this.Y={},this.c=document.documentElement;var e=new Qr;e.rules=[],this.l=co(this.c,new ao(e)),this.J=!1,this.a=this.b=null}function qo(e){var t=ji(e),n=t.is;t=t.ba;var r=ko[n]||null,i=Do[n];if(i)return co(e,t=new ao(n=i._styleAst,r,i.a,t,i=Bi(i))),t}function zo(e){if(!e.b&&window.ShadyCSS&&window.ShadyCSS.ApplyShim){e.b=window.ShadyCSS.ApplyShim,e.b.invalidCallback=No;var t=!0}else t=!1;return function(e){!e.a&&window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface&&(e.a=window.ShadyCSS.CustomStyleInterface,e.a.transformCallback=function(t){e.Ha(t)},e.a.validateCallback=function(){requestAnimationFrame((function(){(e.a.enqueued||e.J)&&e.flushCustomStyles()}))})}(e),t}function Vo(e,t,n){var r=ji(t).is;if(n.F){var i,o=n.F;for(i in o)null===i?t.style.removeProperty(i):t.style.setProperty(i,o[i])}!(o=Do[r])&&t!==e.c||o&&""!==Bi(o)||!o||!o._style||Bo(o)||((Bo(o)||o._applyShimValidatingVersion!==o._applyShimNextVersion)&&(zo(e),e.b&&e.b.transformRules(o._styleAst,r),o._style.textContent=$i(t,n.H),function(e){e._applyShimValidatingVersion=e._applyShimNextVersion,e._validating||(e._validating=!0,jo.then((function(){e._applyShimCurrentVersion=e._applyShimNextVersion,e._validating=!1})))}(o)),pi&&(e=t.shadowRoot)&&(e=e.querySelector("style"))&&(e.textContent=$i(t,n.H)),n.H=o._styleAst)}function $o(e,t){return(t=Di(t).getRootNode().host)?so(t)||qo(t)?t:$o(e,t):e.c}function Wo(e,t,n){var r=$o(e,t),i=so(r),o=i.L;for(var a in r===e.c||o||(Wo(e,r,i),o=i.L),e=Object.create(o||null),r=yo(t,n.H,n.cssBuild),t=function(e,t){var n={},r=[];return Oi(e,(function(e){e.v||po(e);var i=e.w||e.parsedSelector;t&&e.v.K&&i&&uo.call(t,i)&&(mo(e,n),e=e.index,i=parseInt(e/32,10),r[i]=(r[i]||0)|1<<e%32)}),null,!0),{K:n,key:r}}(i.H,t).K,Object.assign(e,r.Va,t,r.cb),t=n.F)((i=t[a])||0===i)&&(e[a]=i);for(a=_o,t=Object.getOwnPropertyNames(e),i=0;i<t.length;i++)e[r=t[i]]=vo(a,e[r],e);n.L=e}(n=Ho.prototype).flush=function(){Po()},n.Ta=function(e){return Ti(e)},n.hb=function(e){return xi(e)},n.prepareTemplate=function(e,t,n){this.prepareTemplateDom(e,t),this.prepareTemplateStyles(e,t,n)},n.prepareTemplateStyles=function(e,t,n){if(!e._prepared&&!vi){pi||ko[t]||(ko[t]=Ri(t)),e._prepared=!0,e.name=t,e.extends=n,Do[t]=e;var r=Bi(e),i=Fi(r);n={is:t,extends:n};for(var o=[],a=e.content.querySelectorAll("style"),s=0;s<a.length;s++){var c=a[s];if(c.hasAttribute("shady-unscoped")){if(!pi){var u=c.textContent;if(!Si.has(u)){Si.add(u);var l=document.createElement("style");l.setAttribute("shady-unscoped",""),l.textContent=u,document.head.appendChild(l)}c.parentNode.removeChild(c)}}else o.push(c.textContent),c.parentNode.removeChild(c)}o=o.join("").trim()+(Fo[t]||""),zo(this),i||((a=!r)&&(a=bi.test(o)||yi.test(o),bi.lastIndex=0,yi.lastIndex=0),s=Zr(o),a&&gi&&this.b&&this.b.transformRules(s,t),e._styleAst=s),a=[],gi||(a=function(e){var t={},n=[],r=0;for(var i in Oi(e,(function(e){po(e),e.index=r++,e=e.v.cssText;for(var n;n=wi.exec(e);){var i=n[1];":"!==n[2]&&(t[i]=!0)}}),(function(e){n.push(e)})),e.b=n,e=[],t)e.push(i);return e}(e._styleAst)),a.length&&!gi||(s=pi?e.content:null,t=ko[t]||null,r=(r=$i(n,e._styleAst,null,r,i?o:"")).length?Ci(r,n.is,s,t):null,e._style=r),e.a=a}},n.ab=function(e,t){Fo[t]=e.join(" ")},n.prepareTemplateDom=function(e,t){if(!vi){var n=Bi(e);pi||"shady"===n||e._domPrepared||(e._domPrepared=!0,function(e,t){Hi(oo,e,(function(e){qi(e,t||"")}))}(e.content,t))}},n.flushCustomStyles=function(){if(!vi){var e=zo(this);if(this.a){var t=this.a.processStyles();if((e||this.a.enqueued)&&!Fi(this.l.cssBuild)){if(gi){if(!this.l.cssBuild)for(e=0;e<t.length;e++){var n=this.a.getStyleForCustomStyle(t[e]);if(n&&gi&&this.b){var r=Ti(n);zo(this),this.b.transformRules(r),n.textContent=xi(r)}}}else{for(function(e,t){(t=t.map((function(t){return e.a.getStyleForCustomStyle(t)})).filter((function(e){return!!e}))).sort((function(e,t){return(e=t.compareDocumentPosition(e))&Node.DOCUMENT_POSITION_FOLLOWING?1:e&Node.DOCUMENT_POSITION_PRECEDING?-1:0})),e.l.H.rules=t.map((function(e){return Ti(e)}))}(this,t),Wo(this,this.c,this.l),e=0;e<t.length;e++)(n=this.a.getStyleForCustomStyle(t[e]))&&Eo(n,this.l.L);this.J&&this.styleDocument()}this.a.enqueued=!1}}}},n.styleElement=function(e,t){if(vi){if(t){so(e)||co(e,new ao(null));var n=so(e);n.F=n.F||{},Object.assign(n.F,t),Vo(this,e,n)}}else if(n=so(e)||qo(e))if(e!==this.c&&(this.J=!0),t&&(n.F=n.F||{},Object.assign(n.F,t)),gi)Vo(this,e,n);else if(this.flush(),Wo(this,e,n),n.ta&&n.ta.length){var r;t=ji(e).is;e:{if(r=Uo.cache[t])for(var i=r.length-1;0<=i;i--){var o=r[i];t:{for(var a=n.ta,s=0;s<a.length;s++){var c=a[s];if(o.K[c]!==n.L[c]){a=!1;break t}}a=!0}if(a){r=o;break e}}r=void 0}a=r?r.styleElement:null,i=n.G,(o=r&&r.G)||(o=t+"-"+(o=this.Y[t]=(this.Y[t]||0)+1)),n.G=o,o=n.G,s=_o,s=a?a.textContent||"":bo(s,e,n.L,o);var u=(c=so(e)).a;u&&!pi&&u!==a&&(u._useCount--,0>=u._useCount&&u.parentNode&&u.parentNode.removeChild(u)),pi?c.a?(c.a.textContent=s,a=c.a):s&&(a=Ci(s,o,e.shadowRoot,c.b)):a?a.parentNode||(ho&&-1<s.indexOf("@media")&&(a.textContent=s),Li(a,null,c.b)):s&&(a=Ci(s,o,null,c.b)),a&&(a._useCount=a._useCount||0,c.a!=a&&a._useCount++,c.a=a),o=a,pi||(a=n.G,c=s=e.getAttribute("class")||"",i&&(c=s.replace(new RegExp("\\s*x-scope\\s*"+i+"\\s*","g")," ")),s!==(c+=(c?" ":"")+"x-scope "+a)&&Mi(e,c)),r||Uo.store(t,n.L,o,n.G)}},n.styleDocument=function(e){this.styleSubtree(this.c,e)},n.styleSubtree=function(e,t){var n=Di(e),r=n.shadowRoot,i=e===this.c;if((r||i)&&this.styleElement(e,t),e=i?n:r)for(e=Array.from(e.querySelectorAll("*")).filter((function(e){return Di(e).shadowRoot})),t=0;t<e.length;t++)this.styleSubtree(e[t])},n.Ha=function(e){var t=this,n=Bi(e);if(n!==this.l.cssBuild&&(this.l.cssBuild=n),!Fi(n)){var r=Ti(e);Oi(r,(function(e){if(pi)Ji(e);else{var r=oo;e.selector=e.parsedSelector,Ji(e),e.selector=e.w=Ki(r,e,r.c,void 0,void 0)}gi&&""===n&&(zo(t),t.b&&t.b.transformRule(e))})),gi?e.textContent=xi(r):this.l.H.rules.push(r)}},n.getComputedStyleValue=function(e,t){var n;return gi||(n=(so(e)||so($o(this,e))).L[t]),(n=n||window.getComputedStyle(e).getPropertyValue(t))?n.trim():""},n.gb=function(e,t){var n,r=Di(e).getRootNode();if(n=t?("string"==typeof t?t:String(t)).split(/\s/):[],!(t=r.host&&r.host.localName)&&(r=e.getAttribute("class"))){r=r.split(/\s/);for(var i=0;i<r.length;i++)if(r[i]===oo.a){t=r[i+1];break}}t&&n.push(oo.a,t),gi||(t=so(e))&&t.G&&n.push(_o.a,t.G),Mi(e,n.join(" "))},n.Oa=function(e){return so(e)},n.fb=function(e,t){qi(e,t)},n.ib=function(e,t){qi(e,t,!0)},n.eb=function(e){return Io(e)},n.Ra=function(e){return Co(e)},Ho.prototype.flush=Ho.prototype.flush,Ho.prototype.prepareTemplate=Ho.prototype.prepareTemplate,Ho.prototype.styleElement=Ho.prototype.styleElement,Ho.prototype.styleDocument=Ho.prototype.styleDocument,Ho.prototype.styleSubtree=Ho.prototype.styleSubtree,Ho.prototype.getComputedStyleValue=Ho.prototype.getComputedStyleValue,Ho.prototype.setElementClass=Ho.prototype.gb,Ho.prototype._styleInfoForNode=Ho.prototype.Oa,Ho.prototype.transformCustomStyleForDocument=Ho.prototype.Ha,Ho.prototype.getStyleAst=Ho.prototype.Ta,Ho.prototype.styleAstToString=Ho.prototype.hb,Ho.prototype.flushCustomStyles=Ho.prototype.flushCustomStyles,Ho.prototype.scopeNode=Ho.prototype.fb,Ho.prototype.unscopeNode=Ho.prototype.ib,Ho.prototype.scopeForNode=Ho.prototype.eb,Ho.prototype.currentScopeForNode=Ho.prototype.Ra,Ho.prototype.prepareAdoptedCssText=Ho.prototype.ab,Object.defineProperties(Ho.prototype,{nativeShadow:{get:function(){return pi}},nativeCss:{get:function(){return gi}}});var Ko,Go,Xo=new Ho;window.ShadyCSS&&(Ko=window.ShadyCSS.ApplyShim,Go=window.ShadyCSS.CustomStyleInterface),window.ShadyCSS={ScopingShim:Xo,prepareTemplate:function(e,t,n){Xo.flushCustomStyles(),Xo.prepareTemplate(e,t,n)},prepareTemplateDom:function(e,t){Xo.prepareTemplateDom(e,t)},prepareTemplateStyles:function(e,t,n){Xo.flushCustomStyles(),Xo.prepareTemplateStyles(e,t,n)},styleSubtree:function(e,t){Xo.flushCustomStyles(),Xo.styleSubtree(e,t)},styleElement:function(e){Xo.flushCustomStyles(),Xo.styleElement(e)},styleDocument:function(e){Xo.flushCustomStyles(),Xo.styleDocument(e)},flushCustomStyles:function(){Xo.flushCustomStyles()},getComputedStyleValue:function(e,t){return Xo.getComputedStyleValue(e,t)},nativeCss:gi,nativeShadow:pi,cssBuild:ti,disableRuntime:vi},Ko&&(window.ShadyCSS.ApplyShim=Ko),Go&&(window.ShadyCSS.CustomStyleInterface=Go),function(e){function t(e){return""==e&&(o.call(this),this.h=!0),e.toLowerCase()}function n(e){var t=e.charCodeAt(0);return 32<t&&127>t&&-1==[34,35,60,62,63,96].indexOf(t)?e:encodeURIComponent(e)}function r(e){var t=e.charCodeAt(0);return 32<t&&127>t&&-1==[34,35,60,62,96].indexOf(t)?e:encodeURIComponent(e)}function i(e,i,a){function s(e){g.push(e)}var c=i||"scheme start",d=0,p="",m=!1,v=!1,g=[];e:for(;(null!=e[d-1]||0==d)&&!this.h;){var y=e[d];switch(c){case"scheme start":if(!y||!h.test(y)){if(i){s("Invalid scheme.");break e}p="",c="no scheme";continue}p+=y.toLowerCase(),c="scheme";break;case"scheme":if(y&&f.test(y))p+=y.toLowerCase();else{if(":"!=y){if(i){null!=y&&s("Code point not allowed in scheme: "+y);break e}p="",d=0,c="no scheme";continue}if(this.g=p,p="",i)break e;void 0!==u[this.g]&&(this.A=!0),c="file"==this.g?"relative":this.A&&a&&a.g==this.g?"relative or authority":this.A?"authority first slash":"scheme data"}break;case"scheme data":"?"==y?(this.o="?",c="query"):"#"==y?(this.u="#",c="fragment"):null!=y&&"\t"!=y&&"\n"!=y&&"\r"!=y&&(this.pa+=n(y));break;case"no scheme":if(a&&void 0!==u[a.g]){c="relative";continue}s("Missing scheme."),o.call(this),this.h=!0;break;case"relative or authority":if("/"!=y||"/"!=e[d+1]){s("Expected /, got: "+y),c="relative";continue}c="authority ignore slashes";break;case"relative":if(this.A=!0,"file"!=this.g&&(this.g=a.g),null==y){this.i=a.i,this.m=a.m,this.j=a.j.slice(),this.o=a.o,this.s=a.s,this.f=a.f;break e}if("/"==y||"\\"==y)"\\"==y&&s("\\ is an invalid code point."),c="relative slash";else if("?"==y)this.i=a.i,this.m=a.m,this.j=a.j.slice(),this.o="?",this.s=a.s,this.f=a.f,c="query";else{if("#"!=y){c=e[d+1];var b=e[d+2];("file"!=this.g||!h.test(y)||":"!=c&&"|"!=c||null!=b&&"/"!=b&&"\\"!=b&&"?"!=b&&"#"!=b)&&(this.i=a.i,this.m=a.m,this.s=a.s,this.f=a.f,this.j=a.j.slice(),this.j.pop()),c="relative path";continue}this.i=a.i,this.m=a.m,this.j=a.j.slice(),this.o=a.o,this.u="#",this.s=a.s,this.f=a.f,c="fragment"}break;case"relative slash":if("/"!=y&&"\\"!=y){"file"!=this.g&&(this.i=a.i,this.m=a.m,this.s=a.s,this.f=a.f),c="relative path";continue}"\\"==y&&s("\\ is an invalid code point."),c="file"==this.g?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!=y){s("Expected '/', got: "+y),c="authority ignore slashes";continue}c="authority second slash";break;case"authority second slash":if(c="authority ignore slashes","/"!=y){s("Expected '/', got: "+y);continue}break;case"authority ignore slashes":if("/"!=y&&"\\"!=y){c="authority";continue}s("Expected authority, got: "+y);break;case"authority":if("@"==y){for(m&&(s("@ already seen."),p+="%40"),m=!0,y=0;y<p.length;y++)"\t"==(b=p[y])||"\n"==b||"\r"==b?s("Invalid whitespace in authority."):":"==b&&null===this.f?this.f="":(b=n(b),null!==this.f?this.f+=b:this.s+=b);p=""}else{if(null==y||"/"==y||"\\"==y||"?"==y||"#"==y){d-=p.length,p="",c="host";continue}p+=y}break;case"file host":if(null==y||"/"==y||"\\"==y||"?"==y||"#"==y){2!=p.length||!h.test(p[0])||":"!=p[1]&&"|"!=p[1]?(0!=p.length&&(this.i=t.call(this,p),p=""),c="relative path start"):c="relative path";continue}"\t"==y||"\n"==y||"\r"==y?s("Invalid whitespace in file host."):p+=y;break;case"host":case"hostname":if(":"!=y||v){if(null==y||"/"==y||"\\"==y||"?"==y||"#"==y){if(this.i=t.call(this,p),p="",c="relative path start",i)break e;continue}"\t"!=y&&"\n"!=y&&"\r"!=y?("["==y?v=!0:"]"==y&&(v=!1),p+=y):s("Invalid code point in host/hostname: "+y)}else if(this.i=t.call(this,p),p="",c="port","hostname"==i)break e;break;case"port":if(/[0-9]/.test(y))p+=y;else{if(null==y||"/"==y||"\\"==y||"?"==y||"#"==y||i){if(""!=p&&((p=parseInt(p,10))!=u[this.g]&&(this.m=p+""),p=""),i)break e;c="relative path start";continue}"\t"==y||"\n"==y||"\r"==y?s("Invalid code point in port: "+y):(o.call(this),this.h=!0)}break;case"relative path start":if("\\"==y&&s("'\\' not allowed in path."),c="relative path","/"!=y&&"\\"!=y)continue;break;case"relative path":null!=y&&"/"!=y&&"\\"!=y&&(i||"?"!=y&&"#"!=y)?"\t"!=y&&"\n"!=y&&"\r"!=y&&(p+=n(y)):("\\"==y&&s("\\ not allowed in relative path."),(b=l[p.toLowerCase()])&&(p=b),".."==p?(this.j.pop(),"/"!=y&&"\\"!=y&&this.j.push("")):"."==p&&"/"!=y&&"\\"!=y?this.j.push(""):"."!=p&&("file"==this.g&&0==this.j.length&&2==p.length&&h.test(p[0])&&"|"==p[1]&&(p=p[0]+":"),this.j.push(p)),p="","?"==y?(this.o="?",c="query"):"#"==y&&(this.u="#",c="fragment"));break;case"query":i||"#"!=y?null!=y&&"\t"!=y&&"\n"!=y&&"\r"!=y&&(this.o+=r(y)):(this.u="#",c="fragment");break;case"fragment":null!=y&&"\t"!=y&&"\n"!=y&&"\r"!=y&&(this.u+=y)}d++}}function o(){this.s=this.pa=this.g="",this.f=null,this.m=this.i="",this.j=[],this.u=this.o="",this.A=this.h=!1}function a(e,t){void 0===t||t instanceof a||(t=new a(String(t))),this.a=e,o.call(this),i.call(this,this.a.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,""),null,t)}var s=!1;try{var c=new URL("b","http://a");c.pathname="c%20d",s="http://a/c%20d"===c.href}catch(e){}if(!s){var u=Object.create(null);u.ftp=21,u.file=0,u.gopher=70,u.http=80,u.https=443,u.ws=80,u.wss=443;var l=Object.create(null);l["%2e"]=".",l[".%2e"]="..",l["%2e."]="..",l["%2e%2e"]="..";var h=/[a-zA-Z]/,f=/[a-zA-Z0-9\+\-\.]/;a.prototype={toString:function(){return this.href},get href(){if(this.h)return this.a;var e="";return""==this.s&&null==this.f||(e=this.s+(null!=this.f?":"+this.f:"")+"@"),this.protocol+(this.A?"//"+e+this.host:"")+this.pathname+this.o+this.u},set href(e){o.call(this),i.call(this,e)},get protocol(){return this.g+":"},set protocol(e){this.h||i.call(this,e+":","scheme start")},get host(){return this.h?"":this.m?this.i+":"+this.m:this.i},set host(e){!this.h&&this.A&&i.call(this,e,"host")},get hostname(){return this.i},set hostname(e){!this.h&&this.A&&i.call(this,e,"hostname")},get port(){return this.m},set port(e){!this.h&&this.A&&i.call(this,e,"port")},get pathname(){return this.h?"":this.A?"/"+this.j.join("/"):this.pa},set pathname(e){!this.h&&this.A&&(this.j=[],i.call(this,e,"relative path start"))},get search(){return this.h||!this.o||"?"==this.o?"":this.o},set search(e){!this.h&&this.A&&(this.o="?","?"==e[0]&&(e=e.slice(1)),i.call(this,e,"query"))},get hash(){return this.h||!this.u||"#"==this.u?"":this.u},set hash(e){this.h||(e?(this.u="#","#"==e[0]&&(e=e.slice(1)),i.call(this,e,"fragment")):this.u="")},get origin(){var e;if(this.h||!this.g)return"";switch(this.g){case"data":case"file":case"javascript":case"mailto":return"null"}return(e=this.host)?this.g+"://"+e:""}};var d=e.URL;d&&(a.createObjectURL=function(e){return d.createObjectURL.apply(d,arguments)},a.revokeObjectURL=function(e){d.revokeObjectURL(e)}),e.URL=a}}(window),Object.getOwnPropertyDescriptor(Node.prototype,"baseURI")||Object.defineProperty(Node.prototype,"baseURI",{get:function(){var e=(this.ownerDocument||this).querySelector("base[href]");return e&&e.href||window.location.href},configurable:!0,enumerable:!0});var Jo=document.createElement("style");Jo.textContent="body {transition: opacity ease-in 0.2s; } \nbody[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } \n";var Yo=document.querySelector("head");Yo.insertBefore(Jo,Yo.firstChild);var Qo=window.customElements,Zo=!1,ea=null;function ta(){window.HTMLTemplateElement.bootstrap&&window.HTMLTemplateElement.bootstrap(window.document),ea&&ea(),Zo=!0,window.WebComponents.ready=!0,document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))}Qo.polyfillWrapFlushCallback&&Qo.polyfillWrapFlushCallback((function(e){ea=e,Zo&&e()})),"complete"!==document.readyState?(window.addEventListener("load",ta),window.addEventListener("DOMContentLoaded",(function(){window.removeEventListener("load",ta),ta()}))):ta()}).call(this)}).call(this,n(48),n(398).setImmediate)},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(399),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(48))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,s,c=1,u={},l=!1,h=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){o.port2.postMessage(e)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,r=function(e){var t=h.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[c]=i,r(c),c++},f.clearImmediate=d}function d(e){delete u[e]}function p(e){if(l)setTimeout(p,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{d(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(48),n(198))},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(n,e);var t=i(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,{icon:"/images/component-icons/lock-lock.svg"})}return n}(n(195));window.customElements.define("webthing-lock-action",s),e.exports=s},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(n,e);var t=i(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,{icon:"/images/component-icons/lock-unlock.svg"})}return n}(n(195));window.customElements.define("webthing-unlock-action",s),e.exports=s},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=n(74),u=n(19),l=document.createElement("template");l.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-alarm-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/alarm-ok.svg\');\n      background-position: center 2rem;\n    }\n\n    .webthing-alarm-capability-icon.alarm {\n      background-color: white;\n      background-image: url(\'/images/component-icons/alarm-alarm.svg\');\n    }\n\n    .webthing-alarm-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 8.75rem;\n      font-size: 1.4rem;\n    }\n\n    .webthing-alarm-capability-icon.alarm\n    .webthing-alarm-capability-label {\n      color: #5d9bc7;\n    }\n  </style>\n  <div id="icon" class="webthing-alarm-capability-icon">\n    <div id="label" class="webthing-alarm-capability-label">--</div>\n  </div>\n';var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=s.call(this,l))._icon=e.shadowRoot.querySelector("#icon"),e._label=e.shadowRoot.querySelector("#label"),e._alarm=!1,e}return t=c,(n=[{key:"connectedCallback",value:function(){this.alarm=void 0!==this.dataset.alarm?this.dataset.alarm:null}},{key:"alarm",get:function(){return this._alarm},set:function(e){this._alarm=Boolean(e),null===e?(this._icon.classList.remove("alarm"),this._label.innerText=u.getMessage("ellipsis")):this._alarm?(this._icon.classList.add("alarm"),this._label.innerText=u.getMessage("alarm")):(this._icon.classList.remove("alarm"),this._label.innerText=u.getMessage("ok"))}}])&&r(t.prototype,n),a&&r(t,a),c}(c);window.customElements.define("webthing-alarm-capability",h),e.exports=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(n(168));window.customElements.define("webthing-barometric-pressure-sensor-capability",c),e.exports=c},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=n(74),u=n(19),l=document.createElement("template");l.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-binary-sensor-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      transform: translate(0);\n      background-color: #89b6d6;\n    }\n\n    .webthing-binary-sensor-capability-icon.on {\n      background-color: white;\n    }\n\n    .webthing-binary-sensor-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 5.2rem;\n    }\n\n    .webthing-binary-sensor-capability-icon.on\n    .webthing-binary-sensor-capability-label {\n      color: #5d9bc7;\n    }\n  </style>\n  <div id="icon" class="webthing-binary-sensor-capability-icon">\n    <div id="label" class="webthing-binary-sensor-capability-label">--</div>\n  </div>\n';var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=s.call(this,l))._icon=e.shadowRoot.querySelector("#icon"),e._label=e.shadowRoot.querySelector("#label"),e._on=!1,e}return t=c,(n=[{key:"connectedCallback",value:function(){this.on=void 0!==this.dataset.on?this.dataset.on:null}},{key:"on",get:function(){return this._icon.classList.contains("on")},set:function(e){this._on=Boolean(e),null===e?(this._icon.classList.remove("on"),this._label.innerText=u.getMessage("ellipsis")):this._on?(this._icon.classList.add("on"),this._label.innerText=u.getMessage("active")):(this._icon.classList.remove("on"),this._label.innerText=u.getMessage("inactive"))}}])&&r(t.prototype,n),a&&r(t,a),c}(c);window.customElements.define("webthing-binary-sensor-capability",h),e.exports=h},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var s=n(74),c=document.createElement("template");c.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-camera-capability-icon {\n      box-sizing: border-box;\n      width: 12.8rem;\n      height: 12.8rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/camera.svg\');\n      background-position: center;\n    }\n  </style>\n  <div id="icon" class="webthing-camera-capability-icon"></div>\n';var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(n,e);var t=i(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,c)}return n}(s);window.customElements.define("webthing-camera-capability",u),e.exports=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(n(228));window.customElements.define("webthing-color-sensor-capability",c),e.exports=c},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=n(74),u=n(19),l=document.createElement("template");l.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-custom-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-position: center;\n    }\n\n    .webthing-custom-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 5.2rem;\n    }\n\n    .webthing-custom-capability-icon.custom-icon\n    .webthing-custom-capability-label {\n      display: none;\n    }\n  </style>\n  <div id="icon" class="webthing-custom-capability-icon">\n    <div id="label" class="webthing-custom-capability-label"></div>\n  </div>\n';var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=s.call(this,l))._icon=e.shadowRoot.querySelector("#icon"),e._label=e.shadowRoot.querySelector("#label"),e._label.innerText=u.getMessage("Thing"),e._iconHref="",e}return t=c,(n=[{key:"connectedCallback",value:function(){this.iconHref=void 0!==this.dataset.iconHref?this.dataset.iconHref:""}},{key:"iconHref",get:function(){return this._iconHref},set:function(e){e?(this._iconHref=e,this._icon.style.backgroundImage='url("'.concat(this._iconHref,'")'),this._icon.classList.add("custom-icon")):(this._iconHref="",this._icon.style.backgroundImage="",this._icon.classList.remove("custom-icon"))}}])&&r(t.prototype,n),a&&r(t,a),c}(c);window.customElements.define("webthing-custom-capability",h),e.exports=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=n(74),u=n(19),l=document.createElement("template");l.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-door-sensor-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/door-sensor-closed.svg\');\n      background-position: center 2rem;\n    }\n\n    .webthing-door-sensor-capability-icon.open {\n      background-color: white;\n      background-image: url(\'/images/component-icons/door-sensor-open.svg\');\n    }\n\n    .webthing-door-sensor-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 8.75rem;\n      font-size: 1.4rem;\n    }\n\n    .webthing-door-sensor-capability-icon.open\n    .webthing-door-sensor-capability-label {\n      color: #5d9bc7;\n    }\n  </style>\n  <div id="icon" class="webthing-door-sensor-capability-icon">\n    <div id="label" class="webthing-door-sensor-capability-label">--</div>\n  </div>\n';var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=s.call(this,l))._icon=e.shadowRoot.querySelector("#icon"),e._label=e.shadowRoot.querySelector("#label"),e._open=!1,e}return t=c,(n=[{key:"connectedCallback",value:function(){this.open=void 0!==this.dataset.open?this.dataset.open:null}},{key:"open",get:function(){return this._open},set:function(e){this._open=Boolean(e),null===e?(this._icon.classList.remove("open"),this._label.innerText=u.getMessage("ellipsis")):this._open?(this._icon.classList.add("open"),this._label.innerText=u.getMessage("open")):(this._icon.classList.remove("open"),this._label.innerText=u.getMessage("closed"))}}])&&r(t.prototype,n),a&&r(t,a),c}(c);window.customElements.define("webthing-door-sensor-capability",h),e.exports=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(u,e);var t,n,s,c=a(u);function u(){return r(this,u),c.apply(this,arguments)}return t=u,(n=[{key:"power",get:function(){return this.level},set:function(e){this.level=e}}])&&i(t.prototype,n),s&&i(t,s),u}(n(168));window.customElements.define("webthing-energy-monitor-capability",u),e.exports=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(n(168));window.customElements.define("webthing-humidity-sensor-capability",c),e.exports=c},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=n(74),u=n(19),l=document.createElement("template");l.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-leak-sensor-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/leak-sensor-dry.svg\');\n      background-position: center 2rem;\n    }\n\n    .webthing-leak-sensor-capability-icon.leak {\n      background-color: white;\n      background-image: url(\'/images/component-icons/leak-sensor-leak.svg\');\n    }\n\n    .webthing-leak-sensor-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 8.75rem;\n      font-size: 1.2rem;\n    }\n\n    .webthing-leak-sensor-capability-icon.leak\n    .webthing-leak-sensor-capability-label {\n      color: #5d9bc7;\n      font-size: 1.4rem;\n    }\n  </style>\n  <div id="icon" class="webthing-leak-sensor-capability-icon">\n    <div id="label" class="webthing-leak-sensor-capability-label">--</div>\n  </div>\n';var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=s.call(this,l))._icon=e.shadowRoot.querySelector("#icon"),e._label=e.shadowRoot.querySelector("#label"),e._leak=!1,e}return t=c,(n=[{key:"connectedCallback",value:function(){this.leak=void 0!==this.dataset.leak?this.dataset.leak:null}},{key:"leak",get:function(){return this._leak},set:function(e){this._leak=Boolean(e),null===e?(this._icon.classList.remove("leak"),this._label.innerText=u.getMessage("ellipsis")):this._leak?(this._icon.classList.add("leak"),this._label.innerText=u.getMessage("leak")):(this._icon.classList.remove("leak"),this._label.innerText=u.getMessage("dry"))}}])&&r(t.prototype,n),a&&r(t,a),c}(c);window.customElements.define("webthing-leak-sensor-capability",h),e.exports=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(213),n(13),n(3),n(14),n(5);var u=n(74),l=n(22),h=n(19),f=document.createElement("template");f.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-light-capability-container {\n      box-sizing: border-box;\n      width: 12.8rem;\n      height: 12.8rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      transform: translate(0);\n      background-color: #89b6d6;\n    }\n\n    .webthing-light-capability-container.on {\n      background-color: white;\n      color: #5d9bc7;\n    }\n\n    .webthing-light-capability-info {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-light-capability-icon {\n      fill: white;\n    }\n\n    .webthing-light-capability-icon.bright {\n      stroke: #666;\n    }\n\n    .webthing-light-capability-label {\n      padding-top: 0.2rem;\n      font-weight: bold;\n      text-transform: uppercase;\n    }\n  </style>\n  <div id="container" class="webthing-light-capability-container">\n    <div id="info" class="webthing-light-capability-info">\n      <svg id="icon" class="webthing-light-capability-icon"\n        xmlns="http://www.w3.org/2000/svg" height="68" width="64">\n        <g transform="translate(0,-987.36216)">\n          <path\n             d="m 41.6997,1041.6985 c 0,1.0723 -0.8727,1.9367 -1.9366,1.9367 l\n             -15.5179,0 c -1.0722,0 -1.9366,-0.8727 -1.9366,-1.9367 0,-1.0722\n             0.8727,-1.9366 1.9366,-1.9366 l 15.5179,0 c 1.0639,-0.01\n             1.9366,0.8644 1.9366,1.9366 z m -1.9449,2.9091 -15.5096,0 c\n             -1.28,0 -2.2608,1.2302 -1.8369,2.5683 0.2577,0.8063 1.0722,1.305\n             1.92,1.305 l 0.033,0 c 1.1221,0 2.1444,0.6317 2.6431,1.6374 l\n             0.017,0.041 c 0.6732,1.3465 2.053,2.2026 3.5657,2.2026 l 2.826,0 c\n             1.5127,0 2.8925,-0.8561 3.5657,-2.2026 l 0.017,-0.041 c\n             0.4987,-1.0057 1.5294,-1.6374 2.6432,-1.6374 l 0.033,0 c 0.8478,0\n             1.6623,-0.4987 1.92,-1.305 0.4322,-1.3381 -0.5569,-2.5683\n             -1.8369,-2.5683 z m 1.9449,-7.7631 c 0,1.0722 -0.8727,1.9366\n             -1.9366,1.9366 l -15.5179,0 c -1.0722,0 -1.9366,-0.8727\n             -1.9366,-1.9366 0,-1.0306 0.8062,-1.8701 1.8285,-1.9283\n             -1.2135,-10.9132 -12.5008,-13.3403 -12.5008,-26.19 0,-11.24577\n             9.118,-20.36377 20.3637,-20.36377 11.2457,0 20.3637,9.118\n             20.3637,20.36377 0,12.8497 -11.2873,15.2768 -12.4925,26.19\n             1.014,0.058 1.8285,0.8977 1.8285,1.9283 z" />\n        </g>\n      </svg>\n      <div id="label" class="webthing-light-capability-label">--</div>\n    </div>\n  </div>\n';var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,n,a,c=o(u);function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=c.call(this,f))._container=e.shadowRoot.querySelector("#container"),e._icon=e.shadowRoot.querySelector("#icon"),e._label=e.shadowRoot.querySelector("#label"),e._haveBrightness=!1,e._haveColor=!1,e._haveColorTemperature=!1,e._haveColorMode=!1,e._on=!1,e._brightness=0,e._color="#ffffff",e._colorTemperature=2700,e._colorMode="color",e._onClick=e.__onClick.bind(s(e)),e}return t=u,(n=[{key:"connectedCallback",value:function(){this._haveBrightness=void 0!==this.dataset.haveBrightness&&"true"===this.dataset.haveBrightness,this._haveColor=void 0!==this.dataset.haveColor&&"true"===this.dataset.haveColor,this._haveColorTemperature=void 0!==this.dataset.haveColorTemperature&&"true"===this.dataset.haveColorTemperature,this._haveColorMode=void 0!==this.dataset.haveColorMode&&"true"===this.dataset.haveColorMode,this.on=void 0!==this.dataset.on&&this.dataset.on,this.brightness=void 0!==this.dataset.brightness&&this.dataset.brightness,this.color=this.dataset.color||"#ffffff",this.colorTemperature=void 0!==this.dataset.colorTemperature?this.dataset.colorTemperature:2700,this.colorMode=void 0!==this.dataset.colorMode?this.dataset.colorMode:"color",this._container.addEventListener("click",this._onClick)}},{key:"disconnectedCallback",value:function(){this._container.removeEventListener("click",this._onClick)}},{key:"_updateIconColor",value:function(){var e;e=this._haveColorMode?"color"===this.colorMode?this.color:"temperature"===this.colorMode?l.colorTemperatureToRGB(this.colorTemperature):"#5d9bc7":this._haveColor?this.color:this._haveColorTemperature?l.colorTemperatureToRGB(this.colorTemperature):"#5d9bc7",this._icon.style.fill=e,.299*parseInt(e.substr(1,2),16)+.587*parseInt(e.substr(3,2),16)+.114*parseInt(e.substr(5,2),16)>186?this._icon.classList.add("bright"):this._icon.classList.remove("bright")}},{key:"__onClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("click",{bubbles:!0}))}},{key:"on",get:function(){return this._on},set:function(e){this._on=Boolean(e),this._on?this._container.classList.add("on"):this._container.classList.remove("on"),this._haveBrightness?this.brightness=this._brightness:this._on?this._label.innerText=h.getMessage("on"):this._label.innerText=h.getMessage("off"),this._haveColor||this._haveColorTmperature?this._updateIconColor():this._on?this._icon.style.fill="#5d9bc7":this._icon.style.fill="#ffffff"}},{key:"brightness",get:function(){return this._brightness},set:function(e){this._haveBrightness&&(this._brightness=Number(e),this._on?this._label.innerText="".concat(Math.round(this._brightness),"%"):this._label.innerText=h.getMessage("off"))}},{key:"color",get:function(){return this._color},set:function(e){this._haveColor&&(this._color=e,this._updateIconColor())}},{key:"colorTemperature",get:function(){return this._colorTemperature},set:function(e){this._haveColorTemperature&&(this._colorTemperature=Number(e),this._updateIconColor())}},{key:"colorMode",get:function(){return this._colorMode},set:function(e){this._haveColorMode&&(this._colorMode=e,this._updateIconColor())}}])&&r(t.prototype,n),a&&r(t,a),u}(u);window.customElements.define("webthing-light-capability",d),e.exports=d},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(78),n(13),n(3),n(14),n(5);var c=n(74),u=n(19),l=document.createElement("template");l.innerHTML="\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-lock-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-position: center 2rem;\n    }\n\n    .webthing-lock-capability-icon.locked {\n      background-color: #89b6d6;\n      background-image: url('/images/component-icons/lock-locked.svg');\n    }\n\n    .webthing-lock-capability-icon.unlocked {\n      background-color: white;\n      background-image: url('/images/component-icons/lock-unlocked.svg');\n    }\n\n    .webthing-lock-capability-icon.unknown {\n      background-color: white;\n      background-image: url('/images/component-icons/lock-unknown.svg');\n    }\n\n    .webthing-lock-capability-icon.jammed {\n      background-color: white;\n      background-image: url('/images/component-icons/lock-jammed.svg');\n    }\n\n    .webthing-lock-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 8.75rem;\n      font-size: 1.4rem;\n    }\n\n    .webthing-lock-capability-icon.unlocked .webthing-lock-capability-label,\n    .webthing-lock-capability-icon.unknown .webthing-lock-capability-label,\n    .webthing-lock-capability-icon.jammed .webthing-lock-capability-label {\n      color: #5d9bc7;\n    }\n  </style>\n  <div id=\"icon\" class=\"webthing-lock-capability-icon\">\n    <div id=\"label\" class=\"webthing-lock-capability-label\">...</div>\n  </div>\n";var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=s.call(this,l))._icon=e.shadowRoot.querySelector("#icon"),e._label=e.shadowRoot.querySelector("#label"),e._state="unknown",e}return t=c,(n=[{key:"connectedCallback",value:function(){this.state=void 0!==this.dataset.state?this.dataset.state:"unknown"}},{key:"state",get:function(){return this._state},set:function(e){["locked","unlocked","unknown","jammed"].includes(e)||(e="unknown"),this._state=e,this._icon.classList.remove("locked","unlocked","unknown","jammed"),this._icon.classList.add(e),"unknown"===e&&(e="ellipsis"),this._label.innerText=u.getMessage(e)}}])&&r(t.prototype,n),a&&r(t,a),c}(c);window.customElements.define("webthing-lock-capability",h),e.exports=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=n(74),u=n(19),l=document.createElement("template");l.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-motion-sensor-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/motion-sensor-no-motion.svg\');\n      background-position: center 2rem;\n    }\n\n    .webthing-motion-sensor-capability-icon.motion {\n      background-color: white;\n      background-image: url(\'/images/component-icons/motion-sensor-motion.svg\');\n    }\n\n    .webthing-motion-sensor-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 8.75rem;\n      font-size: 1.2rem;\n    }\n\n    .webthing-motion-sensor-capability-icon.motion\n    .webthing-motion-sensor-capability-label {\n      color: #5d9bc7;\n      font-size: 1.4rem;\n    }\n  </style>\n  <div id="icon" class="webthing-motion-sensor-capability-icon">\n    <div id="label" class="webthing-motion-sensor-capability-label">--</div>\n  </div>\n';var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=s.call(this,l))._icon=e.shadowRoot.querySelector("#icon"),e._label=e.shadowRoot.querySelector("#label"),e._motion=!1,e}return t=c,(n=[{key:"connectedCallback",value:function(){this.motion=void 0!==this.dataset.motion?this.dataset.motion:null}},{key:"motion",get:function(){return this._motion},set:function(e){this._motion=Boolean(e),null===e?(this._icon.classList.remove("motion"),this._label.innerText=u.getMessage("ellipsis")):this._motion?(this._icon.classList.add("motion"),this._label.innerText=u.getMessage("motion")):(this._icon.classList.remove("motion"),this._label.innerText=u.getMessage("no-motion"))}}])&&r(t.prototype,n),a&&r(t,a),c}(c);window.customElements.define("webthing-motion-sensor-capability",h),e.exports=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(n(168));window.customElements.define("webthing-multi-level-sensor-capability",c),e.exports=c},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(147),n(13),n(3),n(14),n(5);var u=n(74),l=n(19),h=document.createElement("template");h.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-multi-level-switch-capability-container {\n      box-sizing: border-box;\n      width: 12.8rem;\n      height: 12.8rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      transform: translate(0);\n      background-color: #89b6d6;\n    }\n\n    .webthing-multi-level-switch-capability-container.on {\n      background-color: white;\n      color: #5d9bc7;\n    }\n\n    .webthing-multi-level-switch-capability-container.on\n    .webthing-multi-level-switch-capability-bar {\n      border-color: #5d9bc7;\n    }\n\n    .webthing-multi-level-switch-capability-info {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-multi-level-switch-capability-bar {\n      width: 1rem;\n      height: 8rem;\n      border-radius: 0.5rem;\n      border: 0.2rem solid white;\n      margin: 0 auto;\n    }\n\n    .webthing-multi-level-switch-capability-label {\n      padding-top: 0.2rem;\n      font-weight: bold;\n      text-transform: uppercase;\n    }\n  </style>\n  <div id="container" class="webthing-multi-level-switch-capability-container">\n    <div id="info" class="webthing-multi-level-switch-capability-info">\n      <div id="bar" class="webthing-multi-level-switch-capability-bar"></div>\n      <div id="label" class="webthing-multi-level-switch-capability-label">\n      </div>\n    </div>\n  </div>\n';var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,n,a,c=o(u);function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=c.call(this,h))._container=e.shadowRoot.querySelector(".webthing-multi-level-switch-capability-container"),e._bar=e.shadowRoot.querySelector(".webthing-multi-level-switch-capability-bar"),e._label=e.shadowRoot.querySelector(".webthing-multi-level-switch-capability-label"),e._on=!1,e._level=0,e._precision=0,e._unit="",e._onClick=e.__onClick.bind(s(e)),e}return t=u,(n=[{key:"connectedCallback",value:function(){this._upgradeProperty("min"),this._upgradeProperty("max"),this.on=void 0===this.dataset.on||this.dataset.on,this.level=void 0!==this.dataset.level?this.dataset.level:this.min,this.unit=void 0!==this.dataset.unit?this.dataset.unit:"",this.precision=void 0!==this.dataset.precision?this.dataset.precision:0,void 0===this._min&&(this._min=0),void 0===this._max&&(this._max=100),this._container.addEventListener("click",this._onClick)}},{key:"disconnectedCallback",value:function(){this._container.removeEventListener("click",this._onClick)}},{key:"__onClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("click",{bubbles:!0}))}},{key:"min",get:function(){return this._min},set:function(e){this._min=e}},{key:"max",get:function(){return this._max},set:function(e){this._max=e}},{key:"on",get:function(){return this._on},set:function(e){this._on=Boolean(e),this._on?this._container.classList.add("on"):(this._label.innerText=l.getMessage("off"),this._container.classList.remove("on")),this.level=this._level}},{key:"level",get:function(){return this._level},set:function(e){var t,n;this._level=Number(e),this._on?(t="#5d9bc7",n="white",this._label.innerHTML="".concat(this._level.toFixed(this.precision)).concat(this.unit)):(t="white",n="#89b6d6");var r=(this.level-this.min)/(this.max-this.min)*100;this._bar.style.background="linear-gradient(".concat(n,", ").concat(n," ").concat(100-r,"%, ")+"".concat(t," ").concat(100-r,"%, ").concat(t,")")}},{key:"unit",get:function(){return this._unit},set:function(e){this._unit=e}},{key:"precision",get:function(){return this._precision},set:function(e){this._precision=parseInt(e,10)}}])&&r(t.prototype,n),a&&r(t,a),u}(u);window.customElements.define("webthing-multi-level-switch-capability",f),e.exports=f},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var u=n(74),l=n(19),h=document.createElement("template");h.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-on-off-switch-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/on-off-switch-off.svg\');\n      background-position: center 2rem;\n    }\n\n    .webthing-on-off-switch-capability-icon.on {\n      background-color: white;\n      background-image: url(\'/images/component-icons/on-off-switch-on.svg\');\n    }\n\n    .webthing-on-off-switch-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 8.75rem;\n    }\n\n    .webthing-on-off-switch-capability-icon.on\n    .webthing-on-off-switch-capability-label {\n      color: #5d9bc7;\n    }\n  </style>\n  <div id="icon" class="webthing-on-off-switch-capability-icon">\n    <div id="label" class="webthing-on-off-switch-capability-label">--</div>\n  </div>\n';var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,n,a,c=o(u);function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=c.call(this,h))._icon=e.shadowRoot.querySelector("#icon"),e._label=e.shadowRoot.querySelector("#label"),e._on=!1,e._onClick=e.__onClick.bind(s(e)),e}return t=u,(n=[{key:"connectedCallback",value:function(){this.on=void 0!==this.dataset.on?this.dataset.on:null,this._icon.addEventListener("click",this._onClick)}},{key:"disconnectedCallback",value:function(){this._icon.removeEventListener("click",this._onClick)}},{key:"__onClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("click",{bubbles:!0}))}},{key:"on",get:function(){return this._on},set:function(e){this._on=Boolean(e),!0===e?(this._icon.classList.add("on"),this._label.innerText=l.getMessage("on")):!1===e?(this._icon.classList.remove("on"),this._label.innerText=l.getMessage("off")):(this._icon.classList.remove("on"),this._label.innerText=l.getMessage("ellipsis"))}}])&&r(t.prototype,n),a&&r(t,a),u}(u);window.customElements.define("webthing-on-off-switch-capability",f),e.exports=f},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var u=n(74),l=n(19),h=document.createElement("template");h.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-push-button-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/push-button-not-pushed.svg\');\n      background-position: center 2rem;\n    }\n\n    .webthing-push-button-capability-icon.pushed {\n      background-color: white;\n      background-image: url(\'/images/component-icons/push-button-pushed.svg\');\n    }\n\n    .webthing-push-button-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 8.75rem;\n      font-size: 1.2rem;\n    }\n\n    .webthing-push-button-capability-icon.pushed\n    .webthing-push-button-capability-label {\n      color: #5d9bc7;\n      font-size: 1.4rem;\n    }\n  </style>\n  <div id="icon" class="webthing-push-button-capability-icon">\n    <div id="label" class="webthing-push-button-capability-label">--</div>\n  </div>\n';var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,n,a,c=o(u);function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=c.call(this,h))._icon=e.shadowRoot.querySelector("#icon"),e._label=e.shadowRoot.querySelector("#label"),e._pushed=!1,e._pressTimeout=null,e.addEventListener("press",e._onPress.bind(s(e))),e}return t=u,(n=[{key:"connectedCallback",value:function(){this.pushed=void 0!==this.dataset.pushed?this.dataset.pushed:null}},{key:"_onPress",value:function(e){switch(e.detail){case"single":this._fireSinglePress();break;case"double":this._fireDoublePress();break;case"long":this._fireLongPress()}}},{key:"_fireSinglePress",value:function(){var e=this;null!==this._pressTimeout&&(clearTimeout(this._pressTimeout),this._pressTimeout=null),this.pushed=!0,this._pressTimeout=setTimeout((function(){e.pushed=!1,e._pressTimeout=null}),300)}},{key:"_fireDoublePress",value:function(){var e=this;null!==this._pressTimeout&&(clearTimeout(this._pressTimeout),this._pressTimeout=null),this.pushed=!0,this._pressTimeout=setTimeout((function(){e.pushed=!1,e._pressTimeout=setTimeout((function(){e.pushed=!0,e._pressTimeout=setTimeout((function(){e.pushed=!1,e._pressTimeout=null}),300)}),300)}),300)}},{key:"_fireLongPress",value:function(){var e=this;null!==this._pressTimeout&&(clearTimeout(this._pressTimeout),this._pressTimeout=null),this.pushed=!0,this._pressTimeout=setTimeout((function(){e.pushed=!1,e._pressTimeout=null}),1500)}},{key:"pushed",get:function(){return this._pushed},set:function(e){this._pushed=Boolean(e),null===e?(this._icon.classList.remove("pushed"),this._label.innerText=l.getMessage("ellipsis")):this._pushed?(this._icon.classList.add("pushed"),this._label.innerText=l.getMessage("pushed")):(this._icon.classList.remove("pushed"),this._label.innerText=l.getMessage("not-pushed"))}}])&&r(t.prototype,n),a&&r(t,a),u}(u);window.customElements.define("webthing-push-button-capability",f),e.exports=f},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var u=n(74),l=n(19),h=document.createElement("template");h.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-smart-plug-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/smart-plug-off.svg\');\n      background-position: center 2rem;\n    }\n\n    .webthing-smart-plug-capability-icon.on {\n      background-color: white;\n      background-image: url(\'/images/component-icons/smart-plug-on.svg\');\n    }\n\n    .webthing-smart-plug-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 8.75rem;\n    }\n\n    .webthing-smart-plug-capability-icon.on\n    .webthing-smart-plug-capability-label {\n      color: #5d9bc7;\n    }\n  </style>\n  <div id="icon" class="webthing-smart-plug-capability-icon">\n    <div id="label" class="webthing-smart-plug-capability-label">--</div>\n  </div>\n';var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,n,a,c=o(u);function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=c.call(this,h))._icon=e.shadowRoot.querySelector("#icon"),e._label=e.shadowRoot.querySelector("#label"),e._havePower=!1,e._on=!1,e._power=0,e._onClick=e.__onClick.bind(s(e)),e}return t=u,(n=[{key:"connectedCallback",value:function(){this._havePower=void 0!==this.dataset.havePower&&"true"===this.dataset.havePower,this.on=void 0!==this.dataset.on?this.dataset.on:null,this.power=void 0!==this.dataset.power&&this.dataset.power,this._icon.addEventListener("click",this._onClick)}},{key:"disconnectedCallback",value:function(){this._icon.removeEventListener("click",this._onClick)}},{key:"__onClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("click",{bubbles:!0}))}},{key:"on",get:function(){return this._on},set:function(e){this._on=Boolean(e),null===e?(this._icon.classList.remove("on"),this._label.innerText=l.getMessage("ellipsis")):this._on?(this._icon.classList.add("on"),this._havePower?this.power=this._power:this._label.innerText=l.getMessage("on")):(this._icon.classList.remove("on"),this._label.innerText=l.getMessage("off"))}},{key:"power",get:function(){return this._power},set:function(e){this._power=Number(e),this._on&&(this._label.innerText="".concat(Math.round(this._power)," W"))}}])&&r(t.prototype,n),a&&r(t,a),u}(u);window.customElements.define("webthing-smart-plug-capability",f),e.exports=f},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(147),n(13),n(3),n(14),n(5);var c=n(74),u=n(120),l=document.createElement("template");l.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-temperature-sensor-capability-icon {\n      width: 12.4rem;\n      height: 12.4rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/temperature-sensor.svg\');\n      background-position: center 2rem;\n    }\n\n    .webthing-temperature-sensor-capability-label {\n      font-weight: bold;\n      text-transform: uppercase;\n      padding-top: 8.75rem;\n    }\n  </style>\n  <div id="icon" class="webthing-temperature-sensor-capability-icon">\n    <div id="label" class="webthing-temperature-sensor-capability-label">--</div>\n  </div>\n';var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=s.call(this,l))._icon=e.shadowRoot.querySelector("#icon"),e._label=e.shadowRoot.querySelector("#label"),e._temperature=0,e._precision=0,e._unit="",e}return t=c,(n=[{key:"connectedCallback",value:function(){this.unit=void 0!==this.dataset.unit?this.dataset.unit:u.nameToAbbreviation("degree celsius"),this.precision=void 0!==this.dataset.precision?this.dataset.precision:0,this.temperature=void 0!==this.dataset.temperature?this.dataset.temperature:0}},{key:"unit",get:function(){return this._unit},set:function(e){this._unit=e}},{key:"precision",get:function(){return this._precision},set:function(e){this._precision=parseInt(e,10)}},{key:"temperature",get:function(){return this._temperature},set:function(e){this._temperature=Number(e),this._label.innerHTML="".concat(this._temperature.toFixed(this.precision)).concat(this.unit)}}])&&r(t.prototype,n),a&&r(t,a),c}(c);window.customElements.define("webthing-temperature-sensor-capability",h),e.exports=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(78),n(147),n(13),n(3),n(14),n(5);var c=n(74),u=n(120),l=document.createElement("template");l.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-thermostat-capability-container {\n      box-sizing: border-box;\n      width: 12.8rem;\n      height: 12.8rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      transform: translate(0);\n      background-color: #89b6d6;\n    }\n\n    .webthing-thermostat-capability-state-icon {\n      position: absolute;\n      top: 1rem;\n      left: 50%;\n      transform: translateX(-50%);\n      width: 3rem;\n      height: 3rem;\n      background-size: 3rem;\n      background-repeat: no-repeat;\n      background-position: center;\n    }\n\n    .webthing-thermostat-capability-state-icon.off {\n      /* no icon */\n    }\n\n    .webthing-thermostat-capability-state-icon.heating {\n      background-image: url(\'/images/component-icons/thermostat-heating.svg\');\n    }\n\n    .webthing-thermostat-capability-state-icon.cooling {\n      background-image: url(\'/images/component-icons/thermostat-cooling.svg\');\n    }\n\n    .webthing-thermostat-capability-contents {\n      position: absolute;\n      top: calc(50% + 1rem);\n      left: 50%;\n      transform: translate(-50%, -50%);\n      font-size: 4rem;\n      font-weight: bold;\n      width: 12.8rem;\n    }\n\n    .webthing-thermostat-capability-unit {\n      font-size: 1.6rem;\n      font-weight: normal;\n      position: relative;\n      top: -1.6rem;\n    }\n  </style>\n  <div id="container" class="webthing-thermostat-capability-container">\n    <div id="state-icon" class="webthing-thermostat-capability-state-icon off"></div>\n    <div id="contents" class="webthing-thermostat-capability-contents">\n      <span id="value" class="webthing-thermostat-capability-value">\n      </span><span id="unit" class="webthing-thermostat-capability-unit"></span>\n    </div>\n  </div>\n';var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=s.call(this,l))._value=e.shadowRoot.querySelector("#value"),e._unit=e.shadowRoot.querySelector("#unit"),e._stateIcon=e.shadowRoot.querySelector("#state-icon"),e._temperature=0,e._precision=0,e._state="off",e}return t=c,(n=[{key:"connectedCallback",value:function(){this.unit=void 0!==this.dataset.unit?this.dataset.unit:u.nameToAbbreviation("degree celsius"),this.precision=void 0!==this.dataset.precision?this.dataset.precision:0,this.temperature=void 0!==this.dataset.temperature?this.dataset.temperature:0,this.state=void 0!==this.dataset.state?this.dataset.state:"off"}},{key:"unit",get:function(){return this._unit.innerText},set:function(e){this._unit.innerText=e}},{key:"precision",get:function(){return this._precision},set:function(e){this._precision=parseInt(e,10)}},{key:"temperature",get:function(){return this._temperature},set:function(e){this._temperature=Number(e),this._value.innerHTML="".concat(this._temperature.toFixed(this.precision))}},{key:"state",get:function(){return this._state},set:function(e){["off","heating","cooling"].includes(e)||(e="off"),this._state=e,this._stateIcon.classList.remove("off","heating","cooling"),this._stateIcon.classList.add(e)}}])&&r(t.prototype,n),a&&r(t,a),c}(c);window.customElements.define("webthing-thermostat-capability",h),e.exports=h},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var s=n(74),c=document.createElement("template");c.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n      cursor: default;\n    }\n\n    .webthing-video-camera-capability-icon {\n      box-sizing: border-box;\n      width: 12.8rem;\n      height: 12.8rem;\n      border-radius: 6.4rem;\n      border: 0.2rem solid white;\n      background-size: 6.4rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url(\'/images/component-icons/video-camera.svg\');\n      background-position: center;\n    }\n  </style>\n  <div id="icon" class="webthing-video-camera-capability-icon"></div>\n';var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(n,e);var t=i(n);function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t.call(this,c)}return n}(s);window.customElements.define("webthing-video-camera-capability",u),e.exports=u},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=n(74),u=n(19),l=document.createElement("template");l.innerHTML='\n  <style>\n    :host {\n      display: block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-custom-icon-icon {\n      width: 6.2rem;\n      height: 6.2rem;\n      background-size: 3.2rem;\n      background-position: center;\n      background-repeat: no-repeat;\n      background-color: #ffffff64;\n      transform: translate(0);\n      border-radius: 3.2rem;\n      border: 0.1rem solid white;\n    }\n  </style>\n  <div id="icon" class="webthing-custom-icon-icon"></div>\n';var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,e);var t,n,a,s=o(c);function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=s.call(this,l))._icon=e.shadowRoot.querySelector("#icon"),e._iconHref="",e}return t=c,(n=[{key:"connectedCallback",value:function(){this.iconHref=void 0!==this.dataset.iconHref?this.dataset.iconHref:""}},{key:"iconHref",get:function(){return this._iconHref},set:function(e){this._iconHref=e||u.getMessage("thing-icons-thing-src"),this._icon.style.backgroundImage='url("'.concat(this._iconHref,'")')}}])&&r(t.prototype,n),a&&r(t,a),c}(c);window.customElements.define("webthing-custom-icon",h),e.exports=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(60),n(13),n(3),n(14),n(61),n(5);var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(h,e);var t,n,c,l=s(h);function h(){return r(this,h),l.apply(this,arguments)}return t=h,(n=[{key:"connectedCallback",value:function(){this.uppercase=!0,o(u(h.prototype),"connectedCallback",this).call(this)}}])&&i(t.prototype,n),c&&i(t,c),h}(n(152));window.customElements.define("webthing-alarm-property",l),e.exports=l},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(13),n(3),n(14),n(5);var u=n(74),l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,n,a,c=o(l);function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=document.createElement("template");return t.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-boolean-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-boolean-property-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-boolean-property-checkbox {\n      display: none;\n    }\n\n    .webthing-boolean-property-checkbox + label {\n      display: block;\n      width: 3rem;\n      height: 3rem;\n      background: url("/images/checkbox-sprite.png") no-repeat 0 0;\n      background-size: 3rem auto;\n    }\n\n    .webthing-boolean-property-checkbox:checked + label {\n      background-position: 0 -3rem;\n    }\n\n    .webthing-boolean-property-checkbox:disabled + label {\n      background-position: 0 -6rem;\n    }\n\n    .webthing-boolean-property-checkbox:checked:disabled + label {\n      background-position: 0 -9rem;\n    }\n\n    .webthing-boolean-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(u.count,'" class="webthing-boolean-property-container">\n    <div id="contents-').concat(u.count,'" class="webthing-boolean-property-contents">\n      <form id="form-').concat(u.count,'" class="webthing-boolean-property-form">\n         <input type="checkbox" id="checkbox-').concat(u.count,'"\n            class="webthing-boolean-property-checkbox"/>\n          <label class="webthing-boolean-property-label" for=\'checkbox-').concat(u.count,"'>\n        </label>\n      </form>\n    </div>\n  </div>\n  <div id=\"name-").concat(u.count,'" class="webthing-boolean-property-name"></div>\n'),(e=c.call(this,t))._input=e.shadowRoot.querySelector(".webthing-boolean-property-checkbox"),e._name=e.shadowRoot.querySelector(".webthing-boolean-property-name"),e._onClick=e.__onClick.bind(s(e)),e._onKeyUp=e.__onKeyUp.bind(s(e)),e}return t=l,(n=[{key:"connectedCallback",value:function(){this.name=this.dataset.name,this.readOnly=void 0!==this.dataset.readOnly&&"true"===this.dataset.readOnly,this._upgradeProperty("checked"),this._input.addEventListener("click",this._onClick),this._input.addEventListener("keyup",this._onKeyUp)}},{key:"disconnectedCallback",value:function(){this._input.removeEventListener("click",this._onClick),this._input.removeEventListener("keyup",this._onKeyUp)}},{key:"__onKeyUp",value:function(e){e.altKey||32===e.keyCode&&(e.preventDefault(),this._toggleChecked())}},{key:"__onClick",value:function(){this._toggleChecked()}},{key:"_toggleChecked",value:function(){this.readOnly||(this.checked=!this.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked},bubbles:!0})))}},{key:"checked",get:function(){return this._input.hasAttribute("checked")},set:function(e){var t=Boolean(e);t?this._input.setAttribute("checked",""):this._input.removeAttribute("checked"),this._input.checked=t}},{key:"readOnly",get:function(){return this._input.hasAttribute("disabled")},set:function(e){var t=Boolean(e);t?this._input.setAttribute("disabled",""):this._input.removeAttribute("disabled"),this._input.disabled=t}},{key:"value",get:function(){return this.checked},set:function(e){this.checked=e}},{key:"name",get:function(){return this._name.innerText},set:function(e){this._name.innerText=e}}])&&r(t.prototype,n),a&&r(t,a),l}(u);window.customElements.define("webthing-boolean-property",l),e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(n(229));window.customElements.define("webthing-brightness-property",c),e.exports=c},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(13),n(3),n(14),n(5);var u=n(74),l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,n,a,c=o(l);function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=document.createElement("template");return t.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-color-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-color-property-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-color-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(u.count,'" class="webthing-color-property-container">\n    <div id="contents-').concat(u.count,'" class="webthing-color-property-contents">\n      <input type="color" id="color-').concat(u.count,'" class="webthing-color-property-color">\n    </div>\n  </div>\n  <div id="name-').concat(u.count,'" class="webthing-color-property-name"></div>\n'),(e=c.call(this,t))._input=e.shadowRoot.querySelector(".webthing-color-property-color"),e._name=e.shadowRoot.querySelector(".webthing-color-property-name"),e._onChange=e.__onChange.bind(s(e)),e}return t=l,(n=[{key:"connectedCallback",value:function(){this.name=this.dataset.name,this.readOnly=void 0!==this.dataset.readOnly&&"true"===this.dataset.readOnly,this._upgradeProperty("value"),this._input.addEventListener("change",this._onChange)}},{key:"disconnectedCallback",value:function(){this._input.removeEventListener("change",this._onChange)}},{key:"__onChange",value:function(e){e.preventDefault(),this.value=e.target.value,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}},{key:"value",get:function(){return this._input.value},set:function(e){this._input.value=e}},{key:"readOnly",get:function(){return this._input.hasAttribute("disabled")},set:function(e){var t=Boolean(e);t?this._input.setAttribute("disabled",""):this._input.removeAttribute("disabled"),this._input.disabled=t}},{key:"name",get:function(){return this._name.innerText},set:function(e){this._name.innerText=e}}])&&r(t.prototype,n),a&&r(t,a),l}(u);window.customElements.define("webthing-color-property",l),e.exports=l},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(n,e);var t=i(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this))._upperCaseOptions=!0,e}return n}(n(196));window.customElements.define("webthing-color-mode-property",s),e.exports=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(60),n(13),n(3),n(14),n(61),n(5);var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(h,e);var t,n,c,l=s(h);function h(){return r(this,h),l.apply(this,arguments)}return t=h,(n=[{key:"connectedCallback",value:function(){this.unit="K",o(u(h.prototype),"connectedCallback",this).call(this)}}])&&i(t.prototype,n),c&&i(t,c),h}(n(230));window.customElements.define("webthing-color-temperature-property",l),e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(n(156));window.customElements.define("webthing-current-property",c),e.exports=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(n(156));window.customElements.define("webthing-frequency-property",c),e.exports=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(60),n(13),n(3),n(14),n(61),n(5);var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(h,e);var t,n,c,l=s(h);function h(){return r(this,h),l.apply(this,arguments)}return t=h,(n=[{key:"connectedCallback",value:function(){this.uppercase=!0,o(u(h.prototype),"connectedCallback",this).call(this)}}])&&i(t.prototype,n),c&&i(t,c),h}(n(152));window.customElements.define("webthing-heating-cooling-property",l),e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(n(156));window.customElements.define("webthing-humidity-property",c),e.exports=c},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(13),n(3),n(14),n(5);var c=n(74),u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,n,a,s=o(u);function u(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var t=document.createElement("template");return t.innerHTML="\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-image-property-container {\n      box-sizing: border-box;\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-size: 3.2rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url('/images/component-icons/image.svg');\n      background-position: center;\n      position: relative;\n      cursor: pointer;\n    }\n\n    .webthing-image-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id=\"container-".concat(c.count,'" class="webthing-image-property-container"></div>\n  <div id="name-').concat(c.count,'" class="webthing-image-property-name"></div>\n'),(e=s.call(this,t))._name=e.shadowRoot.querySelector(".webthing-image-property-name"),e}return t=u,(n=[{key:"connectedCallback",value:function(){this.name||(this.name=this.dataset.name)}},{key:"name",get:function(){return this._name.innerText},set:function(e){this._name.innerText=e}}])&&r(t.prototype,n),a&&r(t,a),u}(c);window.customElements.define("webthing-image-property",u),e.exports=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(n(156));window.customElements.define("webthing-instantaneous-power-property",c),e.exports=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(60),n(13),n(3),n(14),n(61),n(5);var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(h,e);var t,n,c,l=s(h);function h(){return r(this,h),l.apply(this,arguments)}return t=h,(n=[{key:"connectedCallback",value:function(){this.uppercase=!0,o(u(h.prototype),"connectedCallback",this).call(this)}}])&&i(t.prototype,n),c&&i(t,c),h}(n(152));window.customElements.define("webthing-leak-property",l),e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(60),n(13),n(3),n(14),n(61),n(5);var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(h,e);var t,n,c,l=s(h);function h(){return r(this,h),l.apply(this,arguments)}return t=h,(n=[{key:"connectedCallback",value:function(){this.uppercase=!0,o(u(h.prototype),"connectedCallback",this).call(this)}}])&&i(t.prototype,n),c&&i(t,c),h}(n(152));window.customElements.define("webthing-locked-property",l),e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(60),n(13),n(3),n(14),n(61),n(5);var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(h,e);var t,n,c,l=s(h);function h(){return r(this,h),l.apply(this,arguments)}return t=h,(n=[{key:"connectedCallback",value:function(){this.uppercase=!0,o(u(h.prototype),"connectedCallback",this).call(this)}}])&&i(t.prototype,n),c&&i(t,c),h}(n(152));window.customElements.define("webthing-motion-property",l),e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(60),n(13),n(3),n(14),n(61),n(5);var l=n(232),h=n(19),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(f,e);var t,n,c,l=s(f);function f(){return r(this,f),l.apply(this,arguments)}return t=f,(n=[{key:"connectedCallback",value:function(){this.onLabel=h.getMessage("on"),this.offLabel=h.getMessage("off"),o(u(f.prototype),"connectedCallback",this).call(this)}}])&&i(t.prototype,n),c&&i(t,c),f}(l);window.customElements.define("webthing-on-off-property",f),e.exports=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(60),n(13),n(3),n(14),n(61),n(5);var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(h,e);var t,n,c,l=s(h);function h(){return r(this,h),l.apply(this,arguments)}return t=h,(n=[{key:"connectedCallback",value:function(){this.uppercase=!0,o(u(h.prototype),"connectedCallback",this).call(this)}}])&&i(t.prototype,n),c&&i(t,c),h}(n(152));window.customElements.define("webthing-open-property",l),e.exports=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(60),n(13),n(3),n(14),n(61),n(5);var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(h,e);var t,n,c,l=s(h);function h(){return r(this,h),l.apply(this,arguments)}return t=h,(n=[{key:"connectedCallback",value:function(){this.uppercase=!0,o(u(h.prototype),"connectedCallback",this).call(this)}}])&&i(t.prototype,n),c&&i(t,c),h}(n(152));window.customElements.define("webthing-pushed-property",l),e.exports=l},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(13),n(3),n(14),n(5);var u=n(74),l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,n,a,c=o(l);function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var t=document.createElement("template");return t.innerHTML='\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-string-property-container {\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-color: #89b6d6;\n      position: relative;\n    }\n\n    .webthing-string-property-contents {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n\n    .webthing-string-property-input {\n      height: 1.75rem;\n      width: 6rem;\n      text-align: center;\n      background-color: #d2d9de;\n      color: #333;\n      border: none;\n      border-radius: 0.5rem;\n      padding: 0.5rem;\n      margin: 0.5rem 0;\n      font-size: 1.6rem;\n    }\n\n    .webthing-string-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id="container-'.concat(u.count,'" class="webthing-string-property-container">\n    <div id="contents-').concat(u.count,'" class="webthing-string-property-contents">\n      <form id="form-').concat(u.count,'" class="webthing-string-property-form">\n        <input type="text" id="input-').concat(u.count,'" class="webthing-string-property-input">\n      </form>\n    </div>\n  </div>\n  <div id="name-').concat(u.count,'" class="webthing-string-property-name"></div>\n'),(e=c.call(this,t))._form=e.shadowRoot.querySelector(".webthing-string-property-form"),e._input=e.shadowRoot.querySelector(".webthing-string-property-input"),e._name=e.shadowRoot.querySelector(".webthing-string-property-name"),e._onSubmit=e.__onSubmit.bind(s(e)),e._onBlur=e.__onBlur.bind(s(e)),e}return t=l,(n=[{key:"connectedCallback",value:function(){this.name=this.dataset.name,this.readOnly=void 0!==this.dataset.readOnly&&"true"===this.dataset.readOnly,this._upgradeProperty("value"),this._form.addEventListener("submit",this._onSubmit),this._input.addEventListener("blur",this._onBlur)}},{key:"disconnectedCallback",value:function(){this._form.removeEventListener("submit",this._onSubmit),this._input.removeEventListener("blur",this._onBlur)}},{key:"__onSubmit",value:function(e){return e.preventDefault(),this._input.blur(),!1}},{key:"__onBlur",value:function(e){e.preventDefault(),this.value=e.target.value,this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0}))}},{key:"value",get:function(){return this._input.value},set:function(e){this._input.value=e}},{key:"readOnly",get:function(){return this._input.hasAttribute("disabled")},set:function(e){var t=Boolean(e);t?this._input.setAttribute("disabled",""):this._input.removeAttribute("disabled"),this._input.disabled=t}},{key:"name",get:function(){return this._name.innerText},set:function(e){this._name.innerText=e}}])&&r(t.prototype,n),a&&r(t,a),l}(u);window.customElements.define("webthing-string-property",l),e.exports=l},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(n,e);var t=i(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this))._oneLine=!0,e}return n}(n(231));window.customElements.define("webthing-target-temperature-property",s),e.exports=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(n(156));window.customElements.define("webthing-temperature-property",c),e.exports=c},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=a(e);if(t){var i=a(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(n,e);var t=i(n);function n(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(e=t.call(this))._upperCaseOptions=!0,e}return n}(n(196));window.customElements.define("webthing-thermostat-mode-property",s),e.exports=s},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(9),n(13),n(3),n(14),n(5);var c=n(74),u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,n,a,s=o(u);function u(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var t=document.createElement("template");return t.innerHTML="\n  <style>\n    :host {\n      display: inline-block;\n      contain: content;\n      text-align: center;\n      color: white;\n      font-size: 1.6rem;\n    }\n\n    .webthing-video-property-container {\n      box-sizing: border-box;\n      width: 10rem;\n      height: 10rem;\n      border-radius: 5rem;\n      border: 0.2rem solid white;\n      background-size: 3.2rem;\n      background-repeat: no-repeat;\n      transform: translate(0);\n      background-color: #89b6d6;\n      background-image: url('/images/component-icons/video.svg');\n      background-position: center;\n      position: relative;\n      cursor: pointer;\n    }\n\n    .webthing-video-property-name {\n      text-align: center;\n      max-width: 10rem;\n      overflow-wrap: break-word;\n      background-color: #5d9bc7;\n      display: inline-block;\n    }\n  </style>\n  <div id=\"container-".concat(c.count,'" class="webthing-video-property-container"></div>\n  <div id="name-').concat(c.count,'" class="webthing-video-property-name"></div>\n'),(e=s.call(this,t))._name=e.shadowRoot.querySelector(".webthing-video-property-name"),e}return t=u,(n=[{key:"connectedCallback",value:function(){this.name||(this.name=this.dataset.name)}},{key:"name",get:function(){return this._name.innerText},set:function(e){this._name.innerText=e}}])&&r(t.prototype,n),a&&r(t,a),u}(c);window.customElements.define("webthing-video-property",u),e.exports=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(13),n(3),n(14),n(5);var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(n,e);var t=o(n);function n(){return r(this,n),t.apply(this,arguments)}return n}(n(156));window.customElements.define("webthing-voltage-property",c),e.exports=c},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(3),n(46);var i=n(141),o=n(193),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.preferences={language:i.LANGUAGE,timezone:i.TIMEZONE,units:i.UNITS},this.view=i.registerExtension(this)}var t,n,a;return t=e,(n=[{key:"addMenuEntry",value:function(e){return o.addExtensionItem(this,e)}},{key:"load",value:function(){return Promise.resolve()}},{key:"show",value:function(e){console.log("Extension ".concat(this.id," is being shown."))}},{key:"hide",value:function(){console.log("Extension ".concat(this.id," is being hidden."))}},{key:"showMenuButton",value:function(){i.showMenuButton(),document.getElementById("extension-back-button").classList.add("hidden")}},{key:"showBackButton",value:function(e){i.hideMenuButton();var t=document.getElementById("extension-back-button");t.href=e,t.classList.remove("hidden")}}])&&r(t.prototype,n),a&&r(t,a),e}();window.Extension=a,e.exports=a}]);
//# sourceMappingURL=5da279d25d00ab87352d-app.js.map